<style>
div
{
	font-family: Geneva, Arial, Helvetica, sans-serif;
	color:#666666;
}
#pageHeadding
{
	font-size: 25px;
	font-weight: 300;
	color: #000000;
	text-align: center;
	margin: 0px 0px;
	padding: 0px 0px;
}
    .tableCss tr:nth-child(2n+0) {
        background: #d3d3d3 ;
        color: #000000;
    }
    
    .tableCss tr:nth-child(odd) {
        background:  #FFFFFF ;
        color: #0066CC;
    }
    
    .tableCss tr:nth-child(even) {
        background: #FFFFFF;
        color: #0066CC;
    }
    .tableCss {
        font-weight: normal;
        font-family: "Helvetica";
		border:thin;
		border-color:#000000;
		text-align:center
    }
    
    .icn {
        width: 50px;
		height: 50px;
    }
    
    .flg {
        font-size: 44px;
		color: rgb(102, 153, 255);
		position: relative;
		top: 16px;
    }
    
    /*.allcon {
        font-size: 35px;
        color: rgb(102, 153, 255);
        position: relative;
        top: 14px;
    }*/
    /*.btn-circle {
	  width: 30px;
	  height: 30px;
	  text-align: center;
	  padding: 6px 0;
	  font-size: 12px;
	  line-height: 1.428571429;
	  border-radius: 15px;
	}*/
	.btn.btn-circle {
		border-radius: 50%;
		background-clip: padding-box;
		width: 45px;
		height: 45px;
		padding: 11px 4px;
		color: #ffffff;
		font-weight: bold;
	}
    .hb-country,
    .hb-country:before,
    .hb-country:after {
        background: #3B5998;
        border-color: #3B5998;
        color: #ffffff;
    }
    
    .hb-country:hover,
    .hb-country:hover:before,
    .hb-country:hover:after {
        background: transparent;
        border-color: #3B5998;
        color: #3B5998;
    }
    
    .hb-refresh,
    .hb-refresh:before,
    .hb-refresh:after {
        background: #fff;
        border-color: #3B5998;
        color: #ffffff;
    }
    
    .hb-refresh:hover,
    .hb-refresh:hover:before,
    .hb-refresh:hover:after {
        background: transparent;
        border-color: #3B5998;
        color: #3B5998;
    }
    
    .dropdown {
        position: absolute;
        display: inline-block;
        z-index: 20;
        top: 1905%;
        right: 20%;
    }
    
    .dropbtn {
        background-color: #015AAC;
        color: white;
        border: none;
        border-radius: 20px;
        cursor: pointer;
    }
    
    .dropdown-content {
        display: none;
        position: absolute;
        /*background-color: #f9f9f9;*/
        background-color: #ffffff;
        box-shadow: 0px 8px 16px 0px rgba(0, 0, 0, 0.2);
    }
    
    .dropdown-content a {
        color: black;
        padding: 10px;
        text-decoration: none;
        display: block;
        width: 70px;
    }
    
    .dropdown-content a:hover {
        background-color: #f9f9f9;
    }
    
    .dropdown:hover .dropdown-content {
        display: block;
    }
    
    .dropdown:hover .dropbtn {
        background-color: #015AAC;
    }
    
    .dropBackColor {
        background-color: #f1f1f1;
    }
	.switchButton
	{
		border:none;
		padding:3px 18px 3px 18px;	
		background-color:#015AAC;
		color:#FFFFFF;
		
	}
	.last-child {background:red;}
</style>

<script>
	var d = new Date();
    var year = d.getFullYear();
	var product = "area";
	var status = "all";
	var countryCode = sessionStorage.getItem('countryCode');
	var yAxisName = "USD";
	var cType = "dollar";
	var drillSts = "0";
	var url = "monthleyytdtoareaSCA.do?link="+product+"&currentyear="+year;
	var drillAjaxLink = "monthleyytdtoareaSCAfirstlevel.do";
	sessionStorage.setItem("drillAjaxLink",drillAjaxLink);
	sessionStorage.setItem("status","all");
	sessionStorage.setItem("cType",cType);
	sessionStorage.setItem("year",year);
	$('#SCA').addClass("dropBackColor");
	$('#SCA_country').addClass("dropBackColor");
	var array = [{
        "TH": "THB (\u0E3F)",
        "IN": "INR (\u20B9)",
        "MY": "MYR (\u0024)",
        "ID": "IDR (\u0052\u0070)",
        "SG": "SGD (\u0024)",
        "PH": "PHP (\u20b1)",
        "AU": "AUD (\u0024)",
        "VN": "VND (\u20ab)",
		"EMA": "USD (\u0024)"
    }];
    var countryNameArray = [{
        "TH": "Thailand",
        "IN": "India",
        "MY": "Malaysia",
        "ID": "Indonesia",
        "SG": "Singapore",
        "PH": "Philippines",
        "AU": "Australia",
        "VN": "Vietnam",
		"EMA": "EMarket"
    }];
	
	loadYTDMonthlyCurrent(product,year,status,url,yAxisName,cType);
	
	$(document).ready(function() {

        $('.renderchart').click(function() {
 			
            var status = $(this).attr('id');
           
            sessionStorage.setItem("selectedCountry", $(this).attr('id'));
            //alert(sessionStorage.getItem("selectedCountry"));	
            if (status == "all") {
			
                var getId = status.toUpperCase();
                url = "monthleyytdtoareaSCA.do?link="+product+"&currentyear="+year;
				sessionStorage.setItem("cType",cType);
                yAxisName = "USD";
				
            } else {
					
                var getId = status.toLowerCase();
				$('#scaSpan_country').text(array[0][status]);
                yAxisName = "USD";
				sessionStorage.setItem("cType",cType);
				drillSts = "1";
				var selectedCountry = countryNameArray[0][status].toUpperCase();
				//alert(selectedCountry);
                //url = "monthleyytdtoareacountrylevel.do?link="+product+"&currentyear="+year+"&datasetName="+selectedCountry+"&id=dollar";
				url = "monthleyytdtoareaSCAfirstlevel.do?link="+product+"&currentyear="+year+"&datasetName="+selectedCountry+"&id=dollar";
				$('#SCA_country').addClass("dropBackColor");
				$('#USD_country').removeClass("dropBackColor");
            }

            loadYTDMonthlyCurrent(product,year,status,url,yAxisName,cType);
        });

    });
	
	//===============Currency Change=======================//
	$(document).ready(function()
	{
		
		$("#SCA").click(function()
		{
			//alert("dollar");
			//alert(drillSts);
			if(drillSts == "0")
			{
				
				url = "monthleyytdtoareaSCA.do?link="+product+"&currentyear="+year;
				yAxisName = "USD";
				loadYTDMonthlyCurrent(product,year,status,url,yAxisName,cType);
				
				
			}
			else if(drillSts == "1")
			{
				//alert(status);
				
				var categoryLabel = sessionStorage.getItem("drillCategory");
				var datasetName = sessionStorage.getItem("drillName");
				
				//var countryCode = sessionStorage.getItem("countryCode");
				var currentyear = sessionStorage.getItem("year");
					//alert(categoryLabel);
					//alert(datasetName);
					
				drillDownForSalesman(categoryLabel,datasetName,currentyear,cType,status);
			}
			else
			{
				var countryCode = sessionStorage.getItem("countryCodeCon");
				var categoryLabel = sessionStorage.getItem("drillCategoryMonth");
				var datasetName = sessionStorage.getItem("drillSalesmanCode");
				var currentyear = sessionStorage.getItem("year");
				/*alert(countryCode);
				alert(categoryLabel);
				alert(datasetName);
				alert(currentyear);
				alert(cType);
				alert(status);*/
				drillDownForSalesmanByMonthly(categoryLabel,datasetName,currentyear,countryCode,cType,status);
			}
			$('#SCA').addClass("dropBackColor");
			$('#USD').removeClass("dropBackColor");
		});
		
		$("#USD").click(function()
		{
			//alert("local"); 
			$('#SCA').removeClass("dropBackColor");
			$('#USD').addClass("dropBackColor");
		});
		
		$("#SCA_country").click(function()
		{
			//alert("dollar");
			//alert(drillSts);
			sessionStorage.setItem("cType","dollar");
			var counsts = sessionStorage.getItem("selectedCountry");
			//alert(counsts);
			var selectedCountry = countryNameArray[0][counsts].toUpperCase();
			//alert(selectedCountry);
			if(drillSts == "1")
			{
				/*if(cType == "dollar")
				{
					url = "ytdCodeAreaCountryWise.do?countryCode=" + selectconsts + "&id=dollar";
				    yAxisName = "USD";
				
				}
				else
				{
					url = "ytdCodeAreaCountryWise.do?countryCode=" + selectconsts + "&id=dollar";
				    yAxisName = array[0][selectconsts];
				}*/
				yAxisName = "USD";
				var currentyear = sessionStorage.getItem("year");
				url = "monthleyytdtoareacountrylevel.do?link="+product+"&currentyear="+currentyear+"&datasetName="+selectedCountry+"&id=dollar";
				loadYTDMonthlyCurrent(product,currentyear,counsts,url,yAxisName,cType);
			}
			else
			{
				//var regionCode = sessionStorage.getItem('countryCodeCon');
				//sessionStorage.setItem("drillCategory",dataObj.categoryLabel);
				//sessionStorage.setItem("drillName",dataObj.datasetName);
				
				var categoryLabel = sessionStorage.getItem("drillCategory");
				var datasetName = sessionStorage.getItem("drillName");
				var currentyear = sessionStorage.getItem("year");
				var countryCode = sessionStorage.getItem("countryCodeCon");
				
				/*alert(categoryLabel);
				alert(datasetName);
				alert(currentyear);
				alert(cType);
				alert(counsts);
				alert(countryCode);*/
				yAxisName = array[0][counsts];
				drillDownForSalesmanByMonthly(categoryLabel,datasetName,currentyear,countryCode,cType,counsts);
			}
			
			
			$('#SCA_country').addClass("dropBackColor");
			$('#USD_country').removeClass("dropBackColor");
		});
		
		$("#USD_country").click(function()
		{
			//alert("dollar");
			//alert(drillSts);
			sessionStorage.setItem("cType","local");
			var counsts = sessionStorage.getItem("selectedCountry");
			//alert(counsts);
			var selectedCountry = countryNameArray[0][counsts].toUpperCase();
			//alert(selectedCountry);
			if(drillSts == "1")
			{
				/*if(cType == "dollar")
				{
					url = "ytdCodeAreaCountryWise.do?countryCode=" + selectconsts + "&id=dollar";
				    yAxisName = "USD";
				
				}
				else
				{
					url = "ytdCodeAreaCountryWise.do?countryCode=" + selectconsts + "&id=dollar";
				    yAxisName = array[0][selectconsts];
				}*/
				yAxisName = "USD";
				var currentyear = sessionStorage.getItem("year");
				url = "monthleyytdtoareacountrylevel.do?link="+product+"&currentyear="+currentyear+"&datasetName="+selectedCountry+"&id=local";
				loadYTDMonthlyCurrent(product,currentyear,counsts,url,yAxisName,'local');
			}
			else
			{
				var categoryLabel = sessionStorage.getItem("drillCategory");
				var datasetName = sessionStorage.getItem("drillName");
				var currentyear = sessionStorage.getItem("year");
				var countryCode = sessionStorage.getItem("countryCodeCon");
				
				/*alert(categoryLabel);
				alert(datasetName);
				alert(currentyear);
				alert(cType);
				alert(counsts);
				alert(countryCode);*/
				yAxisName = array[0][counsts];
				drillDownForSalesmanByMonthly(categoryLabel,datasetName,currentyear,countryCode,'local',counsts);
			}
			
			$('#SCA_country').removeClass("dropBackColor");
			$('#USD_country').addClass("dropBackColor");
		});
		
	});
	
	//================Monthly Current Chart====================//
	 function loadYTDMonthlyCurrent(product,year,status,url,yAxisName,cType) {
		 
		//alert(status);
		
		 if(status == "all")
		 {
			 //alert("if");
			 $("#curDropdown").show();
			 $('#curDropdown_country').hide();
			 var captionTitle = " SCA Group "+ " " + year + " YTD Monthly Booking ";
			 yAxisName = "USD";
			 url = "monthleyytdtoareaSCA.do?link="+product+"&currentyear="+year;
			 
		 }
		 else  if(sessionStorage.getItem("cType") == "dollar")
		 {
			 var selectedCountry = countryNameArray[0][status].toUpperCase();
			 $("#curDropdown").hide();
			 $('#curDropdown_country').show();
			 var captionTitle = countryNameArray[0][status] + " " + year + " YTD Monthly Booking ";
			 yAxisName = "USD";
			// alert("else if");
			sessionStorage.setItem("countryName",selectedCountry);
			 //url = "monthleyytdtoareacountrylevel.do?link="+product+"&currentyear="+year+"&datasetName="+selectedCountry+"&id="+cType;
			 url = sessionStorage.getItem("drillAjaxLink")+"?currentyear="+year+"&datasetName="+selectedCountry+"&id=dollar";
		 }
		 else
		 {
			 $("#curDropdown").hide();
			 $('#curDropdown_country').show();
			 var selectedCountry = countryNameArray[0][status].toUpperCase();

			 var captionTitle = countryNameArray[0][status] + " " + year + " YTD Monthly Booking ";
			 yAxisName = array[0][status];
			 sessionStorage.setItem("countryName",selectedCountry);
			 //url = "monthleyytdtoareacountrylevel.do?link="+product+"&currentyear="+year+"&datasetName="+selectedCountry+"&id=local"; 
			url = sessionStorage.getItem("drillAjaxLink")+"?currentyear="+year+"&datasetName="+selectedCountry+"&id=local";
			 //alert("else");
		 }
		 $("#goback").hide();
		 $("#gobackCon").hide(); 
		 $.getJSON(url, function(json) {
			 var chartData = {
                    "chart": {
                        "caption": captionTitle,
                        "xAxisname": "Years",
                        "yaxisname": yAxisName,
                        "xAxisNameFont": "Helvetica",
                        "xAxisNameFontSize": "18",
                        "xAxisNameFontBold": "1",
                        "yAxisNameFontBold": "1",
                        "yAxisNameFontSize": "16",
                        "yAxisNameFont": "Helvetica",
                        "decimals": '2',
						"xAxisNamePadding":"20",
                        "xAxisNameFont": "Helvetica",
                        "xAxisNameFontSize": "14",
                        "xAxisNameFontBold": "1",
                        "yAxisNameFontBold": "1",
                        "yAxisNameFontSize": "14",
                        "yAxisNameFont": "Helvetica",
                        "yFormatNumberScale": "1",
                        "numberScaleValue": "1000,1000,1000",
                        "numberScaleUnit": "K,M,B",
                        "reverseLegend": "1",
                        "numberPrefix": "",
                        "numbersuffix": "",
                        "exportenabled": "1",
                        "exportatclient": "0",
                        "exporthandler": "http://export.api3.fusioncharts.com",
                        "html5exporthandler": "http://export.api3.fusioncharts.com",
                        "paletteColors": "#0075c2,#1aaf5d",
                        "bgColor": "#808080",
                        "baseFont": "Helvetica",
                        "baseFontSize": "15",
                        "captionFontSize": "18",
                        "showsum": "1",
                        "showvalues": "0",
						"showexportdatamenuitem":"1",
                        "valueFontColor": "#000000",
                        "baseFontColor": "#000000",
                        "borderAlpha": "20",
                        "useroundedges": "1",
                        "showCanvasBorder": "0",
                        "usePlotGradientColor": "0",
                        "plotBorderAlpha": "10",
                        "placeValuesInside": "0",
                        "legendBgColor": "#ffffff",
                        "legendBorderColor": "#000000",
                        "legendBorder": "1",
                        "legendBorderAlpha": "1",
                        "legendShadow": "1",
                        "legendPosition": "bottom",
                        "xAxisLineColor": "#999999",
                        "divlineColor": "#999999",
                        "rotatelabels": "0",
                        "rotatevalues": "0",
                        "subcaptionFontBold": "0",
                        "subcaptionFontSize": "14",
                        "showLegend": '1',
                        "formatnumberscale": "1",
						"canvasBgColor": "#B0E2FF	",
						"showCanvasBorder": "1",
						"canvasBorderColor": "#666666",
						"canvasBorderThickness": "4",
						"canvasBorderAlpha": "80",
						"legendBgColor":"#808080"
                    },
                    "categories":json['xaxis'],
					"dataset":json['budgetandbookingdata']
                };
				
				FusionCharts.ready(function() {
						var revenueChart = new FusionCharts({
						type: 'msstackedcolumn2d',
						renderAt: 'container',
						width: '100%',
						height: '500',
						dataFormat: 'json',
						dataSource: chartData,
						events: {
									  dataPlotClick: function (event,dataObj) 
									  {	
										sessionStorage.setItem("firstDataObject",JSON.stringify(json['data']));
										sessionStorage.setItem("firstCategoryObject",JSON.stringify(json['xaxis']));
										
										var datasetName = dataObj.datasetName;
										var splitdatasetName = datasetName.split(" ");
										//alert(JSON.stringify(splitdatasetName[0]));
										//alert(countryNameArray[0][status]);
										//alert(sessionStorage.getItem("countryName"));
										sessionStorage.setItem("drillStatus",'true');
										var cType = sessionStorage.getItem("cType");
										var currentyear = sessionStorage.getItem("year");
										sessionStorage.setItem("drillCategory",dataObj.categoryLabel);
										sessionStorage.setItem("drillName",dataObj.datasetName);
										//var currencyType = sessionStorage.getItem("currencyType");
										
										/*if(dataObj.categoryLabel== currentyear + "\n(Budget YTD)" || dataObj.categoryLabel == "BUDGET OF"+" "+ currentyear){
										//alert("enterd");
										}else{
											//alert("drill down");
										//dataObj.datasetName,
										//sessionStorage.getItem('countryCode');
										//var currencyType = sessionStorage.getItem("currencyType");
										//drillDownForRegion(dataObj.categoryLabel,dataObj.datasetName,status,cType);
										}*/
										//alert(currentyear);
										if(splitdatasetName[0] === "Budget")
										{
											//alert("enterd");
										}
										else
										{
											drillSts = "1";
											drillDownForSalesman(dataObj.categoryLabel,dataObj.datasetName,currentyear,cType,status);
										}
										
									  }
								  }
	
					});
				
					 revenueChart.addEventListener('renderComplete', function() {
						// In the renderComplete event create the table, even when the data is updated by calling setChartData method, this event will be fired and the updated data will reflect in the table too, since renderTable will be called again.
						// Creating the table on 'render' event will not update the table everytime, it will only update when render() method is called.
						renderTable(revenueChart, 'table-container','table-container1',json['TotalYearBudget'],json['TotalYearBooking'],json['firstrow'],json['secondrow'],json['thirdrow']);
							
					});
                	revenueChart.render();
				});
			 
		 });
		 
	 };
	 
	 function drillDownForSalesman(categoryLabel,datasetName,currentyear,cType,status)
	 {
		// alert(categoryLabel+ " " +datasetName);
		// alert(currentyear);
		
		 var country = datasetName.split(" ");
		 var countryCode = country[2];
		 var countryCodeCon= sessionStorage.setItem("countryCodeCon",countryCode);
		 //alert(countryCode);
		 if(status=="all")
			{
			//alert("enterd");
				 
				var DrillAjaxLink = sessionStorage.getItem("drillAjaxLink")+"?currentyear="+currentyear+"&catageory="+categoryLabel+"&datasetName="+countryCode+"&id=dollar";
				//var DrillAjaxLink = "monthleyytdtoareaSCA.do?link="+product+"&currentyear="+currentyear;
			    currencyType = "USD";
				var titleName = country[2] + " " + currentyear + " Monthly Booking YTD";
				 
				 
				 
				 $.getJSON(DrillAjaxLink,function(json)
					{
						//alert(JSON.stringify(json['data']));
//						var alertMessage=json['data'][0].label;
//						if(alertMessage == 'NA')
//						{
//							  swal('Regions are not Updated');
//						}
//						else
//						{
//						
//						}
//						
						var chart2 = {
								 "chart": {
								"caption": titleName,
								"xAxisname": "Salesman",
								"yaxisname": currencyType,
								"xAxisNameFont": "Helvetica",
								"xAxisNameFontSize": "18",
								"xAxisNameFontBold": "1",
								"yAxisNameFontBold": "1",
								"yAxisNameFontSize": "16",
								"yAxisNameFont": "Helvetica",
								"decimals": '2',
								"xAxisNamePadding":"20",
								"xAxisNameFont": "Helvetica",
								"xAxisNameFontSize": "14",
								"xAxisNameFontBold": "1",
								"yAxisNameFontBold": "1",
								"yAxisNameFontSize": "14",
								"yAxisNameFont": "Helvetica",
								"yFormatNumberScale": "1",
								"numberScaleValue": "1000,1000,1000",
								"numberScaleUnit": "K,M,B",
								"reverseLegend": "1",
								"numberPrefix": "",
								"numbersuffix": "",
								"exportenabled": "1",
								"exportatclient": "0",
								"exporthandler": "http://export.api3.fusioncharts.com",
								"html5exporthandler": "http://export.api3.fusioncharts.com",
							   // "paletteColors": "#0075c2,#1aaf5d",
								"bgColor": "#808080",
								"baseFont": "Helvetica",
								"baseFontSize": "15",
								"captionFontSize": "18",
								"showsum": "0",
								"showvalues": "1",
								"valueFontColor": "#000000",
								"baseFontColor": "#000000",
								"borderAlpha": "20",
								"useroundedges": "1",
								"showCanvasBorder": "0",
								"usePlotGradientColor": "0",
								"plotBorderAlpha": "10",
								"placeValuesInside": "0",
								"legendBgColor": "#ffffff",
								"legendBorderColor": "#000000",
								"legendBorder": "1",
								"legendBorderAlpha": "1",
								"legendShadow": "1",
								"legendPosition": "bottom",
								"xAxisLineColor": "#999999",
								"divlineColor": "#999999",
								"rotatelabels": "0",
								"rotatevalues": "0",
								"subcaptionFontBold": "0",
								"subcaptionFontSize": "14",
								"showLegend": '1',
								"formatnumberscale": "1",
								"canvasBgColor": "#B0E2FF",
								"showCanvasBorder": "1",
								"canvasBorderColor": "#666666",
								"canvasBorderThickness": "4",
								"canvasBorderAlpha": "80",
								"legendBgColor":"#808080"
							},
								"categories":json['xaxis'],
								"dataset":json['budgetandbookingdata']
							};
							
							 FusionCharts.ready(function () {
									var revenueChart = new FusionCharts({
				
									type: 'msstackedcolumn2d',
									renderAt: 'container',
									width: '100%',
									height: '500',
										dataFormat: 'json',
										dataSource: chart2,
										events: {
															  dataPlotClick: function (event,dataObj) 
															  {	
																//alert("region"+JSON.stringify(dataObj));
																//sessionStorage.setItem("firstDataObject",JSON.stringify(json['dataset']));
																//sessionStorage.setItem("firstCategoryObject",JSON.stringify(json['category']));
																//alert(JSON.stringify(dataObj.datasetName));
																//alert(JSON.stringify(json['category']));
																var budgetName = dataObj.datasetName;
																var splitbudgetName = budgetName.split(" ");
																
																var cType = sessionStorage.getItem("cType");
																var currentyear = sessionStorage.getItem("year");
																var countryCode = sessionStorage.getItem("countryCodeCon");
																sessionStorage.setItem("drillCategoryMonth",dataObj.categoryLabel);
																sessionStorage.setItem("drillSalesmanCode",dataObj.datasetName);
																if(splitbudgetName[0] === "Budget")
																{
																	
																}
																else
																{
																	drillSts = "2";
																	drillDownForSalesmanByMonthly(dataObj.categoryLabel,dataObj.datasetName,currentyear,countryCode,cType,status);
																}
																
															  }
														  }
									});
					//var qTableHeader = "<tr><th>Years</th><th>Q1</th><th>Q2</th><th>Q3</th><th>Q4</th></tr>";
					//var qTableData1 = "<tr style='color:#0066CC'><th>2014</th><td></td><td></td><td></td><td></td></tr><tr style='color:#0066CC'><th>2015</th><td></td><td></td><td></td><td></td></tr><tr style='color:#0066CC'><th>2016</th><td></td><td></td><td></td><td></td></tr>";
									 revenueChart.addEventListener('renderComplete', function() {
											// In the renderComplete event create the table, even when the data is updated by calling setChartData method, this event will be fired and the updated data will reflect in the table too, since renderTable will be called again.
											// Creating the table on 'render' event will not update the table everytime, it will only update when render() method is called.
											renderTable(revenueChart, 'table-container','table-container1',json['TotalYearBudget'],json['TotalYearBooking'],json['firstrow'],json['secondrow'],json['thirdrow']);
											//document.getElementById("table-container1").innerHTML = "<table width ='100%;' border='1' style='border-collapse:collapse;' class='tableCss'><thead><div style='background-color:#4286f4;text-align:center;color:#FFFFFF;font-weight:bold;'>Average booking</div></thead>"+ qTableHeader +qTableData1+"</table>";
											
												
										});
											revenueChart.render();
							 });
							 
							$("#curDropdown").show();
							$('#curDropdown_country').hide();
							$("#goback").show();
							$("#gobackCon").hide(); 
					 
					});
				
			}
			else 
			{
				//alert("else");
				//sessionStorage.setItem("drillCategory",dataObj.categoryLabel);
				//sessionStorage.setItem("drillName",dataObj.datasetName);
				if(sessionStorage.getItem("cType") == "dollar")
				{
					//var DrillAjaxLink = "ytdCodeAreaCountryWiseDrilldownLevelOne.do?year="+y+"&countryCode="+c+"&id="+cType;
					//currencyType = array[0][status];
					//var titleName = y + " " + countrycode + " " + "Regions";
					
					var currentyear = sessionStorage.getItem("year");
					drillDownForSalesmanByMonthly(categoryLabel,datasetName,currentyear,countryCode,cType,status)
				}
				else
				{
					//var DrillAjaxLink = "ytdCodeAreaCountryWiseDrilldownLevelOne.do?year="+y+"&countryCode="+c+"&id="+cType;
					//currencyType = array[0][status];
					//var titleName = y + " " + countrycode + " " + "Regions";
					
					var currentyear = sessionStorage.getItem("year");
					drillDownForSalesmanByMonthly(categoryLabel,datasetName,currentyear,countryCode,cType,status)
				}
				
			}
			
			
	 };
	 
	  function drillDownForSalesmanByMonthly(categoryLabel,datasetName,currentyear,countryCode,cType,status)
	 {
		 /*alert(categoryLabel);
		 alert(datasetName);
		 alert(currentyear);
		 alert(cType);
		 alert(status);
		 alert(countryCode);*/
		 var salesman = datasetName.split("-");
			//alert(salesman[0].split(" "));
		 var salesmanCode = salesman[0].split(" ");
			
		 var salesCode = salesmanCode[2];
			//alert(salesCode);
		if(status == "all")
		 {
			 
			 var DrillAjaxLinkSalesman = "monthleyytdtoareaSCAsecondlevel.do?currentyear="+currentyear+"&catageory="+categoryLabel+"&datasetName="+salesCode+"&countryCode="+countryCode+"&id=dollar";
				//var DrillAjaxLink = "monthleyytdtoareaSCA.do?link="+product+"&currentyear="+currentyear;
			     yAxisName = "USD";
				var captionTitle = countryCode + " - Salesman" + " " + + currentyear + " Monthly Booking YTD";
				var subCaption = "Salesman :" + " " + salesCode + " - " + salesman[1];
				 $("#curDropdown").show();
				 $('#curDropdown_country').hide();
				 $("#goback").show();
				 $("#gobackCon").hide(); 
			 //alert("if");
		 }
		 else  if(sessionStorage.getItem("cType") == "dollar")
		 {
			 //alert(cType);
			 $("#curDropdown").hide();
			 $('#curDropdown_country').show();
			 $("#goback").hide();
		 	 $("#gobackCon").show(); 
			  drillSts = "2";
			  var DrillAjaxLinkSalesman = "monthleyytdtoareaSCAsecondlevel.do?currentyear="+currentyear+"&catageory="+categoryLabel+"&datasetName="+salesCode+"&countryCode="+countryNameArray[0][status]+"&id="+cType;
			 //var DrillAjaxLinkSalesman = "monthleyytdtoareacountrysecondlevel.do?currentyear="+currentyear+"&catageory="+categoryLabel+"&datasetName="+salesCode+"&countryCode="+countryNameArray[0][status]+"&id="+cType;
				yAxisName = "USD";
				var captionTitle = countryNameArray[0][status] + " - Salesman" + " " + + currentyear + " Monthly Booking YTD";
				var subCaption = "Salesman :" + " " + salesCode + " - " + salesman[1];
		 }
		 else
		 {
			  $("#curDropdown").hide();
			  $('#curDropdown_country').show();
			  $("#goback").hide();
		 	  $("#gobackCon").show(); 
			  drillSts = "2";
			  var DrillAjaxLinkSalesman = "monthleyytdtoareaSCAsecondlevel.do?currentyear="+currentyear+"&catageory="+categoryLabel+"&datasetName="+salesCode+"&countryCode="+countryNameArray[0][status]+"&id=local";
			 //var DrillAjaxLinkSalesman = "monthleyytdtoareacountrysecondlevel.do?currentyear="+currentyear+"&catageory="+categoryLabel+"&datasetName="+salesCode+"&countryCode="+countryNameArray[0][status]+"&id=local";
			  yAxisName = array[0][status];
			
				var captionTitle = countryNameArray[0][status] + " - Salesman" + " " + + currentyear + " Monthly Booking YTD";
				var subCaption = "Salesman :" + " " + salesCode + " - " + salesman[1];
		 }
		 
		 $.getJSON(DrillAjaxLinkSalesman,function(json)
		  {
			  
			  var chart2 = {
								 "chart": {
                        "caption":captionTitle,
						"subCaption": subCaption,
                        "xAxisname": "Salesman",
                        "yaxisname": yAxisName,
                        "xAxisNameFont": "Helvetica",
                        "xAxisNameFontSize": "18",
                        "xAxisNameFontBold": "1",
                        "yAxisNameFontBold": "1",
                        "yAxisNameFontSize": "16",
                        "yAxisNameFont": "Helvetica",
                        "decimals": '2',
						"xAxisNamePadding":"20",
                        "xAxisNameFont": "Helvetica",
                        "xAxisNameFontSize": "14",
                        "xAxisNameFontBold": "1",
                        "yAxisNameFontBold": "1",
                        "yAxisNameFontSize": "14",
                        "yAxisNameFont": "Helvetica",
                        "yFormatNumberScale": "1",
                        "numberScaleValue": "1000,1000,1000",
                        "numberScaleUnit": "K,M,B",
                        "reverseLegend": "1",
                        "numberPrefix": "",
                        "numbersuffix": "",
                        "exportenabled": "1",
                        "exportatclient": "0",
                        "exporthandler": "http://export.api3.fusioncharts.com",
                        "html5exporthandler": "http://export.api3.fusioncharts.com",
						
                      //  "paletteColors": "#0075c2,#1aaf5d",
                        "bgColor": "#808080",
                        "baseFont": "Helvetica",
                        "baseFontSize": "15",
                        "captionFontSize": "18",
                        "showsum": "0",
                        "showvalues": "1",
                        "valueFontColor": "#000000",
                        "baseFontColor": "#000000",
                        "borderAlpha": "20",
                        "useroundedges": "1",
                        "showCanvasBorder": "0",
                        "usePlotGradientColor": "0",
                        "plotBorderAlpha": "10",
                        "placeValuesInside": "0",
                        "legendBgColor": "#ffffff",
                        "legendBorderColor": "#000000",
                        "legendBorder": "1",
                        "legendBorderAlpha": "1",
                        "legendShadow": "1",
                        "legendPosition": "right",
                        "xAxisLineColor": "#999999",
                        "divlineColor": "#999999",
                        "rotatelabels": "0",
                        "rotatevalues": "0",
                        "subcaptionFontBold": "1",
                        "subcaptionFontSize": "15",
                        "showLegend": '1',
                        "formatnumberscale": "1",
						"canvasBgColor": "#B0E2FF",
						"showCanvasBorder": "1",
						"canvasBorderColor": "#666666",
						"canvasBorderThickness": "4",
						"canvasBorderAlpha": "80",
						"legendBgColor":"#808080"
                    },
								
					"categories":json['xaxis'],
					"dataset":json['chartdata']
								
				};
				FusionCharts.ready(function () {
					var revenueChart = new FusionCharts({
				
						type: 'mscolumn2d',
						renderAt: 'container',
						width: '100%',
						height: '500',
							dataFormat: 'json',
							dataSource: chart2,
							events: {
												  dataPlotClick: function (event,dataObj) 
												  {	
													//alert(JSON.stringify(dataObj));
													//sessionStorage.setItem("firstDataObject",JSON.stringify(json['dataset']));
													//sessionStorage.setItem("firstCategoryObject",JSON.stringify(json['category']));
													//alert(JSON.stringify(json['dataset']));
													//alert(JSON.stringify(json['category']));
													//sessionStorage.setItem("drillStatus",'true');
													//sessionStorage.setItem("countryCode",dataObj.datasetName);
													//var countrycoode = sessionStorage.getItem("countryCode");
												
													//sessionStorage.getItem('countryCode');
													//var currencyType = sessionStorage.getItem("currencyType");
													//drillDownForSalesman(dataObj.categoryLabel);
												  }
											  }
						});
						//var qTableHeader = "<tr><th>Years</th><th>Q1</th><th>Q2</th><th>Q3</th><th>Q4</th></tr>";
					//var qTableData1 = "<tr style='color:#0066CC'><th>2014</th><td></td><td></td><td></td><td></td></tr><tr style='color:#0066CC'><th>2015</th><td></td><td></td><td></td><td></td></tr><tr style='color:#0066CC'><th>2016</th><td></td><td></td><td></td><td></td></tr>";
						revenueChart.addEventListener('renderComplete', function() {
							// In the renderComplete event create the table, even when the data is updated by calling setChartData method, this event will be fired and the updated data will reflect in the table too, since renderTable will be called again.
							// Creating the table on 'render' event will not update the table everytime, it will only update when render() method is called.
							renderTable(revenueChart,'table-container','table-container1',json['TotalYearBudget'],json['TotalYearBooking'],json['firstrow'],json['secondrow'],json['thirdrow']);
											//document.getElementById("table-container1").innerHTML = "<table width ='100%;' border='1' style='border-collapse:collapse;' class='tableCss'><thead><div style='background-color:#4286f4;text-align:center;color:#FFFFFF;font-weight:bold;'>Average booking</div></thead>"+ qTableHeader +qTableData1+"</table>";
								
						});
						revenueChart.render();
				});
		  });
		 
	 };
	 
	 $("#goback").click(function()
		{
			/*alert(drillSts);
			alert(status);
			alert(cType);
			alert(year);*/
			//alert(85858888);
			//alert(product);
			if(drillSts == "2")
			{
				//alert("go to level 1");
				var countrycode = sessionStorage.getItem("countryCode");
				var year = sessionStorage.getItem("year");
				var categoryLabel = sessionStorage.getItem("drillCategory");
				var datasetName = sessionStorage.getItem("drillName");
				//alert(categoryLabel + "categoryLabel");
				//alert(datasetName + "datasetName");
				drillSts = "1";
				drillDownForSalesman(categoryLabel,datasetName,year,cType,status);
				
			}
			else
			{
				
				 yAxisName = "USD";
				 url = "monthleyytdtoareaSCA.do?link="+product+"&currentyear="+year;
				 var year = sessionStorage.getItem("year");
				 drillSts = "0";
				loadYTDMonthlyCurrent(product,year,status,url,yAxisName,cType);
				
			}
		});
		
		
		
		$("#gobackCon").click(function()
		{
			//alert(status);
			//alert(555);
			//alert(sessionStorage.getItem("selectedCountry"));
			//var countrysts = sessionStorage.getItem("selectedCountry");
			var conststs = sessionStorage.getItem("selectedCountry");
			//alert(conststs);
				 if(sessionStorage.getItem("cType") == "dollar")
				 {
					 //alert("else if");
					 //alert(cType);
					 //$("#curDropdown").hide();
					// $('#curDropdown_country').show();
					 //var captionTitle = countryNameArray[0][status] + " " + "ANNUAL BOOKING";
					 yAxisName = "USD";
					 var year = sessionStorage.getItem("year");
					
					 url = "monthleyytdtoareacountrylevel.do?link="+product+"&currentyear="+year+"&datasetName="+countryNameArray[0][conststs]+"&id="+cType;
					  drillSts = "1";
					 loadYTDMonthlyCurrent(product,year,conststs,url,yAxisName,cType);
				 }
				 else
				 {
					 //alert(conststs + " " + "else" );
					// $("#curDropdown").hide();
					// $('#curDropdown_country').show();
					 
					// var captionTitle = countryNameArray[0][status] + " " + "ANNUAL BOOKING";
					 yAxisName = array[0][conststs];
					 url = url = "monthleyytdtoareacountrylevel.do?link="+product+"&currentyear="+year+"&datasetName="+countryNameArray[0][conststs]+ "&id=local";
					
					  var year = sessionStorage.getItem("year");
					 drillSts = "1";
				   loadYTDMonthlyCurrent(product,year,conststs,url,yAxisName,'local');
				 }
			
		});
		
		
				//================Render Table For Monthly Current=====================//
			function renderTable(chart, containerId,containerId2, BudgetYear,BookingYear,firstrow,secondrow,thirdrow)
				{
			//	alert(JSON.stringify(chart.getDataAsCSV()));
					// After the chart is rendered we export the data as CSV, parse it and then create a markup
					// equivalent to a table by parsing the exported CSV.
					var chartData = chart.getDataAsCSV(),
									  rows,
									  row,
									  i,
									  length,
									  tableBody = '',
									  tableBody1 = '',
									  tableBody2 = '',
									  tableBody3 = '',
									  tableBody4 = '',
									  tableBody5 = '',
									  tableBody6 = '',
									  tableHeader = '';
									  tableHeader1 = '';     
									  tableHeader2 = '';     
									  tableHeader3 = '';     
									  tableHeader4 = '';     
									  tableHeader5 = ''; 
									  tableHeader6 = '';     
					// Get all the rows by splitting data with '\n' seperator
					rows = chartData.replace(/"/g, '').split('\n'); 
					//alert(JSON.stringify(BudgetYear));	
					//alert(JSON.stringify(BookingYear));	
					//alert(rows.length);    
					// Retrieve the data from the rows and compute body string from the data rows
					var accuBudget = 0;
					var accuBooking = 0;
					
					var quater1 = 0;
					var quater2 = 0;
					var quater3 = 0;
					var quater4 = 0;
					
					var quater11 = 0;
					var quater21 = 0;
					var quater31 = 0;
					var quater41 = 0;
					
					var quater12 = 0;
					var quater22 = 0;
					var quater32 = 0;
					var quater42 = 0;
					
					for (i = 1, length = rows.length; i < length; i++) 
					{	
					 //alert(BudgetYear[i] + " " + i);
						//alert(JSON.stringify(rows[i]));		
						row = rows[i].split(',');
						//alert(firstrow[i]+ " " + i);
						//alert(row[1]);
						var sumofBudget = BudgetYear[i];
						var sumofBooking = BookingYear[i];
						//sumofBudget += parseInt(BudgetYear);
						//sumofBooking += parseInt(BookingYear); 
						
						if(isNaN(firstrow[1]) || firstrow[1] == undefined){var jan = 0; }else{var jan = firstrow[1];}
						if(isNaN(firstrow[2]) || firstrow[2] == undefined){var feb = 0; }else{var feb = firstrow[2];}
						if(isNaN(firstrow[3]) || firstrow[3] == undefined){var mar = 0; }else{var mar = firstrow[3];}
						if(isNaN(firstrow[4]) || firstrow[4] == undefined){var apr = 0; }else{var apr = firstrow[4];}
						if(isNaN(firstrow[5]) || firstrow[5] == undefined){var may = 0; }else{var may = firstrow[5];}
						if(isNaN(firstrow[6]) || firstrow[6] == undefined){var jun = 0; }else{var jun = firstrow[6];}
						if(isNaN(firstrow[7]) || firstrow[7] == undefined){var jul = 0; }else{var jul = firstrow[7];}
						if(isNaN(firstrow[8]) || firstrow[8] == undefined){var aug = 0; }else{var aug = firstrow[8];}
						if(isNaN(firstrow[9]) || firstrow[9] == undefined){var sep = 0; }else{var sep = firstrow[9];}
						if(isNaN(firstrow[10]) || firstrow[10] == undefined){var oct = 0; }else{var oct = firstrow[10];}
						if(isNaN(firstrow[11]) || firstrow[11] == undefined){var nov = 0; }else{var nov = firstrow[11];}
						if(isNaN(firstrow[12]) || firstrow[12] == undefined){var dec = 0; }else{var dec = firstrow[12];}
						
						if(isNaN(secondrow[1]) || secondrow[1] == undefined){var jan2 = 0; }else{var jan2 = secondrow[1];}
						if(isNaN(secondrow[2]) || secondrow[2] == undefined){var feb2 = 0; }else{var feb2 = secondrow[2];}
						if(isNaN(secondrow[3]) || secondrow[3] == undefined){var mar2 = 0; }else{var mar2 = secondrow[3];}
						if(isNaN(secondrow[4]) || secondrow[4] == undefined){var apr2 = 0; }else{var apr2 = secondrow[4];}
						if(isNaN(secondrow[5]) || secondrow[5] == undefined){var may2 = 0; }else{var may2 = secondrow[5];}
						if(isNaN(secondrow[6]) || secondrow[6] == undefined){var jun2 = 0; }else{var jun2 = secondrow[6];}
						if(isNaN(secondrow[7]) || secondrow[7] == undefined){var jul2 = 0; }else{var jul2 = secondrow[7];}
						if(isNaN(secondrow[8]) || secondrow[8] == undefined){var aug2 = 0; }else{var aug2 = secondrow[8];}
						if(isNaN(secondrow[9]) || secondrow[9] == undefined){var sep2 = 0; }else{var sep2 = secondrow[9];}
						if(isNaN(secondrow[10]) || secondrow[10] == undefined){var oct2 = 0; }else{var oct2 = secondrow[10];}
						if(isNaN(secondrow[11]) || secondrow[11] == undefined){var nov2 = 0; }else{var nov2 = secondrow[11];}
						if(isNaN(secondrow[12]) || secondrow[12] == undefined){var dec2 = 0; }else{var dec2 = secondrow[12];}
						
						if(isNaN(thirdrow[1]) || thirdrow[1] == undefined){var jan3 = 0; }else{var jan3 = thirdrow[1];}
						if(isNaN(thirdrow[2]) || thirdrow[2] == undefined){var feb3 = 0; }else{var feb3 = thirdrow[2];}
						if(isNaN(thirdrow[3]) || thirdrow[3] == undefined){var mar3 = 0; }else{var mar3 = thirdrow[3];}
						if(isNaN(thirdrow[4]) || thirdrow[4] == undefined){var apr3 = 0; }else{var apr3 = thirdrow[4];}
						if(isNaN(thirdrow[5]) || thirdrow[5] == undefined){var may3 = 0; }else{var may3 = thirdrow[5];}
						if(isNaN(thirdrow[6]) || thirdrow[6] == undefined){var jun3 = 0; }else{var jun3 = thirdrow[6];}
						if(isNaN(thirdrow[7]) || thirdrow[7] == undefined){var jul3 = 0; }else{var jul3 = thirdrow[7];}
						if(isNaN(thirdrow[8]) || thirdrow[8] == undefined){var aug3 = 0; }else{var aug3 = thirdrow[8];}
						if(isNaN(thirdrow[9]) || thirdrow[9] == undefined){var sep3 = 0; }else{var sep3 = thirdrow[9];}
						if(isNaN(thirdrow[10]) || thirdrow[10] == undefined){var oct3 = 0; }else{var oct3 = thirdrow[10];}
						if(isNaN(thirdrow[11]) || thirdrow[11] == undefined){var nov3 = 0; }else{var nov3 = thirdrow[11];}
						if(isNaN(thirdrow[12]) || thirdrow[12] == undefined){var dec3 = 0; }else{var dec3 = thirdrow[12];}
						
						quater1 = parseFloat(jan) + parseFloat(feb) + parseFloat(mar);
						quater2 = parseFloat(apr) + parseFloat(may) + parseFloat(jun);
						quater3 = parseFloat(jul) + parseFloat(aug) + parseFloat(sep);
						quater4 = parseFloat(oct) + parseFloat(nov) + parseFloat(dec);
						
						quater11 = parseFloat(jan2) + parseFloat(feb2) + parseFloat(mar2);
						quater21 = parseFloat(apr2) + parseFloat(may2) + parseFloat(jun2);
						quater31 = parseFloat(jul2) + parseFloat(aug2) + parseFloat(sep2);
						quater41 = parseFloat(oct2) + parseFloat(nov2) + parseFloat(dec2);
						
						quater12 = parseFloat(jan3) + parseFloat(feb3) + parseFloat(mar3);
						quater22 = parseFloat(apr3) + parseFloat(may3) + parseFloat(jun3);
						quater32 = parseFloat(jul3) + parseFloat(aug3) + parseFloat(sep3);
						quater42 = parseFloat(oct3) + parseFloat(nov3) + parseFloat(dec3);
						
						
						if(isNaN(quater1) || quater1==null){var convertquater1 = 0; }else{var convertquater1 = convertMillions(quater1);}
						if(isNaN(quater2) || quater2==null){var convertquater2 = 0; }else{var convertquater2 = convertMillions(quater2);}
						if(isNaN(quater3) || quater3==null){var convertquater3 = 0; }else{var convertquater3 = convertMillions(quater3);}
						if(isNaN(quater4) || quater4==null){var convertquater4 = 0; }else{var convertquater4 = convertMillions(quater4);}
						
						if(isNaN(quater11) || quater11==null){var convertquater11 = 0; }else{var convertquater11 = convertMillions(quater11);}
						if(isNaN(quater21) || quater21==null){var convertquater21 = 0; }else{var convertquater21 = convertMillions(quater21);}
						if(isNaN(quater31) || quater31==null){var convertquater31 = 0; }else{var convertquater31 = convertMillions(quater31);}
						if(isNaN(quater41) || quater41==null){var convertquater41 = 0; }else{var convertquater41 = convertMillions(quater41);}
						
						if(isNaN(quater12) || quater12==null){var convertquater12 = 0; }else{var convertquater12 = convertMillions(quater12);}
						if(isNaN(quater22) || quater22==null){var convertquater22 = 0; }else{var convertquater22 = convertMillions(quater22);}
						if(isNaN(quater32) || quater32==null){var convertquater32 = 0; }else{var convertquater32 = convertMillions(quater32);}
						if(isNaN(quater42) || quater42==null){var convertquater42 = 0; }else{var convertquater42 = convertMillions(quater42);}
						
						
						var currentyear = sessionStorage.getItem("year");
						//alert(currentyear + "currentyear");
						//alert(convertMillions(quater1));
						//if(row[i].trim().length==0) { var value1 = 0; } else { var value1 = BudgetYear[i];}
						//if(row[i].trim().length==0) { var value2 = 0; } else { var value2 = BookingYear[i];}
						//sumofBudget += parseInt(value1);
						//sumofBooking += parseInt(value2);
						//alert(sumofBudget + " " + i);
						//for(var j=1;j<=2;j++)
//						{
//							if(j<=1)
//							{
//								//if(row[j].trim().length==0) { var value = 0; } else { var value=BudgetYear[i];}
//								//sumofBudget += parseInt(value);	
//												
//							}
//						   else
//							{
//								//if(row[j].trim().length==0) { var value = 0; } else { var value=row[j];}
//								//sumofBooking += parseInt(value);
//								//alert(sumofBooking + " " + j);	
//							}
//						}
						//alert(sumofBudget);
						if(sumofBudget==null){var convertBudget = 0; }else{var convertBudget = convertMillions(sumofBudget);}
						//convertBudget = convertMillions(sumofBudget);
						//alert(convertBudget);
						if(sumofBooking==null){var convertBooking = 0; }else{var convertBooking = convertMillions(sumofBooking);}
						//var convertBooking = convertMillions(sumofBooking);
						//alert(convertBudget);
						var totalBudget = 0;
						
						if(convertBudget==null) {var  convertBdget = "0"; }else{ var convertBdget = convertBudget;}
						if(convertBooking==null) {var  convertBking = "0"; }else{ var convertBking = convertBooking;}
						//alert("convertBdget "+ convertBdget);
						//alert("sumofBudget "+ sumofBudget);
						var budgetPercent = convertBdget.replace ( /[^\+|\-0-9.]/ig, '' );
						var bookingPercent = convertBking.replace ( /[^\+|\-0-9.]/ig, '' );
						
						var percentSuccess = bookingPercent/budgetPercent*100;
						//alert(percentSuccess);
						//alert("percentSuccess "+ percentSuccess);
						if(isNaN(percentSuccess)|| percentSuccess == "Infinity") {var percentSuccessFixed = "0 "; }else{var percentSuccessFixed = percentSuccess.toFixed(2);}
						 //percentSuccessFixed = percentSuccess+ " %";
						var percentSuccessFix = percentSuccessFixed+ "%";
						if(isNaN(accuBudget)) { accuBudget = "0"; }
						
						accuBudget = Number(accuBudget)+Number(sumofBudget);
						//alert(accuBudget);
						
						
						var convertAccuBudget = convertMillions(accuBudget);
						
						//alert(convertAccuBudget);
						if(isNaN(accuBooking)) { accuBooking = "0"; }
						
						accuBooking = Number(accuBooking)+Number(sumofBooking);
						var convertAccuBooking = convertMillions(accuBooking);
						//alert(convertAccuBooking);
						//if(convertAccuBooking==null) { convertAccuBooking = "0"; }
						var budgetPercent1 = convertAccuBudget.replace ( /[^\+|\-0-9.]/ig, '' );
						var bookingPercent1 = convertAccuBooking.replace ( /[^\+|\-0-9.]/ig, '' );
						var percentAccuSuccess = bookingPercent1/budgetPercent1*100;
						//alert(percentAccuSuccess);
						if(isNaN(percentAccuSuccess)|| percentAccuSuccess=="Infinity") {var  percentAccuSuccessFixed = "0"; }else{var percentAccuSuccessFixed = percentAccuSuccess.toFixed(2);}
						var percentAccuSuccessFix = percentAccuSuccessFixed+ " %";
						//alert(percentAccuSuccessFix);
						//if(percentAccuSuccess=="Infinity") { percentAccuSuccessFixed = "0 %"; }
						
						if(convertAccuBudget==null) { var accbudgetval = ""; } else { var accbudgetval = convertAccuBudget; }
						if(convertAccuBooking==null) { var accbookingval = ""; } else { var accbookingval = convertAccuBooking; }
						
						tableBody += '<th style="text-align: center;">' + row[0] + '</th>' ;
						
						tableBody1 += '<td>' + convertBudget + '</td>';
						tableBody2 += '<td>' + convertBooking + '</td>';
						tableBody3 += '<td>' + percentSuccessFix + '</td>';
						tableBody4 += '<td>' + accbudgetval + '</td>';
						tableBody5 += '<td>' + accbookingval + '</td>';
						tableBody6 += '<td>' + percentAccuSuccessFix + '</td>';
					}
						//alert(tableBody2);
					// Compute header string from first row
					row = rows[0].split(',');
					
					tableHeader = '<th>' + row[0] + '</th>';
					tableHeader1 = '<th>Budget</th>';
					tableHeader2 = '<th>Bookings</th>';
					tableHeader3 = '<th>% Achieved</th>';
					tableHeader4 = '<th>Accu Budget</th>';
					tableHeader5 = '<th>Accu Bookings</th>';
					tableHeader6 = '<th>% Achieved</th>';
			 
					// Create the table string and append it to the table container
					document.getElementById(containerId).innerHTML = '<table width ="100%;" border="1" style="border-collapse:collapse;" class="tableCss"><tbody><tr>'+tableHeader+tableBody+'</tr><tr  style="color:#0066CC">'+tableHeader1+tableBody1+'</tr><tr  style="color:#0066CC">'+tableHeader2+tableBody2+'</tr><tr  style="color:#0066CC">'+tableHeader3+tableBody3+'</tr><tr><td colspan="13" height="20px;"></td></tr><tr  style="color:#0066CC">'+tableHeader4+tableBody4+'</tr><tr  style="color:#0066CC">'+tableHeader5+tableBody5+'</tr><tr  style="color:#0066CC">'+tableHeader6+tableBody6+'</tr></tbody</table>';
					
				var qTableHeader = "<tr><th>Years</th><th style='text-align: center;'>Q1</th><th style='text-align: center;'>Q2</th><th style='text-align: center;'>Q3</th><th style='text-align: center;'>Q4</th></tr>";
				var qTableData1 = "<tr style='color:#0066CC'><th>" + (currentyear-3) + "</th><td>" + convertquater12 + "</td><td>" + convertquater22 + "</td><td>" + convertquater32 + "</td><td>" + convertquater42 + "</td></tr><tr style='color:#0066CC'><th>" + (currentyear-2) + "</th><td>" + convertquater11 + "</td><td>" + convertquater21 + "</td><td>" + convertquater31 + "</td><td>" + convertquater41 + "</td></tr><tr style='color:#0066CC'><th>" + (currentyear-1) + "</th><td>" + convertquater1 + "</td><td>" + convertquater2 + "</td><td>" + convertquater3 + "</td><td>" + convertquater4 + "</td></tr>";						
				
				document.getElementById(containerId2).innerHTML = "<table width ='100%;' border='1' style='border-collapse:collapse;' class='tableCss'><thead><div style='background-color:#4286f4;text-align:center;color:#FFFFFF;font-weight:bold;'>Average booking</div></thead>"+ qTableHeader +qTableData1+"</table>";						
				
				
				
					
				};
	
	//=============Convert Data Values=======================//
	function convertMillions(sumofBudget) {
        
        var thousand = 1000;
        var million = 1000000;
        var billion = 1000000000;
        var trillion = 1000000000000;
        if (sumofBudget < thousand) {
		
            return (sumofBudget / thousand).toFixed(2).replace(/\.0$/, '') ;
        } else if (sumofBudget >= thousand && sumofBudget <= 1000000) {
            return (sumofBudget / thousand).toFixed(2).replace(/\.0$/, '') + 'K';
        } else if (sumofBudget >= million && sumofBudget <= billion) {
            return (sumofBudget / million).toFixed(2).replace(/\.0$/, '') + 'M';
        } else if (sumofBudget >= billion && sumofBudget <= trillion) {
            return (sumofBudget / billion).toFixed(2).replace(/\.0$/, '') + 'B';
        } else {
            return (sumofBudget / trillion).toFixed(2).replace(/\.0$/, '') + 'T';
        }
    }

    
    //alert(rowHeading2);
    function calculatePercentage(rowHeading2, rowHeading1) {

        var percent = (rowHeading2 / rowHeading1) * 100;
        //alert(percent);
        return percent.toFixed(1);
        //sumoftotalPercent = sumoftotalPercent+percent;
        //alert(percent);

    }
	 
</script>


<div class="row">
            <div class="col-sm-9">
                <div class="container" style=" display: inline; position:relative; left: 40%; height:100%;">
                    <a href="#/app/SCA_monthlyytd_Current" class="renderchart tooltip-blue" id="all" tooltip-placement="bottom" tooltip="SCA"><span class="allcon btn btn-primary btn-circle" style="width:45px; height:45px; padding:11px 4px;">SCA</span></a>
                    <a href="#/app/SCA_monthlyytd_Current" class="renderchart tooltip-blue" id="TH" tooltip-placement="bottom" tooltip="Thailand"><span><img src="image/Flag_of_Th.png" class="icn"/></span></a>
                    <a href="#/app/SCA_monthlyytd_Current" class="renderchart tooltip-blue" id="MY" tooltip-placement="bottom" tooltip="Malaysia"><span><img src="image/Flag_of_Ma.png" class="icn"/></span></a>
                    <a href="#/app/SCA_monthlyytd_Current" class="renderchart tooltip-blue" id="ID" tooltip-placement="bottom" tooltip="Indonesia"><span><img src="image/Flag_of_Id.png" class="icn"/></span></a>
                    <a href="#/app/SCA_monthlyytd_Current" class="renderchart tooltip-blue" id="SG" tooltip-placement="bottom" tooltip="Singapore"><span><img src="image/Flag_of_Sg.png" class="icn"/></span></a>
                    <a href="#/app/SCA_monthlyytd_Current" class="renderchart tooltip-blue" id="PH" tooltip-placement="bottom" tooltip="Philippines"><span><img src="image/Flag_of_Ph.png" class="icn"/></span></a>
                    <a href="#/app/SCA_monthlyytd_Current" class="renderchart tooltip-blue" id="IN" tooltip-placement="bottom" tooltip="India"><span><img src="image/Flag_of_In.png" class="icn"/></span></a>
                    <a href="#/app/SCA_monthlyytd_Current" class="renderchart tooltip-blue" id="VN" tooltip-placement="bottom" tooltip="Vietnam"><span><img src="image/Flag_of_Vn.png" class="icn"/></span></a>
                    <a href="#/app/SCA_monthlyytd_Current" class="renderchart tooltip-blue" id="EMA" tooltip-placement="bottom" tooltip="EMarket"><span class="flg"><i class="glyphicon glyphicon-globe countFlag" id="emarket"></i></span></a>
                    <a href="#/app/SCA_monthlyytd_Current" class="renderchart tooltip-blue" id="AU" tooltip-placement="bottom" tooltip="Australia"><span><img src="image/Flag_of_Au.png" class="icn"/></span></a>
                </div>
            </div>
            <div class="col-sm-3">
                <span class="dropdown" id="curDropdown" style="display:none;">
                     <button class="dropbtn tooltip-blue" tooltip-placement="left" tooltip="Currency"><span style="font-size:24px; padding: 5px 5px;"><i class="fa fa-usd" aria-hidden="true"></i></span></button>
                		<span class="dropdown-content">
                            <a href="#/app/SCA_monthlyytd_Current" id="SCA"><span>USD &#x24;</span></a>
                            <a href="#/app/SCA_monthlyytd_Current" id="USD" style="display:none;"><span id="scaSpan">USD &#x24;</span></a>
                       </span>
                </span>
            </div>
            <div class="col-sm-3">
                <span class="dropdown" id="curDropdown_country" style="display:none;">
                     <button class="dropbtn tooltip-blue" tooltip-placement="left" tooltip="Currency"><span style="font-size:24px; padding: 5px 5px;"><i class="fa fa-usd circular" aria-hidden="true"></i></span></button>
                <span class="dropdown-content">
                        
                    <a href="#/app/SCA_monthlyytd_Current" id="SCA_country"><span>USD &#x24;</span></a>
                    <a href="#/app/SCA_monthlyytd_Current" id="USD_country"><span id="scaSpan_country">USD &#x24;</span></a>
                
                </span>
                </span>
            </div>
		</div>
        <div class="row">
            <div class="col-sm-12">
                 <p><input type="button" id="goback" value="< Go Back" class="switchButton" style=" border:none; float: right; margin-right:20px; display:none;"/></p>
                 <p><input type="button" id="gobackCon" value="< Go Back" class="switchButton" style=" border:none; float: right; margin-right:20px; display:none;"/></p>
            </div>
         </div>         
        <div class="row">
        	<div class="col-sm-12">
            	<div id='container'>
                    <div style="font-size:20px; position:fixed; top:40%; left:50%;" id="loading">
                        <img src="image/PreLoader.gif" /> <br><span style="color:#5876D1; font-size:20px; margin-left:-25px;">Please Wait..</span>
                    </div>
                </div>

                
               <!-- <div id="table-container" style="padding-left:2%; padding-right:2%;"></div>-->
            </div>
        </div> 
        <div class="row">
            <div class="col-sm-9">
                <div id="table-container" style="margin-left:1%;"></div>
            </div>
             <div class="col-sm-3">
                
                <div id="table-container1" style="margin-right:1%;"></div>
            </div>
            
          </div>
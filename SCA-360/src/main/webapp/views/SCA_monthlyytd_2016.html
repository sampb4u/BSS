<!--<style type="text/css">

/*.tableCss tr:nth-child(even) {background: #CCC}
.tableCss tr:nth-child(odd) {background: #FFF}*/
.tableCss tr:nth-child(2n+0) {background: #1995AD;color:#FFFFFF; opacity:0.5;}
.tableCss tr:nth-child(odd) {background: #FFFFFF;}
.tableCss tr:nth-child(1) {background: #015AAC;color:#FFFFFF;}

.tableCss
{
 font-weight:normal;
 font-family:"Helvetica";	
}
.hb-country,
.hb-country:before,
.hb-country:after {
	background: #3B5998;
	border-color: #3B5998;
	color: #ffffff;
}
.hb-country:hover,
.hb-country:hover:before,
.hb-country:hover:after {
	background: transparent;
	border-color: #3B5998;
	color: #3B5998;
}
.hb-refresh,
.hb-refresh:before,
.hb-refresh:after {
	background: #fff;
	border-color: #3B5998;
	color: #ffffff;
}
.hb-refresh:hover,
.hb-refresh:hover:before,
.hb-refresh:hover:after {
	background: transparent;
	border-color: #3B5998;
	color: #3B5998;
}
.dropdown {
    position: absolute;
    display: inline-block;
    z-index: 20;
	top:1905%;
	right:20%;
	
}
.dropbtn {
    background-color: #015AAC;
    color: white;
    border: none;
	border-radius: 20px;
    cursor: pointer;
}
.dropdown-content {
    display: none;
    position: absolute;
    /*background-color: #f9f9f9;*/
	background-color: #ffffff;
    box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
}
.dropdown-content a {
    color: black;
    padding: 10px ;
    text-decoration: none;
    display: block;
	width:70px;
}
.dropdown-content a:hover {background-color: #f9f9f9;}

.dropdown:hover .dropdown-content {
    display: block;
}

.dropdown:hover .dropbtn {
    background-color: #015AAC;
}
.dropBackColor
{
background-color: #f1f1f1;
}
</style>-->
<style type="text/css">

/*.tableCss tr:nth-child(even) {background: #CCC}
.tableCss tr:nth-child(odd) {background: #FFF}*/
.tableCss tr:nth-child(2n+0) {background: #FFFFFF ;color:#000000;}
.tableCss tr:nth-child(odd) {background: #FFFFFF; color:#000000;}
.tableCss tr:nth-child(1) {background: #d3d3d3;color:#000000;}
.tableCss
{
 font-weight:normal;
 font-family:"Helvetica";	
}
.icn
{
	width:50px;
	height: 50px;
	
}
.flg
{
	 font-size: 44px;
	color: rgb(102, 153, 255);
	position: relative;
	top: 16px;
}
.allcon
{
	font-size: 35px;
	color: rgb(102, 153, 255);
	position: relative;
	top: 14px;
}
.hb-country,
.hb-country:before,
.hb-country:after {
	background: #3B5998;
	border-color: #3B5998;
	color: #ffffff;
}
.hb-country:hover,
.hb-country:hover:before,
.hb-country:hover:after {
	background: transparent;
	border-color: #3B5998;
	color: #3B5998;
}
.hb-refresh,
.hb-refresh:before,
.hb-refresh:after {
	background: #fff;
	border-color: #3B5998;
	color: #ffffff;
}
.hb-refresh:hover,
.hb-refresh:hover:before,
.hb-refresh:hover:after {
	background: transparent;
	border-color: #3B5998;
	color: #3B5998;
}
.dropdown {
    position: absolute;
    display: inline-block;
    z-index: 20;
	top:1905%;
	right:20%;
	
}
.dropbtn {
    background-color: #015AAC;
    color: white;
    border: none;
	border-radius: 20px;
    cursor: pointer;
}
.dropdown-content {
    display: none;
    position: absolute;
    /*background-color: #f9f9f9;*/
	background-color: #ffffff;
    box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
}
.dropdown-content a {
    color: black;
    padding: 10px ;
    text-decoration: none;
    display: block;
	width:70px;
}
.dropdown-content a:hover {background-color: #f9f9f9;}

.dropdown:hover .dropdown-content {
    display: block;
}

.dropdown:hover .dropbtn {
    background-color: #015AAC;
}
.dropBackColor
{
background-color: #f1f1f1;
}

.btn.btn-circle {
		border-radius: 50%;
		background-clip: padding-box;
		width: 45px;
		height: 45px;
		padding: 11px 4px;
		color: #ffffff;
		font-weight: bold;
	}
</style>

<script type="text/javascript">

	var product = "area";
	var getYear=new Date().getFullYear();  
	
	var currentyear = getYear-1;
	var LastTwoYear = getYear-2;
	var LastThreeYear = getYear-3;
	var LastFourYear = getYear-4;
	
	$("#previousYear").text(currentyear);
	$("#previousLastTwoYear").text(LastTwoYear);
	$("#previousLastThreeYear").text(LastThreeYear);
	$("#previousLastFourYear").text(LastFourYear);
	
	
	sessionStorage.setItem("SessionDollarYear",currentyear);
	var status = "all";
	sessionStorage.setItem("radioStatus",status);
	var countryCode = sessionStorage.getItem('countryCode');
//$('input:radio[name="numbers"]').filter('[value="2016"]').attr('checked', true);
	$('#SCA').addClass("dropBackColor");
	var ifCond = "0";
	buttonActive(ifCond);	
	var array = [{"TH":"THB (\u0E3F)","IN":"INR (\u20B9)","MY":"MYR (\u0024)","ID":"IDR (\u0052\u0070)","SG":"SGD (\u0024)","PH":"PHP (\u20b1)","AU":"AUD (\u0024)","VN":"VND (\u20ab)","EMA": "USD (\u0024)","OT":"USD (\u0024)"}]
	var countryNameArray = [{"TH":"Thailand","IN":"India","MY":"Malaysia","ID":"Indonesia","SG":"Singapore","PH":"Philippines","AU":"Australia","VN":"Vietnam","EMA": "EMarket","OT":"Other"}]
	var urlCountry = "monthleyytdtoareaSCAOLD.do?link="+product+"&currentyear="+currentyear;
	var currencyType = "USD";
	var cType = "dollar";
	sessionStorage.setItem("cType",cType);
	loadChartforAll(product,currentyear,status,urlCountry,currencyType);		
	
$(document).ready(function()
{

 $(".radioBtnClass").click(function () {

	//alert(sessionStorage.getItem("radioStatus"));
var Year=$('input:radio[name=numbers]:checked').val();
//alert(Year + "Year");

//sessionStorage.setItem("selectedYear",Year);
if(Year==0){
var getYear=new Date().getFullYear();
var Year = getYear-1;
}else if(Year==1){
var getYear=new Date().getFullYear();
var Year = getYear-2;
}else if(Year==2){
var getYear=new Date().getFullYear();
var Year = getYear-3;
}else if(Year==3){
var getYear=new Date().getFullYear();
var Year = getYear-4;
}
sessionStorage.setItem("SessionDollarYear",Year);

var status=sessionStorage.getItem("radioStatus");

if(status==all){
	currencyType = "USD";
}else{
//currencyType = array[0][status];
if(sessionStorage.getItem("cType") == "dollar")
{
	currencyType = "USD";
	urlCountry = "monthleyytdtoareaCountryWiseprev.do?link="+product+"&currentyear="+Year+"&countryCode="+status+"&id=dollar";	
	$('#SCA').addClass("dropBackColor");
	$('#USD').removeClass("dropBackColor");
}
else
{
	currencyType = array[0][status];
	urlCountry = "monthleyytdtoareaCountryWiseprev.do?link="+product+"&currentyear="+Year+"&countryCode="+status+"&id=local";	
	$('#SCA').removeClass("dropBackColor");
	$('#USD').addClass("dropBackColor");
}
	
}

		loadChartforAll(product,Year,status,urlCountry,currencyType);

	

    });
	$('.renderchart').click(function()
	{
	$('#SCA').addClass("dropBackColor");
		$('#USD').removeClass("dropBackColor");
		
	 var $radios = $('input:radio[name=numbers]');
	// alert($radios.is(':checked') === true);
    if($radios.is(':checked') === true) {
        $radios.filter('[value=0]').prop('checked', true);
    }
	
	
		buttonActive("1");
		jQuery( ".hb .countFlag").parent().addClass("hb-country").removeClass("hb-refresh");
		
		var status = $(this).attr('id');
		sessionStorage.setItem("radioStatus",status);
		
		$(this).addClass("active");		
		sessionStorage.setItem("selectedCountry1",$(this).attr('id'));
			
		if(status=="all")
		{
			var getId = status.toUpperCase();
			jQuery( ".hb #"+getId).parent().addClass("hb-refresh");	
			//$('#curDropdown').hide();
			$('#USD').hide();
			urlCountry = "monthleyytdtoareaSCAOLD.do?link="+product+"&currentyear="+currentyear;
			currencyType = "USD";
					
		}
		else		
		{
		
			var getId = status.toLowerCase();
			jQuery( ".hb #"+getId).parent().addClass("hb-refresh");
			//$('#curDropdown').show();
			$('#USD').show();
			$('#thbSpan').text(array[0][status]);
			
			//currencyType = array[0][status];
			currencyType = "USD";		
			urlCountry = "monthleyytdtoareaCountryWiseprev.do?link="+product+"&currentyear="+currentyear+"&countryCode="+status+"&id=dollar";	
			
		}
		loadChartforAll(product,currentyear,status,urlCountry,currencyType);
			
	});
});
	
$(document).ready(function()
{
	$("#SCA").click(function()
	{
		sessionStorage.setItem("cType","dollar");
		//alert(sessionStorage.getItem("selectedCountry1"));
		statusCon = sessionStorage.getItem("selectedCountry1");
		if(statusCon != "all" && statusCon != null)
		{
			//alert("if");
			currencyType = "USD";
			urlCountry = "monthleyytdtoareaCountryWiseprev.do?link="+product+"&currentyear="+sessionStorage.getItem("SessionDollarYear")+"&countryCode="+sessionStorage.getItem("selectedCountry1")+"&id=dollar";
			loadChartforAll(product,currentyear,sessionStorage.getItem("selectedCountry1"),urlCountry,currencyType);
		}
		else
		{
			//alert(getYear);
			//alert(sessionStorage.getItem("radioStatus"));
			//alert(sessionStorage.getItem("SessionDollarYear"));
			var yearwise = sessionStorage.getItem("SessionDollarYear");
			currencyType = "USD";
			urlCountry = "monthleyytdtoareaSCAOLD.do?link="+product+"&currentyear="+yearwise;
			loadChartforAll(product,yearwise,status,urlCountry,currencyType);
		}
		
		
		
		$('#SCA').addClass("dropBackColor");
		$('#USD').removeClass("dropBackColor");
	});
	$("#USD").click(function()
	{
	
		sessionStorage.setItem("cType","local");
		currencyType = array[0][sessionStorage.getItem("selectedCountry1")];
		urlCountry = "monthleyytdtoareaCountryWiseprev.do?link="+product+"&currentyear="+sessionStorage.getItem("SessionDollarYear")+"&countryCode="+sessionStorage.getItem("selectedCountry1")+"&id=local";
		
		loadChartforAll(product,currentyear,sessionStorage.getItem("selectedCountry1"),urlCountry,currencyType);
		$('#SCA').removeClass("dropBackColor");
		$('#USD').addClass("dropBackColor");
	});	
});	
	
function buttonActive(ifCond)
	{
		jQuery( ".hb .countFlag").parent().addClass("hb-country");
		jQuery( ".hb #ALL").parent().addClass("hb-refresh");	
		
	}	
	
function loadChartforAll(product,currentyear,status,urlCountry,currencyType)
{	
	//alert(product);
	//alert(currentyear);
	//alert(status);
	if(status=="all")
	{
		//alert("if");
		$.getJSON("monthleyytdtoareaSCAOLD.do?link="+product+"&currentyear="+currentyear, function(json) 
		{
			//alert(JSON.stringify(json));
		var xasisname=currentyear;
			//sessionStorage.setItem("currencyType","USD (M)");
			var chartData = {
							    "chart": {
											"palette": "2",
									        "caption": "Group Monthly Booking",
											"labelDisplay":"",
											"slantLabels":"0",
									        //"subcaption": "Harry's SuperMart",
									        "xaxisname": "Year-"+xasisname,
									        "decimals":'2',
											"yaxisname": currencyType,
											"showsum": "1",
											"showvalues": "0",
											"exportenabled": "1",
											"exportatclient": "0",
											"exporthandler": "http://export.api3.fusioncharts.com",
											"html5exporthandler": "http://export.api3.fusioncharts.com",
											
									        //"paletteColors": "#0075c2,#45AFF5,#2C8A56,#1aaf5d,#50DE90",
										    "numberPrefix": "",
									        "numbersuffix": "",
									        "bgColor": "#808080",
											"useroundedges": "1",
									        "borderAlpha": "20",
										    "showCanvasBorder": "0",
									        "usePlotGradientColor": "0",
										    "plotBorderAlpha": "10",
									        "legendBorderAlpha": "0",
											"legendPosition":"right",
										    "legendShadow": "1",
									        "valueFontColor": "#000000",
									        "showXAxisLine": "1",
									        "xAxisLineColor": "#999999",
									        "divlineColor": "#999999",
									        "divLineDashed": "1",
											"showAlternateHGridColor": "0",
									        "subcaptionFontBold": "0",
									        "subcaptionFontSize": "14",
											"baseFont":"Helvetica",		
											 "baseFontSize": "15",
                       						 "captionFontSize": "18",
											"rotatelabels": "0",		
											"rotatevalues": "0",
											"yFormatNumberScale":"1",
											 "numberScaleValue": "1000,1000,1000",
       										 "numberScaleUnit": "K,M,B",
											"baseFontColor":"#000000",
										"canvasBgColor": "#B0E2FF",
										"showCanvasBorder": "1",
									"canvasBorderColor": "#666666",
									"canvasBorderThickness": "4",
									"canvasBorderAlpha": "80",
									"legendBgColor":"#808080"
											//"theme":"fint"   			
										},
									    "categories":json['xaxis'],
									    "dataset":json['data']
									};	
		var i=0;
		FusionCharts.ready(function()
		{
		   var fusioncharts = new FusionCharts({
			    type: 'msstackedcolumn2d',
			    renderAt: 'chart-container',
			    width: '100%',
			    height: '500',
			    dataFormat: 'json',
			    dataSource: chartData,
									events: {
									           dataPlotClick: function (event,dataObj) 
											   {	
													asd();
									            }
										      }
								});
			  var renderTable = function (chart, containerId) 
			  {
		            var chartData = chart.getDataAsCSV(),
        				      rows,
							  row,
							  i,
							  length,
							  tableBody = '',
							  tableBody1 = '',
							  tableBody2 = '',
							  tableBody3 = '',
							  tableBody4 = '',
							  tableBody5 = '',
							  tableBody6 = '',
							  tableHeader = '';
							  tableHeader1 = '';     
							  tableHeader2 = '';     
							  tableHeader3 = '';     
							  tableHeader4 = '';     
							  tableHeader5 = ''; 
							  tableHeader6 = '';     
            // Get all the rows by splitting data with '\n' seperator
            rows = chartData.replace(/"/g, '').split('\n');     
            // Retrieve the data from the rows and compute body string from the data rows
			var accuBudget = 0;
			var accuBooking = 0;
            for (i = 1, length = rows.length; i < length; i++) 
			{	
				//alert(JSON.stringify(rows[i]));		
                row = rows[i].split(',');
				var sumofBudget = 0;
				var sumofBooking = 0;
				for(var j=1;j<=2;j++)
				{
					//alert(row[j]);
					if(j<=1)
					{
						if(row[j].trim().length==0) { var value = 0; } else { var value=row[j];}
						sumofBudget += parseInt(value);						
					}
				   else
				    {
						//alert(row[j]);
						if(row[j].trim().length==0) { var value = 0; } else { var value=row[j];}
						sumofBooking += parseInt(value);
					}
				}
				//var convertBudget = convertMillions(sumofBudget);
				//if(convertBudget==null) { convertBudget = "0M"; }
				//alert(sumofBudget);
				if(sumofBudget==null){var convertBudget = 0; }else{var convertBudget = convertMillions(sumofBudget);}
				if(sumofBooking==null){var convertBooking = 0; }else{var convertBooking = convertMillions(sumofBooking);}
				//var convertBooking = convertMillions(sumofBooking);
				
				var totalBudget = 0;
				
				var budgetPercent = convertBudget.replace ( /[^\+|\-0-9.]/ig, '' );
				var bookingPercent = convertBooking.replace ( /[^\+|\-0-9.]/ig, '' );
				
				//if(convertBooking==null) { convertBooking = "0M"; }
				
				var percentSuccess = bookingPercent/budgetPercent*100;
				if(isNaN(percentSuccess)|| percentSuccess == "Infinity") {var percentSuccessFixed = "0 "; }else{var percentSuccessFixed = percentSuccess.toFixed(2);}
				var percentSuccessFix = percentSuccessFixed+ " %";
			//	if(isNaN(percentSuccess) || percentSuccess=="Infinity") { percentSuccessFixed = "0 %"; }
			
				if(isNaN(accuBudget)) { accuBudget = "0"; }
				accuBudget = Number(accuBudget)+Number(sumofBudget);
				
				var convertAccuBudget = convertMillions(accuBudget);
				if(convertAccuBudget==null) { convertAccuBudget = "0M"; }
				//alert(sumofBooking);
				//if(isNaN(sumofBooking)) { sumofBooking = "0"; }
				if(isNaN(accuBooking)) { accuBooking = "0"; }
				accuBooking = Number(accuBooking)+Number(sumofBooking);
			//alert(accuBooking);
				var convertAccuBooking = convertMillions(accuBooking);
				
				if(convertAccuBooking==null) { convertAccuBooking = "0M"; }
				
				var budgetPercent1 = convertAccuBudget.replace ( /[^\+|\-0-9.]/ig, '' );
				
								var bookingPercent1 = convertAccuBooking.replace ( /[^\+|\-0-9.]/ig, '' );
							//	alert(bookingPercent1);
				
				var percentAccuSuccess = bookingPercent1/budgetPercent1*100;
				
				if(isNaN(percentAccuSuccess)|| percentAccuSuccess=="Infinity") {var  percentAccuSuccessFixed = "0 "; }else{var percentAccuSuccessFixed = percentAccuSuccess.toFixed(2);}
				//alert(percentAccuSuccessFixed);
				var percentAccuSuccessFix = percentAccuSuccessFixed+ " %";
				//alert(percentAccuSuccessFix);
				//if(isNaN(percentAccuSuccess) || percentAccuSuccess=="Infinity") { percentAccuSuccessFixed = "0 %"; }
				if(convertAccuBudget==null) { var accbudgetval = "0K"; } else { var accbudgetval = convertAccuBudget; }
				if(convertAccuBooking==null) { var accbookingval = "0K"; } else { var accbookingval = convertAccuBooking; }
				
                tableBody += '<th>' + row[0] + '</th>' ;
				tableBody1 += '<td>' + convertBudget + '</td>' ;
				tableBody2 += '<td>' + convertBooking + '</td>' ;
				tableBody3 += '<td>' + percentSuccessFix + '</td>' ;
				tableBody4 += '<td>' + accbudgetval + '</td>' ;
				tableBody5 += '<td>' + accbookingval + '</td>' ;
				tableBody6 += '<td>' + percentAccuSuccessFix + '</td>' ;
            }
     
            // Compute header string from first row
            row = rows[0].split(',');
            tableHeader = '<th>' + row[0] + '</th>';
			tableHeader1 = '<th>Budget</th>';
			tableHeader2 = '<th>Bookings</th>';
			tableHeader3 = '<th>% Achieved</th>';
			tableHeader4 = '<th>Accu Budget</th>';
			tableHeader5 = '<th>Accu Bookings</th>';
			tableHeader6 = '<th>% Achieved</th>';
     
            // Create the table string and append it to the table container
            document.getElementById(containerId).innerHTML = '<table width ="100%;" border="1" style="border-collapse:collapse;" class="tableCss"><tbody><tr>'+tableHeader+tableBody+'</tr><tr style="color:#0066CC">'+tableHeader1+tableBody1+'</tr><tr style="color:#0066CC">'+tableHeader2+tableBody2+'</tr><tr style="color:#0066CC">'+tableHeader3+tableBody3+'</tr><tr style="color:#0066CC"><td colspan="13" height="20px;"></td></tr><tr style="color:#0066CC">'+tableHeader4+tableBody4+'</tr><tr style="color:#0066CC">'+tableHeader5+tableBody5+'</tr><tr style="color:#0066CC">'+tableHeader6+tableBody6+'</tr></tbody</table>';
     
        };								
		fusioncharts.render();
		//alert(json['tabledata'][0].Q1);
		var qTableHeader = "<tr><th></th><th>Q1</th><th>Q2</th><th>Q3</th><th>Q4</th></tr>";
		var qTableData1 = "<tr style='color:#0066CC'><th>"+json['tabledata'][0].year+"</th><td>"+convertMillions(json['tabledata'][0].Q1)+"</td><td>"+convertMillions(json['tabledata'][0].Q2)+"</td><td>"+convertMillions(json['tabledata'][0].Q3)+"</td><td>"+convertMillions(json['tabledata'][0].Q4)+"</td></tr><tr style='color:#0066CC'><th>"+json['tabledata'][1].year+"</th><td>"+convertMillions(json['tabledata'][1].Q1)+"</td><td>"+convertMillions(json['tabledata'][1].Q2)+"</td><td>"+convertMillions(json['tabledata'][1].Q3)+"</td><td>"+convertMillions(json['tabledata'][1].Q4)+"</td></tr><tr style='color:#0066CC'><th>"+json['tabledata'][2].year+"</th><td>"+convertMillions(json['tabledata'][2].Q1)+"</td><td>"+convertMillions(json['tabledata'][2].Q2)+"</td><td>"+convertMillions(json['tabledata'][2].Q3)+"</td><td>"+convertMillions(json['tabledata'][2].Q4)+"</td></tr>";
		
		
	        fusioncharts.addEventListener('renderComplete', function () 
			{
        	    renderTable(fusioncharts, 'table-container');
				document.getElementById("table-container1").innerHTML = "<table width ='100%;' border='1' style='border-collapse:collapse;' class='tableCss'><thead><div      style='background-color:#4286f4;text-align:center;color:#FFFFFF;font-weight:bold;'>Average booking</div></thead>"+qTableHeader+qTableData1+"</table>";
				$(".avg").show();
	        });																			
		
					});
				});     
	 }
	else
	 {
	//alert("4"+currentyear);
		$.getJSON(urlCountry, function(json) 
		{
		var xasisname=currentyear;
			//sessionStorage.setItem("currencyType",array[0][status]);
			var caption = countryNameArray[0][status]+" - Group Monthly Booking";
			var chartData = {
							    "chart": {
											"palette": "2",
									        "caption": caption,
									        //"subcaption": "Harry's SuperMart",
									        "xaxisname": "Year-"+xasisname,
									        "decimals":'2',
											"yaxisname": currencyType,
											"showsum": "1",
											"showvalues": "0",
											"exportenabled": "1",
											"exportatclient": "0",
											"exporthandler": "http://export.api3.fusioncharts.com",
											"html5exporthandler": "http://export.api3.fusioncharts.com",
									        "bgColor": "#808080",
											"useroundedges": "1",
									        "borderAlpha": "20",
										    "showCanvasBorder": "0",
									        "usePlotGradientColor": "0",
										    "plotBorderAlpha": "10",
									        "legendBorderAlpha": "0",
											"legendPosition":"right",
										    "legendShadow": "1",
									        "valueFontColor": "#000000",
									        "showXAxisLine": "1",
									        "xAxisLineColor": "#999999",
									        "divlineColor": "#999999",
									        "divLineDashed": "1",
											"showAlternateHGridColor": "0",
									        "subcaptionFontBold": "0",
									        "subcaptionFontSize": "14",
											"baseFont":"Helvetica",		
											"baseFontSize":"17",
											"rotatelabels": "0",		
											"rotatevalues": "0",
											"yFormatNumberScale":"1",
											 "numberScaleValue": "1000,1000,1000",
       										 "numberScaleUnit": "K,M,B",
											"baseFontColor":"#000000",
											"canvasBgColor": "#B0E2FF",
											"showCanvasBorder": "1",
										"canvasBorderColor": "#666666",
										"canvasBorderThickness": "4",
										"canvasBorderAlpha": "80",
										"legendBgColor":"#808080"
											//"theme":"fint"   			
										},
									    "categories":json['xaxis'],
									    "dataset":json['data']
									};	
		var i=0;
		FusionCharts.ready(function()
		{
		   var fusioncharts = new FusionCharts({
			    type: 'msstackedcolumn2d',
			    renderAt: 'chart-container',
			    width: '100%',
			    height: '500',
			    dataFormat: 'json',
			    dataSource: chartData,
									/*events: {
									           dataPlotClick: function (event,dataObj) 
											   {	
													asd();
									            }
										      }*/
								});
			  var renderTable = function (chart, containerId) 
			  {
		            var chartData = chart.getDataAsCSV(),
        				      rows,
							  row,
							  i,
							  length,
							  tableBody = '',
							  tableBody1 = '',
							  tableBody2 = '',
							  tableBody3 = '',
							  tableBody4 = '',
							  tableBody5 = '',
							  tableBody6 = '',
							  tableHeader = '';
							  tableHeader1 = '';     
							  tableHeader2 = '';     
							  tableHeader3 = '';     
							  tableHeader4 = '';     
							  tableHeader5 = ''; 
							  tableHeader6 = '';     
            // Get all the rows by splitting data with '\n' seperator
            rows = chartData.replace(/"/g, '').split('\n');     
            // Retrieve the data from the rows and compute body string from the data rows
			var accuBudget = 0;
			var accuBooking = 0;
            for (i = 1, length = rows.length; i < length; i++) 
			{	
				//alert(JSON.stringify(rows[i]));		
                row = rows[i].split(',');
				var sumofBudget = 0;
				var sumofBooking = 0;
				for(var j=1;j<=2;j++)
				{
					//alert(row[j]);
					if(j<=1)
					{
						if(row[j].trim().length==0) { var value = 0; } else { var value=row[j];}
						sumofBudget += parseInt(value);						
					}
				   else
				    {
						//alert(row[j]);
						if(row[j].trim().length==0) { var value = 0; } else { var value=row[j];}
						sumofBooking += parseInt(value);
					}
				}
				//var convertBudget = convertMillions(sumofBudget);
				//if(convertBudget==null) { convertBudget = "0M"; }
				if(sumofBudget==null){var convertBudget = 0; }else{var convertBudget = convertMillions(sumofBudget);}
				if(sumofBooking==null){var convertBooking = 0; }else{var convertBooking = convertMillions(sumofBooking);}
				//var convertBooking = convertMillions(sumofBooking);
				var totalBudget = 0;
				
				//if(convertBooking==null) { convertBooking = "0M"; }
				var budgetPercent = convertBudget.replace ( /[^\+|\-0-9.]/ig, '' );
				var bookingPercent = convertBooking.replace ( /[^\+|\-0-9.]/ig, '' );
				
				var percentSuccess = bookingPercent/budgetPercent*100;
				if(isNaN(percentSuccess)|| percentSuccess == "Infinity") {var percentSuccessFixed = "0 "; }else{var percentSuccessFixed = percentSuccess.toFixed(2);}
				var percentSuccessFix = percentSuccessFixed+ " %";
				 
				//if(isNaN(percentSuccess) || percentSuccess=="Infinity") { percentSuccessFixed = "0 %"; }
				if(isNaN(accuBudget)) { accuBudget = "0"; }
				accuBudget = Number(accuBudget)+Number(sumofBudget);
				
				var convertAccuBudget = convertMillions(accuBudget);
				if(convertAccuBudget==null) { convertAccuBudget = "0M"; }
				//alert(sumofBooking);
				if(isNaN(accuBooking)) { accuBooking = "0"; }
				//if(isNaN(sumofBooking)) { sumofBooking = "0"; }
				
				accuBooking = Number(accuBooking)+Number(sumofBooking);
				var convertAccuBooking = convertMillions(accuBooking);
				//alert(convertAccuBooking);
				if(convertAccuBooking==null) { convertAccuBooking = "0M"; }
				
				var budgetPercent1 = convertAccuBudget.replace ( /[^\+|\-0-9.]/ig, '' );
				var bookingPercent1 = convertAccuBooking.replace ( /[^\+|\-0-9.]/ig, '' );
				
				var percentAccuSuccess = bookingPercent1/budgetPercent1*100;
				if(isNaN(percentAccuSuccess)|| percentAccuSuccess=="Infinity") {var  percentAccuSuccessFixed = "0 "; }else{var percentAccuSuccessFixed = percentAccuSuccess.toFixed(2);}
				var percentAccuSuccessFix = percentAccuSuccessFixed+ " %";
				//if(isNaN(percentAccuSuccess) || percentAccuSuccess=="Infinity") { percentAccuSuccessFixed = "0 %"; }
				
				
                tableBody += '<th>' + row[0] + '</th>' ;
				tableBody1 += '<td>' + convertBudget + '</td>' ;
				tableBody2 += '<td>' + convertBooking + '</td>' ;
				tableBody3 += '<td>' + percentSuccessFix + '</td>' ;
				tableBody4 += '<td>' + convertAccuBudget + '</td>' ;
				tableBody5 += '<td>' + convertAccuBooking + '</td>' ;
				tableBody6 += '<td>' + percentAccuSuccessFix + '</td>' ;
            }
     
            // Compute header string from first row
            row = rows[0].split(',');
            tableHeader = '<th>' + row[0] + '</th>';
			tableHeader1 = '<th>Budget</th>';
			tableHeader2 = '<th>Bookings</th>';
			tableHeader3 = '<th>% Achieved</th>';
			tableHeader4 = '<th>Accu Budget</th>';
			tableHeader5 = '<th>Accu Bookings</th>';
			tableHeader6 = '<th>% Achieved</th>';
     
            // Create the table string and append it to the table container
            document.getElementById(containerId).innerHTML = '<table width ="100%;" border="1" style="border-collapse:collapse;" class="tableCss"><tbody><tr >'+tableHeader+tableBody+'</tr><tr style="color:#0066CC">'+tableHeader1+tableBody1+'</tr><tr style="color:#0066CC">'+tableHeader2+tableBody2+'</tr><tr style="color:#0066CC">'+tableHeader3+tableBody3+'</tr><tr ><td colspan="13" height="20px;"></td></tr><tr style="color:#0066CC">'+tableHeader4+tableBody4+'</tr><tr style="color:#0066CC">'+tableHeader5+tableBody5+'</tr><tr style="color:#0066CC">'+tableHeader6+tableBody6+'</tr></tbody</table>';
     
        };								
		fusioncharts.render();
		//alert(json['tabledata'][0].Q1);
		var qTableHeader = "<tr><th></th><th>Q1</th><th>Q2</th><th>Q3</th><th>Q4</th></tr>";
		var qTableData1 = "<tr style='color:#0066CC'><th>"+json['tabledata'][0].year+"</th><td>"+convertMillions(json['tabledata'][0].Q1)+"</td><td>"+convertMillions(json['tabledata'][0].Q2)+"</td><td>"+convertMillions(json['tabledata'][0].Q3)+"</td><td>"+convertMillions(json['tabledata'][0].Q4)+"</td></tr><tr style='color:#0066CC'><th>"+json['tabledata'][1].year+"</th><td>"+convertMillions(json['tabledata'][1].Q1)+"</td><td>"+convertMillions(json['tabledata'][1].Q2)+"</td><td>"+convertMillions(json['tabledata'][1].Q3)+"</td><td>"+convertMillions(json['tabledata'][1].Q4)+"</td></tr><tr style='color:#0066CC'><th>"+json['tabledata'][2].year+"</th><td>"+convertMillions(json['tabledata'][2].Q1)+"</td><td>"+convertMillions(json['tabledata'][2].Q2)+"</td><td>"+convertMillions(json['tabledata'][2].Q3)+"</td><td>"+convertMillions(json['tabledata'][2].Q4)+"</td></tr>";
		
		
	        fusioncharts.addEventListener('renderComplete', function () 
			{
        	    renderTable(fusioncharts, 'table-container');
				document.getElementById("table-container1").innerHTML = "<table width ='100%;' border='1' style='border-collapse:collapse;' class='tableCss'>"+qTableHeader+qTableData1+"</table>";
				$(".avg").show();
	        });																			
		
					});
				}); 	 
	 }
}	
	function convertMillions(sumofBudget) 
	{
		//alert(sumofBudget);
		var thousand = 1000;
		var million = 1000000;
		var billion = 1000000000;
		var trillion = 1000000000000;
		if (sumofBudget < thousand) {
			return (sumofBudget/thousand).toFixed(2).replace(/\.0$/, '') + 'K';   
		}
		
		else if (sumofBudget >= thousand && sumofBudget <= 1000000) {
			 return  (sumofBudget/thousand).toFixed(2).replace(/\.0$/, '') + 'K'; 
		}
		
		else if (sumofBudget >= million && sumofBudget <= billion) {
			return (sumofBudget/million).toFixed(2).replace(/\.0$/, '') + 'M';   
		}
		
		else if (sumofBudget >= billion && sumofBudget <= trillion) {
			return (sumofBudget/billion).toFixed(2).replace(/\.0$/, '') + 'B';   
		}
		
		else {
			return (sumofBudget/trillion).toFixed(2).replace(/\.0$/, '') + 'T';   
       }
   } 			
	/*function convertMillions(sumofBudget)
	{
		 if (Math.abs(sumofBudget) >= 1000000000) 
		 {
	        return (sumofBudget / 1000000000).toFixed(1).replace(/\.0$/, '') + 'B';
		 }
		 else if (Math.abs(sumofBudget) >= 1000000) 
		 {
		      return (sumofBudget / 1000000).toFixed(1).replace(/\.0$/, '') + 'M';
		 }
		 else if (Math.abs(sumofBudget) >= 1000) 
		 {
		       return (sumofBudget / 1000).toFixed(1).replace(/\.0$/, '') + 'K';
		 }				
		 else if (Math.abs(sumofBudget) <1000) 
		 {
		       return (sumofBudget / 1000).toFixed(1).replace(/\.0$/, '') + 'K';
		 }				
		 
	
	}*/
				
</script>
  <div class="row">
  <div class="col-sm-9">
  <div class="container" style=" display: inline; position:relative; left: 40%;">
		
		<a href="#/app/SCA_monthlyytd_2016" class="renderchart tooltip-blue" id="all" tooltip-placement="bottom" tooltip="SCA"><span class="icn btn btn-primary btn-circle" style="width:45px; height:45px; padding:11px 4px;">SCA<!--<i class="glyphicon glyphicon-refresh countFlag" id="ALL"></i>--></span></a>
		 <!--<a href="#/app/SCA_monthlyytd_2016" class="renderchart tooltip-blue" id="all" tooltip-placement="bottom" tooltip="All"><span class="allcon"><i class="glyphicon glyphicon-refresh countFlag" id="ALL"></i></span></a>-->
             <a href="#/app/SCA_monthlyytd_2016" class="renderchart tooltip-blue" id="TH" tooltip-placement="bottom" tooltip="Thailand"><span><img src="image/Flag_of_Th.png" class="icn"/></span></a>
             <a href="#/app/SCA_monthlyytd_2016" class="renderchart tooltip-blue" id="MY" tooltip-placement="bottom" tooltip="Malaysia"><span><img src="image/Flag_of_Ma.png" class="icn"/></span></a>
             <a href="#/app/SCA_monthlyytd_2016" class="renderchart tooltip-blue" id="ID" tooltip-placement="bottom" tooltip="Indonesia"><span><img src="image/Flag_of_Id.png" class="icn"/></span></a>
             <a href="#/app/SCA_monthlyytd_2016" class="renderchart tooltip-blue" id="SG" tooltip-placement="bottom" tooltip="Singapore"><span><img src="image/Flag_of_Sg.png" class="icn"/></span></a>
             <a href="#/app/SCA_monthlyytd_2016" class="renderchart tooltip-blue" id="PH" tooltip-placement="bottom" tooltip="Philippines"><span><img src="image/Flag_of_Ph.png" class="icn"/></span></a>
             <a href="#/app/SCA_monthlyytd_2016" class="renderchart tooltip-blue" id="IN" tooltip-placement="bottom" tooltip="India"><span><img src="image/Flag_of_In.png" class="icn"/></span></a>
             <a href="#/app/SCA_monthlyytd_2016" class="renderchart tooltip-blue" id="VN" tooltip-placement="bottom" tooltip="Vietnam"><span><img src="image/Flag_of_Vn.png" class="icn"/></span></a>
             <a href="#/app/SCA_monthlyytd_2016"  class="renderchart tooltip-blue" id="EMA" tooltip-placement="bottom" tooltip="EMarket"><span class="flg"><i class="glyphicon glyphicon-globe countFlag" id="emarket"></i></span></a>
             <a href="#/app/SCA_monthlyytd_2016" class="renderchart tooltip-blue" id="AU" tooltip-placement="bottom" tooltip="Australia"><span><img src="image/Flag_of_Au.png" class="icn"/></span></a>

		</div>
		</div>
		<div class="col-sm-3">
		<span class="dropdown" style="display:;" id="curDropdown">
			 <button class="dropbtn tooltip-blue" tooltip-placement="left" tooltip="Currency"><span style="font-size:24px; padding: 5px 5px;">&#x24;</span></button>
			 <span class="dropdown-content">
				
				<a href="#/app/SCA_monthlyytd_2016" id="SCA"><span>USD &#x24;</span></a>
                <a href="#/app/SCA_monthlyytd_2016" id="USD" style="display:none;"><span id="thbSpan">USD &#x24;</span></a>
			 </span>
		</span>
		</div>
	</div> 

<div class="row" >
<div class="col-sm-8" ></div>
<div class="col-sm-3" >
								<div class="radio"  > 
									
									
                                    <label>
                                     	<input type="radio" class="colored-blue radioBtnClass"  name="numbers" value="0"  checked="checked">
                                               <span class="text" id="previousYear"></span>
                                               </label> &nbsp;&nbsp;
											   
                                        <label >
										
                                            <input type="radio" class="colored-blue radioBtnClass"  name="numbers" value="1" >
                                               <span class="text" id="previousLastTwoYear"></span>
                                            </label> &nbsp;&nbsp;
											<label>
                                     	<input type="radio" class="colored-blue radioBtnClass"  name="numbers" value="2">
                                             <span class="text" id="previousLastThreeYear"></span>
 
                                        
                                               </label> &nbsp;&nbsp;
											   <label>
                                     	<input type="radio" class="colored-blue radioBtnClass" name="numbers" value="3">
                                             <span class="text" id="previousLastFourYear"></span>
 
                                        
                                               </label>
								</div>
							</div>

</div>
  <div style="float:right;"><!--<input type="button" value="< Go Back" id="goback">--></div>
  <div id="chart-container">
      <div style="font-size:20px; position:fixed; top:40%; left:50%;" id="loading">
		<img src="image/PreLoader.gif"   /> <br><span style="color:#5876D1; font-size:20px; margin-left:-25px;">Please Wait..</span>
	  </div>
      
  </div>
  
  <div class="row">
  	<div class="col-sm-9">
		<div id="table-container"  style="padding-left:2%;"></div>
	</div>
	<div class="col-sm-3 avg" style="display:none">
		<p><b></b></p>
		<div id="table-container1" align="left"></div>
	</div>
  </div>  

  
  <br />
angular.module('app')
//=================================
	//Floating Lables Demo
//=================================
	  
	 .directive('withFloatingLabel', function () 
	 {
	    return {
    	    restrict: 'A',
        	link: function ($scope, $element, attrs) {
            var template = '<div class="floating-label">' + attrs.placeholder +'</div>';

            //append floating label template
            $element.after(template);

            //remove placeholder
            $element.removeAttr('placeholder');

            //hide label tag assotiated with given input
            document.querySelector('label[for="' +  attrs.id +  '"]').style.display = 'none';

            $scope.$watch(function () {
                if($element.val().toString().length < 1) {
                    $element.addClass('empty');
                } else {
                    $element.removeClass('empty');
                }
            });
	        }
    	};
	});





//==========================================================//
     //--------------Customer Dashboard--------------------//
//=========================================================//

angular.module('app')
.controller('customerDBController',function($scope,$http,$rootScope,$state){
	
	$scope.loadCustomersForDB  = function() 
	 {
		     $scope.customersData = [];
		
                        $.getJSON("getAllAccountNames.do",function(json)
						{
					
							//alert(JSON.stringify(json['data']));
							 $scope.customersData = json['data'];
							  	  	
							 $scope.$apply();
					
						});

                  
	 }
	 $scope.startsWith = function(state, viewValue) {
			//alert(state.substr(0, viewValue.length).toLowerCase() == viewValue.toLowerCase());
              return state.substr(0, viewValue.length).toLowerCase() == viewValue.toLowerCase();
            }
	 $index = 0;
	 $scope.data = [];
     $scope.quoteArray = []; 
	 $scope.OrderArray = [];
	 $scope.caseArray = []; 
	 $scope.HistoryArray = [];
	 $scope.getImage = [];
	 $scope.loadAllCustomerDetails = function(accountname)
	 {	
	      
			
		    $index++;
			$scope.data.push({'id': $index});
			$scope.quoteArray.push({'id': $index});
			$scope.OrderArray.push({'id': $index});
			$scope.caseArray.push({'id': $index});
			$scope.HistoryArray.push({'id': $index});
			$scope.getImage = [];
			$scope.OpenQuotations = "0";
			$scope.QuoteVal = "0.00";
			$scope.opportunityAmount = "0.00";     
				//alert(accountname);
		   if(accountname == undefined || accountname == "")
		   {
			   //alert("no data found");
			    $index = 1;
                $scope.data = [{'id': $index}];
				$scope.quoteArray = [{'id': $index}];
				$scope.OrderArray = [{'id': $index}];
				$scope.caseArray = [{'id': $index}];
				$scope.HistoryArray = [{'id': $index}];
				$scope.OpenQuotations = "0";
				$scope.QuoteVal = "0.00";
				$scope.opportunityAmount = "0.00"; 
				$("#editCust").addClass("active2");  
		   }
		   else
		   {
			   //alert(" data found");
			   $.post("getAllCustmerDetailsforcustmerDB.do",{account:accountname},function(json)
					{
						
						$("#editCust").removeClass("active2");
						 $index = 1;
                         $scope.OrderArray = [{'id': $index}];
						 $scope.HistoryArray = [{'id': $index}];
						 
						var p = JSON.stringify(json['check']);
						var q = json['custmer'][0];
						
						var totalQuotes = json['quatationgrid'].length;
						var tVal = "";
						var tVal2 = 0;
						
						$("#loading").show();
						 
					// alert(JSON.stringify(json['custmer'].length));
							
						if(p!=0)
						{
								//var getAppCode = json['custmer'][0].application;
								//var getIndustryName = json['custmer'][0].applicanIndustry;
								
								 //$scope.customerMaster = json['custmer'][0];
								 
								 $("#loading").hide();
								 $scope.account = q.account;
								 $scope.contName = q.contName;
								 $scope.email = q.email;
								 $scope.billingCountries = q.billingCountries;
								 $scope.application = q.application;
								 $scope.salesPerson = q.salesPerson;
								 $scope.salesPersonCode = q.salesPersonCode;
								 $scope.phnumber = q.phnumber;
								 $scope.ophnumber = q.ophnumber;
								 $scope.mbnumber = q.mbnumber;
								 $scope.fax = q.fax;
								 $scope.clientwebsite = q.clientwebsite;
								 $scope.departmentname = q.departmentname;
								 $scope.customerGroup = q.customerGroup;
								 
								 if(q.opportunityAmount == undefined || q.opportunityAmount == "")
								 {
									 $scope.opportunityAmount = "0.00";  
								 }
								 else
								 {
									 $scope.opportunityAmount = q.opportunityAmount;
								 }
								 
								 
								 //var img = q.imagename.length;
								 
								 if(q.imagename == undefined || q.imagename == "")
								 {
									 //$scope.getImage = "";
									 $(".polaroid").show();
									  $("#dynamic").show();
									 //alert("no img");
								 }
								 else
								 {
									  //alert(" img");
									  $scope.getImage = q.imagename;
									  $(".polaroid").show();
									  $("#dynamic").hide();
									
								 }
								 if(json['grid'].length<1)
								 {
									 $index = 1;
                       				 $scope.data = [{ 'id': $index}];
								 }
								 else
								 {
									 $scope.data = json['grid'];
								 }
								 
								
								 if(json['casedata'].length<1)
								 {
									 //$("#caseblk").hide();
									 $index = 1;
                       				 $scope.caseArray = [{ 'id': $index}];
								 }
								 else
								 {
									// $("#caseblk").show();
									 $scope.caseArray = json['casedata'];
								 }
								 
								 
								 
								 if(json['quatationgrid'].length<1)
								 {
									 //$("#qtnblk").hide();
									 $index = 1;
                       				 $scope.quoteArray = [{ 'id': $index}];
									 $scope.OpenQuotations = 0;
									 $scope.QuoteVal = tVal2.toFixed(2);
									 //alert("if");
								 }
								 else
								 {
									 //alert("else");
									 //$("#qtnblk").show();
									 $scope.quoteArray = json['quatationgrid'];
									 $scope.OpenQuotations = totalQuotes;
									 for(var i=0;i<json['quatationgrid'].length;i++)
									 {
										 tVal = parseFloat(json['quatationgrid'][i].grandTotal);
										
											 tVal2 += tVal;
											// alert(tVal2);
										$scope.QuoteVal = tVal2.toFixed(2);
										
									 }
									var quoteType = json['quatationgrid'][0].qtnType;
									if(quoteType=="0")
									{
										$scope.quotationType = "Full Unit";
									}
									else if(quoteType=="1")
									{
										$scope.quotationType = "Project";
									}
									else if(quoteType=="2")
									{
										$scope.quotationType = "Spare Parts(Only)";
									}
									else
									{
										$scope.quotationType = "Spare part and service";
									}
									 
								 }
								 
	
								  $scope.$apply();
						   
						}
					 
				  });	
	
		   }
			
							 
	};		
	$scope.editCustomerData = function()
	{
		//alert(455);
		var CustomerDashBoard = "0";
		$rootScope.loadEditCustDB = CustomerDashBoard;
		$state.go('app.customermaster');
		//alert($rootScope.loadEditCustDB);
	};
	$scope.loadaddedQuotation = function()
	{
		
		$state.go('app.addedQuotation');
		
	};
	$scope.loadaddedCases = function()
	{
		
		$state.go('app.addNewCase');
		
	};
	
	
	
	$scope.getAddedRemarks = function(remarks)
	{
		//alert(remarks);
		$scope.$apply();
	};
	
	
});
 


//==========================================================//
     //--------------Migrate Table Master--------------------//
//=========================================================//

angular.module('app')

.controller('MigrationMaster',function($scope,$http)
{
			$scope.migrateTableData=function()
		   {			
			var httpRequest = $http({
					method: 'POST',
					url : "/SCA-360/getMigrateData.html",
					data: '',
			   }).success(function(data, status) 
			   {
					
			   }); 
			};
});


//==========================================================//
     //--------------User Master--------------------//
//=========================================================//

	angular.module('app')
		.controller("userMasterController",function($http,$scope)
		{
			
				$scope.userData = {'status':0,"utctimeZone":'NA'};
				var cusImage = new FormData();
				$scope.master = {};
				
				var countryObj = new Object();
				countryObj.dropdownname = "Country";
				countryObj.columnname = "country";
				countryObj.columncode = "countrycode";
				var jsonCountryString= JSON.stringify(countryObj);
				
				
				var salesmanObj = new Object();
				salesmanObj.dropdownname = "Salesman";
				salesmanObj.columnname = "salesman";
				salesmanObj.columncode = "salesmancode";
				var jsonsalesmanString= JSON.stringify(salesmanObj);
				
				var numOfPieces = 6 * 6;
				var frag = document.createDocumentFragment();

				function insertInnerPieces($el, innerPieces) 
				{
				  for (var i = 0; i < innerPieces; i++) 
				  {
				    var $inner = document.createElement('div');
			    	$inner.classList.add('popup__piece-inner');
				    $el.appendChild($inner);
				  }
				};
	
				for (var i = 1; i <= numOfPieces; i++) 
				{
				  var $piece = document.createElement('div');
				  $piece.classList.add('popup__piece');
	    
				  insertInnerPieces($piece, 3);
				  frag.appendChild($piece);
				}
	
				document.querySelector('.popup__pieces').appendChild(frag);

				var $popupsCont = document.querySelector('.popups-cont');
				var $popup = document.querySelector('.popup');
				var popupAT = 900;
	
				var overlay = jQuery('<div id="overlay"> </div>');				
				
				//------Get Country Code------
				$.ajax({
					  url:"/SCA-360/loadDropDown.do",
					  processData:true,
					  type:'POST',
					  contentType:'Application/json',
					  data:jsonCountryString,
					  success:function(responce) 
					  {
						  responce.push({"countrycode":"all","country":"All"});
						  $scope.CountryCode = responce;
					  }
				});		
				
				
					$.ajax({
					  url:"/SCA-360/loadDropDown.do",
					  processData:true,
					  type:'POST',
					  contentType:'Application/json',
					  data:jsonsalesmanString,
					  success:function(responce) 
					  {
						//  alert(JSON.stringify(responce));
						  //responce.push({"countrycode":"all","country":"All"});
						  $scope.salesmancodes = responce;
					  }
				});		
				
				//------get All Added Users----
				
				$scope.loadAllAddedUsers = function()
				{
					$.ajax({
						  url:"/SCA-360/getAllUsers.do",
						  processData:true,
						  type:'POST',
						  contentType:'Application/json',
						  data:{},
						  success:function(responce) 
						  {
							  //alert(JSON.stringify(responce));
							  $scope.AddedUserData = responce;
							  $scope.$apply();
						  }		
						 });
						 	
				};
				
				//-----Show Popup--------------
				$scope.showPopup = function(UserData)
				{					 
					//alert(JSON.stringify(UserData));
					$scope.userData = UserData;
					  overlay.appendTo(document.body);	
					  $popupsCont.classList.add('s--popup-active');
					  $popup.classList.add('s--active');
					  
					    $scope.userData.photoPath = "";
						$scope.userData.signaturePath = "";
						
						delete userData['photoPath'];
					    delete userData['signaturePath'];
					  
					 /* if(UserData.photoPath!=null && UserData.signaturePath!=null)
					  {
						  
						  var img = $('<img src="'+UserData.photoPath+'" width="200" height="150"/>', {id: 'dynamic',width:200,height:150 });
						  var img1 = $('<img src="'+UserData.signaturePath+'" width="200" height="150"/>', {id: 'dynamic',width:200,height:150 });
						  
						  var photoName = UserData.photoPath.split("/");
						  var signatureName = UserData.signaturePath.split("/");
						  
					  
						 $("#photo").attr("data-content",$(img)[0].outerHTML).popover("show");
		            	 $("#1photoinput").text("Change");
	        		     $("#2photoinput").show();
			             $("#3photoinput").val(photoName[1]);        
					 
						 $scope.dummyPhoto="1";
						 $('#dummyPhoto').trigger('blur');
						// cusImage.append("userphoto", img[0]);
						// cusImage.append("usersign", img1[0]);
					 					 
						 $("#signature").attr("data-content",$(img1)[0].outerHTML).popover("show");
			             $("#1siginput").text("Change");
        			     $("#2siginput").show();
		    	         $("#3siginput").val(signatureName[1]); 
						 $scope.dummySignature="1";
						 $('#dummySignature').trigger('blur');
					 
						 //$('#photoinput').val(UserData.photoPath);         
					  }
					  else
					  {
						  $('.image-preview').popover('hide');
						  $("#1photoinput").text("Upload Photo");
						  $("#1siginput").text("Upload Signature");
						  
						  $("#3photoinput").val("");
						  $("#3siginput").val("");
						  $("#2photoinput").hide();
						  $("#2siginput").hide();
					  }*/
					 
				};
				
				//--------User Master Submit---
				$scope.userMasterFormSubmit  = function(userData,form)
				{
					
					  
					  delete userData['photoPath'];
					  delete userData['signaturePath'];
					  
					 // alert(angular.toJson(userData));
					if($scope.userMaster.$valid) 
					{
						//alert(78789);
						
						
						
						cusImage.append("formData", angular.toJson(userData));
						
						//alert(JSON.stringify(cusImage));
						$http.post("/SCA-360/saveUsers.do", cusImage, {
						        withCredentials: true,
					        	 headers: {'Content-Type': undefined },
						       	 transformRequest: angular.identity
							  }).success(function(data, status) 
						 	   { 
							   		
									$scope.loadAllAddedUsers();	
									if(data==true)
									{
										swal("", 'User Added Successfully!' , "success");
										cusImage = new FormData();
										$('.popup__close').click();
										$scope.userData = angular.copy($scope.master);				
				    					form.$setPristine(true);
										$scope.userData = {'status':0,"utctimeZone":'NA'};
										
										$('#photo').attr("data-content","").popover('hide');
								        $('#3photoinput').val("");
								        $('#2photoinput').hide();
										$('#photoinput').val("");
										$("#1photoinput").text("Upload Photo");										
										
										$('#signature').attr("data-content","").popover('hide');
								        $('#3siginput').val("");
								        $('#2siginput').hide();
										$('#siginput').val("");
										$("#1siginput").text("Upload Photo");	
										//$scope.loadAllAddedUsers();
										$.ajax({
											  url:"/SCA-360/getAllUsers.do",
											  processData:true,
											  type:'POST',
											  contentType:'Application/json',
											  data:{},
											  success:function(responce) 
											  {
												  //alert(JSON.stringify(responce));
												  $scope.AddedUserData = responce;
												  $scope.$apply();
											  }		
											 });
										$scope.$apply();
										
									}
									else
									{
										swal("Oops sorry...", "Something went wrong!", "error");
									}
					           });							
					}
					else
					{
							//alert(1);
							var field = null, firstError = null;
							for (field in form) 
							{
								if (field[0] != '$') 
								{
									if (firstError === null && !form[field].$valid) 
									{
										firstError = form[field].$name;
									}
									if (form[field].$pristine) 
									{
										form[field].$dirty = true;
									}
								}	
							}						
					}						
				};
				
				

				/*var g = new Blob();
				cusImage.append("userphoto", g );	
				cusImage.append("usersign", g );*/	
				
				/*$scope.uploadAadharFile = function(files) 
				{	
				//alert(e.target.files);
					//alert(files);
					//alert(files.length);
					$scope.dummyPhoto="1";
					$('#dummyPhoto').trigger('blur');
					//cusImage.delete("userphoto");
					//for(var i=0;i<files.length;i++)
					//{
						cusImage.append("userphoto", files[0]);	
						//alert(JSON.stringify(cusImage));
					//}
		    											
				};*/				
				
				/*$scope.uploadSignatureFile = function(files) 
				{
					$scope.dummySignature="1";
					$('#dummySignature').trigger('blur');
					//cusImage.delete("usersign");
		    		cusImage.append("usersign", files[0]);
				};*/
				
				/*$scope.rmvUserFilePath = function()
				{
					alert(45545);
				}*/
	
				//---Reset ----
				 $scope.reset = function(form)
				{	
				   	  
					$scope.userData = angular.copy($scope.master);				
				    form.$setPristine(true);
					$scope.userData = {'status':0,"utctimeZone":'NA'};
					cusImage = new FormData();
					$('#photo').attr("data-content","").popover('hide');
			        $('#3photoinput').val("");
			        $('#2photoinput').hide();
					$('#photoinput').val("");
					$("#1photoinput").text("Upload Photo");										
								
					$('#signature').attr("data-content","").popover('hide');
			        $('#3siginput').val("");
			        $('#2siginput').hide();
					$('#siginput').val("");
					$("#1siginput").text("Upload Photo");										
					
			    };
				
				
				
		});

//==========================================================//
     //--------------Product Selection--------------------//
//=========================================================//
	

angular.module('app')
.controller("poductSelection",function($scope,$http)
{
//----------Next Wizard Button--
$scope.productSel = {"motor":'0',"freq":'50','requiredstatus':true,'alowleStartupFrq':'0',"workEnv":'0',"ipPro":'0',"mtype":'0',"motorRpm":'1450','mrun':'0','rstartup':'1'};


$scope.requiredStatus = true;

sessionStorage.setItem("formStatus",'false');

sessionStorage.setItem("model1","");
sessionStorage.setItem("model2","");
sessionStorage.setItem("model3","");
sessionStorage.setItem("mountType",'0');
sessionStorage.setItem("motorTypeVal","");


var fiftyHz = [{'value':'200'},{'value':'220'},{'value':'230'},{'value':'240'},{'value':'380'},{'value':'400'},{'value':'415'},{'value':'230/400'},{'value':'240/415'}]
var sixtyHz = [{'value':'200'},{'value':'220'},{'value':'380'},{'value':'400'},{'value':'415'},{'value':'440'},{'value':'460'},{'value':'480'},{'value':'220/380'},{'value':'220/400'},{'value':'220/440'}]
//-----Change Motor RPM----
$scope.buttonNext = function(productSel)
{
	var activeDiv = $('a.selected').attr('href');
	var divID = activeDiv.split("#");
	var currentId = divID[1].split("-");
	var formName = currentId[0]+currentId[1]+"Form";
	var formSubmitted = "submitted"+currentId[1];
	$scope[formSubmitted] = true;

	if($scope[formName].$valid)
	{
		sessionStorage.setItem("formStatus",'true');
	}
	else
	{
		sessionStorage.setItem("formStatus",'false');
	}						
};


		
//----------Previous Wizard Button--
$scope.buttonPrevious = function()
{
	
};
//----------Finish Wizard Button--
$scope.buttonFinish = function()
{
};

/*$scope.loadRequiredStatusForShaftRadial = function()
{
	$scope.productSel={'productionFlag':0};		
};*/
$scope.changeStatus = function(status)
{
	//alert(status);
	if(status=='Direct Shaft') { $scope.requiredStatus = false; } else { $scope.requiredStatus = true; }
}
//--------Calculate Transmitted Power--
$scope.calculateTransmitPower = function(ng,Tt,voltage)
{
	//alert(voltage);
	var ngVal = 0;
	var TtVal = 0;
	var tansmitPower;
	if(ng!=null) {ngVal = ng; } else { ngVal = 0; }
	if(Tt!=null) { TtVal = Tt; } else {  TtVal=0; }
	
	if(voltage!="0")
	{
		tansmitPower = ((TtVal*9550)/ngVal).toFixed(2);	
	}
	else
	{			
		tansmitPower = ((ngVal*TtVal)/9550).toFixed(2);	
	}
	if(isNaN(tansmitPower) || tansmitPower == "Infinity" ){tansmitPower = 0;}else{tansmitPower = tansmitPower;}
	$scope.productSel.calTransPower = tansmitPower;	
	
	
	$.getJSON("select.do",{calpower:tansmitPower},function(json)
	{
		
		if(json['data']!=10)
		{
			$scope.productSel.seletdMtrPwr=json['data'];
			$('#seletdmtrpwr').trigger('blur');
			//alert($scope.productSel.seletdMtrPwr);
			
			$.getJSON("getMomentofInertia.do",{wattage:json['data'],motortype:$scope.productSel.motorType},function(json)
			{						
				$scope.productSel.loadMntIntjm = json['data'][0]['mi'];
				
				var jlm = $scope.productSel.loadMntIntjlm;
				var jm = $scope.productSel.loadMntIntjm;
				if(jlm==null) { jlm = 0; }else{jlm = jlm;}
				if(jm==null) { jm = 0 ;}else{jm = jm;}
				//alert(jlm);
				//alert(jm);
				var Gd2 =jlm/jm;
				
				if(Gd2 =="Infinity" ) { Gd2 = 0;}else{ Gd2 = Gd2;}
				//alert(Gd2);
				$scope.productSel.mntIntRatio =Gd2.toFixed(2); 
				
			})
					
		}
		else
		{
			alert("Transmitted Power is greater than available range of Prest Neo Gear Motors, Please contact your local Sumitimo Sales Agent");
		}
		
	})
	
	$scope.$apply();	
	
};
//-------Get Moment of Interria-------
$scope.getMomenrOfInterria = function(mtype,watage)
{
	if(watage==null) { watage = 0; }
	$.getJSON("getMomentofInertia.do",{wattage:mtype,motortype:watage},function(json)
	{						
		$scope.productSel.loadMntIntjm = json['data'][0]['mi'].toFixed(2);
	})
};
//-------Calculate Equivalent Torque---
$scope.calculateEquivalentTorque = function(lf,Tt)
{
	var lfVal = 0;
	var TtVal = 0;
	if(lf!=null) { lfVal = lf; } else { lfVal = 0; }
	if(Tt!=null) { TtVal = Tt; } else { TtVal = 0; }
	
	var TeVal = (lfVal*TtVal);
	$scope.productSel.equivalntTorque = TeVal;
	//alert($scope.productSel.equivalntTorque);
	//if($scope.productSel.equivalntTorque!=0 || $scope.productSel.equivalntTorque!='NaN')
	//{
		$scope.getFrameSize($scope.productSel.freq,$scope.productSel.outputRpm,$scope.productSel.redRation,$scope.productSel.shaftRadial,$scope.productSel.equivalntTorque,$scope.productSel.motorType,$scope.productSel.couplingType,$scope.productSel.loadMntInt,$scope.productSel.startupFreq,$scope.productSel.mtype,$scope.productSel.alwstartup);
	//}	
	$scope.$apply();
};
//-----Calculate Shaft Radial ---------
$scope.calculateShaftRadial = function(lcf,cf,fs,pcd,Tt)
{
	var lcfVal = 0;
	var cfVal = 0;
	var fsVal = 0;
	var pcdVal = 0;
	var TtVal = 0;
	
	if(lcf!=null)   { lcfVal = lcf; }else{ lcfVal = 0; }
	if(cf!=null)   { cfVal = cf; }else{ cfVal = 0; }
	if(fs!=null)   { fsVal = fs; }else{ fsVal = 0; }
	if(pcd!=null)  { pcdVal = pcd; }else{ pcdVal = 0; }
	if(Tt!=null)   { TtVal = Tt; }else{ TtVal = 0; }
	var pcdTem = (pcdVal/2);
	if(pcdTem=="Infinity"){pcdTem = 0;}
	var prVal = (TtVal*lcfVal*cfVal*fsVal)/pcdTem;
	if(isNaN(prVal)) {prVal = 0;  } else {prVal = prVal;}
	   $scope.productSel.shaftRadial = prVal.toFixed(2);
	//alert($scope.productSel.shaftRadial);
	//if($scope.productSel.shaftRadial!=0.00  || $scope.productSel.shaftRadial!='NaN')
	//{
		$scope.getFrameSize($scope.productSel.freq,$scope.productSel.outputRpm,$scope.productSel.redRation,$scope.productSel.shaftRadial,$scope.productSel.equivalntTorque,$scope.productSel.motorType,$scope.productSel.couplingType,$scope.productSel.loadMntInt,$scope.productSel.startupFreq,$scope.productSel.mtype,$scope.productSel.alwstartup);
	//}	
	$scope.$apply();
};

//----Calculate Load Moment Intertia Shaft Axis---
$scope.calculateShaftAxis = function(Jl,Z)
{
	var JlVal = 0;
	var ZVal = 0;
	
	if(Jl!=null) { JlVal = Jl;}else{JlVal = 0;}
	if(Z!=null) { ZVal = Z;}else{ZVal = 0;}
	var SquareVal = 1/ZVal;
	if(SquareVal=="Infinity") { SquareVal = 0;}
	var jlmVal = JlVal*SquareVal*SquareVal;
	if(jlmVal==null){jlmVal = 0;}else{jlmVal = jlmVal;}
	$scope.productSel.loadMntIntjlm = jlmVal.toFixed(2);
	//alert($scope.productSel.loadMntIntjlm);
	var jlm = $scope.productSel.loadMntIntjlm;
	var jm = $scope.productSel.loadMntIntjm;
	//alert(jm);
	if(jlm==null) { jlm = 0 }else{jlm = jlm;}
	if(jm==null) { jm = 0 }else{jm = jm;}
	
	var Gd2 =jlm/jm;
	//alert(Gd2);
	if(Gd2=="Infinity") { Gd2 = 0;}else{Gd2 = Gd2; }
	$scope.productSel.mntIntRatio =Gd2.toFixed(2); 			
	//alert($scope.productSel.mntIntRatio);
	$scope.getFrameSize($scope.productSel.freq,$scope.productSel.outputRpm,$scope.productSel.redRation,$scope.productSel.shaftRadial,$scope.productSel.equivalntTorque,$scope.productSel.motorType,$scope.productSel.couplingType,$scope.productSel.loadMntInt,$scope.productSel.startupFreq,$scope.productSel.mtype,$scope.productSel.alwstartup);	
	
	$scope.$apply();		
};

//------Calculate Redution Ratio--------

$scope.calculateReductionRatio = function(rpm,ng)
{
	
	var rpmVal =0;
	var ngVal =0;
	//alert(rpm);
	//alert(ng);
	if(rpm!=null) { rpmVal = $scope.productSel.motorRpm;}else{rpmVal = 0;}
	if(ng!=null) { ngVal = ng;}else{ngVal = 0;}
	//alert(rpmVal);
	var redRatio = rpmVal/ngVal;
	if(redRatio=="Infinity") { redRatio = 0; }
	
	$scope.productSel.calculatedRed = redRatio.toFixed(2);
	
	
	$.getJSON("getReductionRatio.do",{frequency:rpm,rpm:ngVal},function(json)
	{
		//alert(JSON.stringify(json['data']));
	$scope.productSel.redRation = json['data'];
	//alert("red "+ $scope.productSel.redRation);
	//if($scope.productSel.redRation!=0)
	//{
		$scope.getFrameSize($scope.productSel.freq,$scope.productSel.outputRpm,$scope.productSel.redRation,$scope.productSel.shaftRadial,$scope.productSel.equivalntTorque,$scope.productSel.motorType,$scope.productSel.couplingType,$scope.productSel.loadMntInt,$scope.productSel.startupFreq,$scope.productSel.mtype,$scope.productSel.alwstartup);
		$scope.$apply();
	//}	
	})		 	
	
	
	
};


$scope.frequency = function(frequencyvalue)
{
	if(frequencyvalue==50){ $scope.productSel.motorRpm = '1450'; }else{ $scope.productSel.motorRpm='1750';  }
	//alert(frequencyvalue);
	
	$.getJSON("getVoltages.do",{frequencey:frequencyvalue},function(json)
	{
		//alert(JSON.stringify(json['data']));
		$scope.v=json['data'];
		$scope.$apply();			
	})		 	
};

$scope.CouplingTypes = function()
{
	$.getJSON("getCouplingTypes.do",function(json)
	{
		$scope.c=json['data'];
		
	})		 	
};

$scope.Locatinfactor = function()
{
	$.getJSON("getLocationfactor.do",function(json)
	{
		$scope.l=json['data'];
	})		 	
};
		
$scope.Couplingfactor = function()
{
	$.getJSON("getCouplingFactor.do",function(json)
	{
		$scope.co=json['data'];
	})		 	
};

$scope.shockfactor = function()
{
	$.getJSON("getShockFactor.do",function(json)
	{
		$scope.sh=json['data'];
	})		 	
};
				
$scope.loadcontition = function()
{
	$.getJSON("getLoadTypes.do",function(json)
	{
		
		$scope.ldt=json['data'];
	})		 	
};


$scope.getLoadFactor = function(loadtype,hours)
{
	if(loadtype!=null && hours!=null)
	{	
		$.getJSON("getLoadFactor.do",{loadtype:loadtype,hours:hours},function(json)
		{
			 	$scope.productSel.loadFactor=json['data'];
				$('#loadfactor').trigger('blur');
		})				
	}
};		

var intarray = ['3','5','10','15','20','25','30','35','40','50','60','80','100','120','160','200'];

function getVal(array, val, dir) 
{
  for (var i=0; i < array.length; i++) 
  {
      if (array[i] > val)
	  {
        return array[i];
      }
  }
}

$scope.getRadialNodeValues = function(frq)
{
	$.getJSON("OutputSpeedR.do",{frequency:frq},function(json)
	{
			$scope.productSel.allowableRadial = json['data'][0]['RadialLoadN'];
	})						  	
};

//-----------load Allowable Freaquencys on radion buton click-------

$scope.loadAllowableFreq = function(rstartup,couplingType)
{
  //alert(rstartup);
  if(rstartup==0)
  {	
  	//alert(2);
	$.getJSON("getallowablefrequencies.do",{couplingType:couplingType},function(json)
	{
				$scope.allowableFreqVal = json['data'];
				$('#loadmntint').trigger('blur');
				
	})
	//$scope.validStatus=false;
  }
  else
  {
	//  $scope.validStatus=false;
  }
  $scope.$apply();
};

//-----------Change Tourque Placeholder on kw Change-----
$scope.changeTtPlaceholder = function(voltage,rpm,tt)
{
  var rpmKw = 0;
  var ttKw = 0;
  
  if(rpm==null) { rpmKw=0; }else { rpmKw = rpm; } 
  if(tt==null) { ttKw=0; }else { ttKw = tt; } 
  
 
  if(voltage!="0")
  {			  
	   $scope.transTorquepl = "Power to move Load Pab";
	   
	   $scope.$apply();
	  var calc = (ttKw*9550)/rpmKw;
	  $scope.productSel.calTransPower  = calc.toFixed(2);
	  $('#caltranspower').val(calc.toFixed(2));
	// alert($scope.transTorque);
	 // $('#transtorque').trigger('blur'); 
  }
  else
  {
	 
	 $scope.transTorquepl = "Transmitted Torque(Nm)";  
	 var calc = (ttKw*rpmKw)/9550;
	 $scope.productSel.calTransPower  = calc.toFixed(2);
	 $('#caltranspower').val(calc.toFixed(2));
	  //alert($scope.transTorque);
	 // $('#transtorque').trigger('blur');
  }
  
};

//--------get Frame Sixe---
$scope.getFrameSize = function(freq,opRpm,z,pr,te,mType,coupType,jl,strtFrq,mounttype,allowablefreq,selectMotr,voltage)
{
  //alert(coupType);
  var freqVal=0;
  var opRpmVal=0;
  var zVal=0;
  var prVal=0;
  var teVal=0;
  var mTypeVal="";
  var coupTypeVal="";
  var jlVal=0;
  var strtFrqVal=0;
  var selectMotrVal = "";
  var voltageVal = "0";
  
  if(selectMotr==null) { selectMotrVal = ""; } else { selectMotrVal = selectMotr;  }
  if(voltage==null) { voltageVal = ""; } else { voltageVal = voltage;  }
  
  if(allowablefreq==null) { var allowablefrequency = 0;  } else { var allowablefrequency = allowablefreq; }
 // var mounttypeVal = 0;
  if(mounttype==0) { mounttype="Foot Mount"; } else { mounttype="Flange mount"; }
 // alert(jl);
  if($scope.productSel.mrun==0) { jl=0; strtFrq=0; }
  
  if(freq==null) {	freqVal=0; } else { freqVal =freq; }		  
  if(opRpm==null) { opRpmVal=0;} else { opRpmVal =opRpm; }
  if(z==null) {	zVal=0; }  else { zVal = z;}
  if(pr==null) { prVal=0; }  else { prVal=pr; }
  if(te==null) { teVal=0; }  else { teVal =te; }
  if(mType==null) { mTypeVal=""; }  else { mTypeVal =mType; }
  if(coupType==null) { coupTypeVal=""; }  else { coupTypeVal =coupType; }
  if(jl==null) { jlVal=0; }  else { jlVal =jl; }
  if(strtFrq==null) { strtFrqVal=0; }  else { strtFrqVal =strtFrq; }
  
 
 
  // if(MountType==0) { MountType="Foot Mount"; } else { MountType="Flange mount"; }
  //,wattage:selectMotr,voltage:voltageVal
  
 $.getJSON("getframesize.do",{frequency:freqVal,outputRpm:opRpmVal,redRatio:zVal,shaftRad:prVal,eTorque:teVal,motorRype:mTypeVal,couplingType:coupTypeVal,mmntRatio:jlVal,strtFrq:strtFrqVal,mounttype:mounttype,allowablefrequency:allowablefrequency,wattage:selectMotr,voltage:voltageVal},function(json)
 {				
 		
	 	//alert("1");
 		// $('#capacityframe').trigger('blur');
		
		$('#allowableradial').val(json['radialnode']);
		$('#capacityframe').val(json['frame']);
		$('#seletdmtrpwr').val(json['kws']);
		
		$('#loadmntintjm').val(json['jm'].toFixed(2));
		$('#loadmntintjlm').val(json['jlm'].toFixed(2));
		$('#mntintratio').val(json['ratio'].toFixed(2));
		$('#alowlestartupfrq').val(json['allowablefrequency']);
		
		
		//----------Result Data----
			$('#kwsResult').text(json['kws']);
			$('#freqResult').text($scope.productSel.freq);
			$('#voltageResult').text($scope.productSel.voltage);
			$('#mtypeResult').text($scope.productSel.motorType);
			$('#outputspeedResult').text($scope.productSel.outputRpm);
			$('#transmittedtorqueResult').text($scope.productSel.transTorque);
			$('#couplingtypeResult').text($scope.productSel.couplingType);
			$('#transmittedpowerResult').text($scope.productSel.calTransPower);
			var model40="";
		//-------------------------
		/*var frameSplit = json['frame'].split('-');
		
		var model1="";
		var model2="";
		var model3="";
		var model40="";
		var model41="";
		
		
		for(var i=0;i<frameSplit[1].length;i++) { model1 +="<li class='captchaItem'>"+frameSplit[1][i]+"</li>"; }
		model1 +="<li class='captchaItem'>-</li>";
		for(var j=0;j<frameSplit[0].length;j++) { model2 +="<li class='captchaItem'>"+frameSplit[0][j]+"</li>"; }
		model2 +="<li class='captchaItem'>-</li>";				
		for(var k=0;k<frameSplit[2].length;k++) { model3 +="<li class='captchaItem'>"+frameSplit[2][k]+"</li>"; }
						
		sessionStorage.setItem("model1",model1);
		sessionStorage.setItem("model2",model2);
		sessionStorage.setItem("model3",model3);
		
		var model4 =  sessionStorage.getItem("model4");
		
		var mountType = sessionStorage.getItem("mountType");
		var motorTypeVal = sessionStorage.getItem("motorTypeVal");
		
		if((mountType=="Foot Mount" && motorTypeVal=="w/ brake") || (mountType=="Flange mount" && motorTypeVal=="w/ brake"))
		{
			$('#sortable').html(model4+model2+model1+model3);
			//$('#modelNumberResult').text(model4+model2+model1+model3);
		}
		else if((mountType=="Foot Mount" && motorTypeVal=="w/o brake") || (mountType=="Flange mount" && motorTypeVal=="w/o brake"))
		{
			//alert('else');
			var finalModelNumber =  sessionStorage.getItem("finalModelNumber");
			var modelSplit = finalModelNumber.split("-");
			for(var i=0;i<modelSplit[0].length;i++) { model40 +="<li class='captchaItem'>"+modelSplit[0][i]+"</li>"; }
			for(var j=0;j<modelSplit[1].length;j++) { model41 +="<li class='captchaItem'>"+modelSplit[1][j]+"</li>"; }
			
			$('#sortable').html(model40+model2+model1+model41+model3);
			//$('#modelNumberResult').text(model40+model2+model1+model41+model3);
		}		*/
			
			for(var i=0;i<json['modelnumber'].length;i++) {  model40 +="<li class='captchaItem'>"+json['modelnumber'][i]+"</li>"; }
			$('#modelNumberResult').text(json['modelnumber']);
			$('#sortable').html(model40);
			
			$scope.$apply();
 })						  	
};

//------Get Final Model Number----------
$scope.getFinalModelNumber = function(motorType,MountType)
{
 /* var motorTypeVal="",MountTypeVal="",finalModelNumber="",model4="",model40="",model41="";
  
  
  if(MountType==0) { MountType="Foot Mount"; } else { MountType="Flange mount"; }
  
  if(MountType==null) { MountTypeVal = ""; } else { MountTypeVal=MountType; }
  if(motorType==null) { motorTypeVal = ""; } else { motorTypeVal=motorType; }
  
 // if(MountTypeVal!="" && motorTypeVal!="")
  //{
	  if(MountTypeVal=="Foot Mount" && motorTypeVal=="w/ brake") { finalModelNumber = "ZNHM"; }
	  if(MountTypeVal=="Foot Mount" && motorTypeVal=="w/o brake") { finalModelNumber = "ZNHM-B"; }
	  
	  if(MountTypeVal=="Flange mount" && motorTypeVal=="w/ brake") { finalModelNumber = "ZNFM"; }
	  if(MountTypeVal=="Flange mount" && motorTypeVal=="w/o brake") { finalModelNumber = "ZNFM-B"; }			  
  //}		 

 var model1 =  sessionStorage.getItem("model1");
 var model2 =  sessionStorage.getItem("model2");
 var model3 =  sessionStorage.getItem("model3");
 
// alert(finalModelNumber);
 sessionStorage.setItem("mountType",MountType);
 sessionStorage.setItem("motorTypeVal",motorTypeVal);
 
 //if((MountTypeVal=="Foot Mount" && motorTypeVal=="w/ brake") || (MountTypeVal=="Flange mount" && motorTypeVal=="w/ brake"))
 if((MountType=="Foot Mount" && motorTypeVal=="w/ brake") || (MountType=="Flange mount" && motorTypeVal=="w/ brake"))
 {
	 //alert("if");
	 
	for(var i=0;i<finalModelNumber.length;i++) { model4 +="<li class='captchaItem'>"+finalModelNumber[i]+"</li>"; }
	sessionStorage.setItem("model4",model4);
 	$('#sortable').html(model4+model2+model1+model3);
	//$('#modelNumberResult').text(model4+model2+model1+model3);
 }
 else if((MountType=="Foot Mount" && motorTypeVal=="w/o brake") || (MountType=="Flange mount" && motorTypeVal=="w/o brake"))
 {
	 //alert("else");
	 var modelSplit = finalModelNumber.split("-");
	// alert(modelSplit[1]);
	 for(var i=0;i<modelSplit[0].length;i++) { model40 +="<li class='captchaItem'>"+modelSplit[0][i]+"</li>"; }
	 for(var j=0;j<modelSplit[1].length;j++) { model41 +="<li class='captchaItem'>"+modelSplit[1][j]+"</li>"; }
	 //alert(model40);
	// alert(model41);
	 sessionStorage.setItem("finalModelNumber",finalModelNumber);
	 $('#sortable').html(model40+model2+model1+model41+model3);
	 //$('#modelNumberResult').text(model40+model2+model1+model41+model3);
 }	  */
};

//---------------Testing---------
$scope.testing = function()
{
  var freqVal=50;
  var opRpmVal=483;
  var zVal=3;
  var prVal=21.33;
  var teVal=15;
  var mTypeVal="w/ brake";
  var coupTypeVal="Direct Shaft";
  var jlVal=0.004;
  var strtFrqVal=2;	
  var mounttype = "Foot Mount";
  
  
$.getJSON("getframesize.do",{frequency:freqVal,outputRpm:opRpmVal,redRatio:zVal,shaftRad:prVal,eTorque:teVal,motorRype:mTypeVal,couplingType:coupTypeVal,mmntRatio:jlVal,strtFrq:strtFrqVal,mounttype:mounttype},function(json)
 {
	 	alert(JSON.stringify(json));
 });
};

});	

//============================================//
    //=====New Case Management====//
//===========================================//

angular.module('app')
.controller("newCaseManagement",function($scope,$http,$filter,$rootScope,$timeout,$route,$state)
{

		var DropDownLoadTBox = new Object();
        DropDownLoadTBox.dropdownname = "TerminalBox";
        DropDownLoadTBox.columnname = "tbox";
        DropDownLoadTBox.columncode = "id";
        var jsonStringDropDownTBox = JSON.stringify(DropDownLoadTBox);
		
		var cableEntryObj = new Object();
        cableEntryObj.dropdownname = "CableEntry";
        cableEntryObj.columnname = "cableentry";
        cableEntryObj.columncode = "id";
        var jsonCableEntryString = JSON.stringify(cableEntryObj);
		
		$scope.master ={};
        $scope.addCase = ({'qtnMaster':'1','orginReq':'0','qtnType':'0'});
		
		 var cusImage = new FormData();
 	
		  var cusImageComp = new FormData();
		  
		   var cusImageSumit = new FormData();
			
		   var cusImageSpare = new FormData();
			
		   var cusImageTech = new FormData();
 
       $scope.loadAddedCustomers = function()
			{
				$.post("getAllAccountNames.do",function(json)
						{
					
					       
					       
							$scope.customerNameArr = json['data'];
					        $scope.$apply();
						});
			 
			};
    
	    $scope.loadAddedCustomerCodes = function()
			{
				$scope.customerCodeArr = [];
				$.post("getAllCustmerCopdes.do",function(json)
						{
					
					        //alert(JSON.stringify(json['data']));
					         $scope.customerCodeArr = json['data'];
							 //alert(JSON.stringify($scope.customerCodeArr));
					         $scope.$apply();
						});
						
			 
			};
			$scope.loadProspectCustomerNameForNewCase = function()
			{
				$scope.customerNameProspectNewCase = [];
				
					
					$.post("getAllProspectAccountNames.do",function(json)
						{
							//alert(JSON.stringify(json));
							$scope.customerNameProspectNewCase = json['data'];
							$scope.$apply();
						});
			};
			$scope.loadCustomerProspectCodeForNewCase = function()
			{
				$scope.custCodeProspectNewCase = [];
				$.post("getAllProspectCustmerCodes.do",function(json)
						{
							//alert(JSON.stringify(json));
							$scope.custCodeProspectNewCase = json['data'];
							$scope.$apply();
						});
			};
			
			$scope.assignDepartmentData = [];
		$scope.loadAssignDepartments = function()
		{
			
			$.post("departmentViewForCase.do",function(json)
			{
				//alert(JSON.stringify(json));
				$scope.assignDepartmentData = json['data'];
				var data = $scope.assignDepartmentData;
					$scope.assigned = data;
					
					var optionValues = "";
					for (var i = 0; i < data.length; i++) {
						optionValues += "<option value='" + data[i].departmentnameshortcut + "'>" + data[i].assigned + "</option>";
					}
					$('#picturegallery').empty();
					var newOption = $(optionValues);
		
					$('#picturegallery').append(newOption);
					$('#picturegallery').trigger("chosen:updated");
				
			    $scope.$apply();
			});		
		};
		
	   $scope.loadCaseStatus = function()
	   {
		   $scope.caseStatusData =  [{ id: '1', custStatus:'Close' }, { id: '2', custStatus: 'Open' },{ id: '3', custStatus: 'Process' }]; 
	   }
	   $scope.loadCasePriority = function()
	   {
		   $scope.casePriorityData =  [{ id: '1', casePriority:'Normal' }, { id: '2', casePriority: 'Moderate' },{ id: '3', casePriority: 'Urgent(Top Escalated Priority)' }]; 
	   }
	   
	  /* $scope.gotofromcasetoquotation = function(QtnType)
	   {
		   $.post("getpro_grp.do",{qtnType:QtnType},function(json)
			{
									
									
									
			});
	   };*/
	   
	   	//==========New Selection Start============//	  
	  
	$scope.dataField = [];
    $indexTab1=0;

		$scope.addFormField = function() 
			{
				
				$indexTab1++;
				$scope.dataField.push({'id':$indexTab1,'gm':'0','model':'0','quantity':'1','ambientTemp':'40','pole':'4','rpm':'1450','phase':'3','motorType':'NO','gearProduct':'CYCLO 6000','voltage':'200','hertz':'50','basefreq':'1','protectionGrade': 'IP55','internationalStd': 'JIS','mtrEfficncyClass':'0','inverter':'1','motorBrake':'1','motorBrakeVolt':'1','conf':'0','mount':'0','oshaft':'0','mount2':'0',oshaftInc1:false,oshaftInc2:false,'ishaft':'0','jadapt':'0','basePlate':'0','oshafty':'0','oshafty2':'4','backStop':'0','rot':'0','hssRadialLoadKn':'0','hssRadialLoadMm':'0','hssAxialLoadKn':'0','sssRadialLoadKn':'0','sssRadialLoadMm':'0','sssAxialLoadKn':'0','dirHssAxial':'0','dirSssAxial':'0','presetTorqueRot':'0','terminalBox':'N33','cableEntry':'N3A','altitude':'0m'});
				
				$scope.$apply();
			};
			
			var idNewSelection="";
			$scope.removeFormRow = function(name)
			{	
			idNewSelection=name;
			   // alert(name);
			   var overlay = jQuery('<div id="overlay"> </div>');	
						 overlay.appendTo(document.body);	
					 $("#popup_box").show();
					 
			  // var result = confirm("Are you sure you want to delete?");
			
				//}
		   };
		   
		   $scope.RemoveRowPopup = function()
		   {
			var IndexTab1 = -1;		
				var comArrTab1 = eval( $scope.dataField );
				//if(result == true)
				//{
					for( var i = 0; i < comArrTab1.length; i++ ) 
					{
						//alert(idNewSelection);
						if( comArrTab1[i].id === idNewSelection ) 
						{
							IndexTab1 = i;
							break;
						}				
					}
					$scope.dataField.splice( IndexTab1, 1 );
					$indexTab1 = comArrTab1.length;
					for(var s=0;s<$indexTab1;s++)
					{
						$scope.dataField[s].id = Number(s)+Number(1);
					}
					 $("#popup_box").hide();
					 $("#overlay").remove();
			};
				$scope.cancelConfirmPopup=function(){
					$("#popup_box").hide();
					 $("#overlay").remove();
					}	
					
					
		   //==========Competitor Replace Start============//
		  $scope.dataCompetitor = [];
		
			$indexTab2=0;
			$scope.addCompetitorForm = function() 
				{
					
					$indexTab2++;
					$scope.dataCompetitor.push({'id':$indexTab2,'gm':'0','model':'0','ambientTemp':'40','pole':'4','rpm':'1450','motorType':'NO','voltage':'200','phase':'3','quantity':'1','gearProduct':'CYCLO 6000','hertz':'50','basefreq':'1','protectionGrade': 'IP55','internationalStd': 'JIS','mtrEfficncyClass':'0','inverter':'1','motorBrake':'1','motorBrakeVolt':'1','dimension':'0','conf':'0','mount':'0','mount2':'0',oshaftInc1:false,oshaftInc2:false,'ishaft':'0','jadapt':'0','oshaft':'0','oshafty':'0','oshafty2':'4','backStop':'0','rot':'0','hssRadialLoadKn':'0','hssRadialLoadMm':'0','hssAxialLoadKn':'0','sssRadialLoadKn':'0','sssRadialLoadMm':'0','sssAxialLoadKn':'0','dirHssAxial':'0','dirSssAxial':'0','presetTorqueRot':'0','terminalBox':'N33','cableEntry':'N3A','altitude':'0m'})
					
				};
				
				var idCompetitor="";
				$scope.removeCompetitorRow = function(name)
				{
					idCompetitor=name;
					var overlay = jQuery('<div id="overlay"> </div>');	
						 overlay.appendTo(document.body);	
					 $("#popup_boxcomp").show();
					//var result = confirm("Are you sure you want to delete?");
					
					//}
			   };
			   
			   $scope.RemoveRowPopupcomp = function()
			   {
				   var IndexTab2 = -1;		
					var comArrTab2 = eval( $scope.dataCompetitor );
					//if(result == true)
					//{
						for( var j = 0; j < comArrTab2.length; j++ ) 
						{
							if( comArrTab2[j].id === idCompetitor ) 
							{
				
								IndexTab2 = j;
								break;
							}				
						}
						$scope.dataCompetitor.splice( IndexTab2, 1 );
						$indexTab2 = comArrTab2.length;
						for(var t=0;t<$indexTab2;t++)
						{
							$scope.dataCompetitor[t].id = Number(t)+Number(1);
						}
						$("#popup_boxcomp").hide();
						$("#overlay").remove();
				   
			   };
			   
			   $scope.cancelConfirmPopupcomp = function()
			   {
					 $("#popup_boxcomp").hide();
					 $("#overlay").remove();
			   };
			   
				//========Sumitomo Replace Tab==========//
		$scope.dataSumitomo = [];
		$indexTab3=0;
		$scope.addSumitomoField = function() 
			{
				
				$indexTab3++;
				$scope.dataSumitomo.push({'id':$indexTab3,'gm':'0','model':'0','ambientTemp':'40','pole':'4','phase':'3','rpm':'1450','motorType':'NO','voltage':'200','quantity':'1','gearProduct':'CYCLO 6000','hertz':'50','basefreq':'1','protectionGrade': 'IP55','internationalStd': 'JIS','mtrEfficncyClass':'0','inverter':'1','motorBrake':'1','motorBrakeVolt':'1','dimension':'1','conf':'0','mount':'0','ishaft':'0','jadapt':'0','oshaft':'0','mount2':'0',oshaftInc1:false,oshaftInc2:false,'oshafty':'0','oshafty2':'4','backStop':'0','rot':'0','hssRadialLoadKn':'0','hssRadialLoadMm':'0','hssAxialLoadKn':'0','sssRadialLoadKn':'0','sssRadialLoadMm':'0','sssAxialLoadKn':'0','dirHssAxial':'0','dirSssAxial':'0','presetTorqueRot':'0','terminalBox':'N33','cableEntry':'N3A','altitude':'0m'})
			};
			
			var idSumitomo="";
			$scope.removeSumitomoRow = function(name)
			{	
				//var result = confirm("Are you sure you want to delete?");
				
				//}
				idSumitomo=name;
					var overlay = jQuery('<div id="overlay"> </div>');	
						 overlay.appendTo(document.body);	
					 $("#popup_boxsumit").show();
		   };
		   
		   $scope.RemoveRowPopupsumit = function()
		   {
			   var IndexTab3 = -1;		
				var comArrTab3 = eval( $scope.dataSumitomo );
				//if(result == true)
				//{
					for( var k = 0; k < comArrTab3.length; k++ ) 
					{
						if( comArrTab3[k].id === idSumitomo ) 
						{
							IndexTab3 = k;
							break;
						}				
					}
					$scope.dataSumitomo.splice( IndexTab3, 1 );
					$indexTab3 = comArrTab3.length;
					for(var l=0;l<$indexTab3;l++)
					{
						$scope.dataSumitomo[l].id = Number(l)+Number(1);
					}
					 $("#popup_boxsumit").hide();
					 $("#overlay").remove();
		   };
		   
		   $scope.cancelConfirmPopupsumit = function()
			   {
					 $("#popup_boxsumit").hide();
					 $("#overlay").remove();
			   };
		   
		   //========Spare Part Tab==========//
		
		$scope.dataSparePart = [];
		$indexTab4=0;
		$indexPart = 0;
		   $scope.addSparePartField = function() 
			{
				$indexTab4++;
				$scope.dataSparePart.push({'id':$indexTab4,'gm':'0','pole':'4','rpm':'1450','phase':'3','quantity':'1','gearProduct':'CYCLO 6000','hertz':'50','basefreq':'1','protectionGrade': 'IP55','internationalStd': 'JIS','motorType':'NO','voltage':'200','mtrEfficncyClass':'0','model':'0','inverter':'1','motorBrake':'1','mtrsnosts':true,'motorBrakeVolt':'1','terminalBox':'N33','cableEntry':'N3A', childData: [{'id':0}] });
				$indexPart = 0;
			}
			$scope.insertChild = function (index,parentId) 
			{
						
						//alert(JSON.stringify($scope.dataSparePart[index].childData.length));
						//alert(index);
						//alert($('#name'+ parentId).length);
						$indexPart = $scope.dataSparePart[index].childData.length;
						
						$scope.dataSparePart[index].childData.push({ 'id':$indexPart });
						//alert(JSON.stringify($scope.dataSparePart[index].childData));
						$indexPart++;
			}
		
			var idSparePart="";
			$scope.removeSparePart = function(name)
			{
				idSparePart=name;
					var overlay = jQuery('<div id="overlay"> </div>');	
						 overlay.appendTo(document.body);	
					 $("#popup_boxspare").show();
				// var result = confirm("Are you sure you want to delete?");
				 
				
				//}
			};
			$scope.RemoveRowPopupspare = function()
			{
				var IndexTab4 = -1;		
				var comArrTab4 = eval( $scope.dataSparePart );
				//if(result == true)
				//{
					for( var p = 0; p < comArrTab4.length; p++ ) 
					{
						if( comArrTab4[p].id === idSparePart ) 
						{
							IndexTab4 = p;
							break;
						}
										
					}
					$scope.dataSparePart.splice( IndexTab4, 1 );
					$indexTab4 = comArrTab4.length;
					for(var m=0;m<$indexTab4;m++)
					{
						$scope.dataSparePart[m].id = Number(m)+Number(1);
					}
					$("#popup_boxspare").hide();
					 $("#overlay").remove();
			};
			
			 $scope.cancelConfirmPopupspare = function()
			   {
					 $("#popup_boxspare").hide();
					 $("#overlay").remove();
			   };
			   
				var idSparePartChild="";
				var curidSparePartChild="";
			
			$scope.removeChild = function(name,curId)
					{
						//var result = confirm("Are you sure you want to delete?");
						//alert(JSON.stringify($scope.comments[curId-1].reply));
						//alert(name);
						//alert(eval( $scope.comments[name].reply ) + "-------------comArrTab1");
						idSparePartChild = name;
						curidSparePartChild = curId;
						var overlay = jQuery('<div id="overlay"> </div>');	
							 overlay.appendTo(document.body);	
						 $("#popup_boxsparechild").show();
					 
						
						//}
					};
					
					$scope.RemoveRowPopupsparechild = function()
					{
						
						var IndexTab1 = 0;		
						var comArrTab1 = eval( $scope.dataSparePart[curidSparePartChild-1].childData );
						//if(result == true)
						//{
							for( var i = 0; i < comArrTab1.length; i++ ) 
							{
								//alert(comArrTab1[i].id);
								//alert(name +"----------name");
								if( comArrTab1[i].id === idSparePartChild ) 
								{
									IndexTab1 = i;
									//alert(IndexTab1 + "------------IndexTab1");
									break;
								}				
							}
							$scope.dataSparePart[curidSparePartChild-1].childData.splice( IndexTab1, 1 );
							//alert($indexTab1);
							$indexPart = comArrTab1.length;
							for(var s=0;s<$indexPart;s++)
							{
								$scope.dataSparePart[curidSparePartChild-1].childData[s].id = Number(s);
							}
							
							 $("#popup_boxsparechild").hide();
							 $("#overlay").remove();
					};
					
					 $scope.cancelConfirmPopupsparechild = function()
					   {
						 
							 $("#popup_boxsparechild").hide();
							 $("#overlay").remove();
					   };
					
						 //========Tech Query Tab==========//
		$scope.dataQuery = [];
		$indexTab5=0;
		
		$scope.addtechQueryField = function() 
			{
				
				$indexTab5++;
				$scope.dataQuery.push({'id':$indexTab5,'gm':'0','model':'0','ambientTemp':'40','pole':'4','rpm':'1450','phase':'3','motorType':'NO','voltage':'200','quantity':'1','gearProduct':'CYCLO 6000','hertz':'50','basefreq':'1','protectionGrade': 'IP55','internationalStd': 'JIS','mtrEfficncyClass':'0','inverter':'1','motorBrake':'1','motorBrakeVolt':'1','conf':'0','mount':'0','mount2':'0',oshaftInc1:false,oshaftInc2:false,'ishaft':'0','jadapt':'0','oshaft':'0','oshafty':'0','oshafty2':'4','backStop':'0','rot':'0','hssRadialLoadKn':'0','hssRadialLoadMm':'0','hssAxialLoadKn':'0','sssRadialLoadKn':'0','sssRadialLoadMm':'0','sssAxialLoadKn':'0','dirHssAxial':'0','dirSssAxial':'0','presetTorqueRot':'0','terminalBox':'N33','cableEntry':'N3A','altitude':'0m'})
			};
			
			 var idtechQuery="";
			 
			$scope.removetechQueryRow = function(name)
			{	
				idtechQuery=name;
					var overlay = jQuery('<div id="overlay"> </div>');	
						 overlay.appendTo(document.body);	
					 $("#popup_boxtech").show();
			   // alert(name);
			  // var result = confirm("Are you sure you want to delete?");
				
				//}
		   };
		   $scope.RemoveRowPopuptech = function()
		   {
			   var IndexTab5 = -1;		
				var comArrTab5 = eval( $scope.dataQuery );
				//if(result == true)
				//{
					for( var q = 0; q < comArrTab5.length; q++ ) 
					{
						if( comArrTab5[q].id === name ) 
						{
							IndexTab5 = q;
							break;
						}				
					}
					$scope.dataQuery.splice( IndexTab5, 1 );
					$indexTab5 = comArrTab5.length;
					for(var n=0;n<$indexTab5;n++)
					{
						$scope.dataQuery[n].id = Number(n)+Number(1);
					}
					$("#popup_boxtech").hide();
					 $("#overlay").remove();
		   };
			
			 $scope.cancelConfirmPopuptech = function()
			   {
					 $("#popup_boxtech").hide();
					 $("#overlay").remove();
			   }; 
			   
			   
			      $scope.getApplicatiosData = function(){
				   $scope.applicationData = [];
				  $.post("getAllApplications.do",function(json)
							{
								//alert(JSON.stringify(json['data']));application,applicationshortcutnamename
								 $scope.applicationData = json['data'];
								 $scope.$apply();
							});
							
							 
			   }
			   
			  
				   
			$scope.getGearProductType = function()
				  {
					  $scope.gearProductData = [];
					 
					 
						$.post("getpro_grp.do",function(json)
								{
									//alert(JSON.stringify(json['data']));
									 $scope.gearProductData = json['data'];
									 $scope.$apply();
								});
				  };
				  
				  $scope.getMotorType = function()
				  {
					  //$scope.motorTypeData = [{ id: '1', motorType: 'IE2' }, { id: '2', motorType: 'IE3' },{ id: '3', motorType: 'Ex-proof' }, { id: '4', motorType: 'eG3' },{ id: '5', motorType: 'AF 60Hz' }]; 
					  $.post("getexlositionclassfication.do",function(json)
								{
									//alert(JSON.stringify(json['data']));
									 $scope.motorTypeData = json['data'];
									 $scope.$apply();
								});
				  };
				  
				  $scope.getMotorKw = function()
				  {
					 // alert(545656);
					  //$scope.motorKWData = [];
					// $scope.motorKWData = [{ 'id': 0.1,'motorKW': 0.1 }, { 'id': 0.2, 'motorKW': 0.2 },{ 'id': 0.25, 'motorKW': 0.25 }, { 'id': 0.4, 'motorKW': 0.4 },{ 'id': 'OTHER', 'motorKW': 'OTHER' }]; 
					 $.post("getmtr_kw.do",function(json)
								{
									 //alert(JSON.stringify(json));
									$scope.motorKWData = json['data'];
						
									 $scope.$apply();
								});
				  };
				  
				  $scope.getMotorPole = function()
				  {
					  $scope.poleData = [{ id: '1', pole: '4' }, { id: '2', pole: '6' },{ id: '3', pole: '8' }, { id: '4', pole: '10' }]; 
				  };
				  
				  $scope.getMotorPhase = function()
				  {
					  $scope.phaseData = [{ id: '1', phase: '1' }, { id: '2', phase: '3' }]; 
				  };
				  
				  $scope.getMotorVoltage = function()
				  {
					  //$scope.voltageData = [{ id: '1', voltage: '200' }, { id: '2', voltage: '220' },{ id: '3', voltage: '230' }]; 
					  $.getJSON("getVoltagesforcase.do",function(json)
								{
									//alert(JSON.stringify(json['data']));
									 $scope.voltageData = json['data'];
									 $scope.$apply();
								});
				  };
				  $scope.getMotorHZ = function()
				  {
					  $scope.hertzData = [{ id: '1', 'hertz': '50' }, { id: '2', 'hertz': '60' }]; 
				  };
				  
				 
				  
				  $scope.getProtectionGrade = function()
				  {
					  $scope.protectionGradeData = [{ id: '1', 'protectionGrade': 'IP44' }, { id: '2', 'protectionGrade': 'IP55' },{ id: '3', 'protectionGrade': 'IP56' }, { id: '4', 'protectionGrade': 'IP65' }]; 
				  };
				  
				  $scope.getInternationalStandards = function()
				  {
					  $scope.internationalStdData = [{ id: '1', 'internationalStd': 'CE' }, { id: '2', 'internationalStd': 'UL' },{ id: '3', 'internationalStd': 'CCC' }, { id: '4', 'internationalStd': 'JIS' },{ id: '5', 'internationalStd': 'IEC' }, { id: '6', 'internationalStd': 'NEMA'}];
					   
				  };
				  
				  $scope.getSSCCode = function()
				   {  
						$scope.availableSSCCode = [];
						$scope.availableCompCode = [];
						$scope.availableSumito = [];
						  $scope.availableSpare = [];
						  $scope.availableTech = []; 
					   $.post("getAllSSccodes.do",function(json)
							{
								//alert(JSON.stringify(json['data']));
								
								//var asd = JSON.stringify(json['data']);
								 $scope.availableSSCCode = json['data'];
								 $scope.availableCompCode = json['data'];
								  $scope.availableSumito = json['data'];
								  $scope.availableSpare = json['data'];
								  $scope.availableTech = json['data'];
								// alert($scope.availableCode);
								 $scope.$apply();
							});
				   }
				   	$scope.getSSCCodeComp = function()
				   { 
						  $scope.availableCompCode = [];
						 $.post("getAllSSccodes.do",function(json)
							{
								//alert(JSON.stringify(json['data']));
								 //$scope.availableCompCode = json['data'];
								 //alert(JSON.stringify($scope.availableCompCode));
								 $scope.$apply();
							});
						
						
						$scope.$apply();
						
				   }
				$scope.getSSCCodeSumito = function()
				   { 
						 $scope.availableSumito = [];
					   $.post("getAllSSccodes.do",function(json)
							{
								//alert(JSON.stringify(json['data']));
								 //$scope.availableSumito = json['data'];
								 $scope.$apply();
							});
						
						
				   }
			$scope.getSSCCodeSpare = function()
			{ 
				   $scope.availableSpare = [];
				$.post("getAllSSccodes.do",function(json)
							{
								//alert(JSON.stringify(json['data']));
								// $scope.availableSpare = json['data'];
								 $scope.$apply();
							});
				
				
			}
			$scope.getSSCCodeTech = function()
			{ 
				 $scope.availableTech = [];  
				$.post("getAllSSccodes.do",function(json)
							{
								//alert(JSON.stringify(json['data']));
								 //$scope.availableTech = json['data'];
								 $scope.$apply();
							});
				
				
				
			}


			
			$scope.loadcableentry = function()
			{	
				 var httpRequest = $http({
						method: 'POST',
						url: "/SCA-360/loadDropDown.do",
						data: jsonStringDropDownTBox,
					}).success(function(data, status) {
						$scope.CableEntrydata = data;
					   
		
					});
					$scope.$apply();
			};
					
			$scope.loadterminalbox = function()
			{		
					
					var httpRequest = $http({
						method: 'POST',
						url: "/SCA-360/loadDropDown.do",
						data: jsonCableEntryString,
					}).success(function(data, status) {
						//alert(JSON.stringify(data));
						$scope.terminalBoxdata = data;
					   
		
					});
					$scope.$apply();
			};
			
			/*$scope.loadSalescustomername = function()
			{
				alert($rootScope.customername);
				var customer2 = $rootScope.customername;
				if(customer2 == undefined || customer2 == "")
				{
					alert("if");
				}
				else
				{
					alert("else");
				}
				
				$.getJSON("getCustmerNameFromNewCase.do",{custmername:customer2},function(json)
				{
					

					var getData = JSON.stringify(json['custmer']);
					
					if(getData!=undefined)
					{
						//alert(JSON.stringify(getData) + "getData" + 2 );
						$scope.addCase.customer = json['custmer'].accountid;
						$scope.addCase.customerCode = json['custmer'].account;
						$scope.addCase.contactPerson = json['custmer'].contactName;
						$scope.addCase.phone = json['custmer'].phnumber;
						$scope.addCase.address = json['custmer'].shippingadress;
						//$scope.addCase.phone = phnumber;
						//alert(JSON.stringify($scope.addCase));
						$("#dataNotFound").hide();
						$scope.$apply();
					}
					else
					{
						$("#dataNotFound").show();
					}
				 });
			 }*/
		
	$scope.validCustomer = function(customer)
	{
				//alert("naveena"+$rootScope.Salesreportflag);
				//alert(customer.split("-"));
				//var custcode = customer.split("-");getAllCustmerDetailsSavedOnIdforCustmerData
			$.post("getAllCustmerDetailsSavedOnId.do",{account:customer},function(json)
				{
					var validdata = json['custmer'][0];
					//alert(JSON.stringify(getData));
					
					if(validdata!=undefined)
					{
						/*if(custcode[1] === validdata.account)
						{
							$("#dataNotFound").hide();
						}
						else
						{
							$("#dataNotFound").show();
						}
						 */
						 if(validdata.accountid == "" || validdata.account == undefined || validdata.account == "NA")
							{
								
								
								$scope.addCase.customer = "";
							}
							else
							{
								
								
								$scope.addCase.customer = validdata.accountid;
							}
						 if(validdata.account == "" || validdata.account == undefined || validdata.account == "NA")
						 {
							$("#CustomerCode").css("background-color", "#ffff7f"); 
							$scope.addCase.customerCode = "";
						 }
						 else
						 {
							$("#CustomerCode").css("background-color", "#99ff99");
							$scope.addCase.customerCode = validdata.account;
						 }
						 if(validdata.contName == "" || validdata.contName == undefined || validdata.contName == "NA")
						 {
							$("#ContactPerson").css("background-color", "#ffffff"); 
							$scope.addCase.contactPerson = "";
						 }
						 else
						 {
							$("#ContactPerson").css("background-color", "#99ff99");
							$scope.addCase.contactPerson = validdata.contName;
						 }
						 if(validdata.phnumber == "" || validdata.phnumber == undefined || validdata.phnumber == "NA")
						 {
							$("#Telephone").css("background-color", "#ffffff"); 
							$scope.addCase.phone = "";
						 }
						 else
						 {
							$("#Telephone").css("background-color", "#99ff99");
							$scope.addCase.phone = validdata.phnumber;
						 }
						 if(validdata.shippingadress == "" || validdata.shippingadress == undefined || validdata.shippingadress == "NA")
						 {
							$("#Address").css("background-color", "#ffffff"); 
							$scope.addCase.address = "";
						 }
						 else
						 {
							$("#Address").css("background-color", "#99ff99");
							$scope.addCase.address = validdata.shippingadress;
						 }
						 
						 /*if(validdata.createdby == "" || validdata.createdby == undefined || validdata.createdby == "NA")
						 {
							$("#CreatedBy").css("background-color", "#ffff7f"); 
							$scope.addCase.createdBy = "";
						 }
						 else
						 {
							$("#CreatedBy").css("background-color", "#ffff7f");
							$scope.addCase.createdBy = validdata.createdby;
						 }*/
						 
						/* var departmentSplit = json['custmer'][0].departmentname;
										 var departmentSales = [];
										 if(departmentSplit == undefined || departmentSplit == "" || departmentSplit == "NA")
										 {
											 //alert("if");
											 $('#picturegallery').val("['']").trigger('chosen:updated');
											 $("#picturegallery").css("background-color", "#ffff7f");
										 }
										 else
										 {
											//alert(departmentSplit.length + " " + " else ");
											 for (var s = 0; s < departmentSplit.length; s++) {
									
														departmentSales.push(departmentSplit[s]);
														//alert("accessoriesSales"+accessoriesSales);
											}
											 $('#picturegallery').val(departmentSales).trigger('chosen:updated');
															$scope.addCase.assigned = departmentSales;
															$("#picturegallery").css("background-color", "#99ff99");
										 }*/
						 
						//$scope.addCase.phone = phnumber;
						//alert(JSON.stringify($scope.addCase));
						//$("#dataNotFound").hide();
						$scope.$apply();
					}
					else
					{
						//$("#dataNotFound").show();
					}
					
					
				});
		
			
			
	};
			
	$scope.validCustomerCode = function(custCode)
	{
		//var custcode = custCode.split("-");
		//alert(custcode);
		//if(custCode!=undefined)
		//{
			//alert(JSON.stringify(customer)+ "if" + 1);
			/*var customerStatus;	
			$.getJSON("getstautsofcustmers.do",{account:custCode},function(json)
					{
				        //alert(json['data']);
				        customerStatus = JSON.stringify(json['data']);
				       //$scope.$apply();
					   alert(customerStatus);
					});*/
			
			 //alert(customerStatus);codeNotFound
			//if(customerStatus!=undefined && customerStatus ==1)
			//{
				//alert(customerStatus + "customerStatus" + 1);
				$.post("getAllCustmerDetailsSavedOnId.do",{account:custCode},function(json)
				{
					var validdata = json['custmer'][0];
					//alert(JSON.stringify(validdata.accountid));
					
					if(validdata!=undefined)
					{ 
						
						if(validdata.accountid == "" || validdata.account == undefined || validdata.account == "NA")
						{
							
							
							$scope.addCase.customer = "";
						}
						else
						{
							
							
							$scope.addCase.customer = validdata.accountid;
						}
						
						 if(validdata.account == "" || validdata.account == undefined || validdata.account == "NA")
						 {
							$("#CustomerCode").css("background-color", "#ffff7f"); 
							$scope.addCase.customerCode = "";
						 }
						 else
						 {
							$("#CustomerCode").css("background-color", "#99ff99");
							$scope.addCase.customerCode = validdata.account;
						 }
						 if(validdata.contName == "" || validdata.contName == undefined || validdata.contName == "NA")
						 {
							$("#ContactPerson").css("background-color", "#ffffff"); 
							$scope.addCase.contactPerson = "";
						 }
						 else
						 {
							$("#ContactPerson").css("background-color", "#99ff99");
							$scope.addCase.contactPerson = validdata.contName;
						 }
						 if(validdata.phnumber == "" || validdata.phnumber == undefined || validdata.phnumber == "NA")
						 {
							$("#Telephone").css("background-color", "#ffffff"); 
							$scope.addCase.phone = "";
						 }
						 else
						 {
							$("#Telephone").css("background-color", "#99ff99");
							$scope.addCase.phone = validdata.phnumber;
						 }
						 if(validdata.shippingadress == "" || validdata.shippingadress == undefined || validdata.shippingadress == "NA")
						 {
							$("#Address").css("background-color", "#ffffff"); 
							$scope.addCase.address = "";
						 }
						 else
						 {
							$("#Address").css("background-color", "#99ff99");
							$scope.addCase.address = validdata.shippingadress;
						 }
						 /* if(validdata.createdby == "" || validdata.createdby == undefined || validdata.createdby == "NA")
						 {
							$("#CreatedBy").css("background-color", "#ffff7f"); 
							$scope.addCase.createdBy = "";
						 }
						 else
						 {
							$("#CreatedBy").css("background-color", "#ffff7f");
							$scope.addCase.createdBy = validdata.createdby;
						 }*/
						  /*var departmentSplit = json['custmer'][0].departmentname;
										 var departmentSales = [];
										 if(departmentSplit == undefined || departmentSplit == "" || departmentSplit == "NA")
										 {
											 //alert("if");
											 $('#picturegallery').val("['']").trigger('chosen:updated');
											 $("#picturegallery").css("background-color", "#ffff7f");
										 }
										 else
										 {
											//alert(departmentSplit.length + " " + " else ");
											 for (var s = 0; s < departmentSplit.length; s++) {
									
														departmentSales.push(departmentSplit[s]);
														//alert("accessoriesSales"+accessoriesSales);
											}
											 $('#picturegallery').val(departmentSales).trigger('chosen:updated');
															$scope.addCase.assigned = departmentSales;
															$("#picturegallery").css("background-color", "#99ff99");
										 }*/
						//alert(JSON.stringify($scope.addCase));
						//$("#codeNotFound").hide();
						$scope.$apply();
					}
					else
					{
						//$("#codeNotFound").show();
						//$scope.addCase = angular.copy($scope.master);
						/*$.getJSON("loadingsequenceNember.do",function(json)
						 {
							$scope.addCase=json['maincaseform'][0];
							$scope.$apply();
						});*/
						//$scope.$apply(); 
					}
					
					
				});
			//}
			//else
			//{
				//alert(JSON.stringify(getData)+ "getData" + 2);
				/*swal( 'Customer Name Not Match');
				$scope.addCase = angular.copy($scope.master);
				$.getJSON("loadingsequenceNember.do",function(json)
				 {
					$scope.addCase=json['maincaseform'][0];
					$scope.$apply();
				}); */
			//}
			
		//}
		/*else
		{
			//alert(JSON.stringify(customer)+ "else" + 3);
			$("#codeNotFound").hide();
			$scope.addCase = angular.copy($scope.master);
			$.getJSON("loadingsequenceNember.do",function(json)
			 {
				$scope.addCase=json['maincaseform'][0];
				$scope.$apply();
			});
			
			$scope.$apply();
		}*/
			
	};
	
	
	
	$scope.onSelectProspectCustomerName = function(customer)
	{
		
			//alert(customer);
			//$.post("getCustmerNamequatation.do",{custmername:customer},function(json)
				//{
				$.post("getAllprospectCustmerDetailsSavedOnId.do",{account:customer},function(json)
				{
					//alert(JSON.stringify(json));
					var validdata = json['custmer'][0];
					
					
					//alert(JSON.stringify(validData));
					if(validdata!=undefined)
					{
						if(validdata.accountid == "" || validdata.account == undefined || validdata.account == "NA")
						{
							
							
							$scope.addCase.customer = "";
						}
						else
						{
							
							
							$scope.addCase.customer = validdata.accountid;
						}
						 if(validdata.account == "" || validdata.account == undefined || validdata.account == "NA")
						 {
							$("#CustomerCode").css("background-color", "#ffff7f"); 
							$scope.addCase.customerCode = "";
						 }
						 else
						 {
							$("#CustomerCode").css("background-color", "#99ff99");
							$scope.addCase.customerCode = validdata.account;
						 }
						 if(validdata.contName == "" || validdata.contName == undefined || validdata.contName == "NA")
						 {
							$("#ContactPerson").css("background-color", "#ffffff"); 
							$scope.addCase.contactPerson = "";
						 }
						 else
						 {
							$("#ContactPerson").css("background-color", "#99ff99");
							$scope.addCase.contactPerson = validdata.contName;
						 }
						 if(validdata.phnumber == "" || validdata.phnumber == undefined || validdata.phnumber == "NA")
						 {
							$("#Telephone").css("background-color", "#ffffff"); 
							$scope.addCase.phone = "";
						 }
						 else
						 {
							$("#Telephone").css("background-color", "#99ff99");
							$scope.addCase.phone = validdata.phnumber;
						 }
						 if(validdata.shippingadress == "" || validdata.shippingadress == undefined || validdata.shippingadress == "NA")
						 {
							$("#Address").css("background-color", "#ffffff"); 
							$scope.addCase.address = "";
						 }
						 else
						 {
							$("#Address").css("background-color", "#99ff99");
							$scope.addCase.address = validdata.shippingadress;
						 }
						 /* if(validdata.createdby == "" || validdata.createdby == undefined || validdata.createdby == "NA")
						 {
							$("#CreatedBy").css("background-color", "#ffff7f"); 
							$scope.addCase.createdBy = "";
						 }
						 else
						 {
							$("#CreatedBy").css("background-color", "#ffff7f");
							$scope.addCase.createdBy = validdata.createdby;
						 }*/
						/*  var departmentSplit = json['custmer'][0].departmentname;
										 var departmentSales = [];
										 if(departmentSplit == undefined || departmentSplit == "" || departmentSplit == "NA")
										 {
											 //alert("if");
											 $('#picturegallery').val("['']").trigger('chosen:updated');
											 $("#picturegallery").css("background-color", "#ffff7f");
										 }
										 else
										 {
											//alert(departmentSplit.length + " " + " else ");
											 for (var s = 0; s < departmentSplit.length; s++) {
									
														departmentSales.push(departmentSplit[s]);
														//alert("accessoriesSales"+accessoriesSales);
											}
											 $('#picturegallery').val(departmentSales).trigger('chosen:updated');
															$scope.addCase.assigned = departmentSales;
															$("#picturegallery").css("background-color", "#99ff99");
										 }*/
						//alert(JSON.stringify($scope.addCase));
						//$("#dataNotFound").hide();
						$scope.$apply();
					}
					else
					{
						//$("#dataNotFound").show();
					}
					
					
					$scope.$apply();
				});
				
		
	};
	
	$scope.onSelectCustProspectCode = function(accountname)
	{
		
		//$.post("getAllCustmerDetailsSavedOnId.do",{account:accountname},function(json)
		//{
		$.post("getAllprospectCustmerDetailsSavedOnId.do",{account:accountname},function(json)
		{
			//alert(JSON.stringify(json));
			var validdata = json['custmer'][0];
			
			if(validdata!=undefined)
					{ 
					
						if(validdata.accountid == "" || validdata.account == undefined || validdata.account == "NA")
						{
							
							
							$scope.addCase.customer = "";
						}
						else
						{
							
							
							$scope.addCase.customer = validdata.accountid;
						}
						 if(validdata.account == "" || validdata.account == undefined || validdata.account == "NA")
						 {
							$("#CustomerCode").css("background-color", "#ffff7f"); 
							$scope.addCase.customerCode = "";
						 }
						 else
						 {
							$("#CustomerCode").css("background-color", "#99ff99");
							$scope.addCase.customerCode = validdata.account;
						 }
						 if(validdata.contName == "" || validdata.contName == undefined || validdata.contName == "NA")
						 {
							$("#ContactPerson").css("background-color", "#ffffff"); 
							$scope.addCase.contactPerson = "";
						 }
						 else
						 {
							$("#ContactPerson").css("background-color", "#99ff99");
							$scope.addCase.contactPerson = validdata.contName;
						 }
						 if(validdata.phnumber == "" || validdata.phnumber == undefined || validdata.phnumber == "NA")
						 {
							$("#Telephone").css("background-color", "#ffffff"); 
							$scope.addCase.phone = "";
						 }
						 else
						 {
							$("#Telephone").css("background-color", "#99ff99");
							$scope.addCase.phone = validdata.phnumber;
						 }
						 if(validdata.shippingadress == "" || validdata.shippingadress == undefined || validdata.shippingadress == "NA")
						 {
							$("#Address").css("background-color", "#ffffff"); 
							$scope.addCase.address = "";
						 }
						 else
						 {
							$("#Address").css("background-color", "#99ff99");
							$scope.addCase.address = validdata.shippingadress;
						 }
						/* if(validdata.createdby == "" || validdata.createdby == undefined || validdata.createdby == "NA")
						 {
							$("#CreatedBy").css("background-color", "#ffff7f"); 
							$scope.addCase.createdBy = "";
						 }
						 else
						 {
							$("#CreatedBy").css("background-color", "#ffff7f");
							$scope.addCase.createdBy = validdata.createdby;
						 }
						  var departmentSplit = json['custmer'][0].departmentname;
										 var departmentSales = [];
										 if(departmentSplit == undefined || departmentSplit == "" || departmentSplit == "NA")
										 {
											 //alert("if");
											 $('#picturegallery').val("['']").trigger('chosen:updated');
											 $("#picturegallery").css("background-color", "#ffff7f");
										 }
										 else
										 {
											//alert(departmentSplit.length + " " + " else ");
											 for (var s = 0; s < departmentSplit.length; s++) {
									
														departmentSales.push(departmentSplit[s]);
														//alert("accessoriesSales"+accessoriesSales);
											}
											 $('#picturegallery').val(departmentSales).trigger('chosen:updated');
															$scope.addCase.assigned = departmentSales;
															$("#picturegallery").css("background-color", "#99ff99");
										 }*/
						//alert(JSON.stringify($scope.addCase));
						$("#codeNotFound").hide();
						$scope.$apply();
					}
					else
					{
						$("#codeNotFound").show();
						//$scope.addCase = angular.copy($scope.master);
						/*$.getJSON("loadingsequenceNember.do",function(json)
						 {
							$scope.addCase=json['maincaseform'][0];
							$scope.$apply();
						});*/
						//$scope.$apply(); 
					}		
					
					
			$scope.$apply();
		});
		
	};
	
	$scope.startsWith = function(state, viewValue) {
			//alert(state.substr(0, viewValue.length).toLowerCase() == viewValue.toLowerCase());
              return state.substr(0, viewValue.length).toLowerCase() == viewValue.toLowerCase();
            }
	
	
	$scope.toggleblockpannelnewselecthide = function(gridId,event)
	{
		//alert(gridId + " gridId ");
		//alert($(this).attr('id'));
		//alert(btnId + " btnId ");
		//alert(event.target.id);
		
		var btnid = event.target.id;
		
		 //$scope.btnvalue = "1";
		 if(gridId == btnid)
		 {
			 $("#toggleblk_"+gridId).slideToggle();
			  $(".curbtnid-minus_"+btnid).hide();
			 $(".curbtnid-plus_"+btnid).show();
			 
		 }
		
	};
	$scope.toggleblockpannelnewselectshow = function(gridId,event)
	{
		//alert(gridId + " gridId ");
		//alert($(this).attr('id'));
		//alert(btnId + " btnId ");
		//alert(event.target.id);
		
		var btnid = event.target.id;
		
		
		 if(gridId == btnid)
		 {
			 $("#toggleblk_"+gridId).slideToggle();
			 $(".curbtnid-minus_"+btnid).show();
			 $(".curbtnid-plus_"+btnid).hide();
		 }
		 
	};
	
	$scope.toggleblockpannelcomphide = function(gridId,event)
	{
		//alert(gridId + " gridId ");
		//alert($(this).attr('id'));
		//alert(btnId + " btnId ");
		//alert(event.target.id);
		
		var btnid = event.target.id;
		
		 //$scope.btnvalue = "1";
		 if(gridId == btnid)
		 {
			 $("#toggleblkcomp_"+gridId).slideToggle();
			  $(".curbtnidcomp-minus_"+btnid).hide();
			 $(".curbtnidcomp-plus_"+btnid).show();
			 
		 }
		
	};
	$scope.toggleblockpannelcompshow = function(gridId,event)
	{
		//alert(gridId + " gridId ");
		//alert($(this).attr('id'));
		//alert(btnId + " btnId ");
		//alert(event.target.id);
		
		var btnid = event.target.id;
		
		
		 if(gridId == btnid)
		 {
			 $("#toggleblkcomp_"+gridId).slideToggle();
			 $(".curbtnidcomp-minus_"+btnid).show();
			 $(".curbtnidcomp-plus_"+btnid).hide();
		 }
		 
	};
	$scope.toggleblockpannelsumithide = function(gridId,event)
	{
		//alert(gridId + " gridId ");
		//alert($(this).attr('id'));
		//alert(btnId + " btnId ");
		//alert(event.target.id);
		
		var btnid = event.target.id;
		
		 //$scope.btnvalue = "1";
		 if(gridId == btnid)
		 {
			 $("#toggleblksumit_"+gridId).slideToggle();
			  $(".curbtnidsumit-minus_"+btnid).hide();
			 $(".curbtnidsumit-plus_"+btnid).show();
			 
		 }
		
	};
	$scope.toggleblockpannelsumitshow = function(gridId,event)
	{
		//alert(gridId + " gridId ");
		//alert($(this).attr('id'));
		//alert(btnId + " btnId ");
		//alert(event.target.id);
		
		var btnid = event.target.id;
		
		
		 if(gridId == btnid)
		 {
			 $("#toggleblksumit_"+gridId).slideToggle();
			 $(".curbtnidsumit-minus_"+btnid).show();
			 $(".curbtnidsumit-plus_"+btnid).hide();
		 }
		 
	};
	$scope.toggleblockpannelsparehide = function(gridId,event)
	{
		//alert(gridId + " gridId ");
		//alert($(this).attr('id'));
		//alert(btnId + " btnId ");
		//alert(event.target.id);
		
		var btnid = event.target.id;
		
		 //$scope.btnvalue = "1";
		 if(gridId == btnid)
		 {
			 $("#toggleblkspare_"+gridId).slideToggle();
			 $(".curbtnidspare-minus_"+btnid).hide();
			 $(".curbtnidspare-plus_"+btnid).show();
			 
		 }
		
	};
	$scope.toggleblockpannelspareshow = function(gridId,event)
	{
		//alert(gridId + " gridId ");
		//alert($(this).attr('id'));
		//alert(btnId + " btnId ");
		//alert(event.target.id);
		
		var btnid = event.target.id;
		
		
		 if(gridId == btnid)
		 {
			 $("#toggleblkspare_"+gridId).slideToggle();
			 $(".curbtnidspare-minus_"+btnid).show();
			 $(".curbtnidspare-plus_"+btnid).hide();
		 }
		 
	};
	$scope.toggleblockpanneltechhide = function(gridId,event)
	{
		//alert(gridId + " gridId ");
		//alert($(this).attr('id'));
		//alert(btnId + " btnId ");
		//alert(event.target.id);
		
		var btnid = event.target.id;
		
		 //$scope.btnvalue = "1";
		 if(gridId == btnid)
		 {
			 $("#toggleblktech_"+gridId).slideToggle();
			 $(".curbtnidtech-minus_"+btnid).hide();
			 $(".curbtnidtech-plus_"+btnid).show();
			 
		 }
		
	};
	$scope.toggleblockpanneltechshow = function(gridId,event)
	{
		//alert(gridId + " gridId ");
		//alert($(this).attr('id'));
		//alert(btnId + " btnId ");
		//alert(event.target.id);
		
		var btnid = event.target.id;
		
		
		 if(gridId == btnid)
		 {
			 $("#toggleblktech_"+gridId).slideToggle();
			 $(".curbtnidtech-minus_"+btnid).show();
			 $(".curbtnidtech-plus_"+btnid).hide();
		 }
		 
	};
 
 
					

   

		
				
		$scope.chngReqSpeed = function(rpm,ratio,indexNew)
		{
			
			var rpmVal = 0;
			var ratioVal = 0;
			var indexNew = this.$index;
			//alert(rpm);
			//alert(ratio);
			//alert(indexNew);
			var reqOutputSpeed;
			if(rpm == undefined || rpm == "") { rpmVal = 0; }else {rpmVal = rpm; } 
			if(ratio == undefined || ratio == "")  { ratioVal = 0; }else {ratioVal = ratio; }
			//if(indexNew == undefined || indexNew == "")  {var indNew = 0; }else {var indNew = indexNew; }
			//alert(rpmVal);
			//alert(ratioVal);
			reqOutputSpeed = (rpmVal/ratioVal);
			//alert(reqOutputSpeed);
			 var reqGetSpeed ;
			if(isNaN(reqOutputSpeed) || reqOutputSpeed == "Infinity") {reqGetSpeed = 0;} else {reqGetSpeed = reqOutputSpeed;  }
			
			 $scope.dataField[indexNew].requiredOutputSpeed = reqGetSpeed.toFixed(2);
			$scope.$apply();
			 //$('#RequiredOutputSpeed').trigger('blur');
			
			
		};
		
		$scope.chngReqRatio = function(rpm,outSpeed,indexnew)
		{
			//alert(rpm);
			//alert(outSpeed);
			var indexnew = this.$index;
			var ratio;
			//alert(indexnew);
			if(rpm == undefined || rpm == "") {var rpmVal = 0; }else {var rpmVal = rpm; } 
			if(outSpeed == undefined || outSpeed == "")  {var opspeedVal = 0; }else {var opspeedVal = outSpeed; }
			//if(indexnew == undefined || indexnew == "")  {var indNew = 1; }else {var indNew = indexnew; }
			
			ratio = (rpmVal/opspeedVal);
			if(isNaN(ratio) || ratio == "Infinity") {var reqratio = 0;} else {var reqratio = ratio;}
			
			$scope.dataField[indexnew].ratioRequired = reqratio.toFixed(2);
			
			$scope.$apply();
		}
		
		$scope.chngReqSpeedComp = function(rpm,ratio,indexReq)
		{
			var rpmVal = 0;
			var ratioVal = 0;
			var indexReq = this.$index;
			var reqOutputSpeed;
			if(rpm == undefined || rpm == "") { rpmVal = 0; }else {rpmVal = rpm; } 
			if(ratio == undefined || ratio == "")  { ratioVal = 0; }else {ratioVal = ratio; }
			//alert(rpmVal);
			//alert(ratioVal);
			reqOutputSpeed = rpmVal/ratioVal
			
			 var reqGetSpeed ;
			if(isNaN(reqOutputSpeed) || reqOutputSpeed == "Infinity") {reqGetSpeed = 0;} else { reqGetSpeed = reqOutputSpeed;  }
			
			$scope.dataCompetitor[indexReq].requiredOutputSpeed = reqGetSpeed.toFixed(2);
			 
			$scope.$apply();
			//alert(reqOutputSpeed);
		};
		
		$scope.chngReqRatioComp = function(rpm,outSpeed,indexnew)
		{
			//alert(rpm);
			//alert(outSpeed);
			var indexnew = this.$index;
			var ratio;
			//alert(indexnew);
			if(rpm == undefined || rpm == "") {var rpmVal = 0; }else {var rpmVal = rpm; } 
			if(outSpeed == undefined || outSpeed == "")  {var opspeedVal = 0; }else {var opspeedVal = outSpeed; }
			//if(indexnew == undefined || indexnew == "")  {var indNew = 1; }else {var indNew = indexnew; }
			
			ratio = (rpmVal/opspeedVal);
			if(isNaN(ratio) || ratio == "Infinity") {var reqratio = 0;} else {var reqratio = ratio;}
			
			$scope.dataCompetitor[indexnew].ratioRequired = reqratio.toFixed(2);
			
			$scope.$apply();
		}
		
		$scope.chngReqSpeedSumit = function(rpm,ratio,indexReq)
		{
			var rpmVal = 0;
			var ratioVal = 0;
			var indexReq = this.$index;
			var reqOutputSpeed;
			if(rpm == undefined || rpm == "") { rpmVal = 0; }else {rpmVal = rpm; } 
			if(ratio == undefined || ratio == "")  { ratioVal = 0; }else {ratioVal = ratio; }
			//alert(rpmVal);
			//alert(ratioVal);
			reqOutputSpeed = rpmVal/ratioVal
			
			 var reqGetSpeed ;
			if(isNaN(reqOutputSpeed) || reqOutputSpeed == "Infinity") {reqGetSpeed = 0;} else { reqGetSpeed = reqOutputSpeed;  }
			
			$scope.dataSumitomo[indexReq].requiredOutputSpeed = reqGetSpeed.toFixed(2);
			 
			$scope.$apply();
			//alert(reqOutputSpeed);
		};
		
		$scope.chngReqRatioSumit = function(rpm,outSpeed,indexnew)
		{
			//alert(rpm);
			//alert(outSpeed);
			var indexnew = this.$index;
			var ratio;
			//alert(indexnew);
			if(rpm == undefined || rpm == "") {var rpmVal = 0; }else {var rpmVal = rpm; } 
			if(outSpeed == undefined || outSpeed == "")  {var opspeedVal = 0; }else {var opspeedVal = outSpeed; }
			//if(indexnew == undefined || indexnew == "")  {var indNew = 1; }else {var indNew = indexnew; }
			
			ratio = (rpmVal/opspeedVal);
			if(isNaN(ratio) || ratio == "Infinity") {var reqratio = 0;} else {var reqratio = ratio;}
			
			$scope.dataSumitomo[indexnew].ratioRequired = reqratio.toFixed(2);
			
			$scope.$apply();
		}
		
		$scope.chngReqSpeedTech = function(rpm,ratio,indexReq)
		{
			var rpmVal = 0;
			var ratioVal = 0;
			var indexReq = this.$index;
			var reqOutputSpeed;
			if(rpm == undefined || rpm == "") { rpmVal = 0; }else {rpmVal = rpm; } 
			if(ratio == undefined || ratio == "")  { ratioVal = 0; }else {ratioVal = ratio; }
			//alert(rpmVal);
			//alert(ratioVal);
			reqOutputSpeed = rpmVal/ratioVal
			
			 var reqGetSpeed ;
			if(isNaN(reqOutputSpeed) || reqOutputSpeed == "Infinity") {reqGetSpeed = 0;} else { reqGetSpeed = reqOutputSpeed;  }
			
			$scope.dataQuery[indexReq].requiredOutputSpeed = reqGetSpeed.toFixed(2);
			 
			$scope.$apply();
			//alert(reqOutputSpeed);
		};
		
		$scope.chngReqRatioTech = function(rpm,outSpeed,indexnew)
		{
			//alert(rpm);
			//alert(outSpeed);
			var indexnew = this.$index;
			var ratio;
			//alert(indexnew);
			if(rpm == undefined || rpm == "") {var rpmVal = 0; }else {var rpmVal = rpm; } 
			if(outSpeed == undefined || outSpeed == "")  {var opspeedVal = 0; }else {var opspeedVal = outSpeed; }
			//if(indexnew == undefined || indexnew == "")  {var indNew = 1; }else {var indNew = indexnew; }
			
			ratio = (rpmVal/opspeedVal);
			if(isNaN(ratio) || ratio == "Infinity") {var reqratio = 0;} else {var reqratio = ratio;}
			
			$scope.dataQuery[indexnew].ratioRequired = reqratio.toFixed(2);
			
			$scope.$apply();
		}
		
		
	/*		 $scope.Accessiories = [];
	$scope.assignToDepartments = function() {
		   $.post("departmentViewForCase.do",function(json)
				{
					//alert(JSON.stringify(json['data']));
					
					//var asd = JSON.stringify(json['data']);
					 $scope.Accessiories = json['data'];
					 
					 //alert(JSON.stringify($scope.Accessiories));
					var data = $scope.Accessiories;
					$scope.assigned = data
		
						//alert(JSON.stringify($scope.Accessiories));		
		
		
					var optionValues = "";
					for (var i = 0; i < data.length; i++) {
						optionValues += "<option value='" + data[i].departmentnameshortcut + "'>" + data[i].assigned + "</option>";
					}
					$('#picturegallery1').empty();
					var newOption = $(optionValues);
		
					$('#picturegallery1').append(newOption);
					$('#picturegallery1').trigger("chosen:updated");
					
					 $scope.$apply();
				});
			
        };*/
  
   

	  $scope.loadRPM = function(pole,hz,ratioReq,index)
	  {
		
		 var index = this.$index;
		 $.post("getRpmforCase.do",{pole:pole,frequency:hz},function(json)
					{
						//alert(JSON.stringify(json['rpm']));
						$scope.dataField[index].rpm = json['rpm'];
						//alert(ratioReq);
						
						var rpmVal = json['rpm'];
						var ratioVal = ratioReq;
						var reqOutputSpeed;
						reqOutputSpeed = (rpmVal/ratioVal);
						
						 var reqGetSpeed ;
						if(isNaN(reqOutputSpeed) || reqOutputSpeed == "Infinity") {reqGetSpeed = 0;} else { reqGetSpeed = reqOutputSpeed;}
						
						$scope.dataField[index].requiredOutputSpeed = reqGetSpeed.toFixed(2);
						
						
						 $scope.$apply();
					});
		  
		  $scope.$apply();
	  }
	  
	  $scope.loadCompRPM = function(pole,hz,rpm,ratioReq,index)
	  {
		//alert(rpm);
		 var index = this.$index;
		 $.post("getRpmforCase.do",{pole:pole,frequency:hz},function(json)
					{
						//alert(JSON.stringify(json['rpm']));
						$scope.dataCompetitor[index].rpm = json['rpm'];
						var rpmVal = json['rpm'];
						var ratioVal = ratioReq;
						var reqOutputSpeed;
						reqOutputSpeed = rpmVal/ratioVal
						
						 var reqGetSpeed ;
						if(isNaN(reqOutputSpeed) || reqOutputSpeed == "Infinity") {reqGetSpeed = 0;} else { reqGetSpeed = reqOutputSpeed;}
						
						$scope.dataCompetitor[index].requiredOutputSpeed = reqGetSpeed.toFixed(2);
						 

						 $scope.$apply();
					});
		  
		  $scope.$apply();
	  }
	  
	  
	  $scope.loadSumitRPM = function(pole,hz,ratioReq,index)
	  {
		
		 var index = this.$index;
		 $.post("getRpmforCase.do",{pole:pole,frequency:hz},function(json)
					{
						//alert(JSON.stringify(json['rpm']));
						$scope.dataSumitomo[index].rpm = json['rpm'];
						var rpmVal = json['rpm'];
						var ratioVal = ratioReq;
						var reqOutputSpeed;
						reqOutputSpeed = rpmVal/ratioVal
						
						 var reqGetSpeed ;
						if(isNaN(reqOutputSpeed) || reqOutputSpeed == "Infinity") {reqGetSpeed = 0;} else { reqGetSpeed = reqOutputSpeed;}
						
						$scope.dataSumitomo[index].requiredOutputSpeed = reqGetSpeed.toFixed(2);
						
						 $scope.$apply();
					});
		  
		  $scope.$apply();
	  }
	  
	  $scope.loadSpareRPM = function(pole,hz,index)
	  {
		
		 var index = this.$index;
		 $.post("getRpmforCase.do",{pole:pole,frequency:hz},function(json)
					{
						//alert(JSON.stringify(json['rpm']));
						$scope.dataSparePart[index].rpm = json['rpm'];
						 $scope.$apply();
					});
		  
		  $scope.$apply();
	  }
	  $scope.loadTechRPM = function(pole,hz,ratioReq,index)
	  {
		
		 var index = this.$index;
		 $.post("getRpmforCase.do",{pole:pole,frequency:hz},function(json)
					{
						//alert(JSON.stringify(json['rpm']));
						$scope.dataQuery[index].rpm = json['rpm'];
						var rpmVal = json['rpm'];
						var ratioVal = ratioReq;
						var reqOutputSpeed;
						reqOutputSpeed = rpmVal/ratioVal
						
						 var reqGetSpeed ;
						if(isNaN(reqOutputSpeed) || reqOutputSpeed == "Infinity") {reqGetSpeed = 0;} else { reqGetSpeed = reqOutputSpeed;}
						
						$scope.dataQuery[index].requiredOutputSpeed = reqGetSpeed.toFixed(2);
						
						 $scope.$apply();
					});
		  
		  $scope.$apply();
	  }
	  
	  					//================New Selection IMG Upload Multiple==========//
					
					   $scope.stepsModel = [];

						$scope.uploadNewMotorFile = function(event)
						{
							 var files = event.target.files; //FileList object
							 
							 for (var i = 0; i < files.length; i++) {
								 var file = files[i];
									 var reader = new FileReader();
									 reader.onload = $scope.imageIsLoaded; 
									 reader.readAsDataURL(file);
							 }
						}
						$scope.imageIsLoaded = function(e)
						{
							$scope.$apply(function() {
								 var imagelocation=e.target.result;
								 var base64result = imagelocation.split(',')[1];
												  
							   $scope.stepsModel.push(base64result);
									//alert($scope.stepsModel.length);
							});
						}
						$scope.removeImage=function(step)
						{
							 for(var i=0;i<$scope.stepsModel.length;i++) {
								
								if($scope.stepsModel[i] === step) {
								
									$scope.stepsModel.splice(i,1);
								
									break;
								}}
							
						};
					
					//=============================================//
					//================Competitor IMG Upload Multiple==========//
					     					
					   $scope.stepsModelComp = [];

						$scope.uploadMotorFileComp = function(event)
						{
							 var files = event.target.files; //FileList object
							 //alert(files.length);
							 for (var i = 0; i < files.length; i++) {
								 var file = files[i];
									 var reader = new FileReader();
									 reader.onload = $scope.imageIsLoadedComp; 
									 reader.readAsDataURL(file);
							 }
						}
						 var imgLength ;
						$scope.imageIsLoadedComp = function(e)
						{
							//alert(e);
							$scope.$apply(function() {
								 var imagelocation=e.target.result;
								 var base64result = imagelocation.split(',')[1];
								//alert(base64result);				  
							   $scope.stepsModelComp.push(base64result);
								
								//imgLength = $scope.stepsModelComp.length;
								//if(imgLength >0){alert("if");$scope.imgSts = false;}else{alert("else");$scope.imgSts = true;}
								if($scope.stepsModelComp == ""){$scope.imgSts = true;}else{$scope.imgSts = false;}
							});
							  
								//alert(imgLength);
									
							
						}
						$scope.removeImgComp=function(stepComp)
						{
							 for(var i=0;i<$scope.stepsModelComp.length;i++) {
								
								if($scope.stepsModelComp[i] === stepComp) {
								
									$scope.stepsModelComp.splice(i,1);
								
									break;
								}}
								//alert($scope.stepsModelComp.length);
									if($scope.stepsModelComp.length <1){$scope.imgSts = true}else{$scope.imgSts = false}
							
						};
					

					//=============================================//
					//================Sumitomo IMG Upload Multiple==========//
					
					   $scope.stepsModelSumit = [];

						$scope.uploadMotorFileSumit = function(event)
						{
							 var files = event.target.files; //FileList object
							 
							 for (var i = 0; i < files.length; i++) {
								 var file = files[i];
									 var reader = new FileReader();
									 reader.onload = $scope.imageIsLoadedSumit; 
									 reader.readAsDataURL(file);
							 }
						}
						$scope.imageIsLoadedSumit = function(e)
						{
							$scope.$apply(function() {
								 var imagelocation=e.target.result;
								 var base64result = imagelocation.split(',')[1];
												  
							   $scope.stepsModelSumit.push(base64result);
									//alert($scope.stepsModel.length);
							});
						}
						$scope.removeImgSumit=function(stepSumit)
						{
							 for(var i=0;i<$scope.stepsModelSumit.length;i++) {
								
								if($scope.stepsModelSumit[i] === stepSumit) {
								
									$scope.stepsModelSumit.splice(i,1);
								
									break;
								}}
							
						};
					
					//=============================================//
					//================Spare IMG Upload Multiple==========//
					
					   $scope.stepsModelSpare = [];

						$scope.uploadMotorFileSpare = function(event)
						{
							 var files = event.target.files; //FileList object
							 
							 for (var i = 0; i < files.length; i++) {
								 var file = files[i];
									 var reader = new FileReader();
									 reader.onload = $scope.imageIsLoadedSpare; 
									 reader.readAsDataURL(file);
							 }
						}
						$scope.imageIsLoadedSpare = function(e)
						{
							$scope.$apply(function() {
								 var imagelocation=e.target.result;
								 var base64result = imagelocation.split(',')[1];
												  
							   $scope.stepsModelSpare.push(base64result);
									//alert($scope.stepsModel.length);
							});
						}
						$scope.removeImgSpare=function(stepSpare)
						{
							 for(var i=0;i<$scope.stepsModelSpare.length;i++) {
								
								if($scope.stepsModelSpare[i] === stepSpare) {
								
									$scope.stepsModelSpare.splice(i,1);
								
									break;
								}}
							
						};
					
					//=============================================//
					//================Tech IMG Upload Multiple==========//
					
					   $scope.stepsModelTech = [];

						$scope.uploadMotorFileTech = function(event)
						{
							 var files = event.target.files; //FileList object
							 
							 for (var i = 0; i < files.length; i++) {
								 var file = files[i];
									 var reader = new FileReader();
									 reader.onload = $scope.imageIsLoadedTech; 
									 reader.readAsDataURL(file);
							 }
						}
						$scope.imageIsLoadedTech = function(e)
						{
							$scope.$apply(function() {
								 var imagelocation=e.target.result;
								 var base64result = imagelocation.split(',')[1];
												  
							   $scope.stepsModelTech.push(base64result);
									//alert($scope.stepsModel.length);
							});
						}
						$scope.removeImgTech=function(stepTech)
						{
							 for(var i=0;i<$scope.stepsModelTech.length;i++) {
								
								if($scope.stepsModelTech[i] === stepTech) {
								
									$scope.stepsModelTech.splice(i,1);
								
									break;
								}}
							
						};
					
					//=============================================//
					
	  
	  
	  
	

   
 
   
   $scope.uncheckRadio = function(chk,index)
   {
	   var index = this.$index;
	   //alert(chk);
	   if(chk == 0){ $scope.dataField[index].basePlateyes = "";}else{$scope.dataField[index].basePlateyes = 0;}
   }
   
   //======New Selection clear field========//
      $scope.clearField = function(rmvData,index)
	  {
		  var index = this.$index;
		  //alert(rmvData);
		  if(rmvData.length==0)
		  {
			 //alert(rmvData.length); 
			 $scope.dataField[index].hssRadialLoadKn = '0';
		  }
		  else if(rmvData.length==1)
		  {
			  //alert(rmvData.length);
			  $scope.dataField[index].hssRadialLoadKn = "";
		  }
		  else
		  {
			 //alert(rmvData);
			   $scope.dataField[index].hssRadialLoadKn = rmvData;
		  }
		  
	  }
	  $scope.defaultVal = function(rmvVal,index)
	  {
		  //alert(rmvVal);
		   var index = this.$index;
		  if(rmvVal.length=="")
		  {
			  //alert(454);
			  $scope.dataField[index].hssRadialLoadKn = '0';
		  }
	  }
	  $scope.clearFieldLoadMm = function(rmvData,index)
	  {
		  var index = this.$index;
		  
		  if(rmvData.length==0)
		  {
			 //alert(rmvData.length); 
			 $scope.dataField[index].hssRadialLoadMm = '0';
		  }
		  else if(rmvData.length==1)
		  {
			  //alert(rmvData.length);
			  $scope.dataField[index].hssRadialLoadMm = "";
		  }
		  else
		  {
			  // alert(rmvData.length);
			   $scope.dataField[index].hssRadialLoadMm = rmvData;
		  }
		  
	  }
	  $scope.defaultValLoadMm = function(rmvVal,index)
	  {
		  //alert(rmvVal);
		   var index = this.$index;
		  if(rmvVal.length=="")
		  {
			  //alert(454);
			  $scope.dataField[index].hssRadialLoadMm = '0';
		  }
	  }
	  $scope.clearFieldLoadKn = function(rmvData,index)
	  {
		  var index = this.$index;
		  
		  if(rmvData.length==0)
		  {
			 //alert(rmvData.length); 
			 $scope.dataField[index].hssAxialLoadKn = '0';
		  }
		  else if(rmvData.length==1)
		  {
			  //alert(rmvData.length);
			  $scope.dataField[index].hssAxialLoadKn = "";
		  }
		  else
		  {
			  // alert(rmvData.length);
			   $scope.dataField[index].hssAxialLoadKn = rmvData;
		  }
		  
	  }
	  $scope.defaultValLoadKn = function(rmvVal,index)
	  {
		  //alert(rmvVal);
		   var index = this.$index;
		  if(rmvVal.length=="")
		  {
			  //alert(454);
			  $scope.dataField[index].hssAxialLoadKn = '0';
		  }
	  }
	  $scope.clearsssFieldLoadKn = function(rmvData,index)
	  {
		  var index = this.$index;
		  
		  if(rmvData.length==0)
		  {
			 //alert(rmvData.length); 
			 $scope.dataField[index].sssRadialLoadKn = '0';
		  }
		  else if(rmvData.length==1)
		  {
			  //alert(rmvData.length);
			  $scope.dataField[index].sssRadialLoadKn = "";
		  }
		  else
		  {
			  // alert(rmvData.length);
			   $scope.dataField[index].sssRadialLoadKn = rmvData;
		  }
		  
	  }
	  $scope.defaultsssValLoadKn = function(rmvVal,index)
	  {
		  //alert(rmvVal);
		   var index = this.$index;
		  if(rmvVal.length=="")
		  {
			  //alert(454);
			  $scope.dataField[index].sssRadialLoadKn = '0';
		  }
	  }
	  $scope.clearsssFieldLoadMm = function(rmvData,index)
	  {
		  var index = this.$index;
		  
		  if(rmvData.length==0)
		  {
			 //alert(rmvData.length); 
			 $scope.dataField[index].sssRadialLoadMm = '0';
		  }
		  else if(rmvData.length==1)
		  {
			  //alert(rmvData.length);
			  $scope.dataField[index].sssRadialLoadMm = "";
		  }
		  else
		  {
			  // alert(rmvData.length);
			   $scope.dataField[index].sssRadialLoadMm = rmvData;
		  }
		  
	  }
	  $scope.defaultsssValLoadMm = function(rmvVal,index)
	  {
		  //alert(rmvVal);
		   var index = this.$index;
		  if(rmvVal.length=="")
		  {
			  //alert(454);
			  $scope.dataField[index].sssRadialLoadMm = '0';
		  }
	  }
	  $scope.clearAxialLoadKn = function(rmvData,index)
	  {
		  var index = this.$index;
		  
		  if(rmvData.length==0)
		  {
			 //alert(rmvData.length); 
			 $scope.dataField[index].sssAxialLoadKn = '0';
		  }
		  else if(rmvData.length==1)
		  {
			  //alert(rmvData.length);
			  $scope.dataField[index].sssAxialLoadKn = "";
		  }
		  else
		  {
			  // alert(rmvData.length);
			   $scope.dataField[index].sssAxialLoadKn = rmvData;
		  }
		  
	  }
	  $scope.defaultAxialLoadKn = function(rmvVal,index)
	  {
		  //alert(rmvVal);
		   var index = this.$index;
		  if(rmvVal.length=="")
		  {
			  //alert(454);
			  $scope.dataField[index].sssAxialLoadKn = '0';
		  }
	  }
	  
	  //======Competitor Replace clear field========//
	  $scope.CompField = function(rmvData,index)
	  {
		  var index = this.$index;
		  
		  if(rmvData.length==0)
		  {
			 //alert(rmvData.length); 
			 $scope.dataCompetitor[index].hssRadialLoadKn = '0';
		  }
		  else if(rmvData.length==1)
		  {
			  //alert(rmvData.length);
			  $scope.dataCompetitor[index].hssRadialLoadKn = "";
		  }
		  else
		  {
			  // alert(rmvData.length);
			   $scope.dataCompetitor[index].hssRadialLoadKn = rmvData;
		  }
		  
	  }
	  $scope.defaultCompVal = function(rmvVal,index)
	  {
		  //alert(rmvVal);
		   var index = this.$index;
		  if(rmvVal.length=="")
		  {
			  //alert(454);
			  $scope.dataCompetitor[index].hssRadialLoadKn = '0';
		  }
	  }
	  $scope.CompFieldLoadMm = function(rmvData,index)
	  {
		  var index = this.$index;
		  
		  if(rmvData.length==0)
		  {
			 //alert(rmvData.length); 
			 $scope.dataCompetitor[index].hssRadialLoadMm = '0';
		  }
		  else if(rmvData.length==1)
		  {
			  //alert(rmvData.length);
			  $scope.dataCompetitor[index].hssRadialLoadMm = "";
		  }
		  else
		  {
			  // alert(rmvData.length);
			   $scope.dataCompetitor[index].hssRadialLoadMm = rmvData;
		  }
		  
	  }
	  $scope.defaultCompValLoadMm = function(rmvVal,index)
	  {
		  //alert(rmvVal);
		   var index = this.$index;
		  if(rmvVal.length=="")
		  {
			  //alert(454);
			  $scope.dataCompetitor[index].hssRadialLoadMm = '0';
		  }
	  }
	  $scope.CompFieldLoadKn = function(rmvData,index)
	  {
		  var index = this.$index;
		  
		  if(rmvData.length==0)
		  {
			 //alert(rmvData.length); 
			 $scope.dataCompetitor[index].hssAxialLoadKn = '0';
		  }
		  else if(rmvData.length==1)
		  {
			  //alert(rmvData.length);
			  $scope.dataCompetitor[index].hssAxialLoadKn = "";
		  }
		  else
		  {
			  // alert(rmvData.length);
			   $scope.dataCompetitor[index].hssAxialLoadKn = rmvData;
		  }
		  
	  }
	  $scope.defaultCompValLoadKn = function(rmvVal,index)
	  {
		  //alert(rmvVal);
		   var index = this.$index;
		  if(rmvVal.length=="")
		  {
			  //alert(454);
			  $scope.dataCompetitor[index].hssAxialLoadKn = '0';
		  }
	  }
	  $scope.CompsssFieldLoadKn = function(rmvData,index)
	  {
		  var index = this.$index;
		  
		  if(rmvData.length==0)
		  {
			 //alert(rmvData.length); 
			 $scope.dataCompetitor[index].sssRadialLoadKn = '0';
		  }
		  else if(rmvData.length==1)
		  {
			  //alert(rmvData.length);
			  $scope.dataCompetitor[index].sssRadialLoadKn = "";
		  }
		  else
		  {
			  // alert(rmvData.length);
			   $scope.dataCompetitor[index].sssRadialLoadKn = rmvData;
		  }
		  
	  }
	  $scope.defaultCompsssValLoadKn = function(rmvVal,index)
	  {
		  //alert(rmvVal);
		   var index = this.$index;
		  if(rmvVal.length=="")
		  {
			  //alert(454);
			  $scope.dataCompetitor[index].sssRadialLoadKn = '0';
		  }
	  }
	  $scope.CompsssFieldLoadMm = function(rmvData,index)
	  {
		  var index = this.$index;
		  
		  if(rmvData.length==0)
		  {
			 //alert(rmvData.length); 
			 $scope.dataCompetitor[index].sssRadialLoadMm = '0';
		  }
		  else if(rmvData.length==1)
		  {
			  //alert(rmvData.length);
			  $scope.dataCompetitor[index].sssRadialLoadMm = "";
		  }
		  else
		  {
			  // alert(rmvData.length);
			   $scope.dataCompetitor[index].sssRadialLoadMm = rmvData;
		  }
		  
	  }
	  $scope.defaultCompsssValLoadMm = function(rmvVal,index)
	  {
		  //alert(rmvVal);
		   var index = this.$index;
		  if(rmvVal.length=="")
		  {
			  //alert(454);
			  $scope.dataCompetitor[index].sssRadialLoadMm = '0';
		  }
	  }
	  $scope.CompaxialLoadKn = function(rmvData,index)
	  {
		  var index = this.$index;
		  
		  if(rmvData.length==0)
		  {
			 //alert(rmvData.length); 
			 $scope.dataCompetitor[index].sssAxialLoadKn = '0';
		  }
		  else if(rmvData.length==1)
		  {
			  //alert(rmvData.length);
			  $scope.dataCompetitor[index].sssAxialLoadKn = "";
		  }
		  else
		  {
			  // alert(rmvData.length);
			   $scope.dataCompetitor[index].sssAxialLoadKn = rmvData;
		  }
		  
	  }
	  $scope.defaultCompAxialLoadKn = function(rmvVal,index)
	  {
		  //alert(rmvVal);
		   var index = this.$index;
		  if(rmvVal.length=="")
		  {
			  //alert(454);
			  $scope.dataCompetitor[index].sssAxialLoadKn = '0';
		  }
	  }
	  //======Sumitomo Replace clear field========//
	  $scope.SumitField = function(rmvData,index)
	  {
		  var index = this.$index;
		  
		  if(rmvData.length==0)
		  {
			 //alert(rmvData.length); 
			 $scope.dataSumitomo[index].hssRadialLoadKn = '0';
		  }
		  else if(rmvData.length==1)
		  {
			  //alert(rmvData.length);
			  $scope.dataSumitomo[index].hssRadialLoadKn = "";
		  }
		  else
		  {
			  // alert(rmvData.length);
			   $scope.dataSumitomo[index].hssRadialLoadKn = rmvData;
		  }
		  
	  }
	  $scope.defaultSumitVal = function(rmvVal,index)
	  {
		  //alert(rmvVal);
		   var index = this.$index;
		  if(rmvVal.length=="")
		  {
			  //alert(454);
			  $scope.dataSumitomo[index].hssRadialLoadKn = '0';
		  }
	  }
	  $scope.SumitFieldLoadMm = function(rmvData,index)
	  {
		  var index = this.$index;
		  
		  if(rmvData.length==0)
		  {
			 //alert(rmvData.length); 
			 $scope.dataSumitomo[index].hssRadialLoadMm = '0';
		  }
		  else if(rmvData.length==1)
		  {
			  //alert(rmvData.length);
			  $scope.dataSumitomo[index].hssRadialLoadMm = "";
		  }
		  else
		  {
			  // alert(rmvData.length);
			   $scope.dataSumitomo[index].hssRadialLoadMm = rmvData;
		  }
		  
	  }
	  $scope.defaultSumitValLoadMm = function(rmvVal,index)
	  {
		  //alert(rmvVal);
		   var index = this.$index;
		  if(rmvVal.length=="")
		  {
			  //alert(454);
			  $scope.dataSumitomo[index].hssRadialLoadMm = '0';
		  }
	  }
	  $scope.SumitFieldLoadKn = function(rmvData,index)
	  {
		  var index = this.$index;
		  
		  if(rmvData.length==0)
		  {
			 //alert(rmvData.length); 
			 $scope.dataSumitomo[index].hssAxialLoadKn = '0';
		  }
		  else if(rmvData.length==1)
		  {
			  //alert(rmvData.length);
			  $scope.dataSumitomo[index].hssAxialLoadKn = "";
		  }
		  else
		  {
			  // alert(rmvData.length);
			   $scope.dataSumitomo[index].hssAxialLoadKn = rmvData;
		  }
		  
	  }
	  $scope.defaultSumitValLoadKn = function(rmvVal,index)
	  {
		  //alert(rmvVal);
		   var index = this.$index;
		  if(rmvVal.length=="")
		  {
			  //alert(454);
			  $scope.dataSumitomo[index].hssAxialLoadKn = '0';
		  }
	  }
	  $scope.SumitsssFieldLoadKn = function(rmvData,index)
	  {
		  var index = this.$index;
		  
		  if(rmvData.length==0)
		  {
			 //alert(rmvData.length); 
			 $scope.dataSumitomo[index].sssRadialLoadKn = '0';
		  }
		  else if(rmvData.length==1)
		  {
			  //alert(rmvData.length);
			  $scope.dataSumitomo[index].sssRadialLoadKn = "";
		  }
		  else
		  {
			  // alert(rmvData.length);
			   $scope.dataSumitomo[index].sssRadialLoadKn = rmvData;
		  }
		  
	  }
	  $scope.defaultSumitsssValLoadKn = function(rmvVal,index)
	  {
		  //alert(rmvVal);
		   var index = this.$index;
		  if(rmvVal.length=="")
		  {
			  //alert(454);
			  $scope.dataSumitomo[index].sssRadialLoadKn = '0';
		  }
	  }
	  $scope.SumitsssFieldLoadMm = function(rmvData,index)
	  {
		  var index = this.$index;
		  
		  if(rmvData.length==0)
		  {
			 //alert(rmvData.length); 
			 $scope.dataSumitomo[index].sssRadialLoadMm = '0';
		  }
		  else if(rmvData.length==1)
		  {
			  //alert(rmvData.length);
			  $scope.dataSumitomo[index].sssRadialLoadMm = "";
		  }
		  else
		  {
			  // alert(rmvData.length);
			   $scope.dataSumitomo[index].sssRadialLoadMm = rmvData;
		  }
		  
	  }
	  $scope.defaultSumitsssValLoadMm = function(rmvVal,index)
	  {
		  //alert(rmvVal);
		   var index = this.$index;
		  if(rmvVal.length=="")
		  {
			  //alert(454);
			  $scope.dataSumitomo[index].sssRadialLoadMm = '0';
		  }
	  }
	  $scope.SumitaxialLoadKn = function(rmvData,index)
	  {
		  var index = this.$index;
		  
		  if(rmvData.length==0)
		  {
			 //alert(rmvData.length); 
			 $scope.dataSumitomo[index].sssAxialLoadKn = '0';
		  }
		  else if(rmvData.length==1)
		  {
			  //alert(rmvData.length);
			  $scope.dataSumitomo[index].sssAxialLoadKn = "";
		  }
		  else
		  {
			  // alert(rmvData.length);
			   $scope.dataSumitomo[index].sssAxialLoadKn = rmvData;
		  }
		  
	  }
	  $scope.defaultSumitAxialLoadKn = function(rmvVal,index)
	  {
		  //alert(rmvVal);
		   var index = this.$index;
		  if(rmvVal.length=="")
		  {
			  //alert(454);
			  $scope.dataSumitomo[index].sssAxialLoadKn = '0';
		  }
	  }
	   //======Tech Query clear field========//
	  $scope.TechField = function(rmvData,index)
	  {
		  var index = this.$index;
		  
		  if(rmvData.length==0)
		  {
			 //alert(rmvData.length); 
			 $scope.dataQuery[index].hssRadialLoadKn = '0';
		  }
		  else if(rmvData.length==1)
		  {
			  //alert(rmvData.length);
			  $scope.dataQuery[index].hssRadialLoadKn = "";
		  }
		  else
		  {
			  // alert(rmvData.length);
			   $scope.dataQuery[index].hssRadialLoadKn = rmvData;
		  }
		  
	  }
	  $scope.defaultTechVal = function(rmvVal,index)
	  {
		  //alert(rmvVal);
		   var index = this.$index;
		  if(rmvVal.length=="")
		  {
			  //alert(454);
			  $scope.dataQuery[index].hssRadialLoadKn = '0';
		  }
	  }
	  $scope.TechFieldLoadMm = function(rmvData,index)
	  {
		  var index = this.$index;
		  
		  if(rmvData.length==0)
		  {
			 //alert(rmvData.length); 
			 $scope.dataQuery[index].hssRadialLoadMm = '0';
		  }
		  else if(rmvData.length==1)
		  {
			  //alert(rmvData.length);
			  $scope.dataQuery[index].hssRadialLoadMm = "";
		  }
		  else
		  {
			  // alert(rmvData.length);
			   $scope.dataQuery[index].hssRadialLoadMm = rmvData;
		  }
		  
	  }
	  $scope.defaultTechtValLoadMm = function(rmvVal,index)
	  {
		  //alert(rmvVal);
		   var index = this.$index;
		  if(rmvVal.length=="")
		  {
			  //alert(454);
			  $scope.dataQuery[index].hssRadialLoadMm = '0';
		  }
	  }
	  $scope.TechFieldLoadKn = function(rmvData,index)
	  {
		  var index = this.$index;
		  
		  if(rmvData.length==0)
		  {
			 //alert(rmvData.length); 
			 $scope.dataQuery[index].hssAxialLoadKn = '0';
		  }
		  else if(rmvData.length==1)
		  {
			  //alert(rmvData.length);
			  $scope.dataQuery[index].hssAxialLoadKn = "";
		  }
		  else
		  {
			  // alert(rmvData.length);
			   $scope.dataQuery[index].hssAxialLoadKn = rmvData;
		  }
		  
	  }
	  $scope.defaultTechValLoadKn = function(rmvVal,index)
	  {
		  //alert(rmvVal);
		   var index = this.$index;
		  if(rmvVal.length=="")
		  {
			  //alert(454);
			  $scope.dataQuery[index].hssAxialLoadKn = '0';
		  }
	  }
	  $scope.TechsssFieldLoadKn = function(rmvData,index)
	  {
		  var index = this.$index;
		  
		  if(rmvData.length==0)
		  {
			 //alert(rmvData.length); 
			 $scope.dataQuery[index].sssRadialLoadKn = '0';
		  }
		  else if(rmvData.length==1)
		  {
			  //alert(rmvData.length);
			  $scope.dataQuery[index].sssRadialLoadKn = "";
		  }
		  else
		  {
			  // alert(rmvData.length);
			   $scope.dataQuery[index].sssRadialLoadKn = rmvData;
		  }
		  
	  }
	  $scope.defaultTechsssValLoadKn = function(rmvVal,index)
	  {
		  //alert(rmvVal);
		   var index = this.$index;
		  if(rmvVal.length=="")
		  {
			  //alert(454);
			  $scope.dataQuery[index].sssRadialLoadKn = '0';
		  }
	  }
	  $scope.TechsssFieldLoadMm = function(rmvData,index)
	  {
		  var index = this.$index;
		  
		  if(rmvData.length==0)
		  {
			 //alert(rmvData.length); 
			 $scope.dataQuery[index].sssRadialLoadMm = '0';
		  }
		  else if(rmvData.length==1)
		  {
			  //alert(rmvData.length);
			  $scope.dataQuery[index].sssRadialLoadMm = "";
		  }
		  else
		  {
			  // alert(rmvData.length);
			   $scope.dataQuery[index].sssRadialLoadMm = rmvData;
		  }
		  
	  }
	  $scope.defaultTechsssValLoadMm = function(rmvVal,index)
	  {
		  //alert(rmvVal);
		   var index = this.$index;
		  if(rmvVal.length=="")
		  {
			  //alert(454);
			  $scope.dataQuery[index].sssRadialLoadMm = '0';
		  }
	  }
	  $scope.TechaxialLoadKn = function(rmvData,index)
	  {
		  var index = this.$index;
		  
		  if(rmvData.length==0)
		  {
			 //alert(rmvData.length); 
			 $scope.dataQuery[index].sssAxialLoadKn = '0';
		  }
		  else if(rmvData.length==1)
		  {
			  //alert(rmvData.length);
			  $scope.dataQuery[index].sssAxialLoadKn = "";
		  }
		  else
		  {
			  // alert(rmvData.length);
			   $scope.dataQuery[index].sssAxialLoadKn = rmvData;
		  }
		  
	  }
	  $scope.defaultTechAxialLoadKn = function(rmvVal,index)
	  {
		  //alert(rmvVal);
		   var index = this.$index;
		  if(rmvVal.length=="")
		  {
			  //alert(454);
			  $scope.dataQuery[index].sssAxialLoadKn = '0';
		  }
	  }
	  
	  
	  /*$scope.clearFieldaltitude = function(rmvData,index)
	  {
		  var index = this.$index;
		  
		  if(rmvData.length==0)
		  {
			 //alert(rmvData.length); 
			 $scope.dataField[index].altitude = '0';
		  }
		  else if(rmvData.length==1)
		  {
			  //alert(rmvData.length);
			  $scope.dataField[index].altitude = "";
		  }
		  else
		  {
			  // alert(rmvData.length);
			   $scope.dataField[index].altitude = rmvData;
		  }
		  
	  }
	  $scope.defaultValaltitude = function(rmvVal,index)
	  {
		  //alert(rmvVal);
		   var index = this.$index;
		  if(rmvVal.length=="")
		  {
			  //alert(454);
			  $scope.dataField[index].altitude = '0';
		  }
	  }*/
	  
	  
	 /* $scope.clearFieldaltitudecomp = function(rmvData,index)
	  {
		  var index = this.$index;
		  
		  if(rmvData.length==0)
		  {
			 //alert(rmvData.length); 
			 $scope.dataCompetitor[index].altitude = '0';
		  }
		  else if(rmvData.length==1)
		  {
			  //alert(rmvData.length);
			  $scope.dataCompetitor[index].altitude = "";
		  }
		  else
		  {
			  // alert(rmvData.length);
			   $scope.dataCompetitor[index].altitude = rmvData;
		  }
		  
	  }
	  $scope.defaultValaltitudecomp = function(rmvVal,index)
	  {
		  //alert(rmvVal);
		   var index = this.$index;
		  if(rmvVal.length=="")
		  {
			  //alert(454);
			  $scope.dataCompetitor[index].altitude = '0';
		  }
	  }*/
	  
	  /*$scope.clearFieldaltitudesumit = function(rmvData,index)
	  {
		  var index = this.$index;
		  
		  if(rmvData.length==0)
		  {
			 //alert(rmvData.length); 
			 $scope.dataSumitomo[index].altitude = '0';
		  }
		  else if(rmvData.length==1)
		  {
			  //alert(rmvData.length);
			  $scope.dataSumitomo[index].altitude = "";
		  }
		  else
		  {
			  // alert(rmvData.length);
			   $scope.dataSumitomo[index].altitude = rmvData;
		  }
		  
	  }
	  $scope.defaultValaltitudesumit = function(rmvVal,index)
	  {
		  //alert(rmvVal);
		   var index = this.$index;
		  if(rmvVal.length=="")
		  {
			  //alert(454);
			  $scope.dataSumitomo[index].altitude = '0';
		  }
	  }*/
	  
	  /* $scope.clearFieldaltitudetech = function(rmvData,index)
	  {
		  var index = this.$index;
		  
		  if(rmvData.length==0)
		  {
			 //alert(rmvData.length); 
			 $scope.dataSumitomo[index].altitude = '0';
		  }
		  else if(rmvData.length==1)
		  {
			  //alert(rmvData.length);
			  $scope.dataSumitomo[index].altitude = "";
		  }
		  else
		  {
			  // alert(rmvData.length);
			   $scope.dataSumitomo[index].altitude = rmvData;
		  }
		  
	  }
	  $scope.defaultValaltitudetech = function(rmvVal,index)
	  {
		  //alert(rmvVal);
		   var index = this.$index;
		  if(rmvVal.length=="")
		  {
			  //alert(454);
			  $scope.dataSumitomo[index].altitude = '0';
		  }
	  }*/
	  

	
	$scope.resetNewcaseCustomerMasterData = function(Qtnmaster,CurTab,form)
	{
		//alert(Qtnmaster);
		//alert(CurTab);
		form.$setPristine(true);
		$timeout(function(){
			$.post("newCaseTabForCustmerAndProspect.do",{qtnmaster:Qtnmaster,tab:CurTab},function(json)
				{
			         
					  var tab=parseInt(json['tab']);
					  var gridVal = json['value'];
					  var validdata = json['maincaseform'][0];
					  var validgriddata = json['griddata'];
					 if(tab==1)
					 {
							if(gridVal == 0 || gridVal != undefined)
							  {
								
								  $scope.addCase=json['maincaseform'][0];
								  $scope.addDesp=json['description'][0]; 
								  $indexTab1=1;
								  $scope.dataField=[{'id':$indexTab1,'gm':'0','model':'0','ambientTemp':'40','rpm':'1450','pole':'4','phase':'3','motorType':'NO','quantity':'1','gearProduct':'CYCLO 6000','voltage':'200','hertz':'50','basefreq':'1','protectionGrade': 'IP55','internationalStd': 'JIS','mtrEfficncyClass':'0','inverter':'1','motorBrake':'1','motorBrakeVolt':'1','conf':'0','mount':'0','oshaft':'0','mount2':'0',oshaftInc1:false,oshaftInc2:false,'ishaft':'0','jadapt':'0','oshafty':'0','oshafty2':'4','backStop':'0','rot':'0','basePlate':'0','hssRadialLoadKn':'0','hssRadialLoadMm':'0','hssAxialLoadKn':'0','sssRadialLoadKn':'0','sssRadialLoadMm':'0','sssAxialLoadKn':'0','dirHssAxial':'0','dirSssAxial':'0','presetTorqueRot':'0','terminalBox':'N33','cableEntry':'N3A','altitude':'0m'}];
								  $scope.stepsModel = [];
								  cusImage = new FormData();
								   $scope.addCase.currentTab = tab;
								  $scope.$apply();
								  //$(".btn-hideNew").attr("disabled",false);
								  $('.btn-hideNew').removeClass('disabled');
								  //$('.Send-hideNew').removeClass('disabled');
								  $('.btn-discardNew').removeClass('disabled');
								 // $('#QtnBtnNew-hide').hide();
								 // $("#newSelection").show();
								 /*$("#CustomerCode").css("background-color", "#ffff7f"); 
								 $("#ContactPerson").css("background-color", "#ffffff");
								 $("#Telephone").css("background-color", "#ffffff"); 
								 $("#Address").css("background-color", "#ffffff");*/
								 if(validdata.customerCode == "" || validdata.customerCode == undefined || validdata.customerCode == "NA")
									   {
										   $("#CustomerCode").css("background-color", "#ffff7f"); 
									   }
									   else
									   {
										   $("#CustomerCode").css("background-color", "#99ff99");
									   }
									   if(validdata.contactPerson == "" || validdata.contactPerson == undefined || validdata.contactPerson == "NA")
									   {
										   $("#ContactPerson").css("background-color", "#ffffff"); 
									   }
									   else
									   {
										   $("#ContactPerson").css("background-color", "#99ff99");
									   }
									   if(validdata.phone == "" || validdata.phone == undefined || validdata.phone == "NA")
									   {
										   $("#Telephone").css("background-color", "#ffffff"); 
									   }
									   else
									   {
										   $("#Telephone").css("background-color", "#99ff99");
									   }
									   if(validdata.address == "" || validdata.address == undefined || validdata.address == "NA")
									   {
										   $("#Address").css("background-color", "#ffffff"); 
									   }
									   else
									   {
										   $("#Address").css("background-color", "#99ff99");
									   }
									   /*if(validdata.createdBy == "" || validdata.createdBy == undefined || validdata.createdBy == "NA")
										 {
											$("#CreatedBy").css("background-color", "#ffff7f"); 
											//$scope.addCase.createdBy = "";
										 }
										 else
										 {
											$("#CreatedBy").css("background-color", "#99ff99");
											//$scope.addCase.createdBy = validdata.createdby;
										 }*/
								 var departmentSplit = json['maincaseform'][0].assigned;
										 var departmentSales = [];
										 if(departmentSplit == undefined || departmentSplit == "" || departmentSplit == "NA")
										 {
											 //alert("if");
											 $('#picturegallery').val("['']").trigger('chosen:updated');
											 $("#picturegallery").css("background-color", "#ffff7f");
										 }
										 else
										 {
											//alert(departmentSplit.length + " " + " else ");
											 for (var s = 0; s < departmentSplit.length; s++) {
									
														departmentSales.push(departmentSplit[s]);
														//alert("accessoriesSales"+accessoriesSales);
											}
											 $('#picturegallery').val(departmentSales).trigger('chosen:updated');
															$scope.addCase.assigned = departmentSales;
															$("#picturegallery").css("background-color", "#99ff99");
										 }
								 
								 for(var i = 0; i<$scope.dataField.length; i++)
									   {
										   if($scope.dataField[i].gearMotor == "" || $scope.dataField[i].gearMotor == undefined || $scope.dataField[i].gearMotor == "NA")
										   {
											   $scope.dataField[i].requiredStatus = false; 
										       $("#GearMotor_"+parseInt(i+1)).css("background-color", "#ffffff"); 
										   }
										   else
										   {
											 $scope.dataField[i].requiredStatus = true; 
										     $("#GearMotor_"+parseInt(i+1)).css("background-color", "#ffff7f");   
										   }
										   if($scope.dataField[i].othersPlz == "" || $scope.dataField[i].othersPlz == undefined || $scope.dataField[i].othersPlz == "NA")
										   {
											   $scope.dataField[i].reqOtherSts = false; 
										       $("#OthersPlz_"+parseInt(i+1)).css("background-color", "#ffffff"); 
										   }
										   else
										   {
											 $scope.dataField[i].reqOtherSts = true; 
										     $("#OthersPlz_"+parseInt(i+1)).css("background-color", "#ffff7f");   
										   }
										   if($scope.dataField[i].other == "" || $scope.dataField[i].other == undefined || $scope.dataField[i].other == "NA")
										   {
											   $scope.dataField[i].reqMotorKW = false; 
										       $("#Other_"+parseInt(i+1)).css("background-color", "#ffffff"); 
										   }
										   else
										   {
											 $scope.dataField[i].reqMotorKW = true; 
										     $("#Other_"+parseInt(i+1)).css("background-color", "#ffff7f");   
										   }
										   if($scope.dataField[i].presetTorque == "" || $scope.dataField[i].presetTorque == undefined || $scope.dataField[i].presetTorque == "NA")
										   {
											   $scope.dataField[i].reqStatus = false; 
										       $("#PresetTorque_"+parseInt(i+1)).css("background-color", "#ffffff"); 
										   }
										   else
										   {
											 $scope.dataField[i].reqStatus = true; 
										     $("#PresetTorque_"+parseInt(i+1)).css("background-color", "#ffff7f");   
										   }
										  
									   }
								 
								 $scope.QtnBtnNew = '0';
								  
							  }
							 
							 else
							 {
								 //alert(json['maincaseform'][0].images + " img" + 1);
								   $scope.addCase=json['maincaseform'][0];
								   $scope.addDesp=json['description'][0]; 
								   $scope.dataField=json['griddata'];
								   $scope.QtnBtnNew = '0';
								    $scope.addCase.currentTab = tab;
								   //$scope.addCase.dateCase=dtcase[0];
								  // $scope.addCase.dateExp=dtexp[0];
								   //$scope.stepsModel = json['maincaseform'][0].images.split(',');
								   
								   var departmentSplit = json['maincaseform'][0].assigned;
										 var departmentSales = [];
										 if(departmentSplit == undefined || departmentSplit == "" || departmentSplit == "NA")
										 {
											 //alert("if");
											 $('#picturegallery').val("['']").trigger('chosen:updated');
											 $("#picturegallery").css("background-color", "#ffff7f");
										 }
										 else
										 {
											//alert(departmentSplit.length + " " + " else ");
											 for (var s = 0; s < departmentSplit.length; s++) {
									
														departmentSales.push(departmentSplit[s]);
														//alert("accessoriesSales"+accessoriesSales);
											}
											 $('#picturegallery').val(departmentSales).trigger('chosen:updated');
															$scope.addCase.assigned = departmentSales;
															$("#picturegallery").css("background-color", "#99ff99");
										 }
								   
									$scope.$apply(); 
									var getImage = json['maincaseform'][0].images;
									  // alert(getImage);
										 if(getImage!=null)
										   {
											   //alert(getImage + " " + 1);
											   var imgPrew = getImage.trim();
											   if(imgPrew==null || imgPrew=="" )
											   {
												   
													$scope.stepsModel = [];
												  $scope.$apply();
												  //$scope.dummyPhoto="";
												  //$('#dummyPhoto').trigger('blur');
											   }
											   else
											   {
												   //alert(getImage + " " + 3);
												   $scope.stepsModel = getImage.split(',');
												   $scope.$apply();
												   
											   }
										   }
										   else
										   {
											   //alert(getImage + " " + 4);
												$scope.stepsModel = [];
												$scope.$apply();
											 
										   }
										   
									   if(validdata.customerCode == "" || validdata.customerCode == undefined || validdata.customerCode == "NA")
									   {
										   $("#CustomerCode").css("background-color", "#ffff7f"); 
									   }
									   else
									   {
										   $("#CustomerCode").css("background-color", "#99ff99");
									   }
									   if(validdata.contactPerson == "" || validdata.contactPerson == undefined || validdata.contactPerson == "NA")
									   {
										   $("#ContactPerson").css("background-color", "#ffffff"); 
									   }
									   else
									   {
										   $("#ContactPerson").css("background-color", "#99ff99");
									   }
									   if(validdata.phone == "" || validdata.phone == undefined || validdata.phone == "NA")
									   {
										   $("#Telephone").css("background-color", "#ffffff"); 
									   }
									   else
									   {
										   $("#Telephone").css("background-color", "#99ff99");
									   }
									   if(validdata.address == "" || validdata.address == undefined || validdata.address == "NA")
									   {
										   $("#Address").css("background-color", "#ffffff"); 
									   }
									   else
									   {
										   $("#Address").css("background-color", "#99ff99");
									   }
									   /*if(validdata.createdBy == "" || validdata.createdBy == undefined || validdata.createdBy == "NA")
										 {
											$("#CreatedBy").css("background-color", "#ffff7f"); 
											//$scope.addCase.createdBy = "";
										 }
										 else
										 {
											$("#CreatedBy").css("background-color", "#99ff99");
											//$scope.addCase.createdBy = validdata.createdby;
										 }*/
									   
									   for(var i = 0; i<validgriddata.length; i++)
									   {
										   if(validgriddata[i].gearMotor == "" || validgriddata[i].gearMotor == undefined || validgriddata[i].gearMotor == "NA")
										   {
											   $scope.dataField[i].requiredStatus = false; 
										       $("#GearMotor_"+parseInt(i+1)).css("background-color", "#ffffff"); 
										   }
										   else
										   {
											 $scope.dataField[i].requiredStatus = true; 
										     $("#GearMotor_"+parseInt(i+1)).css("background-color", "#ffff7f");   
										   }
										   if(validgriddata[i].othersPlz == "" || validgriddata[i].othersPlz == undefined || validgriddata[i].othersPlz == "NA")
										   {
											   $scope.dataField[i].reqOtherSts = false; 
										       $("#OthersPlz_"+parseInt(i+1)).css("background-color", "#ffffff"); 
										   }
										   else
										   {
											 $scope.dataField[i].reqOtherSts = true; 
										     $("#OthersPlz_"+parseInt(i+1)).css("background-color", "#ffff7f");   
										   }
										   if(validgriddata[i].other == "" || validgriddata[i].other == undefined || validgriddata[i].other == "NA")
										   {
											   $scope.dataField[i].reqMotorKW = false; 
										       $("#Other_"+parseInt(i+1)).css("background-color", "#ffffff"); 
										   }
										   else
										   {
											 $scope.dataField[i].reqMotorKW = true; 
										     $("#Other_"+parseInt(i+1)).css("background-color", "#ffff7f");   
										   }
										   if(validgriddata[i].presetTorque == "" || validgriddata[i].presetTorque == undefined || validgriddata[i].presetTorque == "NA")
										   {
											   $scope.dataField[i].reqStatus = false; 
										       $("#PresetTorque_"+parseInt(i+1)).css("background-color", "#ffffff"); 
										   }
										   else
										   {
											 $scope.dataField[i].reqStatus = true; 
										     $("#PresetTorque_"+parseInt(i+1)).css("background-color", "#ffff7f");   
										   }
										  
									   }
								 
							 }
					 }
					 if(tab==2)
					 {
							if(gridVal ==0 || gridVal != undefined)
							{
								//alert(gridVal);
								//alert(JSON.stringify(json['maincaseform']));
								//alert(JSON.stringify($scope.addCase));
								  $scope.addCase = json['maincaseform'][0];
								  $scope.addDespComp=json['description'][0];
								  $indexTab2=1;
								  $scope.dataCompetitor=[{'id':$indexTab2,'gm':'0','model':'0','ambientTemp':'40','rpm':'1450','motorType':'NO','gearProduct':'CYCLO 6000','quantity':'1','voltage':'200','pole':'4','phase':'3','hertz':'50','basefreq':'1','protectionGrade': 'IP55','internationalStd': 'JIS','mtrEfficncyClass':'0','inverter':'1','motorBrake':'1','motorBrakeVolt':'1','dimension':'0','conf':'0','mount':'0','ishaft':'0','jadapt':'0','oshaft':'0','mount2':'0',oshaftInc1:false,oshaftInc2:false,'oshafty':'0','oshafty2':'4','backStop':'0','rot':'0','hssRadialLoadKn':'0','hssRadialLoadMm':'0','hssAxialLoadKn':'0','sssRadialLoadKn':'0','sssRadialLoadMm':'0','sssAxialLoadKn':'0','dirHssAxial':'0','dirSssAxial':'0','presetTorqueRot':'0','terminalBox':'N33','cableEntry':'N3A','altitude':'0m'}];
								  $scope.stepsModelComp = [];
								  cusImageComp = new FormData();
								  
								  $scope.addCase.currentTab = tab;
								  
								  //$('.btn-hideComp').attr('disabled',false);
								  $('.btn-hideComp').removeClass('disabled');
										  //$('.Send-hideComp').removeClass('disabled');
								  $('.btn-discarComp').removeClass('disabled');
								  $scope.qtnBtnComp = '0';
								 /* $("#CustomerCode").css("background-color", "#ffff7f"); 
								 $("#ContactPerson").css("background-color", "#ffffff");
								 $("#Telephone").css("background-color", "#ffffff"); 
								 $("#Address").css("background-color", "#ffffff");*/
								 if(validdata.customerCode == "" || validdata.customerCode == undefined || validdata.customerCode == "NA")
									   {
										   $("#CustomerCode").css("background-color", "#ffff7f"); 
									   }
									   else
									   {
										   $("#CustomerCode").css("background-color", "#99ff99");
									   }
									   if(validdata.contactPerson == "" || validdata.contactPerson == undefined || validdata.contactPerson == "NA")
									   {
										   $("#ContactPerson").css("background-color", "#ffffff"); 
									   }
									   else
									   {
										   $("#ContactPerson").css("background-color", "#99ff99");
									   }
									   if(validdata.phone == "" || validdata.phone == undefined || validdata.phone == "NA")
									   {
										   $("#Telephone").css("background-color", "#ffffff"); 
									   }
									   else
									   {
										   $("#Telephone").css("background-color", "#99ff99");
									   }
									   if(validdata.address == "" || validdata.address == undefined || validdata.address == "NA")
									   {
										   $("#Address").css("background-color", "#ffffff"); 
									   }
									   else
									   {
										   $("#Address").css("background-color", "#99ff99");
									   }
									   /*if(validdata.createdBy == "" || validdata.createdBy == undefined || validdata.createdBy == "NA")
										 {
											$("#CreatedBy").css("background-color", "#ffff7f"); 
											//$scope.addCase.createdBy = "";
										 }
										 else
										 {
											$("#CreatedBy").css("background-color", "#99ff99");
											//$scope.addCase.createdBy = validdata.createdby;
										 }*/
								 
								  for(var i = 0; i<$scope.dataCompetitor.length; i++)
												   {
													   if($scope.dataCompetitor[i].gearMotor == "" || $scope.dataCompetitor[i].gearMotor == undefined || $scope.dataCompetitor[i].gearMotor == "NA")
													   {
														   $scope.dataCompetitor[i].requiredStatus = false; 
														   $("#compGearMotor_"+parseInt(i+1)).css("background-color", "#ffffff"); 
													   }
													   else
													   {
														 $scope.dataCompetitor[i].requiredStatus = true; 
														 $("#compGearMotor_"+parseInt(i+1)).css("background-color", "#ffff7f");   
													   }
													   if($scope.dataCompetitor[i].othersPlz == "" || $scope.dataCompetitor[i].othersPlz == undefined || $scope.dataCompetitor[i].othersPlz == "NA")
													   {
														   $scope.dataCompetitor[i].reqOtherSts = false; 
														   $("#OthersPlzComp_"+parseInt(i+1)).css("background-color", "#ffffff"); 
													   }
													   else
													   {
														 $scope.dataCompetitor[i].reqOtherSts = true; 
														 $("#OthersPlzComp_"+parseInt(i+1)).css("background-color", "#ffff7f");   
													   }
													   if($scope.dataCompetitor[i].other == "" || $scope.dataCompetitor[i].other == undefined || $scope.dataCompetitor[i].other == "NA")
													   {
														   $scope.dataCompetitor[i].reqMotorKW = false; 
														   $("#OtherComp_"+parseInt(i+1)).css("background-color", "#ffffff"); 
													   }
													   else
													   {
														 $scope.dataCompetitor[i].reqMotorKW = true; 
														 $("#OtherComp_"+parseInt(i+1)).css("background-color", "#ffff7f");   
													   }
													   if($scope.dataCompetitor[i].presetTorque == "" || $scope.dataCompetitor[i].presetTorque == undefined || $scope.dataCompetitor[i].presetTorque == "NA")
													   {
														   $scope.dataCompetitor[i].reqStatus = false; 
														   $("#PresetTorqueComp_"+parseInt(i+1)).css("background-color", "#ffffff"); 
													   }
													   else
													   {
														 $scope.dataCompetitor[i].reqStatus = true; 
														 $("#PresetTorqueComp_"+parseInt(i+1)).css("background-color", "#ffff7f");   
													   }
													  
												   }
								  $scope.$apply();
							}
							else
							{
								   $scope.addCase=json['maincaseform'][0];
								   $scope.addDespComp=json['description'][0]; 
								   $scope.dataCompetitor=json['griddata'];
								   $scope.qtnBtnComp = '0';
								   $scope.addCase.currentTab = tab;
								   //$scope.stepsModelComp = json['maincaseform'][0].images.split(',');
									$scope.$apply(); 
								   var getImageComp = json['maincaseform'][0].images;
											  // alert(getImage);
												 if(getImageComp!=null)
												   {
													   //alert(getImage + " " + 1);
													   var imgPrew = getImageComp.trim();
													   if(imgPrew==null || imgPrew=="" )
													   {
														  
														  $scope.stepsModelComp = [];
														  $scope.$apply();
														  //$scope.dummyPhoto="";
														  //$('#dummyPhoto').trigger('blur');
													   }
													   else
													   {
														   //alert(getImage + " " + 3);
														   $scope.stepsModelComp = getImageComp.split(',');
														   $scope.$apply();
														   
													   }
												   }
												   else
												   {
													   //alert(getImage + " " + 4);
														$scope.stepsModelComp = [];
														$scope.$apply();
													 
												   }
												   if(validdata.customerCode == "" || validdata.customerCode == undefined || validdata.customerCode == "NA")
												   {
													   $("#CustomerCode").css("background-color", "#ffff7f"); 
												   }
												   else
												   {
													   $("#CustomerCode").css("background-color", "#99ff99");
												   }
												   if(validdata.contactPerson == "" || validdata.contactPerson == undefined || validdata.contactPerson == "NA")
												   {
													   $("#ContactPerson").css("background-color", "#ffffff"); 
												   }
												   else
												   {
													   $("#ContactPerson").css("background-color", "#99ff99");
												   }
												   if(validdata.phone == "" || validdata.phone == undefined || validdata.phone == "NA")
												   {
													   $("#Telephone").css("background-color", "#ffffff"); 
												   }
												   else
												   {
													   $("#Telephone").css("background-color", "#99ff99");
												   }
												   if(validdata.address == "" || validdata.address == undefined || validdata.address == "NA")
												   {
													   $("#Address").css("background-color", "#ffffff"); 
												   }
												   else
												   {
													   $("#Address").css("background-color", "#99ff99");
												   }
												    /*if(validdata.createdby == "" || validdata.createdby == undefined || validdata.createdby == "NA")
													 {
														$("#CreatedBy").css("background-color", "#ffff7f"); 
														//$scope.addCase.createdBy = "";
													 }
													 else
													 {
														$("#CreatedBy").css("background-color", "#99ff99");
														//$scope.addCase.createdBy = validdata.createdby;
													 }*/
												   
												    for(var i = 0; i<validgriddata.length; i++)
												   {
													   if(validgriddata[i].gearMotor == "" || validgriddata[i].gearMotor == undefined || validgriddata[i].gearMotor == "NA")
													   {
														   $scope.dataCompetitor[i].requiredStatus = false; 
														   $("#compGearMotor_"+parseInt(i+1)).css("background-color", "#ffffff"); 
													   }
													   else
													   {
														 $scope.dataCompetitor[i].requiredStatus = true; 
														 $("#compGearMotor_"+parseInt(i+1)).css("background-color", "#ffff7f");   
													   }
													   if(validgriddata[i].othersPlz == "" || validgriddata[i].othersPlz == undefined || validgriddata[i].othersPlz == "NA")
													   {
														   $scope.dataCompetitor[i].reqOtherSts = false; 
														   $("#OthersPlzComp_"+parseInt(i+1)).css("background-color", "#ffffff"); 
													   }
													   else
													   {
														 $scope.dataCompetitor[i].reqOtherSts = true; 
														 $("#OthersPlzComp_"+parseInt(i+1)).css("background-color", "#ffff7f");   
													   }
													   if(validgriddata[i].other == "" || validgriddata[i].other == undefined || validgriddata[i].other == "NA")
													   {
														   $scope.dataCompetitor[i].reqMotorKW = false; 
														   $("#OtherComp_"+parseInt(i+1)).css("background-color", "#ffffff"); 
													   }
													   else
													   {
														 $scope.dataCompetitor[i].reqMotorKW = true; 
														 $("#OtherComp_"+parseInt(i+1)).css("background-color", "#ffff7f");   
													   }
													   if(validgriddata[i].presetTorque == "" || validgriddata[i].presetTorque == undefined || validgriddata[i].presetTorque == "NA")
													   {
														   $scope.dataCompetitor[i].reqStatus = false; 
														   $("#PresetTorqueComp_"+parseInt(i+1)).css("background-color", "#ffffff"); 
													   }
													   else
													   {
														 $scope.dataCompetitor[i].reqStatus = true; 
														 $("#PresetTorqueComp_"+parseInt(i+1)).css("background-color", "#ffff7f");   
													   }
													  
												   }
								
							}
					 }
					 if(tab==3)
					 {
							if(gridVal == 0 || gridVal != undefined)
							{
								  $scope.addCase=json['maincaseform'][0];
								  $scope.addDespSumit=json['description'][0];
								  $indexTab3=1;
								  $scope.dataSumitomo=[{'id':$indexTab3,'gm':'0','model':'0','ambientTemp':'40','motorType':'NO','rpm':'1450','gearProduct':'CYCLO 6000','quantity':'1','hertz':'50','basefreq':'1','protectionGrade': 'IP55','internationalStd': 'JIS','voltage':'200','pole':'4','phase':'3','mtrEfficncyClass':'0','inverter':'1','motorBrake':'1','motorBrakeVolt':'1','dimension':'1','conf':'0','mount':'0','mount2':'0',oshaftInc1:false,oshaftInc2:false,'ishaft':'0','jadapt':'0','oshaft':'0','oshafty':'0','oshafty2':'4','backStop':'0','rot':'0','hssRadialLoadKn':'0','hssRadialLoadMm':'0','hssAxialLoadKn':'0','sssRadialLoadKn':'0','sssRadialLoadMm':'0','sssAxialLoadKn':'0','dirHssAxial':'0','dirSssAxial':'0','presetTorqueRot':'0','terminalBox':'N33','cableEntry':'N3A','altitude':'0m'}];
								   $scope.stepsModelSumit = [];
									cusImageSumit = new FormData();
									 $scope.addCase.currentTab = tab;
								  //$('.btn-hide').attr('disabled',false);
								  $('.btn-hideSumit').removeClass('disabled');
										  //$('.Send-hideSumit').removeClass('disabled');
								  $('.btn-discarSumit').removeClass('disabled');
								  $scope.qtnBtnSumit = '0';
								  /*$("#CustomerCode").css("background-color", "#ffff7f"); 
								 $("#ContactPerson").css("background-color", "#ffffff");
								 $("#Telephone").css("background-color", "#ffffff"); 
								 $("#Address").css("background-color", "#ffffff");*/
								 
								 if(validdata.customerCode == "" || validdata.customerCode == undefined || validdata.customerCode == "NA")
									   {
										   $("#CustomerCode").css("background-color", "#ffff7f"); 
									   }
									   else
									   {
										   $("#CustomerCode").css("background-color", "#99ff99");
									   }
									   if(validdata.contactPerson == "" || validdata.contactPerson == undefined || validdata.contactPerson == "NA")
									   {
										   $("#ContactPerson").css("background-color", "#ffffff"); 
									   }
									   else
									   {
										   $("#ContactPerson").css("background-color", "#99ff99");
									   }
									   if(validdata.phone == "" || validdata.phone == undefined || validdata.phone == "NA")
									   {
										   $("#Telephone").css("background-color", "#ffffff"); 
									   }
									   else
									   {
										   $("#Telephone").css("background-color", "#99ff99");
									   }
									   if(validdata.address == "" || validdata.address == undefined || validdata.address == "NA")
									   {
										   $("#Address").css("background-color", "#ffffff"); 
									   }
									   else
									   {
										   $("#Address").css("background-color", "#99ff99");
									   }
									   /*if(validdata.createdBy == "" || validdata.createdBy == undefined || validdata.createdBy == "NA")
										 {
											$("#CreatedBy").css("background-color", "#ffff7f"); 
											//$scope.addCase.createdBy = "";
										 }
										 else
										 {
											$("#CreatedBy").css("background-color", "#99ff99");
											//$scope.addCase.createdBy = validdata.createdby;
										 }*/
								 
								  for(var i = 0; i<$scope.dataSumitomo.length; i++)
													   {
														   if($scope.dataSumitomo[i].gearMotor == "" || $scope.dataSumitomo[i].gearMotor == undefined || $scope.dataSumitomo[i].gearMotor == "NA")
														   {
															   $scope.dataSumitomo[i].requiredStatus = false; 
															   $("#sumitGearMotor_"+parseInt(i+1)).css("background-color", "#ffffff"); 
														   }
														   else
														   {
															 $scope.dataSumitomo[i].requiredStatus = true; 
															 $("#sumitGearMotor_"+parseInt(i+1)).css("background-color", "#ffff7f");   
														   }
														   if($scope.dataSumitomo[i].othersPlz == "" || $scope.dataSumitomo[i].othersPlz == undefined || $scope.dataSumitomo[i].othersPlz == "NA")
														   {
															   $scope.dataSumitomo[i].reqOtherSts = false; 
															   $("#OthersPlzSumit_"+parseInt(i+1)).css("background-color", "#ffffff"); 
														   }
														   else
														   {
															 $scope.dataSumitomo[i].reqOtherSts = true; 
															 $("#OthersPlzSumit_"+parseInt(i+1)).css("background-color", "#ffff7f");   
														   }
														   if($scope.dataSumitomo[i].other == "" || $scope.dataSumitomo[i].other == undefined || $scope.dataSumitomo[i].other == "NA")
														   {
															   $scope.dataSumitomo[i].reqMotorKW = false; 
															   $("#OtherSumit_"+parseInt(i+1)).css("background-color", "#ffffff"); 
														   }
														   else
														   {
															 $scope.dataSumitomo[i].reqMotorKW = true; 
															 $("#OtherSumit_"+parseInt(i+1)).css("background-color", "#ffff7f");   
														   }
														   if($scope.dataSumitomo[i].presetTorque == "" || $scope.dataSumitomo[i].presetTorque == undefined || $scope.dataSumitomo[i].presetTorque == "NA")
														   {
															   $scope.dataSumitomo[i].reqStatus = false; 
															   $("#PresetTorqueSumit_"+parseInt(i+1)).css("background-color", "#ffffff"); 
														   }
														   else
														   {
															 $scope.dataSumitomo[i].reqStatus = true; 
															 $("#PresetTorqueSumit_"+parseInt(i+1)).css("background-color", "#ffff7f");   
														   }
														  
													   }
								  $scope.$apply();
							}
							else
							{
								   $scope.addCase=json['maincaseform'][0];
								   $scope.addDespSumit=json['description'][0]; 
								   $scope.dataSumitomo=json['griddata'];
								   $scope.qtnBtnSumit = '0';
									$scope.addCase.currentTab = tab;
								   //$scope.stepsModelSumit = json['maincaseform'][0].images.split(',');
								   //$('.sumitQtn').addClass('disabledBtn');
									 $scope.$apply();
								   var getImageSumit = json['maincaseform'][0].images;
											  // alert(getImage);
												 if(getImageSumit!=null)
												   {
													   //alert(getImage + " " + 1);
													   var imgPrew = getImageSumit.trim();
													   if(imgPrew==null || imgPrew=="" )
													   {
														  
														  $scope.stepsModelSumit = [];
														  $scope.$apply();
														  //$scope.dummyPhoto="";
														  //$('#dummyPhoto').trigger('blur');
													   }
													   else
													   {
														   //alert(getImage + " " + 3);
														   $scope.stepsModelSumit = getImageSumit.split(',');
														   $scope.$apply();
														  
													   }
												   }
												   else
												   {
													   //alert(getImage + " " + 4);
														$scope.stepsModelSumit = [];
														$scope.$apply();
													 
												   }
												   
												   if(validdata.customerCode == "" || validdata.customerCode == undefined || validdata.customerCode == "NA")
												   {
													   $("#CustomerCode").css("background-color", "#ffff7f"); 
												   }
												   else
												   {
													   $("#CustomerCode").css("background-color", "#99ff99");
												   }
												   if(validdata.contactPerson == "" || validdata.contactPerson == undefined || validdata.contactPerson == "NA")
												   {
													   $("#ContactPerson").css("background-color", "#ffffff"); 
												   }
												   else
												   {
													   $("#ContactPerson").css("background-color", "#99ff99");
												   }
												   if(validdata.phone == "" || validdata.phone == undefined || validdata.phone == "NA")
												   {
													   $("#Telephone").css("background-color", "#ffffff"); 
												   }
												   else
												   {
													   $("#Telephone").css("background-color", "#99ff99");
												   }
												   if(validdata.address == "" || validdata.address == undefined || validdata.address == "NA")
												   {
													   $("#Address").css("background-color", "#ffffff"); 
												   }
												   else
												   {
													   $("#Address").css("background-color", "#99ff99");
												   }
												  /* if(validdata.createdBy == "" || validdata.createdBy == undefined || validdata.createdBy == "NA")
													 {
														$("#CreatedBy").css("background-color", "#ffff7f"); 
														//$scope.addCase.createdBy = "";
													 }
													 else
													 {
														$("#CreatedBy").css("background-color", "#99ff99");
														//$scope.addCase.createdBy = validdata.createdby;
													 }*/
												     for(var i = 0; i<validgriddata.length; i++)
													   {
														   if(validgriddata[i].gearMotor == "" || validgriddata[i].gearMotor == undefined || validgriddata[i].gearMotor == "NA")
														   {
															   $scope.dataSumitomo[i].requiredStatus = false; 
															   $("#sumitGearMotor_"+parseInt(i+1)).css("background-color", "#ffffff"); 
														   }
														   else
														   {
															 $scope.dataSumitomo[i].requiredStatus = true; 
															 $("#sumitGearMotor_"+parseInt(i+1)).css("background-color", "#ffff7f");   
														   }
														   if(validgriddata[i].othersPlz == "" || validgriddata[i].othersPlz == undefined || validgriddata[i].othersPlz == "NA")
														   {
															   $scope.dataSumitomo[i].reqOtherSts = false; 
															   $("#OthersPlzSumit_"+parseInt(i+1)).css("background-color", "#ffffff"); 
														   }
														   else
														   {
															 $scope.dataSumitomo[i].reqOtherSts = true; 
															 $("#OthersPlzSumit_"+parseInt(i+1)).css("background-color", "#ffff7f");   
														   }
														   if(validgriddata[i].other == "" || validgriddata[i].other == undefined || validgriddata[i].other == "NA")
														   {
															   $scope.dataSumitomo[i].reqMotorKW = false; 
															   $("#OtherSumit_"+parseInt(i+1)).css("background-color", "#ffffff"); 
														   }
														   else
														   {
															 $scope.dataSumitomo[i].reqMotorKW = true; 
															 $("#OtherSumit_"+parseInt(i+1)).css("background-color", "#ffff7f");   
														   }
														   if(validgriddata[i].presetTorque == "" || validgriddata[i].presetTorque == undefined || validgriddata[i].presetTorque == "NA")
														   {
															   $scope.dataSumitomo[i].reqStatus = false; 
															   $("#PresetTorqueSumit_"+parseInt(i+1)).css("background-color", "#ffffff"); 
														   }
														   else
														   {
															 $scope.dataSumitomo[i].reqStatus = true; 
															 $("#PresetTorqueSumit_"+parseInt(i+1)).css("background-color", "#ffff7f");   
														   }
														  
													   }
								
							}
					 }
					 if(tab==4)
					 {
							if(gridVal == 0 || gridVal != undefined)
							{
								//alert("if");
								  $scope.addCase=json['maincaseform'][0];
								  $scope.addDespSpare=json['description'][0]; 
								 
								  //$indexPart = 0;
								  $indexTab4=1;
								  $scope.dataSparePart=[{'id':$indexTab4,'gm':'0','pole':'4','rpm':'1450','motorType':'NO','voltage':'200','phase':'3','gearProduct':'CYCLO 6000','quantity':'1','hertz':'50','basefreq':'1','protectionGrade': 'IP55','internationalStd': 'JIS','mtrEfficncyClass':'0','model':'0','inverter':'1','motorBrake':'1','motorBrakeVolt':'1','mtrsnosts':true,'terminalBox':'N33','cableEntry':'N3A',childData:[{'id':0}]}];
								  $scope.stepsModelSpare = [];
								  cusImageSpare = new FormData();
								   $scope.addCase.currentTab = tab;
								  //$('.btn-hideSpare').attr('disabled',false);
								  $('.btn-hideSpare').removeClass('disabled');
										  //$('.Send-hideSpare').removeClass('disabled');
								  $('.btn-discarSpare').removeClass('disabled');
								  $scope.qtnBtnSpare = '0';
								  
								/* $("#CustomerCode").css("background-color", "#ffff7f"); 
								 $("#ContactPerson").css("background-color", "#ffffff");
								 $("#Telephone").css("background-color", "#ffffff"); 
								 $("#Address").css("background-color", "#ffffff");*/
								 if(validdata.customerCode == "" || validdata.customerCode == undefined || validdata.customerCode == "NA")
									   {
										   $("#CustomerCode").css("background-color", "#ffff7f"); 
									   }
									   else
									   {
										   $("#CustomerCode").css("background-color", "#99ff99");
									   }
									   if(validdata.contactPerson == "" || validdata.contactPerson == undefined || validdata.contactPerson == "NA")
									   {
										   $("#ContactPerson").css("background-color", "#ffffff"); 
									   }
									   else
									   {
										   $("#ContactPerson").css("background-color", "#99ff99");
									   }
									   if(validdata.phone == "" || validdata.phone == undefined || validdata.phone == "NA")
									   {
										   $("#Telephone").css("background-color", "#ffffff"); 
									   }
									   else
									   {
										   $("#Telephone").css("background-color", "#99ff99");
									   }
									   if(validdata.address == "" || validdata.address == undefined || validdata.address == "NA")
									   {
										   $("#Address").css("background-color", "#ffffff"); 
									   }
									   else
									   {
										   $("#Address").css("background-color", "#99ff99");
									   }
									  /* if(validdata.createdBy == "" || validdata.createdBy == undefined || validdata.createdBy == "NA")
										 {
											$("#CreatedBy").css("background-color", "#ffff7f"); 
											//$scope.addCase.createdBy = "";
										 }
										 else
										 {
											$("#CreatedBy").css("background-color", "#99ff99");
											//$scope.addCase.createdBy = validdata.createdby;
										 }*/
									 for(var i = 0; i<$scope.dataSparePart.length; i++)
									   {
										   if($scope.dataSparePart[i].gm == "0")
										   {
											    $scope.dataSparePart[i].requiredStatus = false;
											    $scope.dataSparePart[i].shiMfgsts = false;
											   // $scope.dataSparePart[i].expSts = false;
											   // $scope.dataSparePart[i].mtrSprSts = false;
												$scope.dataSparePart[i].poleSprSts = false;
												$scope.dataSparePart[i].phSprSts = false;
												$scope.dataSparePart[i].voltSprSts = false;
												$scope.dataSparePart[i].hzSprSts = false;
												$scope.dataSparePart[i].rpmSprSts = false;
												$scope.dataSparePart[i].gearsts = false;
												$scope.dataSparePart[i].mtrsnosts = true;
										       $("#spareGearMotor_"+parseInt(i+1)).css("background-color", "#ffffff");
											   $("#SHImfg_"+parseInt(i+1)).css("background-color", "#ffffff");
											   //$("#MotorType_"+parseInt(i+1)).css("background-color", "#ffffff");
											   //$("#MotorKW_"+parseInt(i+1)).css("background-color", "#ffffff");
											   $("#Pole_"+parseInt(i+1)).css("background-color", "#ffffff");
											   $("#Phase_"+parseInt(i+1)).css("background-color", "#ffffff");
											   $("#Voltage_"+parseInt(i+1)).css("background-color", "#ffffff");
											   $("#Hertz_"+parseInt(i+1)).css("background-color", "#ffffff");
											   $("#RPM_"+parseInt(i+1)).css("background-color", "#ffffff");
											   $("#gearHead_"+parseInt(i+1)).css("background-color", "#ffffff");
											   $("#MotorSerial_"+parseInt(i+1)).css("background-color", "#ffff7f");
											   if($scope.dataSparePart[i].motorKW == 'OTHER')
											   {
												   $scope.dataSparePart[i].mtrSprSts = true;
												   $scope.dataSparePart[i].reqMotorKW = true;
												   $("#MotorKW_"+parseInt(i+1)).css("background-color", "#ffff7f");
												   $("#OtherSpare_"+parseInt(i+1)).css("background-color", "#ffff7f");
											   }
											   else
											   {
												   $scope.dataSparePart[i].mtrSprSts = false;
												   $scope.dataSparePart[i].reqMotorKW = false;
												   $("#MotorKW_"+parseInt(i+1)).css("background-color", "#ffffff");
												   $("#OtherSpare_"+parseInt(i+1)).css("background-color", "#ffffff");
											   }
											   if($scope.dataSparePart[i].motorType == 'other - pls specify')
											   {
												  
												   $scope.dataSparePart[i].expSts = true;
												   $scope.dataSparePart[i].reqOtherSts = true;
												   $("#MotorType_"+parseInt(i+1)).css("background-color", "#ffff7f");
												   $("#OthersPlzSpare_"+parseInt(i+1)).css("background-color", "#ffff7f");
											   }
											   else
											   {
												   $scope.dataSparePart[i].expSts = false;
												   $scope.dataSparePart[i].reqOtherSts = false;
												   $("#MotorType_"+parseInt(i+1)).css("background-color", "#ffffff");
												   $("#OthersPlzSpare_"+parseInt(i+1)).css("background-color", "#ffffff");
											   }
										   }
										   else if($scope.dataSparePart[i].gm == "1")
										   {
											    $scope.dataSparePart[i].requiredStatus = false;
											    $scope.dataSparePart[i].shiMfgsts = false;
											   // $scope.dataSparePart[i].expSts = false;
											    //$scope.dataSparePart[i].mtrSprSts = false;
												$scope.dataSparePart[i].poleSprSts = false;
												$scope.dataSparePart[i].phSprSts = false;
												$scope.dataSparePart[i].voltSprSts = false;
												$scope.dataSparePart[i].hzSprSts = false;
												$scope.dataSparePart[i].rpmSprSts = false;
												$scope.dataSparePart[i].gearsts = true;
												$scope.dataSparePart[i].mtrsnosts = false;
										       $("#spareGearMotor_"+parseInt(i+1)).css("background-color", "#ffffff");
											   $("#SHImfg_"+parseInt(i+1)).css("background-color", "#ffffff");
											  // $("#MotorType_"+parseInt(i+1)).css("background-color", "#ffffff");
											   //$("#MotorKW_"+parseInt(i+1)).css("background-color", "#ffffff");
											   $("#Pole_"+parseInt(i+1)).css("background-color", "#ffffff");
											   $("#Phase_"+parseInt(i+1)).css("background-color", "#ffffff");
											   $("#Voltage_"+parseInt(i+1)).css("background-color", "#ffffff");
											   $("#Hertz_"+parseInt(i+1)).css("background-color", "#ffffff");
											   $("#RPM_"+parseInt(i+1)).css("background-color", "#ffffff");
											   $("#gearHead_"+parseInt(i+1)).css("background-color", "#ffff7f");
											   $("#MotorSerial_"+parseInt(i+1)).css("background-color", "#ffffff");
											   
											   if($scope.dataSparePart[i].motorKW == 'OTHER')
											   {
												   $scope.dataSparePart[i].mtrSprSts = true;
												   $scope.dataSparePart[i].reqMotorKW = true;
												   $("#MotorKW_"+parseInt(i+1)).css("background-color", "#ffff7f");
												   $("#OtherSpare_"+parseInt(i+1)).css("background-color", "#ffff7f");
											   }
											   else
											   {
												   $scope.dataSparePart[i].mtrSprSts = false;
												   $scope.dataSparePart[i].reqMotorKW = false;
												   $("#MotorKW_"+parseInt(i+1)).css("background-color", "#ffffff");
												   $("#OtherSpare_"+parseInt(i+1)).css("background-color", "#ffffff");
											   }
											   if($scope.dataSparePart[i].motorType == 'other - pls specify')
											   {
												  
												   $scope.dataSparePart[i].expSts = true;
												   $scope.dataSparePart[i].reqOtherSts = true;
												   $("#MotorType_"+parseInt(i+1)).css("background-color", "#ffff7f");
												   $("#OthersPlzSpare_"+parseInt(i+1)).css("background-color", "#ffff7f");
											   }
											   else
											   {
												   $scope.dataSparePart[i].expSts = false;
												   $scope.dataSparePart[i].reqOtherSts = false;
												   $("#MotorType_"+parseInt(i+1)).css("background-color", "#ffffff");
												   $("#OthersPlzSpare_"+parseInt(i+1)).css("background-color", "#ffffff");
											   }
										   }
										   else
										   {
											    $scope.dataSparePart[i].requiredStatus = true;
											    $scope.dataSparePart[i].shiMfgsts = true;
											    //$scope.dataSparePart[i].expSts = true;
											    //$scope.dataSparePart[i].mtrSprSts = true;
												$scope.dataSparePart[i].poleSprSts = true;
												$scope.dataSparePart[i].phSprSts = true;
												$scope.dataSparePart[i].voltSprSts = true;
												$scope.dataSparePart[i].hzSprSts = true;
												$scope.dataSparePart[i].rpmSprSts = true;
												$scope.dataSparePart[i].gearsts = false;
												$scope.dataSparePart[i].mtrsnosts = false;
										       $("#spareGearMotor_"+parseInt(i+1)).css("background-color", "#ffff7f");
											   $("#SHImfg_"+parseInt(i+1)).css("background-color", "#ffff7f");
											   //$("#MotorType_"+parseInt(i+1)).css("background-color", "#ffff7f");
											  // $("#MotorKW_"+parseInt(i+1)).css("background-color", "#ffff7f");
											   $("#Pole_"+parseInt(i+1)).css("background-color", "#ffff7f");
											   $("#Phase_"+parseInt(i+1)).css("background-color", "#ffff7f");
											   $("#Voltage_"+parseInt(i+1)).css("background-color", "#ffff7f");
											   $("#Hertz_"+parseInt(i+1)).css("background-color", "#ffff7f");
											   $("#RPM_"+parseInt(i+1)).css("background-color", "#ffff7f");
											   $("#gearHead_"+parseInt(i+1)).css("background-color", "#ffffff");
											   $("#MotorSerial_"+parseInt(i+1)).css("background-color", "#ffffff");
											   
											   if($scope.dataSparePart[i].motorKW == 'OTHER')
											   {
												   $scope.dataSparePart[i].mtrSprSts = true;
												   $scope.dataSparePart[i].reqMotorKW = true;
												   $("#MotorKW_"+parseInt(i+1)).css("background-color", "#ffff7f");
												   $("#OtherSpare_"+parseInt(i+1)).css("background-color", "#ffff7f");
											   }
											   else
											   {
												   $scope.dataSparePart[i].mtrSprSts = true;
												   $scope.dataSparePart[i].reqMotorKW = false;
												   $("#MotorKW_"+parseInt(i+1)).css("background-color", "#ffff7f");
												   $("#OtherSpare_"+parseInt(i+1)).css("background-color", "#ffffff");
											   }
											   if($scope.dataSparePart[i].motorType == 'other - pls specify')
											   {
												  
												   $scope.dataSparePart[i].expSts = true;
												   $scope.dataSparePart[i].reqOtherSts = true;
												   $("#MotorType_"+parseInt(i+1)).css("background-color", "#ffff7f");
												   $("#OthersPlzSpare_"+parseInt(i+1)).css("background-color", "#ffff7f");
											   }
											   else
											   {
												   $scope.dataSparePart[i].expSts = true;
												   $scope.dataSparePart[i].reqOtherSts = false;
												   $("#MotorType_"+parseInt(i+1)).css("background-color", "#ffff7f");
												   $("#OthersPlzSpare_"+parseInt(i+1)).css("background-color", "#ffffff");
											   }
										   }
									   }
								 
								 //for(var i = 0; i<$scope.dataSparePart.length; i++)
//									   {
//										   if($scope.dataSparePart[i].gearMotor == "" || $scope.dataSparePart[i].gearMotor == undefined || $scope.dataSparePart[i].gearMotor == "NA")
//										   {
//											   $scope.dataSparePart[i].requiredStatus = false; 
//										       $("#spareGearMotor_"+parseInt(i+1)).css("background-color", "#ffffff"); 
//										   }
//										   else
//										   {
//											 $scope.dataSparePart[i].requiredStatus = true; 
//										     $("#spareGearMotor_"+parseInt(i+1)).css("background-color", "#ffff7f");   
//										   }
//										   if($scope.dataSparePart[i].othersPlz == "" || $scope.dataSparePart[i].othersPlz == undefined || $scope.dataSparePart[i].othersPlz == "NA")
//										   {
//											   $scope.dataSparePart[i].reqOtherSts = false; 
//										       $("#OthersPlzSpare_"+parseInt(i+1)).css("background-color", "#ffffff"); 
//										   }
//										   else
//										   {
//											 $scope.dataSparePart[i].reqOtherSts = true; 
//										     $("#OthersPlzSpare_"+parseInt(i+1)).css("background-color", "#ffff7f");   
//										   }
//										   if($scope.dataSparePart[i].other == "" || $scope.dataSparePart[i].other == undefined || $scope.dataSparePart[i].other == "NA")
//										   {
//											   $scope.dataSparePart[i].reqMotorKW = false; 
//										       $("#OtherSpare_"+parseInt(i+1)).css("background-color", "#ffffff"); 
//										   }
//										   else
//										   {
//											 $scope.dataSparePart[i].reqMotorKW = true; 
//										     $("#OtherSpare_"+parseInt(i+1)).css("background-color", "#ffff7f");   
//										   }
//										   /*if(validgriddata[i].presetTorque == "" || validgriddata[i].presetTorque == undefined || validgriddata[i].presetTorque == "NA")
//										   {
//											   $scope.dataSparePart[i].reqStatus = false; 
//										       $("#PresetTorqueSumit_"+parseInt(i+1)).css("background-color", "#ffffff"); 
//										   }
//										   else
//										   {
//											 $scope.dataSparePart[i].reqStatus = true; 
//										     $("#PresetTorqueSumit_"+parseInt(i+1)).css("background-color", "#ffff7f");   
//										   }*/
//										   if($scope.dataSparePart[i].motorSerial == "" || $scope.dataSparePart[i].motorSerial == undefined || $scope.dataSparePart[i].motorSerial == "NA")
//										   {
//											   $scope.dataSparePart[i].mtrsnosts = false; 
//										       $("#MotorSerial_"+parseInt(i+1)).css("background-color", "#ffffff"); 
//										   }
//										   else
//										   {
//											 $scope.dataSparePart[i].mtrsnosts = true; 
//										     $("#MotorSerial_"+parseInt(i+1)).css("background-color", "#ffff7f");   
//										   }
//										   if($scope.dataSparePart[i].motorType == "" || $scope.dataSparePart[i].motorType == undefined || $scope.dataSparePart[i].motorType == "NA")
//										   {
//											   $scope.dataSparePart[i].expSts = false; 
//										       $("#MotorType_"+parseInt(i+1)).css("background-color", "#ffffff"); 
//										   }
//										   else
//										   {
//											 $scope.dataSparePart[i].expSts = true; 
//										     $("#MotorType_"+parseInt(i+1)).css("background-color", "#ffff7f");   
//										   }
//										   if($scope.dataSparePart[i].motorKW == "" || $scope.dataSparePart[i].motorKW == undefined || $scope.dataSparePart[i].motorKW == "NA")
//										   {
//											   $scope.dataSparePart[i].mtrSprSts = false; 
//										       $("#MotorKW_"+parseInt(i+1)).css("background-color", "#ffffff"); 
//										   }
//										   else
//										   {
//											 $scope.dataSparePart[i].mtrSprSts = true; 
//										     $("#MotorKW_"+parseInt(i+1)).css("background-color", "#ffff7f");   
//										   }
//										   if($scope.dataSparePart[i].pole == "" || $scope.dataSparePart[i].pole == undefined || $scope.dataSparePart[i].pole == "NA")
//										   {
//											   $scope.dataSparePart[i].poleSprSts = false; 
//										       $("#Pole_"+parseInt(i+1)).css("background-color", "#ffffff"); 
//										   }
//										   else
//										   {
//											 $scope.dataSparePart[i].poleSprSts = true; 
//										     $("#Pole_"+parseInt(i+1)).css("background-color", "#ffff7f");   
//										   }
//										   if($scope.dataSparePart[i].voltage == "" || $scope.dataSparePart[i].voltage == undefined || $scope.dataSparePart[i].voltage == "NA")
//										   {
//											   $scope.dataSparePart[i].voltSprSts = false; 
//										       $("#Voltage_"+parseInt(i+1)).css("background-color", "#ffffff"); 
//										   }
//										   else
//										   {
//											 $scope.dataSparePart[i].voltSprSts = true; 
//										     $("#Voltage_"+parseInt(i+1)).css("background-color", "#ffff7f");   
//										   }
//										   if($scope.dataSparePart[i].hertz == "" || $scope.dataSparePart[i].hertz == undefined || $scope.dataSparePart[i].hertz == "NA")
//										   {
//											   $scope.dataSparePart[i].hzSprSts = false; 
//										       $("#Hertz_"+parseInt(i+1)).css("background-color", "#ffffff"); 
//										   }
//										   else
//										   {
//											 $scope.dataSparePart[i].hzSprSts = true; 
//										     $("#Hertz_"+parseInt(i+1)).css("background-color", "#ffff7f");   
//										   }
//										    if($scope.dataSparePart[i].rpm == "" || $scope.dataSparePart[i].rpm == undefined || $scope.dataSparePart[i].rpm == "NA")
//										   {
//											   $scope.dataSparePart[i].rpmSprSts = false; 
//										       $("#RPM_"+parseInt(i+1)).css("background-color", "#ffffff"); 
//										   }
//										   else
//										   {
//											 $scope.dataSparePart[i].rpmSprSts = true; 
//										     $("#RPM_"+parseInt(i+1)).css("background-color", "#ffff7f");   
//										   }
//										  
//									   }
								 
								  $scope.$apply();
							}
							else
							{
								//alert("elser");
								  $scope.addCase=json['maincaseform'][0];
								  $scope.addDespSpare=json['description'][0]; 
								  $scope.dataSparePart=json['griddata'];
								  $scope.qtnBtnSpare = '0';
								   $scope.addCase.currentTab = tab;
								 // $scope.stepsModelSpare = json['maincaseform'][0].images.split(',');
								  $scope.$apply();
								 var getImageSpare = json['maincaseform'][0].images;
											  // alert(getImage);
												 if(getImageSpare!=null)
												   {
													   //alert(getImage + " " + 1);
													   var imgPrew = getImageSpare.trim();
													   if(imgPrew==null || imgPrew=="" )
													   {
														  
														  $scope.stepsModelSpare = [];
														  $scope.$apply();
														  //$scope.dummyPhoto="";
														  //$('#dummyPhoto').trigger('blur');
													   }
													   else
													   {
														   //alert(getImage + " " + 3);
														   $scope.stepsModelSpare = getImageSpare.split(',');
														   $scope.$apply();
														  
													   }
												   }
												   else
												   {
													   //alert(getImage + " " + 4);
														$scope.stepsModelSpare = [];
														$scope.$apply();
													 
												   }
									 if(validdata.customerCode == "" || validdata.customerCode == undefined || validdata.customerCode == "NA")
									   {
										   $("#CustomerCode").css("background-color", "#ffff7f"); 
									   }
									   else
									   {
										   $("#CustomerCode").css("background-color", "#99ff99");
									   }
									   if(validdata.contactPerson == "" || validdata.contactPerson == undefined || validdata.contactPerson == "NA")
									   {
										   $("#ContactPerson").css("background-color", "#ffffff"); 
									   }
									   else
									   {
										   $("#ContactPerson").css("background-color", "#99ff99");
									   }
									   if(validdata.phone == "" || validdata.phone == undefined || validdata.phone == "NA")
									   {
										   $("#Telephone").css("background-color", "#ffffff"); 
									   }
									   else
									   {
										   $("#Telephone").css("background-color", "#99ff99");
									   }
									   if(validdata.address == "" || validdata.address == undefined || validdata.address == "NA")
									   {
										   $("#Address").css("background-color", "#ffffff"); 
									   }
									   else
									   {
										   $("#Address").css("background-color", "#99ff99");
									   }
									   /*if(validdata.createdBy == "" || validdata.createdBy == undefined || validdata.createdBy == "NA")
										 {
											$("#CreatedBy").css("background-color", "#ffff7f"); 
											//$scope.addCase.createdBy = "";
										 }
										 else
										 {
											$("#CreatedBy").css("background-color", "#99ff99");
											//$scope.addCase.createdBy = validdata.createdby;
										 }*/
									  for(var i = 0; i<validgriddata.length; i++)
									   {
										   if(validgriddata[i].gm == "0")
										   {
											    $scope.dataSparePart[i].requiredStatus = false;
											    $scope.dataSparePart[i].shiMfgsts = false;
											   // $scope.dataSparePart[i].expSts = false;
											   // $scope.dataSparePart[i].mtrSprSts = false;
												$scope.dataSparePart[i].poleSprSts = false;
												$scope.dataSparePart[i].phSprSts = false;
												$scope.dataSparePart[i].voltSprSts = false;
												$scope.dataSparePart[i].hzSprSts = false;
												$scope.dataSparePart[i].rpmSprSts = false;
												$scope.dataSparePart[i].gearsts = false;
												$scope.dataSparePart[i].mtrsnosts = true;
										       $("#spareGearMotor_"+parseInt(i+1)).css("background-color", "#ffffff");
											   $("#SHImfg_"+parseInt(i+1)).css("background-color", "#ffffff");
											   //$("#MotorType_"+parseInt(i+1)).css("background-color", "#ffffff");
											   //$("#MotorKW_"+parseInt(i+1)).css("background-color", "#ffffff");
											   $("#Pole_"+parseInt(i+1)).css("background-color", "#ffffff");
											   $("#Phase_"+parseInt(i+1)).css("background-color", "#ffffff");
											   $("#Voltage_"+parseInt(i+1)).css("background-color", "#ffffff");
											   $("#Hertz_"+parseInt(i+1)).css("background-color", "#ffffff");
											   $("#RPM_"+parseInt(i+1)).css("background-color", "#ffffff");
											   $("#gearHead_"+parseInt(i+1)).css("background-color", "#ffffff");
											   $("#MotorSerial_"+parseInt(i+1)).css("background-color", "#ffff7f");
											   if(validgriddata[i].motorKW == 'OTHER')
											   {
												   $scope.dataSparePart[i].mtrSprSts = true;
												   $scope.dataSparePart[i].reqMotorKW = true;
												   $("#MotorKW_"+parseInt(i+1)).css("background-color", "#ffff7f");
												   $("#OtherSpare_"+parseInt(i+1)).css("background-color", "#ffff7f");
											   }
											   else
											   {
												   $scope.dataSparePart[i].mtrSprSts = false;
												   $scope.dataSparePart[i].reqMotorKW = false;
												   $("#MotorKW_"+parseInt(i+1)).css("background-color", "#ffffff");
												   $("#OtherSpare_"+parseInt(i+1)).css("background-color", "#ffffff");
											   }
											   if(validgriddata[i].motorType == 'other - pls specify')
											   {
												  
												   $scope.dataSparePart[i].expSts = true;
												   $scope.dataSparePart[i].reqOtherSts = true;
												   $("#MotorType_"+parseInt(i+1)).css("background-color", "#ffff7f");
												   $("#OthersPlzSpare_"+parseInt(i+1)).css("background-color", "#ffff7f");
											   }
											   else
											   {
												   $scope.dataSparePart[i].expSts = false;
												   $scope.dataSparePart[i].reqOtherSts = false;
												   $("#MotorType_"+parseInt(i+1)).css("background-color", "#ffffff");
												   $("#OthersPlzSpare_"+parseInt(i+1)).css("background-color", "#ffffff");
											   }
										   }
										   else if(validgriddata[i].gm == "1")
										   {
											    $scope.dataSparePart[i].requiredStatus = false;
											    $scope.dataSparePart[i].shiMfgsts = false;
											   // $scope.dataSparePart[i].expSts = false;
											    //$scope.dataSparePart[i].mtrSprSts = false;
												$scope.dataSparePart[i].poleSprSts = false;
												$scope.dataSparePart[i].phSprSts = false;
												$scope.dataSparePart[i].voltSprSts = false;
												$scope.dataSparePart[i].hzSprSts = false;
												$scope.dataSparePart[i].rpmSprSts = false;
												$scope.dataSparePart[i].gearsts = true;
												$scope.dataSparePart[i].mtrsnosts = false;
										       $("#spareGearMotor_"+parseInt(i+1)).css("background-color", "#ffffff");
											   $("#SHImfg_"+parseInt(i+1)).css("background-color", "#ffffff");
											  // $("#MotorType_"+parseInt(i+1)).css("background-color", "#ffffff");
											   //$("#MotorKW_"+parseInt(i+1)).css("background-color", "#ffffff");
											   $("#Pole_"+parseInt(i+1)).css("background-color", "#ffffff");
											   $("#Phase_"+parseInt(i+1)).css("background-color", "#ffffff");
											   $("#Voltage_"+parseInt(i+1)).css("background-color", "#ffffff");
											   $("#Hertz_"+parseInt(i+1)).css("background-color", "#ffffff");
											   $("#RPM_"+parseInt(i+1)).css("background-color", "#ffffff");
											   $("#gearHead_"+parseInt(i+1)).css("background-color", "#ffff7f");
											   $("#MotorSerial_"+parseInt(i+1)).css("background-color", "#ffffff");
											   
											   if(validgriddata[i].motorKW == 'OTHER')
											   {
												   $scope.dataSparePart[i].mtrSprSts = true;
												   $scope.dataSparePart[i].reqMotorKW = true;
												   $("#MotorKW_"+parseInt(i+1)).css("background-color", "#ffff7f");
												   $("#OtherSpare_"+parseInt(i+1)).css("background-color", "#ffff7f");
											   }
											   else
											   {
												   $scope.dataSparePart[i].mtrSprSts = false;
												   $scope.dataSparePart[i].reqMotorKW = false;
												   $("#MotorKW_"+parseInt(i+1)).css("background-color", "#ffffff");
												   $("#OtherSpare_"+parseInt(i+1)).css("background-color", "#ffffff");
											   }
											   if(validgriddata[i].motorType == 'other - pls specify')
											   {
												  
												   $scope.dataSparePart[i].expSts = true;
												   $scope.dataSparePart[i].reqOtherSts = true;
												   $("#MotorType_"+parseInt(i+1)).css("background-color", "#ffff7f");
												   $("#OthersPlzSpare_"+parseInt(i+1)).css("background-color", "#ffff7f");
											   }
											   else
											   {
												   $scope.dataSparePart[i].expSts = false;
												   $scope.dataSparePart[i].reqOtherSts = false;
												   $("#MotorType_"+parseInt(i+1)).css("background-color", "#ffffff");
												   $("#OthersPlzSpare_"+parseInt(i+1)).css("background-color", "#ffffff");
											   }
										   }
										   else
										   {
											    $scope.dataSparePart[i].requiredStatus = true;
											    $scope.dataSparePart[i].shiMfgsts = true;
											    //$scope.dataSparePart[i].expSts = true;
											    //$scope.dataSparePart[i].mtrSprSts = true;
												$scope.dataSparePart[i].poleSprSts = true;
												$scope.dataSparePart[i].phSprSts = true;
												$scope.dataSparePart[i].voltSprSts = true;
												$scope.dataSparePart[i].hzSprSts = true;
												$scope.dataSparePart[i].rpmSprSts = true;
												$scope.dataSparePart[i].gearsts = false;
												$scope.dataSparePart[i].mtrsnosts = false;
										       $("#spareGearMotor_"+parseInt(i+1)).css("background-color", "#ffff7f");
											   $("#SHImfg_"+parseInt(i+1)).css("background-color", "#ffff7f");
											   //$("#MotorType_"+parseInt(i+1)).css("background-color", "#ffff7f");
											  // $("#MotorKW_"+parseInt(i+1)).css("background-color", "#ffff7f");
											   $("#Pole_"+parseInt(i+1)).css("background-color", "#ffff7f");
											   $("#Phase_"+parseInt(i+1)).css("background-color", "#ffff7f");
											   $("#Voltage_"+parseInt(i+1)).css("background-color", "#ffff7f");
											   $("#Hertz_"+parseInt(i+1)).css("background-color", "#ffff7f");
											   $("#RPM_"+parseInt(i+1)).css("background-color", "#ffff7f");
											   $("#gearHead_"+parseInt(i+1)).css("background-color", "#ffffff");
											   $("#MotorSerial_"+parseInt(i+1)).css("background-color", "#ffffff");
											   
											   if(validgriddata[i].motorKW == 'OTHER')
											   {
												   $scope.dataSparePart[i].mtrSprSts = true;
												   $scope.dataSparePart[i].reqMotorKW = true;
												   $("#MotorKW_"+parseInt(i+1)).css("background-color", "#ffff7f");
												   $("#OtherSpare_"+parseInt(i+1)).css("background-color", "#ffff7f");
											   }
											   else
											   {
												   $scope.dataSparePart[i].mtrSprSts = true;
												   $scope.dataSparePart[i].reqMotorKW = false;
												   $("#MotorKW_"+parseInt(i+1)).css("background-color", "#ffff7f");
												   $("#OtherSpare_"+parseInt(i+1)).css("background-color", "#ffffff");
											   }
											   if(validgriddata[i].motorType == 'other - pls specify')
											   {
												  
												   $scope.dataSparePart[i].expSts = true;
												   $scope.dataSparePart[i].reqOtherSts = true;
												   $("#MotorType_"+parseInt(i+1)).css("background-color", "#ffff7f");
												   $("#OthersPlzSpare_"+parseInt(i+1)).css("background-color", "#ffff7f");
											   }
											   else
											   {
												   $scope.dataSparePart[i].expSts = true;
												   $scope.dataSparePart[i].reqOtherSts = false;
												   $("#MotorType_"+parseInt(i+1)).css("background-color", "#ffff7f");
												   $("#OthersPlzSpare_"+parseInt(i+1)).css("background-color", "#ffffff");
											   }
										   }
									   }
									   //for(var i = 0; i<validgriddata.length; i++)
//									   {
//										   if(validgriddata[i].gearMotor == "" || validgriddata[i].gearMotor == undefined || validgriddata[i].gearMotor == "NA")
//										   {
//											   $scope.dataSparePart[i].requiredStatus = false; 
//										       $("#spareGearMotor_"+parseInt(i+1)).css("background-color", "#ffffff"); 
//										   }
//										   else
//										   {
//											 $scope.dataSparePart[i].requiredStatus = true; 
//										     $("#spareGearMotor_"+parseInt(i+1)).css("background-color", "#ffff7f");   
//										   }
//										   if(validgriddata[i].othersPlz == "" || validgriddata[i].othersPlz == undefined || validgriddata[i].othersPlz == "NA")
//										   {
//											   $scope.dataSparePart[i].reqOtherSts = false; 
//										       $("#OthersPlzSpare_"+parseInt(i+1)).css("background-color", "#ffffff"); 
//										   }
//										   else
//										   {
//											 $scope.dataSparePart[i].reqOtherSts = true; 
//										     $("#OthersPlzSpare_"+parseInt(i+1)).css("background-color", "#ffff7f");   
//										   }
//										   if(validgriddata[i].other == "" || validgriddata[i].other == undefined || validgriddata[i].other == "NA")
//										   {
//											   $scope.dataSparePart[i].reqMotorKW = false; 
//										       $("#OtherSpare_"+parseInt(i+1)).css("background-color", "#ffffff"); 
//										   }
//										   else
//										   {
//											 $scope.dataSparePart[i].reqMotorKW = true; 
//										     $("#OtherSpare_"+parseInt(i+1)).css("background-color", "#ffff7f");   
//										   }
//										   /*if(validgriddata[i].presetTorque == "" || validgriddata[i].presetTorque == undefined || validgriddata[i].presetTorque == "NA")
//										   {
//											   $scope.dataSparePart[i].reqStatus = false; 
//										       $("#PresetTorqueSumit_"+parseInt(i+1)).css("background-color", "#ffffff"); 
//										   }
//										   else
//										   {
//											 $scope.dataSparePart[i].reqStatus = true; 
//										     $("#PresetTorqueSumit_"+parseInt(i+1)).css("background-color", "#ffff7f");   
//										   }*/
//										   if(validgriddata[i].motorSerial == "" || validgriddata[i].motorSerial == undefined || validgriddata[i].motorSerial == "NA")
//										   {
//											   $scope.dataSparePart[i].mtrsnosts = false; 
//										       $("#MotorSerial_"+parseInt(i+1)).css("background-color", "#ffffff"); 
//										   }
//										   else
//										   {
//											 $scope.dataSparePart[i].mtrsnosts = true; 
//										     $("#MotorSerial_"+parseInt(i+1)).css("background-color", "#ffff7f");   
//										   }
//										   if(validgriddata[i].motorType == "" || validgriddata[i].motorType == undefined || validgriddata[i].motorType == "NA")
//										   {
//											   $scope.dataSparePart[i].expSts = false; 
//										       $("#MotorType_"+parseInt(i+1)).css("background-color", "#ffffff"); 
//										   }
//										   else
//										   {
//											 $scope.dataSparePart[i].expSts = true; 
//										     $("#MotorType_"+parseInt(i+1)).css("background-color", "#ffff7f");   
//										   }
//										   if(validgriddata[i].motorKW == "" || validgriddata[i].motorKW == undefined || validgriddata[i].motorKW == "NA")
//										   {
//											   $scope.dataSparePart[i].mtrSprSts = false; 
//										       $("#MotorKW_"+parseInt(i+1)).css("background-color", "#ffffff"); 
//										   }
//										   else
//										   {
//											 $scope.dataSparePart[i].mtrSprSts = true; 
//										     $("#MotorKW_"+parseInt(i+1)).css("background-color", "#ffff7f");   
//										   }
//										   if(validgriddata[i].pole == "" || validgriddata[i].pole == undefined || validgriddata[i].pole == "NA")
//										   {
//											   $scope.dataSparePart[i].poleSprSts = false; 
//										       $("#Pole_"+parseInt(i+1)).css("background-color", "#ffffff"); 
//										   }
//										   else
//										   {
//											 $scope.dataSparePart[i].poleSprSts = true; 
//										     $("#Pole_"+parseInt(i+1)).css("background-color", "#ffff7f");   
//										   }
//										   if(validgriddata[i].voltage == "" || validgriddata[i].voltage == undefined || validgriddata[i].voltage == "NA")
//										   {
//											   $scope.dataSparePart[i].voltSprSts = false; 
//										       $("#Voltage_"+parseInt(i+1)).css("background-color", "#ffffff"); 
//										   }
//										   else
//										   {
//											 $scope.dataSparePart[i].voltSprSts = true; 
//										     $("#Voltage_"+parseInt(i+1)).css("background-color", "#ffff7f");   
//										   }
//										   if(validgriddata[i].hertz == "" || validgriddata[i].hertz == undefined || validgriddata[i].hertz == "NA")
//										   {
//											   $scope.dataSparePart[i].hzSprSts = false; 
//										       $("#Hertz_"+parseInt(i+1)).css("background-color", "#ffffff"); 
//										   }
//										   else
//										   {
//											 $scope.dataSparePart[i].hzSprSts = true; 
//										     $("#Hertz_"+parseInt(i+1)).css("background-color", "#ffff7f");   
//										   }
//										    if(validgriddata[i].rpm == "" || validgriddata[i].rpm == undefined || validgriddata[i].rpm == "NA")
//										   {
//											   $scope.dataSparePart[i].rpmSprSts = false; 
//										       $("#RPM_"+parseInt(i+1)).css("background-color", "#ffffff"); 
//										   }
//										   else
//										   {
//											 $scope.dataSparePart[i].rpmSprSts = true; 
//										     $("#RPM_"+parseInt(i+1)).css("background-color", "#ffff7f");   
//										   }
//										  
//									   }
							}
					 }
					 if(tab==5)
					 {
							if(gridVal == 0 || gridVal != undefined)
							{
								//alert(JSON.stringify(json['description'][0]));
								  $scope.addCase=json['maincaseform'][0];
								  $scope.addDespTech=json['description'][0];
								  $indexTab5=1;
								  $scope.dataQuery=[{'id':$indexTab5,'gm':'0','model':'0','ambientTemp':'40','pole':'4','rpm':'1450','motorType':'NO','voltage':'200','phase':'3','quantity':'1','gearProduct':'CYCLO 6000','hertz':'50','basefreq':'1','protectionGrade': 'IP55','internationalStd': 'JIS','mtrEfficncyClass':'0','inverter':'1','motorBrake':'1','motorBrakeVolt':'1','conf':'0','mount':'0','mount2':'0',oshaftInc1:false,oshaftInc2:false,'ishaft':'0','jadapt':'0','oshaft':'0','oshafty':'0','oshafty2':'4','backStop':'0','rot':'0','hssRadialLoadKn':'0','hssRadialLoadMm':'0','hssAxialLoadKn':'0','sssRadialLoadKn':'0','sssRadialLoadMm':'0','sssAxialLoadKn':'0','dirHssAxial':'0','dirSssAxial':'0','presetTorqueRot':'0','terminalBox':'N33','cableEntry':'N3A','altitude':'0m'}];
								  $scope.stepsModelTech = [];
								  cusImageTech = new FormData();
								   $scope.addCase.currentTab = tab;
								  //$('.btn-hideTech').attr('disabled',false);
								  $('.btn-hideTech').removeClass('disabled');
										  //$('.Send-hideTech').removeClass('disabled');
								  $('.btn-discarTech').removeClass('disabled');
								  $scope.qtnBtnTech = '0';
								  /*$("#CustomerCode").css("background-color", "#ffff7f"); 
								 $("#ContactPerson").css("background-color", "#ffffff");
								 $("#Telephone").css("background-color", "#ffffff"); 
								 $("#Address").css("background-color", "#ffffff");*/
								 if(validdata.customerCode == "" || validdata.customerCode == undefined || validdata.customerCode == "NA")
									   {
										   $("#CustomerCode").css("background-color", "#ffff7f"); 
									   }
									   else
									   {
										   $("#CustomerCode").css("background-color", "#99ff99");
									   }
									   if(validdata.contactPerson == "" || validdata.contactPerson == undefined || validdata.contactPerson == "NA")
									   {
										   $("#ContactPerson").css("background-color", "#ffffff"); 
									   }
									   else
									   {
										   $("#ContactPerson").css("background-color", "#99ff99");
									   }
									   if(validdata.phone == "" || validdata.phone == undefined || validdata.phone == "NA")
									   {
										   $("#Telephone").css("background-color", "#ffffff"); 
									   }
									   else
									   {
										   $("#Telephone").css("background-color", "#99ff99");
									   }
									   if(validdata.address == "" || validdata.address == undefined || validdata.address == "NA")
									   {
										   $("#Address").css("background-color", "#ffffff"); 
									   }
									   else
									   {
										   $("#Address").css("background-color", "#99ff99");
									   }
									   /*if(validdata.createdBy == "" || validdata.createdBy == undefined || validdata.createdBy == "NA")
										 {
											$("#CreatedBy").css("background-color", "#ffff7f"); 
											//$scope.addCase.createdBy = "";
										 }
										 else
										 {
											$("#CreatedBy").css("background-color", "#99ff99");
											//$scope.addCase.createdBy = validdata.createdby;
										 }*/
								 for(var i = 0; i<$scope.dataQuery.length; i++)
												   {
													   if($scope.dataQuery[i].gearMotor == "" || $scope.dataQuery[i].gearMotor == undefined || $scope.dataQuery[i].gearMotor == "NA")
													   {
														   $scope.dataQuery[i].requiredStatus = false; 
														   $("#techGearMotor_"+parseInt(i+1)).css("background-color", "#ffffff"); 
													   }
													   else
													   {
														 $scope.dataQuery[i].requiredStatus = true; 
														 $("#techGearMotor_"+parseInt(i+1)).css("background-color", "#ffff7f");   
													   }
													   if($scope.dataQuery[i].othersPlz == "" || $scope.dataQuery[i].othersPlz == undefined || $scope.dataQuery[i].othersPlz == "NA")
													   {
														   $scope.dataQuery[i].reqOtherSts = false; 
														   $("#OthersPlzTech_"+parseInt(i+1)).css("background-color", "#ffffff"); 
													   }
													   else
													   {
														 $scope.dataQuery[i].reqOtherSts = true; 
														 $("#OthersPlzTech_"+parseInt(i+1)).css("background-color", "#ffff7f");   
													   }
													   if($scope.dataQuery[i].other == "" || $scope.dataQuery[i].other == undefined || $scope.dataQuery[i].other == "NA")
													   {
														   $scope.dataQuery[i].reqMotorKW = false; 
														   $("#OtherTech_"+parseInt(i+1)).css("background-color", "#ffffff"); 
													   }
													   else
													   {
														 $scope.dataQuery[i].reqMotorKW = true; 
														 $("#OtherTech_"+parseInt(i+1)).css("background-color", "#ffff7f");   
													   }
													   if($scope.dataQuery[i].presetTorque == "" || $scope.dataQuery[i].presetTorque == undefined || $scope.dataQuery[i].presetTorque == "NA")
													   {
														   $scope.dataQuery[i].reqStatus = false; 
														   $("#PresetTorqueTech_"+parseInt(i+1)).css("background-color", "#ffffff"); 
													   }
													   else
													   {
														 $scope.dataQuery[i].reqStatus = true; 
														 $("#PresetTorqueTech_"+parseInt(i+1)).css("background-color", "#ffff7f");   
													   }
													  
												   }
								   $scope.$apply();
							}
							else
							{
								  $scope.addCase=json['maincaseform'][0];
								  $scope.addDespTech=json['description'][0]; 
								  $scope.dataQuery=json['griddata'];
								  $scope.qtnBtnTech = '0';
								   $scope.addCase.currentTab = tab;
								  //$scope.stepsModelTech = json['maincaseform'][0].images.split(',');
								  $scope.$apply();
								   var getImageTech = json['maincaseform'][0].images;
											  // alert(getImage);
												 if(getImageTech!=null)
												   {
													   //alert(getImage + " " + 1);
													   var imgPrew = getImageTech.trim();
													   if(imgPrew==null || imgPrew=="" )
													   {
														  $scope.stepsModelTech = [];
														  $scope.$apply();
														  //$scope.dummyPhoto="";
														  //$('#dummyPhoto').trigger('blur');
													   }
													   else
													   {
														   //alert(getImage + " " + 3);
														   $scope.stepsModelTech = getImageTech.split(',');
														   $scope.$apply();
													   }
												   }
												   else
												   {
													   //alert(getImage + " " + 4);
														$scope.stepsModelTech = [];
														$scope.$apply();
												   }
												   
												   if(validdata.customerCode == "" || validdata.customerCode == undefined || validdata.customerCode == "NA")
												   {
													   $("#CustomerCode").css("background-color", "#ffff7f"); 
												   }
												   else
												   {
													   $("#CustomerCode").css("background-color", "#99ff99");
												   }
												   if(validdata.contactPerson == "" || validdata.contactPerson == undefined || validdata.contactPerson == "NA")
												   {
													   $("#ContactPerson").css("background-color", "#ffffff"); 
												   }
												   else
												   {
													   $("#ContactPerson").css("background-color", "#99ff99");
												   }
												   if(validdata.phone == "" || validdata.phone == undefined || validdata.phone == "NA")
												   {
													   $("#Telephone").css("background-color", "#ffffff"); 
												   }
												   else
												   {
													   $("#Telephone").css("background-color", "#99ff99");
												   }
												   if(validdata.address == "" || validdata.address == undefined || validdata.address == "NA")
												   {
													   $("#Address").css("background-color", "#ffffff"); 
												   }
												   else
												   {
													   $("#Address").css("background-color", "#99ff99");
												   }
												  /*if(validdata.createdBy == "" || validdata.createdBy == undefined || validdata.createdBy == "NA")
												 {
													$("#CreatedBy").css("background-color", "#ffff7f"); 
													//$scope.addCase.createdBy = "";
												 }
												 else
												 {
													$("#CreatedBy").css("background-color", "#99ff99");
													//$scope.addCase.createdBy = validdata.createdby;
												 }*/
												   for(var i = 0; i<validgriddata.length; i++)
												   {
													   if(validgriddata[i].gearMotor == "" || validgriddata[i].gearMotor == undefined || validgriddata[i].gearMotor == "NA")
													   {
														   $scope.dataQuery[i].requiredStatus = false; 
														   $("#techGearMotor_"+parseInt(i+1)).css("background-color", "#ffffff"); 
													   }
													   else
													   {
														 $scope.dataQuery[i].requiredStatus = true; 
														 $("#techGearMotor_"+parseInt(i+1)).css("background-color", "#ffff7f");   
													   }
													   if(validgriddata[i].othersPlz == "" || validgriddata[i].othersPlz == undefined || validgriddata[i].othersPlz == "NA")
													   {
														   $scope.dataQuery[i].reqOtherSts = false; 
														   $("#OthersPlzTech_"+parseInt(i+1)).css("background-color", "#ffffff"); 
													   }
													   else
													   {
														 $scope.dataQuery[i].reqOtherSts = true; 
														 $("#OthersPlzTech_"+parseInt(i+1)).css("background-color", "#ffff7f");   
													   }
													   if(validgriddata[i].other == "" || validgriddata[i].other == undefined || validgriddata[i].other == "NA")
													   {
														   $scope.dataQuery[i].reqMotorKW = false; 
														   $("#OtherTech_"+parseInt(i+1)).css("background-color", "#ffffff"); 
													   }
													   else
													   {
														 $scope.dataQuery[i].reqMotorKW = true; 
														 $("#OtherTech_"+parseInt(i+1)).css("background-color", "#ffff7f");   
													   }
													   if(validgriddata[i].presetTorque == "" || validgriddata[i].presetTorque == undefined || validgriddata[i].presetTorque == "NA")
													   {
														   $scope.dataQuery[i].reqStatus = false; 
														   $("#PresetTorqueTech_"+parseInt(i+1)).css("background-color", "#ffffff"); 
													   }
													   else
													   {
														 $scope.dataQuery[i].reqStatus = true; 
														 $("#PresetTorqueTech_"+parseInt(i+1)).css("background-color", "#ffff7f");   
													   }
													  
												   }
										  
							}
					 }
					   
					    $scope.$apply();
				});

		},1000);
	};
	
	
			//=============New Case Management OnloadData==============================//
	     
  $scope.getCaseData = function(addCase,form)
		{
			//alert("page reloading" + " " + 1);
			 var asd = $rootScope.loadNewCase;
			
			//$rootScope.editTab= "Edit";$rootScope.copyTab= "Copy";
			
			/*$rootScope.caseCustomerRef=getCaseCustomerRef;
			$rootScope.caseCustomer=getCaseCustomer;
			$rootScope.tab=gettab;*/
			
			//alert($rootScope.actionTab +  " actionTab" );
			//alert($rootScope.tab + "3 " + " tab" );
			$timeout(function(){
					if($rootScope.caseCustomer===undefined || $rootScope.caseCustomer==="" && $rootScope.caseCustomerRef===undefined || $rootScope.caseCustomerRef==="" && $rootScope.tab===undefined || $rootScope.tab==="" && $rootScope.actionTab===undefined || $rootScope.actionTab==="" && $rootScope.action===undefined || $rootScope.action==="" && $rootScope.caseid===undefined || $rootScope.caseid==="")
				{
					//alert(asd);
					/*if(asd==0)
					{
						 $('#menu1').addClass('active');
						 $('#newSelection').addClass('active');
						
						 $.getJSON("loadingsequenceNember.do",function(json)
									{
								//alert("control coming to here");
								
										//var gridFormData = json['griddata']; 
										 // alert(JSON.stringify(json['maincaseform'][0])); 
										   $scope.addCase=json['maincaseform'][0];
										   //$scope.addDesp=json['description'][0]; 
										  // $scope.dataField=json['griddata'];
										   // alert(JSON.stringify($scope.addCase));
										  // alert(JSON.stringify($scope.addDesp));
										  // alert(JSON.stringify($scope.dataField));
										    
										    $rootScope.newcase='';
											//$scope.$apply();
									});
					}*/
				
					if(1==1)
					{
						$.post("loadingTempCasessData.do",function(json)
							{
							
							var tab = parseInt(json['tab']);
							var validdata = json['maincaseform'][0];
							var validgriddata = json['griddata'];
							//alert(tab + " tab ");
							//alert(JSON.stringify(json['maincaseform'][0]));
                         //alert(JSON.stringify(json['griddata']));
                          // alert(JSON.stringify(json['description'][0]));
						   //alert(JSON.stringify(json));
							//alert(JSON.stringify(json['maincaseform'][0].dateCase));
							//alert(JSON.stringify(json['maincaseform'][0].dateExp));
							 
							 //var tempId = "";
                             // $scope.tempId = json['maincaseform'][0].tempid;
							//alert($scope.tempId);
							
							
							
							if(tab==1)
								{
							       //alert("tab" + 1);
							 $('#menu1').addClass('active');
							 $('#newSelection').addClass('active');
							
							// alert("newSelection tab" + " " + 4);
							  //var dtcase = json['maincaseform'][0].dateCase.split('T');
							 // var dtexp = json['maincaseform'][0].dateExp.split('T');
							    $("#newSelection").show();
								$("#competitorReplace").hide();
								$("#sumitomoReplace").hide();
								$("#sparePart").hide();
								$("#techQuery").hide();
								$("#blogHide").hide();
								$("#remarksHide").hide(); 
								//$("#codeNotFound").hide();
								//$("#dataNotFound").hide();
							       $scope.addCase=json['maincaseform'][0];
								   
								   $scope.addDesp=json['description'][0]; 
								   $scope.dataField=json['griddata']; 
								   $scope.QtnBtnNew = '0';
								   
								   $scope.addCase.currentTab = tab;
								   //$scope.addCase.dateCase=dtcase[0];
								  // $scope.addCase.dateExp=dtexp[0];
								   //$scope.stepsModel = json['maincaseform'][0].images.split(',');
								   //$("#QtnBtnNew-hide").hide();
								   //$('#qtnBtn-hide').attr('disabled',true);
								  var getImage = json['maincaseform'][0].images;
								  // alert(getImage);
									 if(getImage!=null)
									   {
										   //alert(getImage + " " + 1);
										   var imgPrew = getImage.trim();
										   if(imgPrew==null || imgPrew=="" )
										   {
											   //alert(getImage + " " + 2);
											 
											  $scope.stepsModel = [];
											  $scope.$apply();
											  //$scope.dummyPhoto="";
					                          //$('#dummyPhoto').trigger('blur');
										   }
										   else
										   {
											   //alert(getImage + " " + 3);
											   $scope.stepsModel = getImage.split(',');
											   $scope.$apply();
											   
										   }
									   }
									   else
									   {
										   //alert(getImage + " " + 4);
										    $scope.stepsModel = [];
										    $scope.$apply();
										 
									   }
									   
									     var departmentSplit = json['maincaseform'][0].assigned;
										 var departmentSales = [];
										 if(departmentSplit == undefined || departmentSplit == "" || departmentSplit == "NA")
										 {
											 //alert("if");
											 $('#picturegallery').val("['']").trigger('chosen:updated');
											 $("#picturegallery").css("background-color", "#ffff7f");
										 }
										 else
										 {
											//alert(departmentSplit.length + " " + " else ");
											 for (var s = 0; s < departmentSplit.length; s++) {
									
														departmentSales.push(departmentSplit[s]);
														//alert("accessoriesSales"+accessoriesSales);
											}
											 $('#picturegallery').val(departmentSales).trigger('chosen:updated');
															$scope.addCase.assigned = departmentSales;
															$("#picturegallery").css("background-color", "#99ff99");
										 }
									   
									   if(validdata.customerCode == "" || validdata.customerCode == undefined || validdata.customerCode == "NA")
									   {
										   $("#CustomerCode").css("background-color", "#ffff7f"); 
									   }
									   else
									   {
										   $("#CustomerCode").css("background-color", "#99ff99");
									   }
									   if(validdata.contactPerson == "" || validdata.contactPerson == undefined || validdata.contactPerson == "NA")
									   {
										   $("#ContactPerson").css("background-color", "#ffffff"); 
									   }
									   else
									   {
										   $("#ContactPerson").css("background-color", "#99ff99");
									   }
									   if(validdata.phone == "" || validdata.phone == undefined || validdata.phone == "NA")
									   {
										   $("#Telephone").css("background-color", "#ffffff"); 
									   }
									   else
									   {
										   $("#Telephone").css("background-color", "#99ff99");
									   }
									   if(validdata.address == "" || validdata.address == undefined || validdata.address == "NA")
									   {
										   $("#Address").css("background-color", "#ffffff"); 
									   }
									   else
									   {
										   $("#Address").css("background-color", "#99ff99");
									   }
									   /* if(validdata.createdBy == "" || validdata.createdBy == undefined || validdata.createdBy == "NA")
										 {
											$("#CreatedBy").css("background-color", "#ffff7f"); 
											//$scope.addCase.createdBy = "";
										 }
										 else
										 {
											$("#CreatedBy").css("background-color", "#99ff99");
											//$scope.addCase.createdBy = validdata.createdby;
										 }*/
									  // alert(JSON.stringify(validgriddata[0].gearMotor));
									   for(var i = 0; i<validgriddata.length; i++)
									   {
										   if(validgriddata[i].gearMotor == "" || validgriddata[i].gearMotor == undefined || validgriddata[i].gearMotor == "NA")
										   {
											   $scope.dataField[i].requiredStatus = false; 
										       $("#GearMotor_"+parseInt(i+1)).css("background-color", "#ffffff"); 
										   }
										   else
										   {
											 $scope.dataField[i].requiredStatus = true; 
										     $("#GearMotor_"+parseInt(i+1)).css("background-color", "#ffff7f");   
										   }
										   if(validgriddata[i].othersPlz == "" || validgriddata[i].othersPlz == undefined || validgriddata[i].othersPlz == "NA")
										   {
											   $scope.dataField[i].reqOtherSts = false; 
										       $("#OthersPlz_"+parseInt(i+1)).css("background-color", "#ffffff"); 
										   }
										   else
										   {
											 $scope.dataField[i].reqOtherSts = true; 
										     $("#OthersPlz_"+parseInt(i+1)).css("background-color", "#ffff7f");   
										   }
										   if(validgriddata[i].other == "" || validgriddata[i].other == undefined || validgriddata[i].other == "NA")
										   {
											   $scope.dataField[i].reqMotorKW = false; 
										       $("#Other_"+parseInt(i+1)).css("background-color", "#ffffff"); 
										   }
										   else
										   {
											 $scope.dataField[i].reqMotorKW = true; 
										     $("#Other_"+parseInt(i+1)).css("background-color", "#ffff7f");   
										   }
										   if(validgriddata[i].presetTorque == "" || validgriddata[i].presetTorque == undefined || validgriddata[i].presetTorque == "NA")
										   {
											   $scope.dataField[i].reqStatus = false; 
										       $("#PresetTorque_"+parseInt(i+1)).css("background-color", "#ffffff"); 
										   }
										   else
										   {
											 $scope.dataField[i].reqStatus = true; 
										     $("#PresetTorque_"+parseInt(i+1)).css("background-color", "#ffff7f");   
										   }
										  
									   }
									   /*if(validdata.assigned == "" || validdata.assigned == undefined || validdata.assigned == "NA")
									   {
										  $("#AssignedTo").css("background-color", "#ffff7f"); 
											//$scope.addCase.assigned = "";
									   }
									   else
									   {
										  $("#AssignedTo").css("background-color", "#99ff99");
											//$scope.addCase.assigned = validdata.departmentname;
									   }*/
									   
									   
									  $scope.$apply();								   
								}
							
							
							if(tab==2)
								{
								
								 $('#menu2').addClass('active');
								 $('#competitorReplace').addClass('active');
								   //alert("Competitor Replae");
								
								    $("#newSelection").hide();
									$("#competitorReplace").show();
									$("#sumitomoReplace").hide();
									$("#sparePart").hide();
									$("#techQuery").hide();
									$("#blogHideComp").hide();
									$("#remarksHideComp").hide(); 
									//$("#codeNotFound").hide();
									//$("#dataNotFound").hide(); 
									   $scope.addCase=json['maincaseform'][0];
									   $scope.addDespComp=json['description'][0]; 
									   $scope.dataCompetitor=json['griddata'];
									   //$scope.stepsModelComp = json['maincaseform'][0].images.split(',');
									   
									  //$scope.$apply(function(){ $("#qtnBtnComp-hide").hide(); alert("hide");});
									 // $("#qtnBtnComp-hide").hide();
									 var departmentSplit = json['maincaseform'][0].assigned;
										 var departmentSales = [];
										 if(departmentSplit == undefined || departmentSplit == "" || departmentSplit == "NA")
										 {
											 //alert("if");
											 $('#picturegallery').val("['']").trigger('chosen:updated');
											 $("#picturegallery").css("background-color", "#ffff7f");
										 }
										 else
										 {
											//alert(departmentSplit.length + " " + " else ");
											 for (var s = 0; s < departmentSplit.length; s++) {
									
														departmentSales.push(departmentSplit[s]);
														//alert("accessoriesSales"+accessoriesSales);
											}
											 $('#picturegallery').val(departmentSales).trigger('chosen:updated');
															$scope.addCase.assigned = departmentSales;
															$("#picturegallery").css("background-color", "#99ff99");
										 }
										 
									 $scope.addCase.currentTab = tab;
									 $scope.qtnBtnComp = '0';
									    var getImageComp = json['maincaseform'][0].images;
								  // alert(getImage);
									 if(getImageComp!=null)
									   {
										   //alert(getImage + " " + 1);
										   var imgPrew = getImageComp.trim();
										   if(imgPrew==null || imgPrew=="" )
										   {
											   //alert(getImage + " " + 2);
											 
											  $scope.stepsModelComp = [];
											  $scope.$apply();
											  //$scope.dummyPhoto="";
					                          //$('#dummyPhoto').trigger('blur');
										   }
										   else
										   {
											   //alert(getImage + " " + 3);
											   $scope.stepsModelComp = getImageComp.split(',');
											   $scope.$apply();
											   
										   }
									   }
									   else
									   {
										   //alert(getImage + " " + 4);
										    $scope.stepsModelComp = [];
										    $scope.$apply();
										 
									   }
									   
									   if(validdata.customerCode == "" || validdata.customerCode == undefined || validdata.customerCode == "NA")
									   {
										   $("#CustomerCode").css("background-color", "#ffff7f"); 
									   }
									   else
									   {
										   $("#CustomerCode").css("background-color", "#99ff99");
									   }
									   if(validdata.contactPerson == "" || validdata.contactPerson == undefined || validdata.contactPerson == "NA")
									   {
										   $("#ContactPerson").css("background-color", "#ffffff"); 
									   }
									   else
									   {
										   $("#ContactPerson").css("background-color", "#99ff99");
									   }
									   if(validdata.phone == "" || validdata.phone == undefined || validdata.phone == "NA")
									   {
										   $("#Telephone").css("background-color", "#ffffff"); 
									   }
									   else
									   {
										   $("#Telephone").css("background-color", "#99ff99");
									   }
									   if(validdata.address == "" || validdata.address == undefined || validdata.address == "NA")
									   {
										   $("#Address").css("background-color", "#ffffff"); 
									   }
									   else
									   {
										   $("#Address").css("background-color", "#99ff99");
									   }
									    /*if(validdata.createdBy == "" || validdata.createdBy == undefined || validdata.createdBy == "NA")
										 {
											$("#CreatedBy").css("background-color", "#ffff7f"); 
											//$scope.addCase.createdBy = "";
										 }
										 else
										 {
											$("#CreatedBy").css("background-color", "#99ff99");
											//$scope.addCase.createdBy = validdata.createdby;
										 }*/
									   /*if(validdata.assigned == "" || validdata.assigned == undefined || validdata.assigned == "NA")
									   {
										  $("#AssignedTo").css("background-color", "#ffff7f"); 
											//$scope.addCase.assigned = "";
									   }
									   else
									   {
										  $("#AssignedTo").css("background-color", "#99ff99");
											//$scope.addCase.assigned = validdata.departmentname;
									   }*/
									   
									   for(var i = 0; i<validgriddata.length; i++)
									   {
										   if(validgriddata[i].gearMotor == "" || validgriddata[i].gearMotor == undefined || validgriddata[i].gearMotor == "NA")
										   {
											   $scope.dataCompetitor[i].requiredStatus = false; 
										       $("#compGearMotor_"+parseInt(i+1)).css("background-color", "#ffffff"); 
										   }
										   else
										   {
											 $scope.dataCompetitor[i].requiredStatus = true; 
										     $("#compGearMotor_"+parseInt(i+1)).css("background-color", "#ffff7f");   
										   }
										   if(validgriddata[i].othersPlz == "" || validgriddata[i].othersPlz == undefined || validgriddata[i].othersPlz == "NA")
										   {
											   $scope.dataCompetitor[i].reqOtherSts = false; 
										       $("#OthersPlzComp_"+parseInt(i+1)).css("background-color", "#ffffff"); 
										   }
										   else
										   {
											 $scope.dataCompetitor[i].reqOtherSts = true; 
										     $("#OthersPlzComp_"+parseInt(i+1)).css("background-color", "#ffff7f");   
										   }
										   if(validgriddata[i].other == "" || validgriddata[i].other == undefined || validgriddata[i].other == "NA")
										   {
											   $scope.dataCompetitor[i].reqMotorKW = false; 
										       $("#OtherComp_"+parseInt(i+1)).css("background-color", "#ffffff"); 
										   }
										   else
										   {
											 $scope.dataCompetitor[i].reqMotorKW = true; 
										     $("#OtherComp_"+parseInt(i+1)).css("background-color", "#ffff7f");   
										   }
										   if(validgriddata[i].presetTorque == "" || validgriddata[i].presetTorque == undefined || validgriddata[i].presetTorque == "NA")
										   {
											   $scope.dataCompetitor[i].reqStatus = false; 
										       $("#PresetTorqueComp_"+parseInt(i+1)).css("background-color", "#ffffff"); 
										   }
										   else
										   {
											 $scope.dataCompetitor[i].reqStatus = true; 
										     $("#PresetTorqueComp_"+parseInt(i+1)).css("background-color", "#ffff7f");   
										   }
										  
									   }
											  $scope.$apply();	
								
								
								}
							
							
							if(tab==3)
							{
							 //alert("tab" + 3);
							 $('#menu3').addClass('active');
							 $('#sumitomoReplace').addClass('active');
							 
							 
							    $("#newSelection").hide();
								$("#competitorReplace").hide();
								$("#sumitomoReplace").show();
								$("#sparePart").hide();
								$("#techQuery").hide(); 
								$("#blogHideSumit").hide();
								$("#remarksHideSumit").hide();
								//$("#codeNotFound").hide();
								//$("#dataNotFound").hide(); 
								
								//$("#hideBtn").hide();
								   $scope.addCase=json['maincaseform'][0];
								   $scope.addDespSumit=json['description'][0]; 
								   $scope.dataSumitomo=json['griddata'];
								   
								   $scope.addCase.currentTab = tab;
								   
								   var departmentSplit = json['maincaseform'][0].assigned;
										 var departmentSales = [];
										 if(departmentSplit == undefined || departmentSplit == "" || departmentSplit == "NA")
										 {
											 //alert("if");
											 $('#picturegallery').val("['']").trigger('chosen:updated');
											 $("#picturegallery").css("background-color", "#ffff7f");
										 }
										 else
										 {
											//alert(departmentSplit.length + " " + " else ");
											 for (var s = 0; s < departmentSplit.length; s++) {
									
														departmentSales.push(departmentSplit[s]);
														//alert("accessoriesSales"+accessoriesSales);
											}
											 $('#picturegallery').val(departmentSales).trigger('chosen:updated');
															$scope.addCase.assigned = departmentSales;
															$("#picturegallery").css("background-color", "#99ff99");
										 }
								   //$scope.stepsModelSumit = json['maincaseform'][0].images.split(',');
								   //$(".qtnBtnSumithide").addClass("disabledBtn");
								  //$("#qtnBtnSumit-hide").hide();
								   //$('.qtnBtnSumit-hide').attr('disabled',true);
								   //$("#sumitQtn").hide();
								    
								  $scope.qtnBtnSumit = '0';
								   
								  var getImageSumit = json['maincaseform'][0].images;
								  // alert(getImage);
									 if(getImageSumit!=null)
									   {
										   //alert(getImage + " " + 1);
										   var imgPrew = getImageSumit.trim();
										   if(imgPrew==null || imgPrew=="" )
										   {
											   //alert(getImage + " " + 2);
											 
												  $scope.stepsModelSumit = [];
												  $scope.$apply();
											  //$scope.dummyPhoto="";
					                          //$('#dummyPhoto').trigger('blur');
										   }
										   else
										   {
											   //alert(getImage + " " + 3);
											   $scope.stepsModelSumit = getImageSumit.split(',');
											   $scope.$apply();
											  
										   }
									   }
									   else
									   {
										   //alert(getImage + " " + 4);
												$scope.stepsModelSumit = [];
												$scope.$apply();
										 
									   }
									   
									   if(validdata.customerCode == "" || validdata.customerCode == undefined || validdata.customerCode == "NA")
									   {
										   $("#CustomerCode").css("background-color", "#ffff7f"); 
									   }
									   else
									   {
										   $("#CustomerCode").css("background-color", "#99ff99");
									   }
									   if(validdata.contactPerson == "" || validdata.contactPerson == undefined || validdata.contactPerson == "NA")
									   {
										   $("#ContactPerson").css("background-color", "#ffffff"); 
									   }
									   else
									   {
										   $("#ContactPerson").css("background-color", "#99ff99");
									   }
									   if(validdata.phone == "" || validdata.phone == undefined || validdata.phone == "NA")
									   {
										   $("#Telephone").css("background-color", "#ffffff"); 
									   }
									   else
									   {
										   $("#Telephone").css("background-color", "#99ff99");
									   }
									   if(validdata.address == "" || validdata.address == undefined || validdata.address == "NA")
									   {
										   $("#Address").css("background-color", "#ffffff"); 
									   }
									   else
									   {
										   $("#Address").css("background-color", "#99ff99");
									   }
									   /* if(validdata.createdBy == "" || validdata.createdBy == undefined || validdata.createdBy == "NA")
										 {
											$("#CreatedBy").css("background-color", "#ffff7f"); 
											//$scope.addCase.createdBy = "";
										 }
										 else
										 {
											$("#CreatedBy").css("background-color", "#99ff99");
											//$scope.addCase.createdBy = validdata.createdby;
										 }*/
									   /*if(validdata.assigned == "" || validdata.assigned == undefined || validdata.assigned == "NA")
									   {
										  $("#AssignedTo").css("background-color", "#ffff7f"); 
											//$scope.addCase.assigned = "";
									   }
									   else
									   {
										  $("#AssignedTo").css("background-color", "#99ff99");
											//$scope.addCase.assigned = validdata.departmentname;
									   }*/
									    for(var i = 0; i<validgriddata.length; i++)
									   {
										   if(validgriddata[i].gearMotor == "" || validgriddata[i].gearMotor == undefined || validgriddata[i].gearMotor == "NA")
										   {
											   $scope.dataSumitomo[i].requiredStatus = false; 
										       $("#sumitGearMotor_"+parseInt(i+1)).css("background-color", "#ffffff"); 
										   }
										   else
										   {
											 $scope.dataSumitomo[i].requiredStatus = true; 
										     $("#sumitGearMotor_"+parseInt(i+1)).css("background-color", "#ffff7f");   
										   }
										   if(validgriddata[i].othersPlz == "" || validgriddata[i].othersPlz == undefined || validgriddata[i].othersPlz == "NA")
										   {
											   $scope.dataSumitomo[i].reqOtherSts = false; 
										       $("#OthersPlzSumit_"+parseInt(i+1)).css("background-color", "#ffffff"); 
										   }
										   else
										   {
											 $scope.dataSumitomo[i].reqOtherSts = true; 
										     $("#OthersPlzSumit_"+parseInt(i+1)).css("background-color", "#ffff7f");   
										   }
										   if(validgriddata[i].other == "" || validgriddata[i].other == undefined || validgriddata[i].other == "NA")
										   {
											   $scope.dataSumitomo[i].reqMotorKW = false; 
										       $("#OtherSumit_"+parseInt(i+1)).css("background-color", "#ffffff"); 
										   }
										   else
										   {
											 $scope.dataSumitomo[i].reqMotorKW = true; 
										     $("#OtherSumit_"+parseInt(i+1)).css("background-color", "#ffff7f");   
										   }
										   if(validgriddata[i].presetTorque == "" || validgriddata[i].presetTorque == undefined || validgriddata[i].presetTorque == "NA")
										   {
											   $scope.dataSumitomo[i].reqStatus = false; 
										       $("#PresetTorqueSumit_"+parseInt(i+1)).css("background-color", "#ffffff"); 
										   }
										   else
										   {
											 $scope.dataSumitomo[i].reqStatus = true; 
										     $("#PresetTorqueSumit_"+parseInt(i+1)).css("background-color", "#ffff7f");   
										   }
										  
									   }
										
										  $scope.$apply();	
							
								   
							
							
							}
										
													
							if(tab==4)
							{
							 
							 //alert("tab" + 4);
							 $('#menu4').addClass('active');
							 $('#sparePart').addClass('active');
							// $('#qtnBtnSpare-hide').hide();
							   $scope.qtnBtnSpare = '0';
							    $("#newSelection").hide();
								$("#competitorReplace").hide();
								$("#sumitomoReplace").hide();
								$("#sparePart").show();
								$("#techQuery").hide(); 
								$("#blogHideSpare").hide();
								$("#remarksHideSpare").hide(); 
								//$("#codeNotFound").hide();
								//$("#dataNotFound").hide(); 
								  $scope.addCase=json['maincaseform'][0];
								  $scope.addDespSpare=json['description'][0]; 
								  $scope.dataSparePart=json['griddata'];
								  
								  $scope.addCase.currentTab = tab;
								  
								  var departmentSplit = json['maincaseform'][0].assigned;
										 var departmentSales = [];
										 if(departmentSplit == undefined || departmentSplit == "" || departmentSplit == "NA")
										 {
											 //alert("if");
											 $('#picturegallery').val("['']").trigger('chosen:updated');
											 $("#picturegallery").css("background-color", "#ffff7f");
										 }
										 else
										 {
											//alert(departmentSplit.length + " " + " else ");
											 for (var s = 0; s < departmentSplit.length; s++) {
									
														departmentSales.push(departmentSplit[s]);
														//alert("accessoriesSales"+accessoriesSales);
											}
											 $('#picturegallery').val(departmentSales).trigger('chosen:updated');
															$scope.addCase.assigned = departmentSales;
															$("#picturegallery").css("background-color", "#99ff99");
										 }
								  //$scope.stepsModelSpare = json['maincaseform'][0].images.split(',');
								var getImageSpare = json['maincaseform'][0].images;
								  // alert(getImage);
									 if(getImageSpare!=null)
									   {
										   //alert(getImage + " " + 1);
										   var imgPrew = getImageSpare.trim();
										   if(imgPrew==null || imgPrew=="" )
										   {
											  
											  $scope.stepsModelSpare = [];
											  $scope.$apply();
											  //$scope.dummyPhoto="";
					                          //$('#dummyPhoto').trigger('blur');
										   }
										   else
										   {
											   //alert(getImage + " " + 3);
											   $scope.stepsModelSpare = getImageSpare.split(',');
											   $scope.$apply();
											   
										   }
									   }
									   else
									   {
										   //alert(getImage + " " + 4);
										    $scope.stepsModelSpare = [];
										    $scope.$apply();
										 
									   }
									   
									   if(validdata.customerCode == "" || validdata.customerCode == undefined || validdata.customerCode == "NA")
									   {
										   $("#CustomerCode").css("background-color", "#ffff7f"); 
									   }
									   else
									   {
										   $("#CustomerCode").css("background-color", "#99ff99");
									   }
									   if(validdata.contactPerson == "" || validdata.contactPerson == undefined || validdata.contactPerson == "NA")
									   {
										   $("#ContactPerson").css("background-color", "#ffffff"); 
									   }
									   else
									   {
										   $("#ContactPerson").css("background-color", "#99ff99");
									   }
									   if(validdata.phone == "" || validdata.phone == undefined || validdata.phone == "NA")
									   {
										   $("#Telephone").css("background-color", "#ffffff"); 
									   }
									   else
									   {
										   $("#Telephone").css("background-color", "#99ff99");
									   }
									   if(validdata.address == "" || validdata.address == undefined || validdata.address == "NA")
									   {
										   $("#Address").css("background-color", "#ffffff"); 
									   }
									   else
									   {
										   $("#Address").css("background-color", "#99ff99");
									   }
									   /* if(validdata.createdBy == "" || validdata.createdBy == undefined || validdata.createdBy == "NA")
										 {
											$("#CreatedBy").css("background-color", "#ffff7f"); 
											//$scope.addCase.createdBy = "";
										 }
										 else
										 {
											$("#CreatedBy").css("background-color", "#99ff99");
											//$scope.addCase.createdBy = validdata.createdby;
										 }*/
									   /*if(validdata.assigned == "" || validdata.assigned == undefined || validdata.assigned == "NA")
									   {
										  $("#AssignedTo").css("background-color", "#ffff7f"); 
											//$scope.addCase.assigned = "";
									   }
									   else
									   {
										  $("#AssignedTo").css("background-color", "#99ff99");
											//$scope.addCase.assigned = validdata.departmentname;
									   }*/
									   
									   for(var i = 0; i<validgriddata.length; i++)
									   {
										   if(validgriddata[i].gm == "0")
										   {
											    $scope.dataSparePart[i].requiredStatus = false;
											    $scope.dataSparePart[i].shiMfgsts = false;
											   // $scope.dataSparePart[i].expSts = false;
											   // $scope.dataSparePart[i].mtrSprSts = false;
												$scope.dataSparePart[i].poleSprSts = false;
												$scope.dataSparePart[i].phSprSts = false;
												$scope.dataSparePart[i].voltSprSts = false;
												$scope.dataSparePart[i].hzSprSts = false;
												$scope.dataSparePart[i].rpmSprSts = false;
												$scope.dataSparePart[i].gearsts = false;
												$scope.dataSparePart[i].mtrsnosts = true;
										       $("#spareGearMotor_"+parseInt(i+1)).css("background-color", "#ffffff");
											   $("#SHImfg_"+parseInt(i+1)).css("background-color", "#ffffff");
											   //$("#MotorType_"+parseInt(i+1)).css("background-color", "#ffffff");
											   //$("#MotorKW_"+parseInt(i+1)).css("background-color", "#ffffff");
											   $("#Pole_"+parseInt(i+1)).css("background-color", "#ffffff");
											   $("#Phase_"+parseInt(i+1)).css("background-color", "#ffffff");
											   $("#Voltage_"+parseInt(i+1)).css("background-color", "#ffffff");
											   $("#Hertz_"+parseInt(i+1)).css("background-color", "#ffffff");
											   $("#RPM_"+parseInt(i+1)).css("background-color", "#ffffff");
											   $("#gearHead_"+parseInt(i+1)).css("background-color", "#ffffff");
											   $("#MotorSerial_"+parseInt(i+1)).css("background-color", "#ffff7f");
											   if(validgriddata[i].motorKW == 'OTHER')
											   {
												   $scope.dataSparePart[i].mtrSprSts = true;
												   $scope.dataSparePart[i].reqMotorKW = true;
												   $("#MotorKW_"+parseInt(i+1)).css("background-color", "#ffff7f");
												   $("#OtherSpare_"+parseInt(i+1)).css("background-color", "#ffff7f");
											   }
											   else
											   {
												   $scope.dataSparePart[i].mtrSprSts = false;
												   $scope.dataSparePart[i].reqMotorKW = false;
												   $("#MotorKW_"+parseInt(i+1)).css("background-color", "#ffffff");
												   $("#OtherSpare_"+parseInt(i+1)).css("background-color", "#ffffff");
											   }
											   if(validgriddata[i].motorType == 'other - pls specify')
											   {
												  
												   $scope.dataSparePart[i].expSts = true;
												   $scope.dataSparePart[i].reqOtherSts = true;
												   $("#MotorType_"+parseInt(i+1)).css("background-color", "#ffff7f");
												   $("#OthersPlzSpare_"+parseInt(i+1)).css("background-color", "#ffff7f");
											   }
											   else
											   {
												   $scope.dataSparePart[i].expSts = false;
												   $scope.dataSparePart[i].reqOtherSts = false;
												   $("#MotorType_"+parseInt(i+1)).css("background-color", "#ffffff");
												   $("#OthersPlzSpare_"+parseInt(i+1)).css("background-color", "#ffffff");
											   }
										   }
										   else if(validgriddata[i].gm == "1")
										   {
											    $scope.dataSparePart[i].requiredStatus = false;
											    $scope.dataSparePart[i].shiMfgsts = false;
											   // $scope.dataSparePart[i].expSts = false;
											    //$scope.dataSparePart[i].mtrSprSts = false;
												$scope.dataSparePart[i].poleSprSts = false;
												$scope.dataSparePart[i].phSprSts = false;
												$scope.dataSparePart[i].voltSprSts = false;
												$scope.dataSparePart[i].hzSprSts = false;
												$scope.dataSparePart[i].rpmSprSts = false;
												$scope.dataSparePart[i].gearsts = true;
												$scope.dataSparePart[i].mtrsnosts = false;
										       $("#spareGearMotor_"+parseInt(i+1)).css("background-color", "#ffffff");
											   $("#SHImfg_"+parseInt(i+1)).css("background-color", "#ffffff");
											  // $("#MotorType_"+parseInt(i+1)).css("background-color", "#ffffff");
											   //$("#MotorKW_"+parseInt(i+1)).css("background-color", "#ffffff");
											   $("#Pole_"+parseInt(i+1)).css("background-color", "#ffffff");
											   $("#Phase_"+parseInt(i+1)).css("background-color", "#ffffff");
											   $("#Voltage_"+parseInt(i+1)).css("background-color", "#ffffff");
											   $("#Hertz_"+parseInt(i+1)).css("background-color", "#ffffff");
											   $("#RPM_"+parseInt(i+1)).css("background-color", "#ffffff");
											   $("#gearHead_"+parseInt(i+1)).css("background-color", "#ffff7f");
											   $("#MotorSerial_"+parseInt(i+1)).css("background-color", "#ffffff");
											   
											   if(validgriddata[i].motorKW == 'OTHER')
											   {
												   $scope.dataSparePart[i].mtrSprSts = true;
												   $scope.dataSparePart[i].reqMotorKW = true;
												   $("#MotorKW_"+parseInt(i+1)).css("background-color", "#ffff7f");
												   $("#OtherSpare_"+parseInt(i+1)).css("background-color", "#ffff7f");
											   }
											   else
											   {
												   $scope.dataSparePart[i].mtrSprSts = false;
												   $scope.dataSparePart[i].reqMotorKW = false;
												   $("#MotorKW_"+parseInt(i+1)).css("background-color", "#ffffff");
												   $("#OtherSpare_"+parseInt(i+1)).css("background-color", "#ffffff");
											   }
											   if(validgriddata[i].motorType == 'other - pls specify')
											   {
												  
												   $scope.dataSparePart[i].expSts = true;
												   $scope.dataSparePart[i].reqOtherSts = true;
												   $("#MotorType_"+parseInt(i+1)).css("background-color", "#ffff7f");
												   $("#OthersPlzSpare_"+parseInt(i+1)).css("background-color", "#ffff7f");
											   }
											   else
											   {
												   $scope.dataSparePart[i].expSts = false;
												   $scope.dataSparePart[i].reqOtherSts = false;
												   $("#MotorType_"+parseInt(i+1)).css("background-color", "#ffffff");
												   $("#OthersPlzSpare_"+parseInt(i+1)).css("background-color", "#ffffff");
											   }
										   }
										   else
										   {
											    $scope.dataSparePart[i].requiredStatus = true;
											    $scope.dataSparePart[i].shiMfgsts = true;
											    //$scope.dataSparePart[i].expSts = true;
											    //$scope.dataSparePart[i].mtrSprSts = true;
												$scope.dataSparePart[i].poleSprSts = true;
												$scope.dataSparePart[i].phSprSts = true;
												$scope.dataSparePart[i].voltSprSts = true;
												$scope.dataSparePart[i].hzSprSts = true;
												$scope.dataSparePart[i].rpmSprSts = true;
												$scope.dataSparePart[i].gearsts = false;
												$scope.dataSparePart[i].mtrsnosts = false;
										       $("#spareGearMotor_"+parseInt(i+1)).css("background-color", "#ffff7f");
											   $("#SHImfg_"+parseInt(i+1)).css("background-color", "#ffff7f");
											   //$("#MotorType_"+parseInt(i+1)).css("background-color", "#ffff7f");
											  // $("#MotorKW_"+parseInt(i+1)).css("background-color", "#ffff7f");
											   $("#Pole_"+parseInt(i+1)).css("background-color", "#ffff7f");
											   $("#Phase_"+parseInt(i+1)).css("background-color", "#ffff7f");
											   $("#Voltage_"+parseInt(i+1)).css("background-color", "#ffff7f");
											   $("#Hertz_"+parseInt(i+1)).css("background-color", "#ffff7f");
											   $("#RPM_"+parseInt(i+1)).css("background-color", "#ffff7f");
											   $("#gearHead_"+parseInt(i+1)).css("background-color", "#ffffff");
											   $("#MotorSerial_"+parseInt(i+1)).css("background-color", "#ffffff");
											   
											   if(validgriddata[i].motorKW == 'OTHER')
											   {
												   $scope.dataSparePart[i].mtrSprSts = true;
												   $scope.dataSparePart[i].reqMotorKW = true;
												   $("#MotorKW_"+parseInt(i+1)).css("background-color", "#ffff7f");
												   $("#OtherSpare_"+parseInt(i+1)).css("background-color", "#ffff7f");
											   }
											   else
											   {
												   $scope.dataSparePart[i].mtrSprSts = true;
												   $scope.dataSparePart[i].reqMotorKW = false;
												   $("#MotorKW_"+parseInt(i+1)).css("background-color", "#ffff7f");
												   $("#OtherSpare_"+parseInt(i+1)).css("background-color", "#ffffff");
											   }
											   if(validgriddata[i].motorType == 'other - pls specify')
											   {
												  
												   $scope.dataSparePart[i].expSts = true;
												   $scope.dataSparePart[i].reqOtherSts = true;
												   $("#MotorType_"+parseInt(i+1)).css("background-color", "#ffff7f");
												   $("#OthersPlzSpare_"+parseInt(i+1)).css("background-color", "#ffff7f");
											   }
											   else
											   {
												   $scope.dataSparePart[i].expSts = true;
												   $scope.dataSparePart[i].reqOtherSts = false;
												   $("#MotorType_"+parseInt(i+1)).css("background-color", "#ffff7f");
												   $("#OthersPlzSpare_"+parseInt(i+1)).css("background-color", "#ffffff");
											   }
										   }
									   }
									   //for(var i = 0; i<validgriddata.length; i++)
//									   {
//										   if(validgriddata[i].gm == "0")
//										   {
//											     $scope.dataSparePart[i].requiredStatus = true; 
//										    	 $("#spareGearMotor_"+parseInt(i+1)).css("background-color", "#ffff7f");
//										   }
//										   else
//										   {
//											   $scope.dataSparePart[i].requiredStatus = false; 
//										       $("#spareGearMotor_"+parseInt(i+1)).css("background-color", "#ffffff");  
//										   }
//										   
//										   if(validgriddata[i].othersPlz == "" || validgriddata[i].othersPlz == undefined || validgriddata[i].othersPlz == "NA")
//										   {
//											   $scope.dataSparePart[i].reqOtherSts = false; 
//										       $("#OthersPlzSpare_"+parseInt(i+1)).css("background-color", "#ffffff"); 
//										   }
//										   else
//										   {
//											 $scope.dataSparePart[i].reqOtherSts = true; 
//										     $("#OthersPlzSpare_"+parseInt(i+1)).css("background-color", "#ffff7f");   
//										   }
//										   if(validgriddata[i].other == "" || validgriddata[i].other == undefined || validgriddata[i].other == "NA")
//										   {
//											   $scope.dataSparePart[i].reqMotorKW = false; 
//										       $("#OtherSpare_"+parseInt(i+1)).css("background-color", "#ffffff"); 
//										   }
//										   else
//										   {
//											 $scope.dataSparePart[i].reqMotorKW = true; 
//										     $("#OtherSpare_"+parseInt(i+1)).css("background-color", "#ffff7f");   
//										   }
//										   /*if(validgriddata[i].presetTorque == "" || validgriddata[i].presetTorque == undefined || validgriddata[i].presetTorque == "NA")
//										   {
//											   $scope.dataSparePart[i].reqStatus = false; 
//										       $("#PresetTorqueSumit_"+parseInt(i+1)).css("background-color", "#ffffff"); 
//										   }
//										   else
//										   {
//											 $scope.dataSparePart[i].reqStatus = true; 
//										     $("#PresetTorqueSumit_"+parseInt(i+1)).css("background-color", "#ffff7f");   
//										   }*/
//										   if(validgriddata[i].motorSerial == "" || validgriddata[i].motorSerial == undefined || validgriddata[i].motorSerial == "NA")
//										   {
//											   $scope.dataSparePart[i].mtrsnosts = false; 
//										       $("#MotorSerial_"+parseInt(i+1)).css("background-color", "#ffffff"); 
//										   }
//										   else
//										   {
//											 $scope.dataSparePart[i].mtrsnosts = true; 
//										     $("#MotorSerial_"+parseInt(i+1)).css("background-color", "#ffff7f");   
//										   }
//										   if(validgriddata[i].motorType == "" || validgriddata[i].motorType == undefined || validgriddata[i].motorType == "NA")
//										   {
//											   $scope.dataSparePart[i].expSts = false; 
//										       $("#MotorType_"+parseInt(i+1)).css("background-color", "#ffffff"); 
//										   }
//										   else
//										   {
//											 $scope.dataSparePart[i].expSts = true; 
//										     $("#MotorType_"+parseInt(i+1)).css("background-color", "#ffff7f");   
//										   }
//										   if(validgriddata[i].gm == "0")
//										   {
//											   if(validgriddata[i].motorKW == "" || validgriddata[i].motorKW == undefined || validgriddata[i].motorKW == "NA")
//											   {
//												   $scope.dataSparePart[i].mtrSprSts = false; 
//												   $("#MotorKW_"+parseInt(i+1)).css("background-color", "#ffffff"); 
//											   }
//											   else
//											   {
//												 $scope.dataSparePart[i].mtrSprSts = false; 
//												 $("#MotorKW_"+parseInt(i+1)).css("background-color", "#ffffff");   
//											   }
//										   }
//										   else if(validgriddata[i].gm == "1")
//										   {
//											   if(validgriddata[i].motorKW == "" || validgriddata[i].motorKW == undefined || validgriddata[i].motorKW == "NA")
//											   {
//												   $scope.dataSparePart[i].mtrSprSts = false; 
//												   $("#MotorKW_"+parseInt(i+1)).css("background-color", "#ffffff"); 
//											   }
//											   else
//											   {
//												 $scope.dataSparePart[i].mtrSprSts = false; 
//												 $("#MotorKW_"+parseInt(i+1)).css("background-color", "#ffffff");   
//											   }
//											   
//										   }
//										   else
//										   {
//											   if(validgriddata[i].motorKW == "" || validgriddata[i].motorKW == undefined || validgriddata[i].motorKW == "NA")
//											   {
//												   $scope.dataSparePart[i].mtrSprSts = true; 
//												   $("#MotorKW_"+parseInt(i+1)).css("background-color", "#ffff7f"); 
//											   }
//											   else
//											   {
//												 $scope.dataSparePart[i].mtrSprSts = true; 
//												 $("#MotorKW_"+parseInt(i+1)).css("background-color", "#ffff7f");   
//											   }
//											   
//										   }
//										   
//										   if(validgriddata[i].pole == "" || validgriddata[i].pole == undefined || validgriddata[i].pole == "NA")
//										   {
//											   $scope.dataSparePart[i].poleSprSts = false; 
//										       $("#Pole_"+parseInt(i+1)).css("background-color", "#ffffff"); 
//										   }
//										   else
//										   {
//											 $scope.dataSparePart[i].poleSprSts = true; 
//										     $("#Pole_"+parseInt(i+1)).css("background-color", "#ffff7f");   
//										   }
//										   if(validgriddata[i].voltage == "" || validgriddata[i].voltage == undefined || validgriddata[i].voltage == "NA")
//										   {
//											   $scope.dataSparePart[i].voltSprSts = false; 
//										       $("#Voltage_"+parseInt(i+1)).css("background-color", "#ffffff"); 
//										   }
//										   else
//										   {
//											 $scope.dataSparePart[i].voltSprSts = true; 
//										     $("#Voltage_"+parseInt(i+1)).css("background-color", "#ffff7f");   
//										   }
//										   if(validgriddata[i].hertz == "" || validgriddata[i].hertz == undefined || validgriddata[i].hertz == "NA")
//										   {
//											   $scope.dataSparePart[i].hzSprSts = false; 
//										       $("#Hertz_"+parseInt(i+1)).css("background-color", "#ffffff"); 
//										   }
//										   else
//										   {
//											 $scope.dataSparePart[i].hzSprSts = true; 
//										     $("#Hertz_"+parseInt(i+1)).css("background-color", "#ffff7f");   
//										   }
//										    if(validgriddata[i].rpm == "" || validgriddata[i].rpm == undefined || validgriddata[i].rpm == "NA")
//										   {
//											   $scope.dataSparePart[i].rpmSprSts = false; 
//										       $("#RPM_"+parseInt(i+1)).css("background-color", "#ffffff"); 
//										   }
//										   else
//										   {
//											 $scope.dataSparePart[i].rpmSprSts = true; 
//										     $("#RPM_"+parseInt(i+1)).css("background-color", "#ffff7f");   
//										   }
//										  
//									   }
									   
									   
									   
									  $scope.$apply();	
								   
							
							
							}
							
							

							if(tab==5)
							{
							
							//  alert("tab" + 5);
							 $('#menu5').addClass('active');
							 $('#techQuery').addClass('active');
							 //$('#qtnBtnTech-hide').hide();
							   $scope.qtnBtnTech = '0';
							    $("#newSelection").hide();
								$("#competitorReplace").hide();
								$("#sumitomoReplace").hide();
								$("#sparePart").hide();
								$("#techQuery").show(); 
								$("#blogHideTech").hide();
								$("#remarksHideTech").hide();
								//$("#codeNotFound").hide();
								//$("#dataNotFound").hide();  
								  $scope.addCase=json['maincaseform'][0];
								  $scope.addDespTech=json['description'][0]; 
								  $scope.dataQuery=json['griddata'];
								  
								  $scope.addCase.currentTab = tab;
								  
								  var departmentSplit = json['maincaseform'][0].assigned;
										 var departmentSales = [];
										 if(departmentSplit == undefined || departmentSplit == "" || departmentSplit == "NA")
										 {
											 //alert("if");
											 $('#picturegallery').val("['']").trigger('chosen:updated');
											 $("#picturegallery").css("background-color", "#ffff7f");
										 }
										 else
										 {
											//alert(departmentSplit.length + " " + " else ");
											 for (var s = 0; s < departmentSplit.length; s++) {
									
														departmentSales.push(departmentSplit[s]);
														//alert("accessoriesSales"+accessoriesSales);
											}
											 $('#picturegallery').val(departmentSales).trigger('chosen:updated');
															$scope.addCase.assigned = departmentSales;
															$("#picturegallery").css("background-color", "#99ff99");
										 }
								  
								  //$scope.stepsModelTech = json['maincaseform'][0].images.split(',');
								 var getImageTech = json['maincaseform'][0].images;
								  // alert(getImage);
									 if(getImageTech!=null)
									   {
										   //alert(getImage + " " + 1);
										   var imgPrew = getImageTech.trim();
										   if(imgPrew==null || imgPrew=="" )
										   {
											   //alert(getImage + " " + 2);
											 
											  $scope.stepsModelTech = [];
											  $scope.$apply();
											  //$scope.dummyPhoto="";
					                          //$('#dummyPhoto').trigger('blur');
										   }
										   else
										   {
											   //alert(getImage + " " + 3);
											   $scope.stepsModelTech = getImageTech.split(',');
											   $scope.$apply();
											   
										   }
									   }
									   else
									   {
										   //alert(getImage + " " + 4);
										    $scope.stepsModelTech = [];
										    $scope.$apply();
										
									   }
									   
									   if(validdata.customerCode == "" || validdata.customerCode == undefined || validdata.customerCode == "NA")
									   {
										   $("#CustomerCode").css("background-color", "#ffff7f"); 
									   }
									   else
									   {
										   $("#CustomerCode").css("background-color", "#99ff99");
									   }
									   if(validdata.contactPerson == "" || validdata.contactPerson == undefined || validdata.contactPerson == "NA")
									   {
										   $("#ContactPerson").css("background-color", "#ffffff"); 
									   }
									   else
									   {
										   $("#ContactPerson").css("background-color", "#99ff99");
									   }
									   if(validdata.phone == "" || validdata.phone == undefined || validdata.phone == "NA")
									   {
										   $("#Telephone").css("background-color", "#ffffff"); 
									   }
									   else
									   {
										   $("#Telephone").css("background-color", "#99ff99");
									   }
									   if(validdata.address == "" || validdata.address == undefined || validdata.address == "NA")
									   {
										   $("#Address").css("background-color", "#ffffff"); 
									   }
									   else
									   {
										   $("#Address").css("background-color", "#99ff99");
									   }
									    /*if(validdata.createdBy == "" || validdata.createdBy == undefined || validdata.createdBy == "NA")
										 {
											$("#CreatedBy").css("background-color", "#ffff7f"); 
											//$scope.addCase.createdBy = "";
										 }
										 else
										 {
											$("#CreatedBy").css("background-color", "#99ff99");
											//$scope.addCase.createdBy = validdata.createdby;
										 }*/
									   /*if(validdata.assigned == "" || validdata.assigned == undefined || validdata.assigned == "NA")
									   {
										  $("#AssignedTo").css("background-color", "#ffff7f"); 
											//$scope.addCase.assigned = "";
									   }
									   else
									   {
										  $("#AssignedTo").css("background-color", "#99ff99");
											//$scope.addCase.assigned = validdata.departmentname;
									   }*/
									    for(var i = 0; i<validgriddata.length; i++)
									   {
										   if(validgriddata[i].gearMotor == "" || validgriddata[i].gearMotor == undefined || validgriddata[i].gearMotor == "NA")
										   {
											   $scope.dataQuery[i].requiredStatus = false; 
										       $("#techGearMotor_"+parseInt(i+1)).css("background-color", "#ffffff"); 
										   }
										   else
										   {
											 $scope.dataQuery[i].requiredStatus = true; 
										     $("#techGearMotor_"+parseInt(i+1)).css("background-color", "#ffff7f");   
										   }
										   if(validgriddata[i].othersPlz == "" || validgriddata[i].othersPlz == undefined || validgriddata[i].othersPlz == "NA")
										   {
											   $scope.dataQuery[i].reqOtherSts = false; 
										       $("#OthersPlzTech_"+parseInt(i+1)).css("background-color", "#ffffff"); 
										   }
										   else
										   {
											 $scope.dataQuery[i].reqOtherSts = true; 
										     $("#OthersPlzTech_"+parseInt(i+1)).css("background-color", "#ffff7f");   
										   }
										   if(validgriddata[i].other == "" || validgriddata[i].other == undefined || validgriddata[i].other == "NA")
										   {
											   $scope.dataQuery[i].reqMotorKW = false; 
										       $("#OtherTech_"+parseInt(i+1)).css("background-color", "#ffffff"); 
										   }
										   else
										   {
											 $scope.dataQuery[i].reqMotorKW = true; 
										     $("#OtherTech_"+parseInt(i+1)).css("background-color", "#ffff7f");   
										   }
										   if(validgriddata[i].presetTorque == "" || validgriddata[i].presetTorque == undefined || validgriddata[i].presetTorque == "NA")
										   {
											   $scope.dataQuery[i].reqStatus = false; 
										       $("#PresetTorqueTech_"+parseInt(i+1)).css("background-color", "#ffffff"); 
										   }
										   else
										   {
											 $scope.dataQuery[i].reqStatus = true; 
										     $("#PresetTorqueTech_"+parseInt(i+1)).css("background-color", "#ffff7f");   
										   }
										  
									   }
									   
									  $scope.$apply();	
								   
							
							
							}
							if(tab==0)
								{
								//alert(tab);
								//alert(JSON.stringify(json['maincaseform'][0]));
								
								 $('#menu1').addClass('active');
								 $('#newSelection').addClass('active');
								  //$('#QtnBtnNew-hide').hide();
								  
								    $("#newSelection").show();
									$("#competitorReplace").hide();
									$("#sumitomoReplace").hide();
									$("#sparePart").hide();
									$("#techQuery").hide();
									$("#blogHide").hide(); 
									$("#remarksHide").hide();
									//$("#codeNotFound").hide();

									//$("#dataNotFound").hide();  
								       $scope.addCase=json['maincaseform'][0];
									   $scope.addDesp=json['description'][0];
									   
									   $scope.addCase.currentTab = tab;
									   $scope.QtnBtnNew = '0';
									   //$scope.addCase.orginReq = '0';
                                       //$scope.addCase.custStatus = json['maincaseform'][0].custStatus;
									   
									  //$scope.addDesp=json['description'][0];
									   //$scope.dataField=json['griddata']; 
									   
									   var departmentSplit = json['maincaseform'][0].assigned;
										 var departmentSales = [];
										 if(departmentSplit == undefined || departmentSplit == "" || departmentSplit == "NA")
										 {
											 //alert("if");
											 $('#picturegallery').val("['']").trigger('chosen:updated');
											 $("#picturegallery").css("background-color", "#ffff7f");
										 }
										 else
										 {
											//alert(departmentSplit.length + " " + " else ");
											 for (var s = 0; s < departmentSplit.length; s++) {
									
														departmentSales.push(departmentSplit[s]);
														//alert("accessoriesSales"+accessoriesSales);
											}
											 $('#picturegallery').val(departmentSales).trigger('chosen:updated');
															$scope.addCase.assigned = departmentSales;
															$("#picturegallery").css("background-color", "#99ff99");
										 }
									   
									   if(validdata.customerCode == "" || validdata.customerCode == undefined || validdata.customerCode == "NA")
									   {
										   $("#CustomerCode").css("background-color", "#ffff7f"); 
									   }
									   else
									   {
										   $("#CustomerCode").css("background-color", "#99ff99");
									   }
									   if(validdata.contactPerson == "" || validdata.contactPerson == undefined || validdata.contactPerson == "NA")
									   {
										   $("#ContactPerson").css("background-color", "#ffffff"); 
									   }
									   else
									   {
										   $("#ContactPerson").css("background-color", "#99ff99");
									   }
									   if(validdata.phone == "" || validdata.phone == undefined || validdata.phone == "NA")
									   {
										   $("#Telephone").css("background-color", "#ffffff"); 
									   }
									   else
									   {
										   $("#Telephone").css("background-color", "#99ff99");
									   }
									   if(validdata.address == "" || validdata.address == undefined || validdata.address == "NA")
									   {
										   $("#Address").css("background-color", "#ffffff"); 
									   }
									   else
									   {
										   $("#Address").css("background-color", "#99ff99");
									   }
									   /* if(validdata.createdBy == "" || validdata.createdBy == undefined || validdata.createdBy == "NA")
										 {
											$("#CreatedBy").css("background-color", "#ffff7f"); 
											//$scope.addCase.createdBy = "";
										 }
										 else
										 {
											$("#CreatedBy").css("background-color", "#99ff99");
											//$scope.addCase.createdBy = validdata.createdby;
										 }*/
									   /*if(validdata.assigned == "" || validdata.assigned == undefined || validdata.assigned == "NA")
									   {
										  $("#AssignedTo").css("background-color", "#ffff7f"); 
											//$scope.addCase.assigned = "";
									   }
									   else
									   {
										  $("#AssignedTo").css("background-color", "#99ff99");
											//$scope.addCase.assigned = validdata.departmentname;
									   }*/
									    for(var i = 0; i<validgriddata.length; i++)
									   {
										   if(validgriddata[i].gearMotor == "" || validgriddata[i].gearMotor == undefined || validgriddata[i].gearMotor == "NA")
										   {
											   $scope.dataField[i].requiredStatus = false; 
										       $("#GearMotor_"+parseInt(i+1)).css("background-color", "#ffffff"); 
										   }
										   else
										   {
											 $scope.dataField[i].requiredStatus = true; 
										     $("#GearMotor_"+parseInt(i+1)).css("background-color", "#ffff7f");   
										   }
										   if(validgriddata[i].othersPlz == "" || validgriddata[i].othersPlz == undefined || validgriddata[i].othersPlz == "NA")
										   {
											   $scope.dataField[i].reqOtherSts = false; 
										       $("#OthersPlz_"+parseInt(i+1)).css("background-color", "#ffffff"); 
										   }
										   else
										   {
											 $scope.dataField[i].reqOtherSts = true; 
										     $("#OthersPlz_"+parseInt(i+1)).css("background-color", "#ffff7f");   
										   }
										   if(validgriddata[i].other == "" || validgriddata[i].other == undefined || validgriddata[i].other == "NA")
										   {
											   $scope.dataField[i].reqMotorKW = false; 
										       $("#Other_"+parseInt(i+1)).css("background-color", "#ffffff"); 
										   }
										   else
										   {
											 $scope.dataField[i].reqMotorKW = true; 
										     $("#Other_"+parseInt(i+1)).css("background-color", "#ffff7f");   
										   }
										   if(validgriddata[i].presetTorque == "" || validgriddata[i].presetTorque == undefined || validgriddata[i].presetTorque == "NA")
										   {
											   $scope.dataField[i].reqStatus = false; 
										       $("#PresetTorque_"+parseInt(i+1)).css("background-color", "#ffffff"); 
										   }
										   else
										   {
											 $scope.dataField[i].reqStatus = true; 
										     $("#PresetTorque_"+parseInt(i+1)).css("background-color", "#ffff7f");   
										   }
										  
									   }
									   
								 $scope.$apply();
								
								}
								$("#loadingimg").hide();
							});
					}
					
			
				} 
			else
				{
					/*var caseaction = $rootScope.actionTab;
					
					if(caseaction === "Edit")
					{
						alert(caseaction);
					}
					else
					{
						alert(caseaction+ "else");
					}*/
				$.post("loadingCasessDataFromNewCaseMainTableandTemp.do",{custmername:$rootScope.caseCustomer,caseref:$rootScope.caseCustomerRef,tab:$rootScope.tab,actionTab:$rootScope.actionTab,action:$rootScope.action,caseid:$rootScope.caseid},function(json,status)
						{
							
							//alert("main data");
							//var gridFormData = json['griddata']; 
							var tab=json['tab'];
							var validdata = json['maincaseform'][0];
							var validgriddata = json['griddata'];
							var caseaction = json['data'];
							 //alert(JSON.stringify(json['tab']) + " tab "); 
							// alert(JSON.stringify(json['maincaseform'][0]));
							 
							//alert(JSON.stringify(json['griddata'][0]));
				          // alert(JSON.stringify(json['rerkadata']))
							  
							/*  $scope.addCase=json['maincaseform'][0];
							  $scope.addDespComp=json['description'][0]; 
							  $scope.dataCompetitor=json['griddata'];*/
							   /*$scope.addCase=json['maincaseform'][0];
							   $scope.addDesp=json['description'][0]; 
							    $scope.dataField=gridFormData; */
							    
							    if(tab==1)
							    	{
							    	
							    	 $('#menu1').addClass('active');
									 $('#newSelection').addClass('active');
									 
									// $('.btn-hideNew').attr('disabled',true);
									 
									//$('#QtnBtnNew-hide').show();
									    $("#newSelection").show();
										$("#competitorReplace").hide();
										$("#sumitomoReplace").hide();
										$("#sparePart").hide();
										$("#techQuery").hide();
										//$("#codeNotFound").hide();
										//$("#dataNotFound").hide(); 
									    $scope.addCase=json['maincaseform'][0];
										$scope.addDesp=json['description'][0]; 
										$scope.dataField=json['griddata'];
										$scope.addedRemarksData =json['rerkadata']; 
										
										$scope.addCase.currentTab = tab;
										
										var departmentSplit = json['maincaseform'][0].assigned;
										 var departmentSales = [];
										 if(departmentSplit == undefined || departmentSplit == "" || departmentSplit == "NA")
										 {
											 //alert("if");
											 
												$('#picturegallery').val("['']").trigger('chosen:updated');
													$("#picturegallery").css("background-color", "#ffff7f");
										 }
										 else
										 {
											//alert(departmentSplit.length + " " + " else ");
											 for (var s = 0; s < departmentSplit.length; s++) {
									
														departmentSales.push(departmentSplit[s]);
														//alert("accessoriesSales"+accessoriesSales);
											}
											
											
											$('#picturegallery').val(departmentSales).trigger('chosen:updated');
															$scope.addCase.assigned = departmentSales;
															$("#picturegallery").css("background-color", "#99ff99");
											
										 }
										 
										  
										
										//$scope.stepsModel = json['maincaseform'][0].images.split(',');
										$rootScope.caseCustomer = "";
									    $rootScope.caseCustomerRef = "";
									    $rootScope.tab=""; 
									    $rootScope.actionTab="";
										$rootScope.action = "";
										$rootScope.caseid = "";
										
										
										if(caseaction === "main")
										{
											$('#menu2').addClass('active2');
										    $('#menu3').addClass('active2');
										    $('#menu4').addClass('active2');
										    $('#menu5').addClass('active2');
											$scope.QtnBtnNew = '1';
											$('.btn-hideNew').addClass('active2');
									 		$('.btn-discardNew').addClass('active2');
											if(validdata.qtnMaster == "1")
											{
												//alert("if");
												$scope.isDisabled2 = true;
												//$('#prospectmasterid').addClass('active2');
											}
											else
											{
												//alert("else");
												$scope.isDisabled3 = true;
												//$('#customermasterid').addClass('active2');
											}
											//QuotationTypeBlock
											$("#QuotationTypeBlock").show();
											$scope.isDisabledQtn = true;
										}
										else if(caseaction === "view")
										{
											
											
											
											$('#menu1').addClass('active2');
											$('#menu2').addClass('active2');
										    $('#menu3').addClass('active2');
										    $('#menu4').addClass('active2');
										    $('#menu5').addClass('active2');
											
											$scope.QtnBtnNew = '1';
											//$('.QtnBtnNew-hide').addClass('active2');
											//$("#QtnBtnNew-hide").attr('disabled', true)
											//$("#QtnBtnNew-hide").addClass('active2');
											$('.btn-hideNew').addClass('active2');
									 		$('.Send-hideNew').addClass('active2');
											$('.btn-discardNew').addClass('active2');
											
											$(".chosen-select").attr('disabled', true).trigger("chosen:updated");
											
											$scope.isDisabled = true;
											
										}
										else
										{
											$('#menu1').removeClass('active2');
											$('#menu2').removeClass('active2');
										    $('#menu3').removeClass('active2');
										    $('#menu4').removeClass('active2');
										    $('#menu5').removeClass('active2');
											$scope.QtnBtnNew = '0';
											$('.btn-hideNew').removeClass('active2');
									 		$('.btn-discardNew').removeClass('active2');
											$("#blogHide").hide();
											$("#remarksHide").hide(); 
										}
										$scope.$apply();
									    var getImage = json['maincaseform'][0].images;
								  // alert(getImage);
									 if(getImage!=null)
									   {
										   //alert(getImage + " " + 1);
										   var imgPrew = getImage.trim();
										   if(imgPrew==null || imgPrew=="" )
										   {
											   //alert(getImage + " " + 2);
											 /* $('.image-preview').popover('hide');
											  $("#1photoinput").text("Upload");
											  $("#3photoinput").val("");
											  $("#2photoinput").hide();*/
											  $scope.stepsModel = [];
											  $scope.$apply();
											  //$scope.dummyPhoto="";
					                          //$('#dummyPhoto').trigger('blur');
										   }
										   else
										   {
											   //alert(getImage + " " + 3);
											   $scope.stepsModel = getImage.split(',');
											   $scope.$apply();
											   /*var img = $('<img src="'+getImage+'" width="200" height="150"/>', {id: 'dynamic',width:200,height:150 });
											   
											   var photoName = getImage.split("/");
												//alert(photoName);
												$("#photo").attr("data-content",$(img)[0].outerHTML).popover("show");
												$("#1photoinput").text("Change");
												$("#2photoinput").show();
												$("#3photoinput").val(photoName[1]);*/
												//$scope.dummyPhoto="1";
					                            //$('#dummyPhoto').trigger('blur');
										   }
									   }
									   else
									   {
										   //alert(getImage + " " + 4);
										    $scope.stepsModel = [];
										    $scope.$apply();
										 /* $('.image-preview').popover('hide');
										  $("#1photoinput").text("Upload");
										  $("#3photoinput").val("");
										  $("#2photoinput").hide();*/
										  //$scope.dummyPhoto="";
					                     // $('#dummyPhoto').trigger('blur');
									   }
									   
									   if(validdata.customerCode == "" || validdata.customerCode == undefined || validdata.customerCode == "NA")
									   {
										   $("#CustomerCode").css("background-color", "#ffff7f"); 
									   }
									   else
									   {
										   $("#CustomerCode").css("background-color", "#99ff99");
									   }
									   if(validdata.contactPerson == "" || validdata.contactPerson == undefined || validdata.contactPerson == "NA")
									   {
										   $("#ContactPerson").css("background-color", "#ffffff"); 
									   }
									   else
									   {
										   $("#ContactPerson").css("background-color", "#99ff99");
									   }
									   if(validdata.phone == "" || validdata.phone == undefined || validdata.phone == "NA")
									   {
										   $("#Telephone").css("background-color", "#ffffff"); 
									   }
									   else
									   {
										   $("#Telephone").css("background-color", "#99ff99");
									   }
									   if(validdata.address == "" || validdata.address == undefined || validdata.address == "NA")
									   {
										   $("#Address").css("background-color", "#ffffff"); 
									   }
									   else
									   {
										   $("#Address").css("background-color", "#99ff99");
									   }
									   /* if(validdata.createdBy == "" || validdata.createdBy == undefined || validdata.createdBy == "NA")
										 {
											$("#CreatedBy").css("background-color", "#ffff7f"); 
											//$scope.addCase.createdBy = "";
										 }
										 else
										 {
											$("#CreatedBy").css("background-color", "#99ff99");
											//$scope.addCase.createdBy = validdata.createdby;
										 }*/
									   /*if(validdata.assigned == "" || validdata.assigned == undefined || validdata.assigned == "NA")
									   {
										  $("#AssignedTo").css("background-color", "#ffff7f"); 
											//$scope.addCase.assigned = "";
									   }
									   else
									   {
										  $("#AssignedTo").css("background-color", "#99ff99");
											//$scope.addCase.assigned = validdata.departmentname;
									   }*/
									    for(var i = 0; i<validgriddata.length; i++)
									   {
										   if(validgriddata[i].gearMotor == "" || validgriddata[i].gearMotor == undefined || validgriddata[i].gearMotor == "NA")
										   {
											   $scope.dataField[i].requiredStatus = false; 
										       $("#GearMotor_"+parseInt(i+1)).css("background-color", "#ffffff"); 
										   }
										   else
										   {
											 $scope.dataField[i].requiredStatus = true; 
										     $("#GearMotor_"+parseInt(i+1)).css("background-color", "#ffff7f");   
										   }
										   if(validgriddata[i].othersPlz == "" || validgriddata[i].othersPlz == undefined || validgriddata[i].othersPlz == "NA")
										   {
											   $scope.dataField[i].reqOtherSts = false; 
										       $("#OthersPlz_"+parseInt(i+1)).css("background-color", "#ffffff"); 
										   }
										   else
										   {
											 $scope.dataField[i].reqOtherSts = true; 
										     $("#OthersPlz_"+parseInt(i+1)).css("background-color", "#ffff7f");   
										   }
										   if(validgriddata[i].other == "" || validgriddata[i].other == undefined || validgriddata[i].other == "NA")
										   {
											   $scope.dataField[i].reqMotorKW = false; 
										       $("#Other_"+parseInt(i+1)).css("background-color", "#ffffff"); 
										   }
										   else
										   {
											 $scope.dataField[i].reqMotorKW = true; 
										     $("#Other_"+parseInt(i+1)).css("background-color", "#ffff7f");   
										   }
										   if(validgriddata[i].presetTorque == "" || validgriddata[i].presetTorque == undefined || validgriddata[i].presetTorque == "NA")
										   {
											   $scope.dataField[i].reqStatus = false; 
										       $("#PresetTorque_"+parseInt(i+1)).css("background-color", "#ffffff"); 
										   }
										   else
										   {
											 $scope.dataField[i].reqStatus = true; 
										     $("#PresetTorque_"+parseInt(i+1)).css("background-color", "#ffff7f");   
										   }
										  
									   }
							    	
							    	}
							    
							    
							    if(tab==2)
						    	{
						    	
							    	 $('#menu2').addClass('active');
									 $('#competitorReplace').addClass('active');
									 
									 //$('.btn-hideComp').attr('disabled',true);
									 
									    $("#newSelection").hide();
										$("#competitorReplace").show();
										$("#sumitomoReplace").hide();
										$("#sparePart").hide();
										$("#techQuery").hide(); 
										//$("#codeNotFound").hide();
										//$("#dataNotFound").hide();
										$scope.addCase=json['maincaseform'][0];
										$scope.addDespComp=json['description'][0]; 
										$scope.dataCompetitor=json['griddata'];
										$scope.addedRemarksCompData =json['rerkadata']; 
										
										$scope.addCase.currentTab = tab;
										
										
										var departmentSplit = json['maincaseform'][0].assigned;
										 var departmentSales = [];
										 if(departmentSplit == undefined || departmentSplit == "" || departmentSplit == "NA")
										 {
											 //alert("if");
											  $('#picturegallery').val("['']").trigger('chosen:updated');
													$("#picturegallery").css("background-color", "#ffff7f");
										 }
										 else
										 {
											//alert(departmentSplit.length + " " + " else ");
											 for (var s = 0; s < departmentSplit.length; s++) {
									
														departmentSales.push(departmentSplit[s]);
														//alert("accessoriesSales"+accessoriesSales);
											}
											
												 $('#picturegallery').val(departmentSales).trigger('chosen:updated');
															$scope.addCase.assigned = departmentSales;
															$("#picturegallery").css("background-color", "#99ff99");
										 }
										//$scope.stepsModelComp = json['maincaseform'][0].images.split(',');
									    $rootScope.caseCustomer = "";
									    $rootScope.caseCustomerRef = "";
										$rootScope.tab="";
										$rootScope.actionTab="";
										$rootScope.action = "";
										$rootScope.caseid = "";
										//$("#qtnBtnComp-hide").show();
										
											
										if(caseaction === "main")
										{
											$('#menu1').addClass('active2');
										    $('#menu3').addClass('active2');
										    $('#menu4').addClass('active2');
										    $('#menu5').addClass('active2');
											$scope.qtnBtnComp = '1';
											$('.btn-hideComp').addClass('active2');
									 		$('.btn-discarComp').addClass('active2');
											if(validdata.qtnMaster == "1")
											{
												//alert("if");
												$scope.isDisabled2 = true;
												//$('#prospectmasterid').addClass('active2');
											}
											else
											{
												//alert("else");
												$scope.isDisabled3 = true;
												//$('#customermasterid').addClass('active2');
											}
											$("#QuotationTypeBlock").show();
											$scope.isDisabledQtn = true;
										}
										else if(caseaction === "view")
										{
											
											
											$('#menu1').addClass('active2');
											$('#menu2').addClass('active2');
										    $('#menu3').addClass('active2');
										    $('#menu4').addClass('active2');
										    $('#menu5').addClass('active2');
											$scope.qtnBtnComp = '1';
											$('.btn-hideComp').addClass('active2');
									 		$('.Send-hideComp').addClass('active2');
											$('.btn-discarComp').addClass('active2');
											$(".chosen-select").attr('disabled', true).trigger("chosen:updated");
											$scope.isDisabled = true;
											
										}
										else
										{
											$('#menu1').removeClass('active2');
											$('#menu2').removeClass('active2');
										    $('#menu3').removeClass('active2');
										    $('#menu4').removeClass('active2');
										    $('#menu5').removeClass('active2');
											$scope.qtnBtnComp = '0';
											$('.btn-hideComp').removeClass('active2');
									 		$('.btn-discarComp').removeClass('active2');
											$("#blogHideComp").hide();
											$("#remarksHideComp").hide(); 
										}
										 
										 
										
										 $scope.$apply();
										var getImageComp = json['maincaseform'][0].images;
								  // alert(getImage);
									 if(getImageComp!=null)
									   {
										   //alert(getImage + " " + 1);
										   var imgPrew = getImageComp.trim();
										   if(imgPrew==null || imgPrew=="" )
										   {
											   //alert(getImage + " " + 2);
											 /* $('.image-preview').popover('hide');
											  $("#1photoinput").text("Upload");
											  $("#3photoinput").val("");
											  $("#2photoinput").hide();*/
											  $scope.stepsModelComp = [];
											  $scope.$apply();
											  //$scope.dummyPhoto="";
					                          //$('#dummyPhoto').trigger('blur');
										   }
										   else
										   {
											   //alert(getImage + " " + 3);
											   $scope.stepsModelComp = getImageComp.split(',');
											   $scope.$apply();
											   /*var img = $('<img src="'+getImage+'" width="200" height="150"/>', {id: 'dynamic',width:200,height:150 });
											   
											   var photoName = getImage.split("/");
												//alert(photoName);
												$("#photo").attr("data-content",$(img)[0].outerHTML).popover("show");
												$("#1photoinput").text("Change");
												$("#2photoinput").show();
												$("#3photoinput").val(photoName[1]);*/
												//$scope.dummyPhoto="1";
					                            //$('#dummyPhoto').trigger('blur');
										   }
									   }
									   else
									   {
										   //alert(getImage + " " + 4);
										    $scope.stepsModelComp = [];
										    $scope.$apply();
										 /* $('.image-preview').popover('hide');
										  $("#1photoinput").text("Upload");
										  $("#3photoinput").val("");
										  $("#2photoinput").hide();*/
										  //$scope.dummyPhoto="";
					                     // $('#dummyPhoto').trigger('blur');
									   }
									   
									    if(validdata.customerCode == "" || validdata.customerCode == undefined || validdata.customerCode == "NA")
									   {
										   $("#CustomerCode").css("background-color", "#ffff7f"); 
									   }
									   else
									   {
										   $("#CustomerCode").css("background-color", "#99ff99");
									   }
									   if(validdata.contactPerson == "" || validdata.contactPerson == undefined || validdata.contactPerson == "NA")
									   {
										   $("#ContactPerson").css("background-color", "#ffffff"); 
									   }
									   else
									   {
										   $("#ContactPerson").css("background-color", "#99ff99");
									   }
									   if(validdata.phone == "" || validdata.phone == undefined || validdata.phone == "NA")
									   {
										   $("#Telephone").css("background-color", "#ffffff"); 
									   }
									   else
									   {
										   $("#Telephone").css("background-color", "#99ff99");
									   }
									   if(validdata.address == "" || validdata.address == undefined || validdata.address == "NA")
									   {
										   $("#Address").css("background-color", "#ffffff"); 
									   }
									   else
									   {
										   $("#Address").css("background-color", "#99ff99");
									   }
									    /*if(validdata.createdBy == "" || validdata.createdBy == undefined || validdata.createdBy == "NA")
										 {
											$("#CreatedBy").css("background-color", "#ffff7f"); 
											//$scope.addCase.createdBy = "";
										 }
										 else
										 {
											$("#CreatedBy").css("background-color", "#99ff99");
											//$scope.addCase.createdBy = validdata.createdby;
										 }*/
									   /*if(validdata.assigned == "" || validdata.assigned == undefined || validdata.assigned == "NA")
									   {
										  $("#AssignedTo").css("background-color", "#ffff7f"); 
											//$scope.addCase.assigned = "";
									   }
									   else
									   {
										  $("#AssignedTo").css("background-color", "#99ff99");
											//$scope.addCase.assigned = validdata.departmentname;
									   }*/
									   for(var i = 0; i<validgriddata.length; i++)
									   {
										   if(validgriddata[i].gearMotor == "" || validgriddata[i].gearMotor == undefined || validgriddata[i].gearMotor == "NA")
										   {
											   $scope.dataCompetitor[i].requiredStatus = false; 
										       $("#compGearMotor_"+parseInt(i+1)).css("background-color", "#ffffff"); 
										   }
										   else
										   {
											 $scope.dataCompetitor[i].requiredStatus = true; 
										     $("#compGearMotor_"+parseInt(i+1)).css("background-color", "#ffff7f");   
										   }
										   if(validgriddata[i].othersPlz == "" || validgriddata[i].othersPlz == undefined || validgriddata[i].othersPlz == "NA")
										   {
											   $scope.dataCompetitor[i].reqOtherSts = false; 
										       $("#OthersPlzComp_"+parseInt(i+1)).css("background-color", "#ffffff"); 
										   }
										   else
										   {
											 $scope.dataCompetitor[i].reqOtherSts = true; 
										     $("#OthersPlzComp_"+parseInt(i+1)).css("background-color", "#ffff7f");   
										   }
										   if(validgriddata[i].other == "" || validgriddata[i].other == undefined || validgriddata[i].other == "NA")
										   {
											   $scope.dataCompetitor[i].reqMotorKW = false; 
										       $("#OtherComp_"+parseInt(i+1)).css("background-color", "#ffffff"); 
										   }
										   else
										   {
											 $scope.dataCompetitor[i].reqMotorKW = true; 
										     $("#OtherComp_"+parseInt(i+1)).css("background-color", "#ffff7f");   
										   }
										   if(validgriddata[i].presetTorque == "" || validgriddata[i].presetTorque == undefined || validgriddata[i].presetTorque == "NA")
										   {
											   $scope.dataCompetitor[i].reqStatus = false; 
										       $("#PresetTorqueComp_"+parseInt(i+1)).css("background-color", "#ffffff"); 
										   }
										   else
										   {
											 $scope.dataCompetitor[i].reqStatus = true; 
										     $("#PresetTorqueComp_"+parseInt(i+1)).css("background-color", "#ffff7f");   
										   }
										  
									   }
						    	
						    	}
							    
							    
							    
							    
							    if(tab==3)
							    	{
							    	
							    	 $('#menu3').addClass('active');
									 $('#sumitomoReplace').addClass('active');
									 
									// $('.btn-hide').attr('disabled',true);
									 
									    $("#newSelection").hide();
										$("#competitorReplace").hide();
										$("#sumitomoReplace").show();
										$("#sparePart").hide();
										$("#techQuery").hide();
										//$("#codeNotFound").hide();
										//$("#dataNotFound").hide();
										 //$("#qtnBtnSumit-hide").show();
									   
										   $scope.addCase=json['maincaseform'][0];
										   $scope.addDespSumit=json['description'][0]; 
										   $scope.dataSumitomo=json['griddata'];
										   $scope.addedRemarksSumitData =json['rerkadata'];
										   
										   $scope.addCase.currentTab = tab;
										   
										   
										   var departmentSplit = json['maincaseform'][0].assigned;
										 var departmentSales = [];
										 if(departmentSplit == undefined || departmentSplit == "" || departmentSplit == "NA")
										 {
											 //alert("if");
											$('#picturegallery').val("['']").trigger('chosen:updated');
											 	$("#picturegallery").css("background-color", "#ffff7f");
										 }
										 else
										 {
											//alert(departmentSplit.length + " " + " else ");
											 for (var s = 0; s < departmentSplit.length; s++) {
									
														departmentSales.push(departmentSplit[s]);
														//alert("accessoriesSales"+accessoriesSales);
											}
											$('#picturegallery').val(departmentSales).trigger('chosen:updated');
															$scope.addCase.assigned = departmentSales;
															$("#picturegallery").css("background-color", "#99ff99");
										 }
										   //$scope.stepsModelSumit = json['maincaseform'][0].images.split(',');
										   
										    $rootScope.caseCustomer = "";
											$rootScope.caseCustomerRef = "";
											$rootScope.tab=""; 
											$rootScope.actionTab="";
											$rootScope.action = "";
											$rootScope.caseid = "";
											
										if(caseaction === "main")
										{
											$('#menu1').addClass('active2');
										    $('#menu2').addClass('active2');
										    $('#menu4').addClass('active2');
										    $('#menu5').addClass('active2');
											 $scope.qtnBtnSumit = '1';
											$('.btn-hideSumit').addClass('active2');
									 		$('.btn-discarSumit').addClass('active2');
											if(validdata.qtnMaster == "1")
											{
												//alert("if");
												$scope.isDisabled2 = true;
												//$('#prospectmasterid').addClass('active2');
											}
											else
											{
												//alert("else");
												$scope.isDisabled3 = true;
												//$('#customermasterid').addClass('active2');
											}
											$("#QuotationTypeBlock").show();
											$scope.isDisabledQtn = true;
										}
										else if(caseaction === "view")
										{
											
											$('#menu1').addClass('active2');
											$('#menu2').addClass('active2');
										    $('#menu3').addClass('active2');
										    $('#menu4').addClass('active2');
										    $('#menu5').addClass('active2');
											 $scope.qtnBtnSumit = '1';
											$('.btn-hideSumit').addClass('active2');
											$('.Send-hideSumit').addClass('active2');
									 		$('.btn-discarSumit').addClass('active2');
											$(".chosen-select").attr('disabled', true).trigger("chosen:updated");
											$scope.isDisabled = true;
											
										}
										else
										{
											$('#menu1').removeClass('active2');
											$('#menu2').removeClass('active2');
										    $('#menu3').removeClass('active2');
										    $('#menu4').removeClass('active2');
										    $('#menu5').removeClass('active2');
											 $scope.qtnBtnSumit = '0';
											$('.btn-hideSumit').removeClass('active2');
									 		$('.btn-discarSumit').removeClass('active2');
											$("#blogHideSumit").hide();
											$("#remarksHideSumit").hide();
										}	
											
										
										   $scope.$apply();
										   var getImageSumit = json['maincaseform'][0].images;
								  // alert(getImage);
									 if(getImageSumit!=null)
									   {
										   //alert(getImage + " " + 1);
										   var imgPrew = getImageSumit.trim();
										   if(imgPrew==null || imgPrew=="" )
										   {
											   //alert(getImage + " " + 2);
											 /* $('.image-preview').popover('hide');
											  $("#1photoinput").text("Upload");
											  $("#3photoinput").val("");
											  $("#2photoinput").hide();*/
											  $scope.stepsModelSumit = [];
											  $scope.$apply();
											  //$scope.dummyPhoto="";
					                          //$('#dummyPhoto').trigger('blur');
										   }
										   else
										   {
											   //alert(getImage + " " + 3);
											   $scope.stepsModelSumit = getImageSumit.split(',');
											   $scope.$apply();
											   /*var img = $('<img src="'+getImage+'" width="200" height="150"/>', {id: 'dynamic',width:200,height:150 });
											   
											   var photoName = getImage.split("/");
												//alert(photoName);
												$("#photo").attr("data-content",$(img)[0].outerHTML).popover("show");
												$("#1photoinput").text("Change");
												$("#2photoinput").show();
												$("#3photoinput").val(photoName[1]);*/
												//$scope.dummyPhoto="1";
					                            //$('#dummyPhoto').trigger('blur');
										   }
									   }
									   else
									   {
										   //alert(getImage + " " + 4);
										    $scope.stepsModelSumit = [];
										    $scope.$apply();
										 /* $('.image-preview').popover('hide');
										  $("#1photoinput").text("Upload");
										  $("#3photoinput").val("");
										  $("#2photoinput").hide();*/
										  //$scope.dummyPhoto="";
					                     // $('#dummyPhoto').trigger('blur');
									   }
									   
									    if(validdata.customerCode == "" || validdata.customerCode == undefined || validdata.customerCode == "NA")
									   {
										   $("#CustomerCode").css("background-color", "#ffff7f"); 
									   }
									   else
									   {
										   $("#CustomerCode").css("background-color", "#99ff99");
									   }
									   if(validdata.contactPerson == "" || validdata.contactPerson == undefined || validdata.contactPerson == "NA")
									   {
										   $("#ContactPerson").css("background-color", "#ffffff"); 
									   }
									   else
									   {
										   $("#ContactPerson").css("background-color", "#99ff99");
									   }
									   if(validdata.phone == "" || validdata.phone == undefined || validdata.phone == "NA")
									   {
										   $("#Telephone").css("background-color", "#ffffff"); 
									   }
									   else
									   {
										   $("#Telephone").css("background-color", "#99ff99");
									   }
									   if(validdata.address == "" || validdata.address == undefined || validdata.address == "NA")
									   {
										   $("#Address").css("background-color", "#ffffff"); 
									   }
									   else
									   {
										   $("#Address").css("background-color", "#99ff99");
									   }
									    /*if(validdata.createdBy == "" || validdata.createdBy == undefined || validdata.createdBy == "NA")
										 {
											$("#CreatedBy").css("background-color", "#ffff7f"); 
											//$scope.addCase.createdBy = "";
										 }
										 else
										 {
											$("#CreatedBy").css("background-color", "#99ff99");
											//$scope.addCase.createdBy = validdata.createdby;
										 }*/
									   /*if(validdata.assigned == "" || validdata.assigned == undefined || validdata.assigned == "NA")
									   {
										  $("#AssignedTo").css("background-color", "#ffff7f"); 
											//$scope.addCase.assigned = "";
									   }
									   else
									   {
										  $("#AssignedTo").css("background-color", "#99ff99");
											//$scope.addCase.assigned = validdata.departmentname;
									   }*/
									    for(var i = 0; i<validgriddata.length; i++)
									   {
										   if(validgriddata[i].gearMotor == "" || validgriddata[i].gearMotor == undefined || validgriddata[i].gearMotor == "NA")
										   {
											   $scope.dataSumitomo[i].requiredStatus = false; 
										       $("#sumitGearMotor_"+parseInt(i+1)).css("background-color", "#ffffff"); 
										   }
										   else
										   {
											 $scope.dataSumitomo[i].requiredStatus = true; 
										     $("#sumitGearMotor_"+parseInt(i+1)).css("background-color", "#ffff7f");   
										   }
										   if(validgriddata[i].othersPlz == "" || validgriddata[i].othersPlz == undefined || validgriddata[i].othersPlz == "NA")
										   {
											   $scope.dataSumitomo[i].reqOtherSts = false; 
										       $("#OthersPlzSumit_"+parseInt(i+1)).css("background-color", "#ffffff"); 
										   }
										   else
										   {
											 $scope.dataSumitomo[i].reqOtherSts = true; 
										     $("#OthersPlzSumit_"+parseInt(i+1)).css("background-color", "#ffff7f");   
										   }
										   if(validgriddata[i].other == "" || validgriddata[i].other == undefined || validgriddata[i].other == "NA")
										   {
											   $scope.dataSumitomo[i].reqMotorKW = false; 
										       $("#OtherSumit_"+parseInt(i+1)).css("background-color", "#ffffff"); 
										   }
										   else
										   {
											 $scope.dataSumitomo[i].reqMotorKW = true; 
										     $("#OtherSumit_"+parseInt(i+1)).css("background-color", "#ffff7f");   
										   }
										   if(validgriddata[i].presetTorque == "" || validgriddata[i].presetTorque == undefined || validgriddata[i].presetTorque == "NA")
										   {
											   $scope.dataSumitomo[i].reqStatus = false; 
										       $("#PresetTorqueSumit_"+parseInt(i+1)).css("background-color", "#ffffff"); 
										   }
										   else
										   {
											 $scope.dataSumitomo[i].reqStatus = true; 
										     $("#PresetTorqueSumit_"+parseInt(i+1)).css("background-color", "#ffff7f");   
										   }
										  
									   }
										   
									
							    	
							    	
							    	}
							    
							    
								
								if(tab==4)
								{
								
								 $('#menu4').addClass('active');
								 $('#sparePart').addClass('active');
								 
								// $('.btn-hideSpare').attr('disabled',true);
								
								     
								//$('#qtnBtnSpare-hide').show();
								    $("#newSelection").hide();
									$("#competitorReplace").hide();
									$("#sumitomoReplace").hide();
									$("#sparePart").show();
									$("#techQuery").hide(); 
									//$("#codeNotFound").hide();
									//$("#dataNotFound").hide();
									  $scope.addCase=json['maincaseform'][0];
									  $scope.addDespSpare=json['description'][0]; 
									  $scope.dataSparePart=json['griddata'];
									  $scope.addedRemarksSpareData =json['rerkadata'];
									  
									  $scope.addCase.currentTab = tab;
									  
									  
									  var departmentSplit = json['maincaseform'][0].assigned;
										 var departmentSales = [];
										 if(departmentSplit == undefined || departmentSplit == "" || departmentSplit == "NA")
										 {
											 //alert("if");
											$('#picturegallery').val("['']").trigger('chosen:updated');
											 	$("#picturegallery").css("background-color", "#ffff7f");
										 }
										 else
										 {
											//alert(departmentSplit.length + " " + " else ");
											 for (var s = 0; s < departmentSplit.length; s++) {
									
														departmentSales.push(departmentSplit[s]);
														//alert("accessoriesSales"+accessoriesSales);
											}
											$('#picturegallery').val(departmentSales).trigger('chosen:updated');
															$scope.addCase.assigned = departmentSales;
															$("#picturegallery").css("background-color", "#99ff99");
										 }
									  
									  //$scope.stepsModelSpare = json['maincaseform'][0].images.split(',');
									    $rootScope.caseCustomer = "";
									    $rootScope.caseCustomerRef = "";
									    $rootScope.tab="";
										$rootScope.actionTab=""; 
										$rootScope.action = "";
										$rootScope.caseid = "";
										
										if(caseaction === "main")
										{
											$('#menu1').addClass('active2');
											$('#menu2').addClass('active2');
											$('#menu3').addClass('active2');
											$('#menu5').addClass('active2');
											 $scope.qtnBtnSpare = '1';
											$('.btn-hideSpare').addClass('active2');
									 		$('.btn-discarSpare').addClass('active2');
											if(validdata.qtnMaster == "1")
											{
												//alert("if");
												$scope.isDisabled2 = true;
												//$('#prospectmasterid').addClass('active2');
											}
											else
											{
												//alert("else");
												$scope.isDisabled3 = true;
												//$('#customermasterid').addClass('active2');
											}
											$("#QuotationTypeBlock").show();
											$scope.isDisabledQtn2 = true;
										}
										else if(caseaction === "view")
										{
											
											$('#menu1').addClass('active2');
											$('#menu2').addClass('active2');
										    $('#menu3').addClass('active2');
										    $('#menu4').addClass('active2');
										    $('#menu5').addClass('active2');
											 $scope.qtnBtnSpare = '1';
											$('.btn-hideSpare').removeClass('active2');
									 		$('.btn-discarSpare').removeClass('active2');
									 		$('.Send-hideSpare').addClass('active2');
											$(".chosen-select").attr('disabled', true).trigger("chosen:updated");
											$scope.isDisabled = true;
											
										}
										else
										{
											$('#menu1').removeClass('active2');
											$('#menu2').removeClass('active2');
										    $('#menu3').removeClass('active2');
										    $('#menu4').removeClass('active2');
										    $('#menu5').removeClass('active2');
											 $scope.qtnBtnSpare = '0';
											$('.btn-hideSpare').removeClass('active2');
									 		$('.btn-discarSpare').removeClass('active2');
											$("#blogHideSpare").hide();
											$("#remarksHideSpare").hide(); 
										}
										
										
									  $scope.$apply();
									  var getImageSpare = json['maincaseform'][0].images;
								  // alert(getImage);
									 if(getImageSpare!=null)
									   {
										   //alert(getImage + " " + 1);
										   var imgPrew = getImageSpare.trim();
										   if(imgPrew==null || imgPrew=="" )
										   {
											   //alert(getImage + " " + 2);
											 /* $('.image-preview').popover('hide');
											  $("#1photoinput").text("Upload");
											  $("#3photoinput").val("");
											  $("#2photoinput").hide();*/
											  $scope.stepsModelSpare = [];
											  $scope.$apply();
											  //$scope.dummyPhoto="";
					                          //$('#dummyPhoto').trigger('blur');
										   }
										   else
										   {
											   //alert(getImage + " " + 3);
											   $scope.stepsModelSpare = getImageSpare.split(',');
											   $scope.$apply();
											   /*var img = $('<img src="'+getImage+'" width="200" height="150"/>', {id: 'dynamic',width:200,height:150 });
											   
											   var photoName = getImage.split("/");
												//alert(photoName);
												$("#photo").attr("data-content",$(img)[0].outerHTML).popover("show");
												$("#1photoinput").text("Change");
												$("#2photoinput").show();
												$("#3photoinput").val(photoName[1]);*/
												//$scope.dummyPhoto="1";
					                            //$('#dummyPhoto').trigger('blur');
										   }
									   }
									   else
									   {
										   //alert(getImage + " " + 4);
										    $scope.stepsModelSpare = [];
										    $scope.$apply();
										 /* $('.image-preview').popover('hide');
										  $("#1photoinput").text("Upload");
										  $("#3photoinput").val("");
										  $("#2photoinput").hide();*/
										  //$scope.dummyPhoto="";
					                     // $('#dummyPhoto').trigger('blur');
									   }
									   
									    if(validdata.customerCode == "" || validdata.customerCode == undefined || validdata.customerCode == "NA")
									   {
										   $("#CustomerCode").css("background-color", "#ffff7f"); 
									   }
									   else
									   {
										   $("#CustomerCode").css("background-color", "#99ff99");
									   }
									   if(validdata.contactPerson == "" || validdata.contactPerson == undefined || validdata.contactPerson == "NA")
									   {
										   $("#ContactPerson").css("background-color", "#ffffff"); 
									   }
									   else
									   {
										   $("#ContactPerson").css("background-color", "#99ff99");
									   }
									   if(validdata.phone == "" || validdata.phone == undefined || validdata.phone == "NA")
									   {
										   $("#Telephone").css("background-color", "#ffffff"); 
									   }
									   else
									   {
										   $("#Telephone").css("background-color", "#99ff99");
									   }
									   if(validdata.address == "" || validdata.address == undefined || validdata.address == "NA")
									   {
										   $("#Address").css("background-color", "#ffffff"); 
									   }
									   else
									   {
										   $("#Address").css("background-color", "#99ff99");
									   }
									   /* if(validdata.createdBy == "" || validdata.createdBy == undefined || validdata.createdBy == "NA")
										 {
											$("#CreatedBy").css("background-color", "#ffff7f"); 
											//$scope.addCase.createdBy = "";
										 }
										 else
										 {
											$("#CreatedBy").css("background-color", "#99ff99");
											//$scope.addCase.createdBy = validdata.createdby;
										 }*/
									   /*if(validdata.assigned == "" || validdata.assigned == undefined || validdata.assigned == "NA")
									   {
										  $("#AssignedTo").css("background-color", "#ffff7f"); 
											//$scope.addCase.assigned = "";
									   }
									   else
									   {
										  $("#AssignedTo").css("background-color", "#99ff99");
											//$scope.addCase.assigned = validdata.departmentname;
									   }*/
									   for(var i = 0; i<validgriddata.length; i++)
									   {
										   if(validgriddata[i].gm == "0")
										   {
											    $scope.dataSparePart[i].requiredStatus = false;
											    $scope.dataSparePart[i].shiMfgsts = false;
											   // $scope.dataSparePart[i].expSts = false;
											   // $scope.dataSparePart[i].mtrSprSts = false;
												$scope.dataSparePart[i].poleSprSts = false;
												$scope.dataSparePart[i].phSprSts = false;
												$scope.dataSparePart[i].voltSprSts = false;
												$scope.dataSparePart[i].hzSprSts = false;
												$scope.dataSparePart[i].rpmSprSts = false;
												$scope.dataSparePart[i].gearsts = false;
												$scope.dataSparePart[i].mtrsnosts = true;
										       $("#spareGearMotor_"+parseInt(i+1)).css("background-color", "#ffffff");
											   $("#SHImfg_"+parseInt(i+1)).css("background-color", "#ffffff");
											   //$("#MotorType_"+parseInt(i+1)).css("background-color", "#ffffff");
											   //$("#MotorKW_"+parseInt(i+1)).css("background-color", "#ffffff");
											   $("#Pole_"+parseInt(i+1)).css("background-color", "#ffffff");
											   $("#Phase_"+parseInt(i+1)).css("background-color", "#ffffff");
											   $("#Voltage_"+parseInt(i+1)).css("background-color", "#ffffff");
											   $("#Hertz_"+parseInt(i+1)).css("background-color", "#ffffff");
											   $("#RPM_"+parseInt(i+1)).css("background-color", "#ffffff");
											   $("#gearHead_"+parseInt(i+1)).css("background-color", "#ffffff");
											   $("#MotorSerial_"+parseInt(i+1)).css("background-color", "#ffff7f");
											   if(validgriddata[i].motorKW == 'OTHER')
											   {
												   $scope.dataSparePart[i].mtrSprSts = true;
												   $scope.dataSparePart[i].reqMotorKW = true;
												   $("#MotorKW_"+parseInt(i+1)).css("background-color", "#ffff7f");
												   $("#OtherSpare_"+parseInt(i+1)).css("background-color", "#ffff7f");
											   }
											   else
											   {
												   $scope.dataSparePart[i].mtrSprSts = false;
												   $scope.dataSparePart[i].reqMotorKW = false;
												   $("#MotorKW_"+parseInt(i+1)).css("background-color", "#ffffff");
												   $("#OtherSpare_"+parseInt(i+1)).css("background-color", "#ffffff");
											   }
											   if(validgriddata[i].motorType == 'other - pls specify')
											   {
												  
												   $scope.dataSparePart[i].expSts = true;
												   $scope.dataSparePart[i].reqOtherSts = true;
												   $("#MotorType_"+parseInt(i+1)).css("background-color", "#ffff7f");
												   $("#OthersPlzSpare_"+parseInt(i+1)).css("background-color", "#ffff7f");
											   }
											   else
											   {
												   $scope.dataSparePart[i].expSts = false;
												   $scope.dataSparePart[i].reqOtherSts = false;
												   $("#MotorType_"+parseInt(i+1)).css("background-color", "#ffffff");
												   $("#OthersPlzSpare_"+parseInt(i+1)).css("background-color", "#ffffff");
											   }
										   }
										   else if(validgriddata[i].gm == "1")
										   {
											    $scope.dataSparePart[i].requiredStatus = false;
											    $scope.dataSparePart[i].shiMfgsts = false;
											   // $scope.dataSparePart[i].expSts = false;
											    //$scope.dataSparePart[i].mtrSprSts = false;
												$scope.dataSparePart[i].poleSprSts = false;
												$scope.dataSparePart[i].phSprSts = false;
												$scope.dataSparePart[i].voltSprSts = false;
												$scope.dataSparePart[i].hzSprSts = false;
												$scope.dataSparePart[i].rpmSprSts = false;
												$scope.dataSparePart[i].gearsts = true;
												$scope.dataSparePart[i].mtrsnosts = false;
										       $("#spareGearMotor_"+parseInt(i+1)).css("background-color", "#ffffff");
											   $("#SHImfg_"+parseInt(i+1)).css("background-color", "#ffffff");
											  // $("#MotorType_"+parseInt(i+1)).css("background-color", "#ffffff");
											   //$("#MotorKW_"+parseInt(i+1)).css("background-color", "#ffffff");
											   $("#Pole_"+parseInt(i+1)).css("background-color", "#ffffff");
											   $("#Phase_"+parseInt(i+1)).css("background-color", "#ffffff");
											   $("#Voltage_"+parseInt(i+1)).css("background-color", "#ffffff");
											   $("#Hertz_"+parseInt(i+1)).css("background-color", "#ffffff");
											   $("#RPM_"+parseInt(i+1)).css("background-color", "#ffffff");
											   $("#gearHead_"+parseInt(i+1)).css("background-color", "#ffff7f");
											   $("#MotorSerial_"+parseInt(i+1)).css("background-color", "#ffffff");
											   
											   if(validgriddata[i].motorKW == 'OTHER')
											   {
												   $scope.dataSparePart[i].mtrSprSts = true;
												   $scope.dataSparePart[i].reqMotorKW = true;
												   $("#MotorKW_"+parseInt(i+1)).css("background-color", "#ffff7f");
												   $("#OtherSpare_"+parseInt(i+1)).css("background-color", "#ffff7f");
											   }
											   else
											   {
												   $scope.dataSparePart[i].mtrSprSts = false;
												   $scope.dataSparePart[i].reqMotorKW = false;
												   $("#MotorKW_"+parseInt(i+1)).css("background-color", "#ffffff");
												   $("#OtherSpare_"+parseInt(i+1)).css("background-color", "#ffffff");
											   }
											   if(validgriddata[i].motorType == 'other - pls specify')
											   {
												  
												   $scope.dataSparePart[i].expSts = true;
												   $scope.dataSparePart[i].reqOtherSts = true;
												   $("#MotorType_"+parseInt(i+1)).css("background-color", "#ffff7f");
												   $("#OthersPlzSpare_"+parseInt(i+1)).css("background-color", "#ffff7f");
											   }
											   else
											   {
												   $scope.dataSparePart[i].expSts = false;
												   $scope.dataSparePart[i].reqOtherSts = false;
												   $("#MotorType_"+parseInt(i+1)).css("background-color", "#ffffff");
												   $("#OthersPlzSpare_"+parseInt(i+1)).css("background-color", "#ffffff");
											   }
										   }
										   else
										   {
											    $scope.dataSparePart[i].requiredStatus = true;
											    $scope.dataSparePart[i].shiMfgsts = true;
											    //$scope.dataSparePart[i].expSts = true;
											    //$scope.dataSparePart[i].mtrSprSts = true;
												$scope.dataSparePart[i].poleSprSts = true;
												$scope.dataSparePart[i].phSprSts = true;
												$scope.dataSparePart[i].voltSprSts = true;
												$scope.dataSparePart[i].hzSprSts = true;
												$scope.dataSparePart[i].rpmSprSts = true;
												$scope.dataSparePart[i].gearsts = false;
												$scope.dataSparePart[i].mtrsnosts = false;
										       $("#spareGearMotor_"+parseInt(i+1)).css("background-color", "#ffff7f");
											   $("#SHImfg_"+parseInt(i+1)).css("background-color", "#ffff7f");
											   //$("#MotorType_"+parseInt(i+1)).css("background-color", "#ffff7f");
											  // $("#MotorKW_"+parseInt(i+1)).css("background-color", "#ffff7f");
											   $("#Pole_"+parseInt(i+1)).css("background-color", "#ffff7f");
											   $("#Phase_"+parseInt(i+1)).css("background-color", "#ffff7f");
											   $("#Voltage_"+parseInt(i+1)).css("background-color", "#ffff7f");
											   $("#Hertz_"+parseInt(i+1)).css("background-color", "#ffff7f");
											   $("#RPM_"+parseInt(i+1)).css("background-color", "#ffff7f");
											   $("#gearHead_"+parseInt(i+1)).css("background-color", "#ffffff");
											   $("#MotorSerial_"+parseInt(i+1)).css("background-color", "#ffffff");
											   
											   if(validgriddata[i].motorKW == 'OTHER')
											   {
												   $scope.dataSparePart[i].mtrSprSts = true;
												   $scope.dataSparePart[i].reqMotorKW = true;
												   $("#MotorKW_"+parseInt(i+1)).css("background-color", "#ffff7f");
												   $("#OtherSpare_"+parseInt(i+1)).css("background-color", "#ffff7f");
											   }
											   else
											   {
												   $scope.dataSparePart[i].mtrSprSts = true;
												   $scope.dataSparePart[i].reqMotorKW = false;
												   $("#MotorKW_"+parseInt(i+1)).css("background-color", "#ffff7f");
												   $("#OtherSpare_"+parseInt(i+1)).css("background-color", "#ffffff");
											   }
											   if(validgriddata[i].motorType == 'other - pls specify')
											   {
												  
												   $scope.dataSparePart[i].expSts = true;
												   $scope.dataSparePart[i].reqOtherSts = true;
												   $("#MotorType_"+parseInt(i+1)).css("background-color", "#ffff7f");
												   $("#OthersPlzSpare_"+parseInt(i+1)).css("background-color", "#ffff7f");
											   }
											   else
											   {
												   $scope.dataSparePart[i].expSts = true;
												   $scope.dataSparePart[i].reqOtherSts = false;
												   $("#MotorType_"+parseInt(i+1)).css("background-color", "#ffff7f");
												   $("#OthersPlzSpare_"+parseInt(i+1)).css("background-color", "#ffffff");
											   }
										   }
									   }
									  //  for(var i = 0; i<validgriddata.length; i++)
//									   {
//										   if(validgriddata[i].gearMotor == "" || validgriddata[i].gearMotor == undefined || validgriddata[i].gearMotor == "NA")
//										   {
//											   $scope.dataSparePart[i].requiredStatus = false; 
//										       $("#spareGearMotor_"+parseInt(i+1)).css("background-color", "#ffffff"); 
//										   }
//										   else
//										   {
//											 $scope.dataSparePart[i].requiredStatus = true; 
//										     $("#spareGearMotor_"+parseInt(i+1)).css("background-color", "#ffff7f");   
//										   }
//										   if(validgriddata[i].othersPlz == "" || validgriddata[i].othersPlz == undefined || validgriddata[i].othersPlz == "NA")
//										   {
//											   $scope.dataSparePart[i].reqOtherSts = false; 
//										       $("#OthersPlzSpare_"+parseInt(i+1)).css("background-color", "#ffffff"); 
//										   }
//										   else
//										   {
//											 $scope.dataSparePart[i].reqOtherSts = true; 
//										     $("#OthersPlzSpare_"+parseInt(i+1)).css("background-color", "#ffff7f");   
//										   }
//										   if(validgriddata[i].other == "" || validgriddata[i].other == undefined || validgriddata[i].other == "NA")
//										   {
//											   $scope.dataSparePart[i].reqMotorKW = false; 
//										       $("#OtherSpare_"+parseInt(i+1)).css("background-color", "#ffffff"); 
//										   }
//										   else
//										   {
//											 $scope.dataSparePart[i].reqMotorKW = true; 
//										     $("#OtherSpare_"+parseInt(i+1)).css("background-color", "#ffff7f");   
//										   }
//										   /*if(validgriddata[i].presetTorque == "" || validgriddata[i].presetTorque == undefined || validgriddata[i].presetTorque == "NA")
//										   {
//											   $scope.dataSparePart[i].reqStatus = false; 
//										       $("#PresetTorqueSumit_"+parseInt(i+1)).css("background-color", "#ffffff"); 
//										   }
//										   else
//										   {
//											 $scope.dataSparePart[i].reqStatus = true; 
//										     $("#PresetTorqueSumit_"+parseInt(i+1)).css("background-color", "#ffff7f");   
//										   }*/
//										   if(validgriddata[i].motorSerial == "" || validgriddata[i].motorSerial == undefined || validgriddata[i].motorSerial == "NA")
//										   {
//											   $scope.dataSparePart[i].mtrsnosts = false; 
//										       $("#MotorSerial_"+parseInt(i+1)).css("background-color", "#ffffff"); 
//										   }
//										   else
//										   {
//											 $scope.dataSparePart[i].mtrsnosts = true; 
//										     $("#MotorSerial_"+parseInt(i+1)).css("background-color", "#ffff7f");   
//										   }
//										   if(validgriddata[i].motorType == "" || validgriddata[i].motorType == undefined || validgriddata[i].motorType == "NA")
//										   {
//											   $scope.dataSparePart[i].expSts = false; 
//										       $("#MotorType_"+parseInt(i+1)).css("background-color", "#ffffff"); 
//										   }
//										   else
//										   {
//											 $scope.dataSparePart[i].expSts = true; 
//										     $("#MotorType_"+parseInt(i+1)).css("background-color", "#ffff7f");   
//										   }
//										   /*if(validgriddata[i].motorKW == "" || validgriddata[i].motorKW == undefined || validgriddata[i].motorKW == "NA")
//										   {
//											   $scope.dataSparePart[i].mtrSprSts = false; 
//										       $("#MotorKW_"+parseInt(i+1)).css("background-color", "#ffffff"); 
//										   }
//										   else
//										   {
//											 $scope.dataSparePart[i].mtrSprSts = true; 
//										     $("#MotorKW_"+parseInt(i+1)).css("background-color", "#ffff7f");   
//										   }*/
//										   if(validgriddata[i].gm == "0")
//										   {
//											   if(validgriddata[i].motorKW == "" || validgriddata[i].motorKW == undefined || validgriddata[i].motorKW == "NA")
//											   {
//												   $scope.dataSparePart[i].mtrSprSts = false; 
//												   $("#MotorKW_"+parseInt(i+1)).css("background-color", "#ffffff"); 
//											   }
//											   else
//											   {
//												 $scope.dataSparePart[i].mtrSprSts = false; 
//												 $("#MotorKW_"+parseInt(i+1)).css("background-color", "#ffffff");   
//											   }
//										   }
//										   else if(validgriddata[i].gm == "1")
//										   {
//											   if(validgriddata[i].motorKW == "" || validgriddata[i].motorKW == undefined || validgriddata[i].motorKW == "NA")
//											   {
//												   $scope.dataSparePart[i].mtrSprSts = false; 
//												   $("#MotorKW_"+parseInt(i+1)).css("background-color", "#ffffff"); 
//											   }
//											   else
//											   {
//												 $scope.dataSparePart[i].mtrSprSts = false; 
//												 $("#MotorKW_"+parseInt(i+1)).css("background-color", "#ffffff");   
//											   }
//											   
//										   }
//										   else
//										   {
//											   if(validgriddata[i].motorKW == "" || validgriddata[i].motorKW == undefined || validgriddata[i].motorKW == "NA")
//											   {
//												   $scope.dataSparePart[i].mtrSprSts = true; 
//												   $("#MotorKW_"+parseInt(i+1)).css("background-color", "#ffff7f"); 
//											   }
//											   else
//											   {
//												 $scope.dataSparePart[i].mtrSprSts = true; 
//												 $("#MotorKW_"+parseInt(i+1)).css("background-color", "#ffff7f");   
//											   }
//											   
//										   }
//										   if(validgriddata[i].pole == "" || validgriddata[i].pole == undefined || validgriddata[i].pole == "NA")
//										   {
//											   $scope.dataSparePart[i].poleSprSts = false; 
//										       $("#Pole_"+parseInt(i+1)).css("background-color", "#ffffff"); 
//										   }
//										   else
//										   {
//											 $scope.dataSparePart[i].poleSprSts = true; 
//										     $("#Pole_"+parseInt(i+1)).css("background-color", "#ffff7f");   
//										   }
//										   if(validgriddata[i].voltage == "" || validgriddata[i].voltage == undefined || validgriddata[i].voltage == "NA")
//										   {
//											   $scope.dataSparePart[i].voltSprSts = false; 
//										       $("#Voltage_"+parseInt(i+1)).css("background-color", "#ffffff"); 
//										   }
//										   else
//										   {
//											 $scope.dataSparePart[i].voltSprSts = true; 
//										     $("#Voltage_"+parseInt(i+1)).css("background-color", "#ffff7f");   
//										   }
//										   if(validgriddata[i].hertz == "" || validgriddata[i].hertz == undefined || validgriddata[i].hertz == "NA")
//										   {
//											   $scope.dataSparePart[i].hzSprSts = false; 
//										       $("#Hertz_"+parseInt(i+1)).css("background-color", "#ffffff"); 
//										   }
//										   else
//										   {
//											 $scope.dataSparePart[i].hzSprSts = true; 
//										     $("#Hertz_"+parseInt(i+1)).css("background-color", "#ffff7f");   
//										   }
//										    if(validgriddata[i].rpm == "" || validgriddata[i].rpm == undefined || validgriddata[i].rpm == "NA")
//										   {
//											   $scope.dataSparePart[i].rpmSprSts = false; 
//										       $("#RPM_"+parseInt(i+1)).css("background-color", "#ffffff"); 
//										   }
//										   else
//										   {
//											 $scope.dataSparePart[i].rpmSprSts = true; 
//										     $("#RPM_"+parseInt(i+1)).css("background-color", "#ffff7f");   
//										   }
//										  
//									   }
								
								
								}
								
								if(tab==5)
								{
								
								 $('#menu5').addClass('active');
								 $('#techQuery').addClass('active');
								 
								 //$('.btn-hideTech').attr('disabled',true);
								 
								 //$('#qtnBtnTech-hide').show();
								    $("#newSelection").hide();
									$("#competitorReplace").hide();
									$("#sumitomoReplace").hide();
									$("#sparePart").hide();
									$("#techQuery").show();
									//$("#codeNotFound").hide();
									//$("#dataNotFound").hide(); 
									  $scope.addCase=json['maincaseform'][0];
									  $scope.addDespTech=json['description'][0]; 
									  $scope.dataQuery=json['griddata'];
									  $scope.addedRemarksTechData =json['rerkadata'];
									  
									  var departmentSplit = json['maincaseform'][0].assigned;
										 var departmentSales = [];
										 if(departmentSplit == undefined || departmentSplit == "" || departmentSplit == "NA")
										 {
											 //alert("if");
											 $('#picturegallery').val("['']").trigger('chosen:updated');
											 	$("#picturegallery").css("background-color", "#ffff7f");
											 
										 }
										 else
										 {
											//alert(departmentSplit.length + " " + " else ");
											 for (var s = 0; s < departmentSplit.length; s++) {
									
														departmentSales.push(departmentSplit[s]);
														//alert("accessoriesSales"+accessoriesSales);
											}
											 $('#picturegallery').val(departmentSales).trigger('chosen:updated');
															$scope.addCase.assigned = departmentSales;
															$("#picturegallery").css("background-color", "#99ff99");
										 }
									  
									  $scope.addCase.currentTab = tab;
									  
									    //$scope.stepsModelTech = json['maincaseform'][0].images.split(',');
										$rootScope.caseCustomer = "";
									    $rootScope.caseCustomerRef = "";
									    $rootScope.tab=""; 
										$rootScope.actionTab="";
										$rootScope.action = "";
										$rootScope.caseid = "";
										
										if(caseaction === "main")
										{
											$('#menu1').addClass('active2');
											$('#menu2').addClass('active2');
											$('#menu3').addClass('active2');
											$('#menu4').addClass('active2');
											$scope.qtnBtnTech = '1';
											$('.btn-hideTech').addClass('active2');
								 			$('.btn-discarTech').addClass('active2');
											if(validdata.qtnMaster == "1")
											{
												//alert("if");
												$scope.isDisabled2 = true;
												//$('#prospectmasterid').addClass('active2');
											}
											else
											{
												//alert("else");
												$scope.isDisabled3 = true;
												//$('#customermasterid').addClass('active2');
											}
											$("#QuotationTypeBlock").show();
											$scope.isDisabledQtn = true;
										}
										else if(caseaction === "view")
										{
											
											$('#menu1').addClass('active2');
											$('#menu2').addClass('active2');
										    $('#menu3').addClass('active2');
										    $('#menu4').addClass('active2');
										    $('#menu5').addClass('active2');
											$scope.qtnBtnTech = '1';
											$('.btn-hideTech').removeClass('active2');
								 			$('.btn-discarTech').removeClass('active2');
									 		$('.Send-hideTech').addClass('active2');
											$(".chosen-select").attr('disabled', true).trigger("chosen:updated");
											$scope.isDisabled = true;
											
										}
										else
										{
											$('#menu1').removeClass('active2');
											$('#menu2').removeClass('active2');
										    $('#menu3').removeClass('active2');
										    $('#menu4').removeClass('active2');
										    $('#menu5').removeClass('active2');
											$scope.qtnBtnTech = '0';
											$('.btn-hideTech').removeClass('active2');
								 			$('.btn-discarTech').removeClass('active2');
											$("#blogHideTech").hide();
											$("#remarksHideTech").hide();
										}
										
										
										$scope.$apply();
									 var getImageTech = json['maincaseform'][0].images;
								  // alert(getImage);
									 if(getImageTech!=null)
									   {
										   //alert(getImage + " " + 1);
										   var imgPrew = getImageTech.trim();
										   if(imgPrew==null || imgPrew=="" )
										   {
											   //alert(getImage + " " + 2);
											 /* $('.image-preview').popover('hide');
											  $("#1photoinput").text("Upload");
											  $("#3photoinput").val("");
											  $("#2photoinput").hide();*/
											  $scope.stepsModelTech = [];
											  $scope.$apply();
											  //$scope.dummyPhoto="";
					                          //$('#dummyPhoto').trigger('blur');
										   }
										   else
										   {
											   //alert(getImage + " " + 3);
											   $scope.stepsModelTech = getImageTech.split(',');
											   $scope.$apply();
											   /*var img = $('<img src="'+getImage+'" width="200" height="150"/>', {id: 'dynamic',width:200,height:150 });
											   
											   var photoName = getImage.split("/");
												//alert(photoName);
												$("#photo").attr("data-content",$(img)[0].outerHTML).popover("show");
												$("#1photoinput").text("Change");
												$("#2photoinput").show();
												$("#3photoinput").val(photoName[1]);*/
												//$scope.dummyPhoto="1";
					                            //$('#dummyPhoto').trigger('blur');
										   }
									   }
									   else
									   {
										   //alert(getImage + " " + 4);
										    $scope.stepsModelTech = [];
										    $scope.$apply();
										 /* $('.image-preview').popover('hide');
										  $("#1photoinput").text("Upload");
										  $("#3photoinput").val("");
										  $("#2photoinput").hide();*/
										  //$scope.dummyPhoto="";
					                     // $('#dummyPhoto').trigger('blur');
									   }
									    if(validdata.customerCode == "" || validdata.customerCode == undefined || validdata.customerCode == "NA")
									   {
										   $("#CustomerCode").css("background-color", "#ffff7f"); 
									   }
									   else
									   {
										   $("#CustomerCode").css("background-color", "#99ff99");
									   }
									   if(validdata.contactPerson == "" || validdata.contactPerson == undefined || validdata.contactPerson == "NA")
									   {
										   $("#ContactPerson").css("background-color", "#ffffff"); 
									   }
									   else
									   {
										   $("#ContactPerson").css("background-color", "#99ff99");
									   }
									   if(validdata.phone == "" || validdata.phone == undefined || validdata.phone == "NA")
									   {
										   $("#Telephone").css("background-color", "#ffffff"); 
									   }
									   else
									   {
										   $("#Telephone").css("background-color", "#99ff99");
									   }
									   if(validdata.address == "" || validdata.address == undefined || validdata.address == "NA")
									   {
										   $("#Address").css("background-color", "#ffffff"); 
									   }
									   else
									   {
										   $("#Address").css("background-color", "#99ff99");
									   }
									    /*if(validdata.createdBy == "" || validdata.createdBy == undefined || validdata.createdBy == "NA")
										 {
											$("#CreatedBy").css("background-color", "#ffff7f"); 
											//$scope.addCase.createdBy = "";
										 }
										 else
										 {
											$("#CreatedBy").css("background-color", "#99ff99");
											//$scope.addCase.createdBy = validdata.createdby;
										 }*/
									   /*if(validdata.assigned == "" || validdata.assigned == undefined || validdata.assigned == "NA")
									   {
										  $("#AssignedTo").css("background-color", "#ffff7f"); 
											//$scope.addCase.assigned = "";
									   }
									   else
									   {
										  $("#AssignedTo").css("background-color", "#99ff99");
											//$scope.addCase.assigned = validdata.departmentname;
									   }*/
									   for(var i = 0; i<validgriddata.length; i++)
									   {
										   if(validgriddata[i].gearMotor == "" || validgriddata[i].gearMotor == undefined || validgriddata[i].gearMotor == "NA")
										   {
											   $scope.dataQuery[i].requiredStatus = false; 
										       $("#techGearMotor_"+parseInt(i+1)).css("background-color", "#ffffff"); 
										   }
										   else
										   {
											 $scope.dataQuery[i].requiredStatus = true; 
										     $("#techGearMotor_"+parseInt(i+1)).css("background-color", "#ffff7f");   
										   }
										   if(validgriddata[i].othersPlz == "" || validgriddata[i].othersPlz == undefined || validgriddata[i].othersPlz == "NA")
										   {
											   $scope.dataQuery[i].reqOtherSts = false; 
										       $("#OthersPlzTech_"+parseInt(i+1)).css("background-color", "#ffffff"); 
										   }
										   else
										   {
											 $scope.dataQuery[i].reqOtherSts = true; 
										     $("#OthersPlzTech_"+parseInt(i+1)).css("background-color", "#ffff7f");   
										   }
										   if(validgriddata[i].other == "" || validgriddata[i].other == undefined || validgriddata[i].other == "NA")
										   {
											   $scope.dataQuery[i].reqMotorKW = false; 
										       $("#OtherTech_"+parseInt(i+1)).css("background-color", "#ffffff"); 
										   }
										   else
										   {
											 $scope.dataQuery[i].reqMotorKW = true; 
										     $("#OtherTech_"+parseInt(i+1)).css("background-color", "#ffff7f");   
										   }
										   if(validgriddata[i].presetTorque == "" || validgriddata[i].presetTorque == undefined || validgriddata[i].presetTorque == "NA")
										   {
											   $scope.dataQuery[i].reqStatus = false; 
										       $("#PresetTorqueTech_"+parseInt(i+1)).css("background-color", "#ffffff"); 
										   }
										   else
										   {
											 $scope.dataQuery[i].reqStatus = true; 
										     $("#PresetTorqueTech_"+parseInt(i+1)).css("background-color", "#ffff7f");   
										   }
										  
									   }
									  
								
								}
								
								
								
							    
							  // alert(JSON.stringify($scope.addCase));
							  // alert(JSON.stringify($scope.addDesp));
							 
							  //$rootScope.loadNewCase = c;
							   $("#loadingimg").hide();
						});
				
				
				}
				
				}, 1000);
			
		};
	

	$scope.addRemark = function(remark)
	{
		//alert(JSON.stringify(desp));
		$.post("savingDescriptionandRemarks.do",{remarks:remark,tab:1},function(json)
				{
			           //alert(JSON.stringify(remark));
					  
					    $scope.addedRemarksData =json['rerkadata'];
					    $scope.$apply();
				});
				 $scope.remarks = "";
				 $scope.$apply();
	}
	
	$scope.addRemarkComp = function(remark)
	{
		$.post("savingDescriptionandRemarks.do",{remarks:remark,tab:2},function(json)
				{
			
			           //alert(JSON.stringify(remark));
					   //$scope.remark = "";
					   //alert(JSON.stringify($scope.remark)); 
			//alert(tab);
		  			   $scope.addedRemarksCompData =json['rerkadata'];
					   $scope.$apply();
				});
				 $scope.remarksComp = "";
				 $scope.$apply();
		
	}
	$scope.addRemarkSumit = function(remark)
	{
		//alert(JSON.stringify(desp));
		$.post("savingDescriptionandRemarks.do",{remarks:remark,tab:3},function(json)
				{
			           //alert(JSON.stringify(remark));
					   //$scope.remark = "";
					   //alert(JSON.stringify($scope.remark)); 
			//alert(tab);
					   $scope.addedRemarksSumitData =json['rerkadata'];
					   $scope.$apply();
				});
		
		         $scope.remarksSumit = "";
				 $scope.$apply();
		
	}
	$scope.addRemarkSpare = function(remark)
	{
		//alert(JSON.stringify(desp));
		$.post("savingDescriptionandRemarks.do",{remarks:remark,tab:4},function(json)
				{
			           //alert(JSON.stringify(remark));
					   //$scope.remark = "";
					   //alert(JSON.stringify($scope.remark)); 
			//alert(tab);
					   $scope.addedRemarksSpareData =json['rerkadata'];
					   $scope.$apply();
				});
		         $scope.remarksSpare = "";
				 $scope.$apply();
		
		
	}
	$scope.addRemarkTech = function(remark)
	{
		//alert(JSON.stringify(desp));
		$.post("savingDescriptionandRemarks.do",{remarks:remark,tab:5},function(json)
				{
			           //alert(JSON.stringify(json['rerkadata']));
					   //$scope.remark = "";
					   //alert(JSON.stringify($scope.remark)); 
			//alert(tab);
					  // $scope.remark = angular.copy($scope.master);
					   //form.$setPristine(true);
					   $scope.addedRemarksTechData =json['rerkadata'];
					   $scope.$apply();
				});
		
		         $scope.remarksTech = "";
				 //$scope.addBlogTech();
				 $scope.$apply();
		
	}
$scope.changeMotorNewStatus = function(status,index)
{
	//alert(status);
	var index = this.$index;
	
	if(status == '2') { /*$scope.requiredStatus = true;*/$scope.dataField[index].requiredStatus = true; $("#GearMotor_"+parseInt(index+1)).css("background-color", "#ffff7f"); } else { $scope.dataField[index].requiredStatus = false; $scope.dataField[index].gearMotor = "";$("#GearMotor_"+parseInt(index+1)).css("background-color", "");}
	//alert($scope.requiredStatus);
}
$scope.changeMotorCompStatus = function(status,index1)
{
	var index1 = this.$index;
	if(status == '2') { $scope.dataCompetitor[index1].requiredStatus = true;$("#compGearMotor_"+parseInt(index1+1)).css("background-color", "#ffff7f"); } else { $scope.dataCompetitor[index1].requiredStatus = false;$scope.dataCompetitor[index1].gearMotor = "";$("#compGearMotor_"+parseInt(index1+1)).css("background-color", "#ffffff"); }
	//alert($scope.requiredStatus);
}
$scope.changeMotorSumitStatus = function(status,index2)
{
	var index2 = this.$index;
	if(status == '2') 
	{
		$scope.dataSumitomo[index2].requiredStatus = true; 
		$("#sumitGearMotor_"+parseInt(index2+1)).css("background-color", "#ffff7f");
	}
	else
	{ 
		$scope.dataSumitomo[index2].requiredStatus = false;
		$scope.dataSumitomo[index2].gearMotor = ""; 
		$("#sumitGearMotor_"+parseInt(index2+1)).css("background-color", "#ffffff");}
	//alert($scope.requiredStatus);
}

$scope.changeSparepartStatus = function(status,mtrtype,motrkw,index3)
{
	var index3 = this.$index;
	
	if(status == '0')
	{
		$scope.dataSparePart[index3].requiredStatus = false;
		$scope.dataSparePart[index3].shiMfgsts = false;
		// $scope.dataSparePart[i].expSts = false;
		// $scope.dataSparePart[i].mtrSprSts = false;
		$scope.dataSparePart[index3].poleSprSts = false;
		$scope.dataSparePart[index3].phSprSts = false;
		$scope.dataSparePart[index3].voltSprSts = false;
		$scope.dataSparePart[index3].hzSprSts = false;
		$scope.dataSparePart[index3].rpmSprSts = false;
		$scope.dataSparePart[index3].gearsts = false;
		$scope.dataSparePart[index3].mtrsnosts = true;
		$("#spareGearMotor_"+parseInt(index3+1)).css("background-color", "#ffffff");
		$("#SHImfg_"+parseInt(index3+1)).css("background-color", "#ffffff");
		//$("#MotorType_"+parseInt(i+1)).css("background-color", "#ffffff");
		//$("#MotorKW_"+parseInt(i+1)).css("background-color", "#ffffff");
		$("#Pole_"+parseInt(index3+1)).css("background-color", "#ffffff");
		$("#Phase_"+parseInt(index3+1)).css("background-color", "#ffffff");
		$("#Voltage_"+parseInt(index3+1)).css("background-color", "#ffffff");
		$("#Hertz_"+parseInt(index3+1)).css("background-color", "#ffffff");
		$("#RPM_"+parseInt(index3+1)).css("background-color", "#ffffff");
		$("#gearHead_"+parseInt(index3+1)).css("background-color", "#ffffff");
		$("#MotorSerial_"+parseInt(index3+1)).css("background-color", "#ffff7f");
		if(motrkw == 'OTHER')
		{
			$scope.dataSparePart[index3].mtrSprSts = true;
			$scope.dataSparePart[index3].reqMotorKW = true;
			$("#MotorKW_"+parseInt(index3+1)).css("background-color", "#ffff7f");
			$("#OtherSpare_"+parseInt(index3+1)).css("background-color", "#ffff7f");
		}
		else
		{
			$scope.dataSparePart[index3].mtrSprSts = false;
			$scope.dataSparePart[index3].reqMotorKW = false;
			$("#MotorKW_"+parseInt(index3+1)).css("background-color", "#ffffff");
			$("#OtherSpare_"+parseInt(index3+1)).css("background-color", "#ffffff");
		}
		if(mtrtype == 'other - pls specify')
		{
												  
			$scope.dataSparePart[index3].expSts = true;
			$scope.dataSparePart[index3].reqOtherSts = true;
			$("#MotorType_"+parseInt(index3+1)).css("background-color", "#ffff7f");
			$("#OthersPlzSpare_"+parseInt(index3+1)).css("background-color", "#ffff7f");
		}
		else
		{
			$scope.dataSparePart[index3].expSts = false;
			$scope.dataSparePart[index3].reqOtherSts = false;
			$("#MotorType_"+parseInt(index3+1)).css("background-color", "#ffffff");
			$("#OthersPlzSpare_"+parseInt(index3+1)).css("background-color", "#ffffff");
		}
	}
	else if(status == '1')
	{
		$scope.dataSparePart[index3].requiredStatus = false;
		$scope.dataSparePart[index3].shiMfgsts = false;
		// $scope.dataSparePart[i].expSts = false;
		//$scope.dataSparePart[i].mtrSprSts = false;
		$scope.dataSparePart[index3].poleSprSts = false;
		$scope.dataSparePart[index3].phSprSts = false;
		$scope.dataSparePart[index3].voltSprSts = false;
		$scope.dataSparePart[index3].hzSprSts = false;
		$scope.dataSparePart[index3].rpmSprSts = false;
		$scope.dataSparePart[index3].gearsts = true;
		$scope.dataSparePart[index3].mtrsnosts = false;
		$("#spareGearMotor_"+parseInt(index3+1)).css("background-color", "#ffffff");
		$("#SHImfg_"+parseInt(index3+1)).css("background-color", "#ffffff");
		// $("#MotorType_"+parseInt(i+1)).css("background-color", "#ffffff");
		//$("#MotorKW_"+parseInt(i+1)).css("background-color", "#ffffff");
		$("#Pole_"+parseInt(index3+1)).css("background-color", "#ffffff");
		$("#Phase_"+parseInt(index3+1)).css("background-color", "#ffffff");
		$("#Voltage_"+parseInt(index3+1)).css("background-color", "#ffffff");
		$("#Hertz_"+parseInt(index3+1)).css("background-color", "#ffffff");
		$("#RPM_"+parseInt(index3+1)).css("background-color", "#ffffff");
		$("#gearHead_"+parseInt(index3+1)).css("background-color", "#ffff7f");
		$("#MotorSerial_"+parseInt(index3+1)).css("background-color", "#ffffff");
											   
		if(motrkw == 'OTHER')
		{
			$scope.dataSparePart[index3].mtrSprSts = true;
			$scope.dataSparePart[index3].reqMotorKW = true;
			$("#MotorKW_"+parseInt(index3+1)).css("background-color", "#ffff7f");
			$("#OtherSpare_"+parseInt(index3+1)).css("background-color", "#ffff7f");
		}
		else
		{
			$scope.dataSparePart[index3].mtrSprSts = false;
			$scope.dataSparePart[index3].reqMotorKW = false;
			$("#MotorKW_"+parseInt(index3+1)).css("background-color", "#ffffff");
			$("#OtherSpare_"+parseInt(index3+1)).css("background-color", "#ffffff");
		}
		if(mtrtype == 'other - pls specify')
		{
												  
			$scope.dataSparePart[index3].expSts = true;
			$scope.dataSparePart[index3].reqOtherSts = true;
			$("#MotorType_"+parseInt(index3+1)).css("background-color", "#ffff7f");
			$("#OthersPlzSpare_"+parseInt(index3+1)).css("background-color", "#ffff7f");
		}
		else
		{
			$scope.dataSparePart[index3].expSts = false;
			$scope.dataSparePart[index3].reqOtherSts = false;
			$("#MotorType_"+parseInt(index3+1)).css("background-color", "#ffffff");
			$("#OthersPlzSpare_"+parseInt(index3+1)).css("background-color", "#ffffff");
		}
	}
	else
	{
		$scope.dataSparePart[index3].requiredStatus = true;
		$scope.dataSparePart[index3].shiMfgsts = true;
		//$scope.dataSparePart[i].expSts = true;
		//$scope.dataSparePart[i].mtrSprSts = true;
		$scope.dataSparePart[index3].poleSprSts = true;
		$scope.dataSparePart[index3].phSprSts = true;
		$scope.dataSparePart[index3].voltSprSts = true;
		$scope.dataSparePart[index3].hzSprSts = true;
		$scope.dataSparePart[index3].rpmSprSts = true;
		$scope.dataSparePart[index3].gearsts = false;
		$scope.dataSparePart[index3].mtrsnosts = false;
		$("#spareGearMotor_"+parseInt(index3+1)).css("background-color", "#ffff7f");
		$("#SHImfg_"+parseInt(index3+1)).css("background-color", "#ffff7f");
		//$("#MotorType_"+parseInt(i+1)).css("background-color", "#ffff7f");
		// $("#MotorKW_"+parseInt(i+1)).css("background-color", "#ffff7f");
		$("#Pole_"+parseInt(index3+1)).css("background-color", "#ffff7f");
		$("#Phase_"+parseInt(index3+1)).css("background-color", "#ffff7f");
		$("#Voltage_"+parseInt(index3+1)).css("background-color", "#ffff7f");
		$("#Hertz_"+parseInt(index3+1)).css("background-color", "#ffff7f");
		$("#RPM_"+parseInt(index3+1)).css("background-color", "#ffff7f");
		$("#gearHead_"+parseInt(index3+1)).css("background-color", "#ffffff");
		$("#MotorSerial_"+parseInt(index3+1)).css("background-color", "#ffffff");
											   
		if(motrkw == 'OTHER')
		{
			$scope.dataSparePart[index3].mtrSprSts = true;
			$scope.dataSparePart[index3].reqMotorKW = true;
			$("#MotorKW_"+parseInt(index3+1)).css("background-color", "#ffff7f");
			$("#OtherSpare_"+parseInt(index3+1)).css("background-color", "#ffff7f");
		}
		else
		{
			$scope.dataSparePart[index3].mtrSprSts = true;
			$scope.dataSparePart[index3].reqMotorKW = false;
			$("#MotorKW_"+parseInt(index3+1)).css("background-color", "#ffff7f");
			$("#OtherSpare_"+parseInt(index3+1)).css("background-color", "#ffffff");
		}
		if(mtrtype == 'other - pls specify')
		{
												  
			$scope.dataSparePart[index3].expSts = true;
			$scope.dataSparePart[index3].reqOtherSts = true;
			$("#MotorType_"+parseInt(index3+1)).css("background-color", "#ffff7f");
			$("#OthersPlzSpare_"+parseInt(index3+1)).css("background-color", "#ffff7f");
		}
		else
		{
			$scope.dataSparePart[index3].expSts = true;
			$scope.dataSparePart[index3].reqOtherSts = false;
			$("#MotorType_"+parseInt(index3+1)).css("background-color", "#ffff7f");
			$("#OthersPlzSpare_"+parseInt(index3+1)).css("background-color", "#ffffff");
		}
		
	}
	
};


//$scope.changeMotorSparepartStatus = function(status,motrkw,index3)
//{
//	//alert(motrkw);
//	var index3 = this.$index;
//	if(status == '0')
//	{
//		$scope.dataSparePart[index3].mtrsnosts = true;
//		$scope.dataSparePart[index3].gearsts = false;
//		$scope.dataSparePart[index3].shiMfgsts = false;
//		$scope.dataSparePart[index3].requiredStatus = false;
//		
//		$scope.dataSparePart[index3].expSts = false;
//		$scope.dataSparePart[index3].mtrSprSts = false;
//		$scope.dataSparePart[index3].poleSprSts = false;
//		$scope.dataSparePart[index3].phSprSts = false;
//		$scope.dataSparePart[index3].voltSprSts = false;
//		$scope.dataSparePart[index3].hzSprSts = false;
//		$scope.dataSparePart[index3].rpmSprSts = false;
//		//$scope.dataSparePart[index3].motorSerial = "";
//		$("#MotorSerial_"+parseInt(index3+1)).css("background-color", "#ffff7f");
//		$("#gearHead_"+parseInt(index3+1)).css("background-color", "#ffffff");
//		$("#SHImfg_"+parseInt(index3+1)).css("background-color", "#ffffff");
//		$("#spareGearMotor_"+parseInt(index3+1)).css("background-color", "#ffffff");
//		if(motrkw == 'OTHER')
//		{
//			
//			$("#MotorKW_"+parseInt(index3+1)).css("background-color", "#ffff7f");
//			$("#OtherSpare_"+parseInt(index3+1)).css("background-color", "#ffff7f");
//			$scope.dataSparePart[index].mtrSprSts = true;
//			$scope.dataSparePart[index].reqMotorKW = true;
//		}
//		else
//		{
//			$("#MotorKW_"+parseInt(index3+1)).css("background-color", "#ffffff");
//			$("#OtherSpare_"+parseInt(index3+1)).css("background-color", "#ffffff");
//			$scope.dataSparePart[index3].mtrSprSts = false;
//			$scope.dataSparePart[index3].reqMotorKW = false;
//			$scope.dataSparePart[index3].other = "";
//			$("#InvalidRangeSpare_"+parseInt(index3+1)).hide();
//		}
//	}
//	/*else
//	{
//		$scope.dataSparePart[index3].mtrsnosts = false;
//		//$scope.dataSparePart[index3].motorSerial = "";
//		//$scope.dataSparePart[index3].gearhead = "";
//		//$scope.dataSparePart[index3].shiMfg = "";
//		$("#MotorSerial_"+parseInt(index3+1)).css("background-color", "#ffffff");
//		
//	}*/
//	/*
//	if(status == 'OTHER'){$scope.dataSparePart[index].reqMotorKW = true;$scope.dataSparePart[index].mtrSprSts = true; $("#OtherSpare_"+parseInt(index+1)).css("background-color", "#ffff7f");$("#MotorKW_"+parseInt(index+1)).css("background-color", "#ffff7f");}else{ $scope.dataSparePart[index].reqMotorKW = false;$scope.dataSparePart[index].mtrSprSts = false; $scope.dataSparePart[index].other = "";$(".InvalidRangeSpare").hide();$("#OtherSpare_"+parseInt(index+1)).css("background-color", "#ffffff");$("#MotorKW_"+parseInt(index+1)).css("background-color", "#ffffff");}*/
//	
//};
//$scope.changeGearSpareStatus = function(status,motrkw,index3)
//{
//	var index3 = this.$index;
//	if(status == '1')
//	{
//		$scope.dataSparePart[index3].gearsts = true;
//		$scope.dataSparePart[index3].mtrsnosts = false;
//		$scope.dataSparePart[index3].shiMfgsts = false;
//		$scope.dataSparePart[index3].requiredStatus = false;
//		
//		$scope.dataSparePart[index3].expSts = false;
//		$scope.dataSparePart[index3].mtrSprSts = false;
//		$scope.dataSparePart[index3].poleSprSts = false;
//		$scope.dataSparePart[index3].phSprSts = false;
//		$scope.dataSparePart[index3].voltSprSts = false;
//		$scope.dataSparePart[index3].hzSprSts = false;
//		$scope.dataSparePart[index3].rpmSprSts = false;
//		//$scope.dataSparePart[index3].motorSerial = "";
//		$("#gearHead_"+parseInt(index3+1)).css("background-color", "#ffff7f");
//		$("#MotorSerial_"+parseInt(index3+1)).css("background-color", "#ffffff");
//		$("#SHImfg_"+parseInt(index3+1)).css("background-color", "#ffffff");
//		$("#spareGearMotor_"+parseInt(index3+1)).css("background-color", "#ffffff");
//		//$("#MotorKW_"+parseInt(index3+1)).css("background-color", "#ffffff");
//		if(motrkw == 'OTHER')
//		{
//			
//			$("#MotorKW_"+parseInt(index3+1)).css("background-color", "#ffffff");
//			$("#OtherSpare_"+parseInt(index3+1)).css("background-color", "#ffffff");
//			$scope.dataSparePart[index].mtrSprSts = false;
//			$scope.dataSparePart[index].reqMotorKW = false;
//		}
//		else
//		{
//			$("#MotorKW_"+parseInt(index3+1)).css("background-color", "#ffffff");
//			$("#OtherSpare_"+parseInt(index3+1)).css("background-color", "#ffffff");
//			$scope.dataSparePart[index3].mtrSprSts = false;
//			$scope.dataSparePart[index3].reqMotorKW = false;
//			$scope.dataSparePart[index3].other = "";
//			$("#InvalidRangeSpare_"+parseInt(index3+1)).hide();
//		}
//	}
//	/*else
//	{
//		$scope.dataSparePart[index3].gearsts = false;
//		//$scope.dataSparePart[index3].motorSerial = "";
//		//$scope.dataSparePart[index3].gearhead = "";
//		//$scope.dataSparePart[index3].shiMfg = "";
//		$("#gearHead_"+parseInt(index3+1)).css("background-color", "#ffffff");
//		
//	}*/
//};
//$scope.changeOthersSpareStatus = function(status,motrkw,index3)
//{
//	var index3 = this.$index;
//	if(status == '2') 
//	{ 
//	
//	
//		$scope.dataSparePart[index3].requiredStatus = true; 
//		$scope.dataSparePart[index3].expSts = true;
//		//$scope.expOthSts = true;
//		$scope.dataSparePart[index3].mtrSprSts = true;
//		$scope.dataSparePart[index3].poleSprSts = true;
//		$scope.dataSparePart[index3].phSprSts = true;
//		$scope.dataSparePart[index3].voltSprSts = true;
//		$scope.dataSparePart[index3].hzSprSts = true;
//		$scope.dataSparePart[index3].rpmSprSts = true;
//		//$scope.dataSparePart[index3].gearhead = "";
//		//$scope.dataSparePart[index3].shiMfg = "";
//		$scope.dataSparePart[index3].shiMfgsts = true;
//		$scope.dataSparePart[index3].gearsts = false;
//		$scope.dataSparePart[index3].mtrsnosts = false;
//		
//		$("#spareGearMotor_"+parseInt(index3+1)).css("background-color", "#ffff7f");
//		$("#SHImfg_"+parseInt(index3+1)).css("background-color", "#ffff7f");
//		$("#MotorKW_"+parseInt(index3+1)).css("background-color", "#ffff7f");
//		$("#gearHead_"+parseInt(index3+1)).css("background-color", "#ffffff");
//		//$("#MotorSerial_"+parseInt(index3+1)).css("background-color", "#ffffff");
//		if(motrkw == 'OTHER')
//		{
//			
//			$("#MotorKW_"+parseInt(index3+1)).css("background-color", "#ffff7f");
//			$("#OtherSpare_"+parseInt(index3+1)).css("background-color", "#ffff7f");
//			$scope.dataSparePart[index].mtrSprSts = true;
//			$scope.dataSparePart[index].reqMotorKW = true;
//		}
//		else
//		{
//			$("#MotorKW_"+parseInt(index3+1)).css("background-color", "#ffff7f");
//			$("#OtherSpare_"+parseInt(index3+1)).css("background-color", "#ffffff");
//			$scope.dataSparePart[index3].mtrSprSts = true;
//			$scope.dataSparePart[index3].reqMotorKW = false;
//			$scope.dataSparePart[index3].other = "";
//			$("#InvalidRangeSpare_"+parseInt(index3+1)).hide();
//		}
//	}
//	/*else 
//	{ 
//		$scope.dataSparePart[index3].requiredStatus = false; 
//		$scope.dataSparePart[index3].expSts = false;
//		$scope.dataSparePart[index3].mtrSprSts = false;
//		$scope.dataSparePart[index3].poleSprSts = false;
//		$scope.dataSparePart[index3].phSprSts = false;
//		$scope.dataSparePart[index3].voltSprSts = false;
//		$scope.dataSparePart[index3].hzSprSts = false;
//		$scope.dataSparePart[index3].rpmSprSts = false;
//		//$scope.dataSparePart[index3].gearMotor = "";
//		//$scope.dataSparePart[index3].gearhead = "";
//		//$scope.dataSparePart[index3].shiMfg = "";
//		$scope.dataSparePart[index3].shiMfgsts = false;
//		$("#spareGearMotor_"+parseInt(index3+1)).css("background-color", "#ffffff");
//		$("#SHImfg_"+parseInt(index3+1)).css("background-color", "#ffffff");
//	}*/
//};



$scope.changeMotorTechStatus = function(status,index4)
{
	var index4 = this.$index;
	if(status == '2') { $scope.dataQuery[index4].requiredStatus = true; $("#techGearMotor_"+parseInt(index4+1)).css("background-color", "#ffff7f");} else { $scope.dataQuery[index4].requiredStatus = false;$scope.dataQuery[index4].gearMotor = ""; $("#techGearMotor_"+parseInt(index4+1)).css("background-color", "#ffffff");}
	//alert($scope.requiredStatus);
}

$scope.prestNeoStatus = function(status,index)
{
	
	var index = this.$index;
	//alert(index);
	if(status == 'CYCLO WITH TORQUE LIMITER') { $scope.dataField[index].reqStatus = true;$("#PresetTorque_"+parseInt(index+1)).css("background-color", "#ffff7f"); } else { $scope.dataField[index].reqStatus = false;$scope.dataField[index].presetTorque = ""; $("#PresetTorque_"+parseInt(index+1)).css("background-color", "#ffffff");}
	//alert($scope.reqStatus);
}
$scope.prestNeoCompStatus = function(status,index)
{
	var index = this.$index;
	if(status == 'CYCLO WITH TORQUE LIMITER') { $scope.dataCompetitor[index].reqStatus = true;$("#PresetTorqueComp_"+parseInt(index+1)).css("background-color", "#ffff7f"); } else { $scope.dataCompetitor[index].reqStatus = false;$scope.dataCompetitor[index].presetTorque = "";$("#PresetTorqueComp_"+parseInt(index+1)).css("background-color", "#ffffff"); }
	//alert($scope.reqStatus);
}
$scope.prestNeoSumitStatus = function(status,index)
{
	var index = this.$index;
	if(status == 'CYCLO WITH TORQUE LIMITER') { $scope.dataSumitomo[index].reqStatus = true;$("#PresetTorqueSumit_"+parseInt(index+1)).css("background-color", "#ffff7f"); } else { $scope.dataSumitomo[index].reqStatus = false;$scope.dataSumitomo[index].presetTorque = "";$("#PresetTorqueSumit_"+parseInt(index+1)).css("background-color", "#ffffff"); }
	//alert($scope.reqStatus);
}

$scope.prestNeoTechStatus = function(status,index)
{
	var index = this.$index;
	if(status == 'CYCLO WITH TORQUE LIMITER') { $scope.dataQuery[index].reqStatus = true;$("#PresetTorqueTech_"+parseInt(index+1)).css("background-color", "#ffff7f"); } else { $scope.dataQuery[index].reqStatus = false;$scope.dataQuery[index].presetTorque = "";$("#PresetTorqueTech_"+parseInt(index+1)).css("background-color", "#ffffff"); }
	//alert($scope.reqStatus);
}
$scope.chngOtherSts = function(status,index)
{
	var index = this.$index;
	//alert("#OthersPlz_"+parseInt(index+1));
	if(status == 'other - pls specify'){$scope.dataField[index].reqOtherSts = true;$("#OthersPlz_"+parseInt(index+1)).css("background-color", "#ffff7f"); }else{$scope.dataField[index].reqOtherSts = false;$scope.dataField[index].othersPlz = "";$("#OthersPlz_"+parseInt(index+1)).css("background-color", "#ffffff"); }
}
$scope.chngOtherStsComp = function(status,index)
{
	var index = this.$index;
	if(status == 'other - pls specify'){$scope.dataCompetitor[index].reqOtherSts = true;$("#OthersPlzComp_"+parseInt(index+1)).css("background-color", "#ffff7f");}else{$scope.dataCompetitor[index].reqOtherSts = false;$scope.dataCompetitor[index].othersPlz = "";$("#OthersPlzComp_"+parseInt(index+1)).css("background-color", "#ffffff");}
}
$scope.chngOtherStsSumit = function(status,index)
{
	var index = this.$index;
	if(status == 'other - pls specify'){$scope.dataSumitomo[index].reqOtherSts = true;$("#OthersPlzSumit_"+parseInt(index+1)).css("background-color", "#ffff7f");}else{$scope.dataSumitomo[index].reqOtherSts = false;$scope.dataSumitomo[index].othersPlz = "";$("#OthersPlzSumit_"+parseInt(index+1)).css("background-color", "#ffffff");}
}
$scope.chngOtherStsSpare = function(status,index)
{
	var index = this.$index;
	if(status == 'other - pls specify'){$scope.dataSparePart[index].reqOtherSts = true;$("#OthersPlzSpare_"+parseInt(index+1)).css("background-color", "#ffff7f");}else{$scope.dataSparePart[index].reqOtherSts = false;$scope.dataSparePart[index].othersPlz = "";$("#OthersPlzSpare_"+parseInt(index+1)).css("background-color", "#ffffff");}
}
$scope.chngOtherStsTech = function(status,index)
{
	var index = this.$index;
	if(status == 'other - pls specify'){$scope.dataQuery[index].reqOtherSts = true;$("#OthersPlzTech_"+parseInt(index+1)).css("background-color", "#ffff7f");}else{$scope.dataQuery[index].reqOtherSts = false;$scope.dataQuery[index].othersPlz = "";$("#OthersPlzTech_"+parseInt(index+1)).css("background-color", "#ffffff");}
}
$scope.chngMotorKWSts = function(status,index)
{
	 var index = this.$index;
	 
	if(status == 'OTHER'){$scope.dataField[index].reqMotorKW = true;$("#Other_"+parseInt(index+1)).css("background-color", "#ffff7f");}else{ $scope.dataField[index].reqMotorKW = false; $scope.dataField[index].other = "";$("#InvalidRange_"+parseInt(index+1)).hide();$("#Other_"+parseInt(index+1)).css("background-color", "#ffffff");}
}
$scope.chngMotorKWStsComp = function(status,index)
{
	 var index = this.$index;
	 
	if(status == 'OTHER'){$scope.dataCompetitor[index].reqMotorKW = true;$("#OtherComp_"+parseInt(index+1)).css("background-color", "#ffff7f"); }else{$scope.dataCompetitor[index].reqMotorKW = false; $scope.dataCompetitor[index].other = "";$("#InvalidRangeComp_"+parseInt(index+1)).hide();$("#OtherComp_"+parseInt(index+1)).css("background-color", "#ffffff");}
}
$scope.chngMotorKWStsSumit = function(status,index)
{
	 var index = this.$index;
	 
	if(status == 'OTHER'){$scope.dataSumitomo[index].reqMotorKW = true; $("#OtherSumit_"+parseInt(index+1)).css("background-color", "#ffff7f");}else{ $scope.dataSumitomo[index].reqMotorKW = false; $scope.dataSumitomo[index].other = "";$("#InvalidRangeSumit_"+parseInt(index+1)).hide();$("#OtherSumit_"+parseInt(index+1)).css("background-color", "#ffffff");}
}
$scope.chngMotorKWStsSpare = function(gearmtr,status,index)
{
	 var index = this.$index;
	 if(gearmtr == "0")
	 {
		
		 if(status == 'OTHER'){$scope.dataSparePart[index].reqMotorKW = true;$scope.dataSparePart[index].mtrSprSts = true; $("#OtherSpare_"+parseInt(index+1)).css("background-color", "#ffff7f");$("#MotorKW_"+parseInt(index+1)).css("background-color", "#ffff7f");}else{ $scope.dataSparePart[index].reqMotorKW = false;$scope.dataSparePart[index].mtrSprSts = false; $scope.dataSparePart[index].other = "";$("#InvalidRangeSpare_"+parseInt(index+1)).hide();$("#OtherSpare_"+parseInt(index+1)).css("background-color", "#ffffff");$("#MotorKW_"+parseInt(index+1)).css("background-color", "#ffffff");}
	 }
	 else if(gearmtr == "1")
	 {
		 if(status == 'OTHER'){$scope.dataSparePart[index].reqMotorKW = true;$scope.dataSparePart[index].mtrSprSts = true; $("#OtherSpare_"+parseInt(index+1)).css("background-color", "#ffff7f");$("#MotorKW_"+parseInt(index+1)).css("background-color", "#ffff7f");}else{ $scope.dataSparePart[index].reqMotorKW = false;$scope.dataSparePart[index].mtrSprSts = false; $scope.dataSparePart[index].other = "";$("#InvalidRangeSpare_"+parseInt(index+1)).hide();$("#OtherSpare_"+parseInt(index+1)).css("background-color", "#ffffff");$("#MotorKW_"+parseInt(index+1)).css("background-color", "#ffffff");}
	 }
	 else
	 {
		if(status == 'OTHER'){$scope.dataSparePart[index].reqMotorKW = true;$scope.dataSparePart[index].mtrSprSts = true; $("#OtherSpare_"+parseInt(index+1)).css("background-color", "#ffff7f");$("#MotorKW_"+parseInt(index+1)).css("background-color", "#ffff7f");}else{ $scope.dataSparePart[index].reqMotorKW = false;$scope.dataSparePart[index].mtrSprSts = true; $scope.dataSparePart[index].other = "";$("#InvalidRangeSpare_"+parseInt(index+1)).hide();$("#OtherSpare_"+parseInt(index+1)).css("background-color", "#ffffff");$("#MotorKW_"+parseInt(index+1)).css("background-color", "#ffff7f");} 
	 }
	 
	
}
$scope.chngMotorKWStsTech = function(status,index)
{
	 var index = this.$index;
	 
	if(status == 'OTHER'){$scope.dataQuery[index].reqMotorKW = true;$("#OtherTech_"+parseInt(index+1)).css("background-color", "#ffff7f"); }else{ $scope.dataQuery[index].reqMotorKW = false; $scope.dataQuery[index].other = "";$("#InvalidRangeTech_"+parseInt(index+1)).hide();$("#OtherTech_"+parseInt(index+1)).css("background-color", "#ffffff");}
}

$scope.rangeValid = function(range,index)
{
	var index = this.$index;
	//alert(parseFloat(range));
	if(parseFloat(range) <= 2000 && parseFloat(range) >= 55){$("#InvalidRange_"+parseInt(index+1)).hide();}else{$("#InvalidRange_"+parseInt(index+1)).show();}
	//if(parseFloat(range) >= 55){alert("if");}else{alert("else"); }
}
$scope.rangeValidComp = function(range,index)
{
	//alert(range);
	var index = this.$index;
	if(parseFloat(range) <= 2000 && parseFloat(range) >= 55){$("#InvalidRangeComp_"+parseInt(index+1)).hide(); }else{$("#InvalidRangeComp_"+parseInt(index+1)).show(); }
}
$scope.rangeValidSumit = function(range,index)
{
	//alert(range);
	var index = this.$index;
	if(parseFloat(range) <= 2000 && parseFloat(range) >= 55){$("#InvalidRangeSumit_"+parseInt(index+1)).hide();}else{$("#InvalidRangeSumit_"+parseInt(index+1)).show();}
}
$scope.rangeValidSpare = function(range,index)
{
	//alert(range);
	var index = this.$index;
	if(parseFloat(range) <= 2000 && parseFloat(range) >= 55){$("#InvalidRangeSpare_"+parseInt(index+1)).hide();}else{$("#InvalidRangeSpare_"+parseInt(index+1)).show();}
}
$scope.rangeValidTech = function(range,index)
{
	//alert(range);
	var index = this.$index;
	if(parseFloat(range) <= 2000 && parseFloat(range) >= 55){$("#InvalidRangeTech_"+parseInt(index+1)).hide();}else{$("#InvalidRangeTech_"+parseInt(index+1)).show();}
}

$scope.newInclinedFields = function(sts,indexNew)
{
	
   var indexNew = this.$index; 
  if(sts ==false)
      {
         sts =true; 
            $('#degree').attr('disabled',true);
            $('#toward').attr('disabled',true);
            $scope.dataField[indexNew].deg = "";
            $scope.dataField[indexNew].towards = "";
 
      }
    else
        {
             sts =false; 
             $('#degree').attr('disabled',false);
             $('#toward').attr('disabled',false);
        }
}

$scope.compInclinedFields = function(inclinSatus,indexComp)
{
     var indexComp = this.$index; 
    if(inclinSatus ==false)
      {
         inclinSatus =true; 
            $('#degreeComp').attr('disabled',true);
            $('#towardsComp').attr('disabled',true);
            $scope.dataCompetitor[indexComp].deg = "";
            $scope.dataCompetitor[indexComp].towards = "";
 
      }
    else
        {
             inclinSatus =false; 
             $('#degreeComp').attr('disabled',false);
            $('#towardsComp').attr('disabled',false);
        }
    /*if(!inclinSatus)
        {
            //alert(inclinSatus + " false ");
            $scope.dataCompetitor[indexComp].deg = "";
            $scope.dataCompetitor[indexComp].towards = "";
        }
    else
        {
            //alert(inclinSatus + " true ");
        }*/
}
$scope.sumitInclinedFields = function(inclinSatus,indexSumit)
{
     var indexSumit = this.$index; 
    if(inclinSatus ==false)
      {
         inclinSatus =true; 
            $('#degreeSumit').attr('disabled',true);
            $('#towardsSumit').attr('disabled',true);
            $scope.dataSumitomo[indexSumit].deg = "";
            $scope.dataSumitomo[indexSumit].towards = "";
 
      }
    else
        {
             inclinSatus =false; 
             $('#degreeSumit').attr('disabled',false);
            $('#towardsSumit').attr('disabled',false);
        }
    /*if(!inclinSatus)
        {
            //alert(inclinSatus + " false ");
            $scope.dataSumitomo[indexSumit].deg = "";
            $scope.dataSumitomo[indexSumit].towards = "";
        }
    else
        {
            //alert(inclinSatus + " true ");
        }*/
}
$scope.techInclinedFields = function(inclinSatus,indexTech)
{
     var indexTech = this.$index;   
    if(inclinSatus ==false)
      {
         inclinSatus =true; 
            $('#degreeTech').attr('disabled',true);
            $('#towardsTech').attr('disabled',true);
            $scope.dataQuery[indexTech].deg = "";
            $scope.dataQuery[indexTech].towards = "";
 
      }
    else
        {
             inclinSatus =false; 
             $('#degreeTech').attr('disabled',false);
            $('#towardsTech').attr('disabled',false);
        }
    /*if(!inclinSatus)
        {
            //alert(inclinSatus + " false ");
            $scope.dataQuery[indexTech].deg = "";
            $scope.dataQuery[indexTech].towards = "";
        }
    else
        {
            //alert(inclinSatus + " true ");
        }*/
}

$scope.techInclinedFields = function(inclinSatus,indexTech)
{
     var indexTech = this.$index;   
    if(!inclinSatus)
        {
            //alert(inclinSatus + " false ");
            $scope.dataQuery[indexTech].deg = "";
            $scope.dataQuery[indexTech].towards = "";
        }
    else
        {
            //alert(inclinSatus + " true ");
        }
};

$scope.validDegree = function(inclinDeg,degId)
{
	//alert(inclinDeg);
	var degId = this.$index; 
	if(parseFloat(inclinDeg) <= 360 && parseFloat(inclinDeg) >= -360){$(".InvalidDegree").hide();}else{$(".InvalidDegree").show();}
	
};
$scope.validDegreeComp = function(inclinDeg,degId)
{
	//alert(inclinDeg);
	var degId = this.$index; 
	if(parseFloat(inclinDeg) <= 360 && parseFloat(inclinDeg) >= -360){$(".InvalidDegreeComp").hide();}else{$(".InvalidDegreeComp").show();}
	
};
$scope.validDegreeSumit = function(inclinDeg,degId)
{
	//alert(inclinDeg);
	var degId = this.$index; 
	if(parseFloat(inclinDeg) <= 360 && parseFloat(inclinDeg) >= -360){$(".InvalidDegreeSumit").hide();}else{$(".InvalidDegreeSumit").show();}
	
};
$scope.validDegreeTech = function(inclinDeg,degId)
{
	//alert(inclinDeg);
	var degId = this.$index; 
	if(parseFloat(inclinDeg) <= 360 && parseFloat(inclinDeg) >= -360){$(".InvalidDegreeTech").hide();}else{$(".InvalidDegreeTech").show();}
	
};
$scope.imageReq = function(sts)
{
	//alert(sts);
	if(sts == "1")
	{ 
	  $scope.imgSts = true;
	  //swal("", 'A Reminder To Attach The Dimension Drawing Of The Existing GearBox!', "error"); 
	  swal({
		  title: "",
		  text: "A Reminder To Attach The Dimension Drawing Of The Existing GearBox!",
		  imageUrl: 'image/remindericon.png'
		  //imageUrl: 'thumbs-up.jpg'
		});
	}
	else
	{
	  $scope.imgSts = false;
	}
};


	$scope.changMtrvolt = function(mtrvolt,index)
	{
		var index = this.$index; 
			//alert(index);
			//alert(invertid);
			if(mtrvolt == "0")
			{
				$scope.dataField[index].voltage = "400";
				$scope.dataField[index].motorBrakeVolt = "1";
			}
			else
			{
				$scope.dataField[index].voltage = "200";
				$scope.dataField[index].motorBrakeVolt = "0";
			}
			$scope.$apply();
	};
	
	$scope.changBrakevolt = function(brkvolt,index)
	{
		var index = this.$index; 
			//alert(index);
			//alert(invertid);
			if(brkvolt == "0")
			{
				$scope.dataField[index].voltage = "200";
				//$scope.dataField[index].basefreq = "1";
			}
			else
			{
				$scope.dataField[index].voltage = "400";
				//$scope.dataField[index].basefreq = "0";
			}
			$scope.$apply();
	};
	$scope.changeinvertfreq = function(inverterdty,index)
	{
		var index = this.$index; 
			//alert(index);
			//alert(invertid);
			if(inverterdty == "0")
			{
				$scope.dataField[index].hertz = "60";
				$scope.dataField[index].basefreq = "1";
			}
			else
			{
				$scope.dataField[index].hertz = "50";
				$scope.dataField[index].basefreq = "0";
			}
			$scope.$apply();
	};
	
	$scope.changeBasefreq = function(basefreq,index)
	{
		var index = this.$index; 
			//alert(index);
			//alert(invertid);
			if(basefreq == "0")
			{
				$scope.dataField[index].hertz = "50";
				//$scope.dataField[index].basefreq = "1";
			}
			else
			{
				$scope.dataField[index].hertz = "60";
				//$scope.dataField[index].basefreq = "0";
			}
			$scope.$apply();
	};
	$scope.changMtrvoltComp = function(mtrvolt,index)
	{
		var index = this.$index; 
			//alert(index);
			//alert(invertid);
			if(mtrvolt == "0")
			{
				$scope.dataCompetitor[index].voltage = "400";
				$scope.dataCompetitor[index].motorBrakeVolt = "1";
			}
			else
			{
				$scope.dataCompetitor[index].voltage = "200";
				$scope.dataCompetitor[index].motorBrakeVolt = "0";
			}
			$scope.$apply();
	};
	
	$scope.changBrakevoltComp = function(brkvolt,index)
	{
		var index = this.$index; 
			//alert(index);
			//alert(invertid);
			if(brkvolt == "0")
			{
				$scope.dataCompetitor[index].voltage = "200";
				//$scope.dataField[index].basefreq = "1";
			}
			else
			{
				$scope.dataCompetitor[index].voltage = "400";
				//$scope.dataField[index].basefreq = "0";
			}
			$scope.$apply();
	};
	$scope.changeinvertfreqComp = function(inverterdty,index)
	{
		var index = this.$index; 
			//alert(index);
			//alert(invertid);
			if(inverterdty == "0")
			{
				$scope.dataCompetitor[index].hertz = "60";
				$scope.dataCompetitor[index].basefreq = "1";
			}
			else
			{
				$scope.dataCompetitor[index].hertz = "50";
				$scope.dataCompetitor[index].basefreq = "0";
			}
			$scope.$apply();
	};
	
	$scope.changeBasefreqComp = function(basefreq,index)
	{
		var index = this.$index; 
			//alert(index);
			//alert(invertid);
			if(basefreq == "0")
			{
				$scope.dataCompetitor[index].hertz = "50";
				//$scope.dataField[index].basefreq = "1";
			}
			else
			{
				$scope.dataCompetitor[index].hertz = "60";
				//$scope.dataField[index].basefreq = "0";
			}
			$scope.$apply();
	};
	$scope.changMtrvoltSumit = function(mtrvolt,index)
	{
		var index = this.$index; 
			//alert(index);
			//alert(invertid);
			if(mtrvolt == "0")
			{
				$scope.dataSumitomo[index].voltage = "400";
				$scope.dataSumitomo[index].motorBrakeVolt = "1";
			}
			else
			{
				$scope.dataSumitomo[index].voltage = "200";
				$scope.dataSumitomo[index].motorBrakeVolt = "0";
			}
			$scope.$apply();
	};
	
	$scope.changBrakevoltSumit = function(brkvolt,index)
	{
		var index = this.$index; 
			//alert(index);
			//alert(invertid);
			if(brkvolt == "0")
			{
				$scope.dataSumitomo[index].voltage = "200";
				//$scope.dataField[index].basefreq = "1";
			}
			else
			{
				$scope.dataSumitomo[index].voltage = "400";
				//$scope.dataField[index].basefreq = "0";
			}
			$scope.$apply();
	};
	$scope.changeinvertfreqSumit = function(inverterdty,index)
	{
		var index = this.$index; 
			//alert(index);
			//alert(invertid);
			if(inverterdty == "0")
			{
				$scope.dataSumitomo[index].hertz = "60";
				$scope.dataSumitomo[index].basefreq = "1";
			}
			else
			{
				$scope.dataSumitomo[index].hertz = "50";
				$scope.dataSumitomo[index].basefreq = "0";
			}
			$scope.$apply();
	};
	
	$scope.changeBasefreqSumit = function(basefreq,index)
	{
		var index = this.$index; 
			//alert(index);
			//alert(invertid);
			if(basefreq == "0")
			{
				$scope.dataSumitomo[index].hertz = "50";
				//$scope.dataField[index].basefreq = "1";
			}
			else
			{
				$scope.dataSumitomo[index].hertz = "60";
				//$scope.dataField[index].basefreq = "0";
			}
			$scope.$apply();
	};
	$scope.changMtrvoltSpare = function(mtrvolt,index)
	{
		var index = this.$index; 
			//alert(index);
			//alert(invertid);
			if(mtrvolt == "0")
			{
				$scope.dataSparePart[index].voltage = "400";
				$scope.dataSparePart[index].motorBrakeVolt = "1";
			}
			else
			{
				$scope.dataSparePart[index].voltage = "200";
				$scope.dataSparePart[index].motorBrakeVolt = "0";
			}
			$scope.$apply();
	};
	
	$scope.changBrakevoltSpare = function(brkvolt,index)
	{
		var index = this.$index; 
			//alert(index);
			//alert(invertid);
			if(brkvolt == "0")
			{
				$scope.dataSparePart[index].voltage = "200";
				//$scope.dataField[index].basefreq = "1";
			}
			else
			{
				$scope.dataSparePart[index].voltage = "400";
				//$scope.dataField[index].basefreq = "0";
			}
			$scope.$apply();
	};
	$scope.changeinvertfreqSpare = function(inverterdty,index)
	{
		var index = this.$index; 
			//alert(index);
			//alert(invertid);
			if(inverterdty == "0")
			{
				$scope.dataSparePart[index].hertz = "60";
				$scope.dataSparePart[index].basefreq = "1";
			}
			else
			{
				$scope.dataSparePart[index].hertz = "50";
				$scope.dataSparePart[index].basefreq = "0";
			}
			$scope.$apply();
	};
	
	$scope.changeBasefreqSpare = function(basefreq,index)
	{
		var index = this.$index; 
			//alert(index);
			//alert(invertid);
			if(basefreq == "0")
			{
				$scope.dataSparePart[index].hertz = "50";
				//$scope.dataField[index].basefreq = "1";
			}
			else
			{
				$scope.dataSparePart[index].hertz = "60";
				//$scope.dataField[index].basefreq = "0";
			}
			$scope.$apply();
	};
	$scope.changMtrvoltTech = function(mtrvolt,index)
	{
		var index = this.$index; 
			//alert(index);
			//alert(invertid);
			if(mtrvolt == "0")
			{
				$scope.dataQuery[index].voltage = "400";
				$scope.dataQuery[index].motorBrakeVolt = "1";
			}
			else
			{
				$scope.dataQuery[index].voltage = "200";
				$scope.dataQuery[index].motorBrakeVolt = "0";
			}
			$scope.$apply();
	};
	
	$scope.changBrakevoltTech = function(brkvolt,index)
	{
		var index = this.$index; 
			//alert(index);
			//alert(invertid);
			if(brkvolt == "0")
			{
				$scope.dataQuery[index].voltage = "200";
				//$scope.dataField[index].basefreq = "1";
			}
			else
			{
				$scope.dataQuery[index].voltage = "400";
				//$scope.dataField[index].basefreq = "0";
			}
			$scope.$apply();
	};
	
	$scope.changeinvertfreqTech = function(inverterdty,index)
	{
		var index = this.$index; 
			//alert(index);
			//alert(invertid);
			if(inverterdty == "0")
			{
				$scope.dataQuery[index].hertz = "60";
				$scope.dataQuery[index].basefreq = "1";
			}
			else
			{
				$scope.dataQuery[index].hertz = "50";
				$scope.dataQuery[index].basefreq = "0";
			}
			$scope.$apply();
	};
	
	$scope.changeBasefreqTech = function(basefreq,index)
	{
		var index = this.$index; 
			//alert(index);
			//alert(invertid);
			if(basefreq == "0")
			{
				$scope.dataQuery[index].hertz = "50";
				//$scope.dataField[index].basefreq = "1";
			}
			else
			{
				$scope.dataQuery[index].hertz = "60";
				//$scope.dataField[index].basefreq = "0";
			}
			$scope.$apply();
	};

		$scope.newSelectionTempGrid = function(Qtnmaster,form)
		{
			
			 // $('#menu1').addClass('active');
		     // $('#newSelection').addClass('active');
				form.$setPristine(true);		 					
		        $("#newSelection").show();
				$("#competitorReplace").hide();
				$("#sumitomoReplace").hide();
				$("#sparePart").hide();
				$("#techQuery").hide();
				$("#blogHide").hide();
				$("#remarksHide").hide();
				//$("#codeNotFound").hide();
				//$("#dataNotFound").hide(); 
				$scope.QtnBtnNew = '0';
				//$('#QtnBtnNew-hide').hide();
				$timeout(function(){
						$.post("loadingcasessdatafortabclick.do",{qtnmaster:Qtnmaster,tab:1},function(json)
						{
						
					//alert("newSelectionTempGrid");
						 //alert(JSON.stringify(json));
						 //var dtcase = json['maincaseform'][0].dateCase.split('T');
						 //var dtexp = json['maincaseform'][0].dateExp.split('T');
						  var tab=parseInt(json['tab']);
						  var gridVal = json['value'];
						  var validdata = json['maincaseform'][0];
						  var validgriddata = json['griddata'];
							  if(gridVal==0)
							  {
								  
								
								  $scope.addCase=json['maincaseform'][0];
								  $scope.addDesp=json['description'][0]; 
								  $indexTab1=1;
								  $scope.dataField=[{'id':$indexTab1,'gm':'0','model':'0','ambientTemp':'40','rpm':'1450','pole':'4','phase':'3','motorType':'NO','quantity':'1','gearProduct':'CYCLO 6000','voltage':'200','hertz':'50','basefreq':'1','protectionGrade': 'IP55','internationalStd': 'JIS','mtrEfficncyClass':'0','inverter':'1','motorBrake':'1','motorBrakeVolt':'1','conf':'0','mount':'0','oshaft':'0','mount2':'0',oshaftInc1:false,oshaftInc2:false,'ishaft':'0','jadapt':'0','oshafty':'0','oshafty2':'4','backStop':'0','rot':'0','basePlate':'0','hssRadialLoadKn':'0','hssRadialLoadMm':'0','hssAxialLoadKn':'0','sssRadialLoadKn':'0','sssRadialLoadMm':'0','sssAxialLoadKn':'0','dirHssAxial':'0','dirSssAxial':'0','presetTorqueRot':'0','terminalBox':'N33','cableEntry':'N3A','altitude':'0m'}];
								  $scope.stepsModel = [];
								  cusImage = new FormData();
								   $scope.addCase.currentTab = tab;
								  $scope.$apply();
								  //$(".btn-hideNew").attr("disabled",false);
								  $('.btn-hideNew').removeClass('disabled');
								  //$('.Send-hideNew').removeClass('disabled');
								  $('.btn-discardNew').removeClass('disabled');
								 // $('#QtnBtnNew-hide').hide();
								 // $("#newSelection").show();
								 
								  if(validdata.customerCode == "" || validdata.customerCode == undefined || validdata.customerCode == "NA")
									   {
										   $("#CustomerCode").css("background-color", "#ffff7f"); 
									   }
									   else
									   {
										  
										   $("#CustomerCode").css("background-color", "#99ff99");
									   }
									   if(validdata.contactPerson == "" || validdata.contactPerson == undefined || validdata.contactPerson == "NA")
									   {
										   $("#ContactPerson").css("background-color", "#ffffff"); 
									   }
									   else
									   {
										    
										   $("#ContactPerson").css("background-color", "#99ff99");
									   }
									   if(validdata.phone == "" || validdata.phone == undefined || validdata.phone == "NA")
									   {
										   $("#Telephone").css("background-color", "#ffffff"); 
									   }
									   else
									   {
										  
										   $("#Telephone").css("background-color", "#99ff99");
									   }
									   if(validdata.address == "" || validdata.address == undefined || validdata.address == "NA")
									   {
										   $("#Address").css("background-color", "#ffffff"); 
									   }
									   else
									   {
										    
										   $("#Address").css("background-color", "#99ff99");
									   }
									   /*if(validdata.createdBy == "" || validdata.createdBy == undefined || validdata.createdBy == "NA")
										 {
											$("#CreatedBy").css("background-color", "#ffff7f"); 
											//$scope.addCase.createdBy = "";
										 }
										 else
										 {
											$("#CreatedBy").css("background-color", "#99ff99");
											//$scope.addCase.createdBy = validdata.createdby;
										 }*/
								  
								  var departmentSplit = json['maincaseform'][0].assigned;
										 var departmentSales = [];
										 if(departmentSplit == undefined || departmentSplit == "" || departmentSplit == "NA")
										 {
											 //alert("if");
											 $('#picturegallery').val("['']").trigger('chosen:updated');
											 $("#picturegallery").css("background-color", "#ffff7f");
										 }
										 else
										 {
											//alert(departmentSplit.length + " " + " else ");
											 for (var s = 0; s < departmentSplit.length; s++) {
									
														departmentSales.push(departmentSplit[s]);
														//alert("accessoriesSales"+accessoriesSales);
											}
											 $('#picturegallery').val(departmentSales).trigger('chosen:updated');
															$scope.addCase.assigned = departmentSales;
															$("#picturegallery").css("background-color", "#99ff99");
										 }
								  
								   for(var i = 0; i<$scope.dataField.length; i++)
									   {
										   if($scope.dataField[i].gearMotor == "" || $scope.dataField[i].gearMotor == undefined || $scope.dataField[i].gearMotor == "NA")
										   {
											   $scope.dataField[i].requiredStatus = false; 
										       $("#GearMotor_"+parseInt(i+1)).css("background-color", "#ffffff"); 
										   }
										   else
										   {
											 $scope.dataField[i].requiredStatus = true; 
										     $("#GearMotor_"+parseInt(i+1)).css("background-color", "#ffff7f");   
										   }
										   if($scope.dataField[i].othersPlz == "" || $scope.dataField[i].othersPlz == undefined || $scope.dataField[i].othersPlz == "NA")
										   {
											   $scope.dataField[i].reqOtherSts = false; 
										       $("#OthersPlz_"+parseInt(i+1)).css("background-color", "#ffffff"); 
										   }
										   else
										   {
											 $scope.dataField[i].reqOtherSts = true; 
										     $("#OthersPlz_"+parseInt(i+1)).css("background-color", "#ffff7f");   
										   }
										   if($scope.dataField[i].other == "" || $scope.dataField[i].other == undefined || $scope.dataField[i].other == "NA")
										   {
											   $scope.dataField[i].reqMotorKW = false; 
										       $("#Other_"+parseInt(i+1)).css("background-color", "#ffffff"); 
										   }
										   else
										   {
											 $scope.dataField[i].reqMotorKW = true; 
										     $("#Other_"+parseInt(i+1)).css("background-color", "#ffff7f");   
										   }
										   if($scope.dataField[i].presetTorque == "" || $scope.dataField[i].presetTorque == undefined || $scope.dataField[i].presetTorque == "NA")
										   {
											   $scope.dataField[i].reqStatus = false; 
										       $("#PresetTorque_"+parseInt(i+1)).css("background-color", "#ffffff"); 
										   }
										   else
										   {
											 $scope.dataField[i].reqStatus = true; 
										     $("#PresetTorque_"+parseInt(i+1)).css("background-color", "#ffff7f");   
										   }
										  
									   }
								 
								 $scope.QtnBtnNew = '0';
								  
							  }
							 
							 else
							 {
								 //alert(json['maincaseform'][0].images + " img" + 1);
								   $scope.addCase=json['maincaseform'][0];
								   $scope.addDesp=json['description'][0]; 
								   $scope.dataField=json['griddata'];
								   $scope.QtnBtnNew = '0';
								    $scope.addCase.currentTab = tab;
								   //$scope.addCase.dateCase=dtcase[0];
								  // $scope.addCase.dateExp=dtexp[0];
								   //$scope.stepsModel = json['maincaseform'][0].images.split(',');
									$scope.$apply(); 
									var getImage = json['maincaseform'][0].images;
									  // alert(getImage);
										 if(getImage!=null)
										   {
											   //alert(getImage + " " + 1);
											   var imgPrew = getImage.trim();
											   if(imgPrew==null || imgPrew=="" )
											   {
												   
													$scope.stepsModel = [];
												  $scope.$apply();
												  //$scope.dummyPhoto="";
												  //$('#dummyPhoto').trigger('blur');
											   }
											   else
											   {
												   //alert(getImage + " " + 3);
												   $scope.stepsModel = getImage.split(',');
												   $scope.$apply();
												   
											   }
										   }
										   else
										   {
											   //alert(getImage + " " + 4);
												$scope.stepsModel = [];
												$scope.$apply();
											 
										   }
										 var departmentSplit = json['maincaseform'][0].assigned;
										 var departmentSales = [];
										 if(departmentSplit == undefined || departmentSplit == "" || departmentSplit == "NA")
										 {
											 //alert("if");
											 $('#picturegallery').val("['']").trigger('chosen:updated');
											 $("#picturegallery").css("background-color", "#ffff7f");
										 }
										 else
										 {
											//alert(departmentSplit.length + " " + " else ");
											 for (var s = 0; s < departmentSplit.length; s++) {
									
														departmentSales.push(departmentSplit[s]);
														//alert("accessoriesSales"+accessoriesSales);
											}
											 $('#picturegallery').val(departmentSales).trigger('chosen:updated');
															$scope.addCase.assigned = departmentSales;
															$("#picturegallery").css("background-color", "#99ff99");
										 }
										   
									   if(validdata.customerCode == "" || validdata.customerCode == undefined || validdata.customerCode == "NA")
									   {
										   $("#CustomerCode").css("background-color", "#ffff7f"); 
									   }
									   else
									   {
										   $("#CustomerCode").css("background-color", "#99ff99");
									   }
									   if(validdata.contactPerson == "" || validdata.contactPerson == undefined || validdata.contactPerson == "NA")
									   {
										   $("#ContactPerson").css("background-color", "#ffffff"); 
									   }
									   else
									   {
										   $("#ContactPerson").css("background-color", "#99ff99");
									   }
									   if(validdata.phone == "" || validdata.phone == undefined || validdata.phone == "NA")
									   {
										   $("#Telephone").css("background-color", "#ffffff"); 
									   }
									   else
									   {
										   //alert("else");
										   $("#Telephone").css("background-color", "#99ff99");
									   }
									   if(validdata.address == "" || validdata.address == undefined || validdata.address == "NA")
									   {
										   $("#Address").css("background-color", "#ffffff"); 
									   }
									   else
									   {
										   $("#Address").css("background-color", "#99ff99");
									   }
									   /*if(validdata.createdBy == "" || validdata.createdBy == undefined || validdata.createdBy == "NA")
										 {
											$("#CreatedBy").css("background-color", "#ffff7f"); 
											//$scope.addCase.createdBy = "";
										 }
										 else
										 {
											$("#CreatedBy").css("background-color", "#99ff99");
											//$scope.addCase.createdBy = validdata.createdby;
										 }
									   */
									    for(var i = 0; i<validgriddata.length; i++)
									   {
										   if(validgriddata[i].gearMotor == "" || validgriddata[i].gearMotor == undefined || validgriddata[i].gearMotor == "NA")
										   {
											   $scope.dataField[i].requiredStatus = false; 
										       $("#GearMotor_"+parseInt(i+1)).css("background-color", "#ffffff"); 
										   }
										   else
										   {
											 $scope.dataField[i].requiredStatus = true; 
										     $("#GearMotor_"+parseInt(i+1)).css("background-color", "#ffff7f");   
										   }
										   if(validgriddata[i].othersPlz == "" || validgriddata[i].othersPlz == undefined || validgriddata[i].othersPlz == "NA")
										   {
											   $scope.dataField[i].reqOtherSts = false; 
										       $("#OthersPlz_"+parseInt(i+1)).css("background-color", "#ffffff"); 
										   }
										   else
										   {
											 $scope.dataField[i].reqOtherSts = true; 
										     $("#OthersPlz_"+parseInt(i+1)).css("background-color", "#ffff7f");   
										   }
										   if(validgriddata[i].other == "" || validgriddata[i].other == undefined || validgriddata[i].other == "NA")
										   {
											   $scope.dataField[i].reqMotorKW = false; 
										       $("#Other_"+parseInt(i+1)).css("background-color", "#ffffff"); 
										   }
										   else
										   {
											 $scope.dataField[i].reqMotorKW = true; 
										     $("#Other_"+parseInt(i+1)).css("background-color", "#ffff7f");   
										   }
										   if(validgriddata[i].presetTorque == "" || validgriddata[i].presetTorque == undefined || validgriddata[i].presetTorque == "NA")
										   {
											   $scope.dataField[i].reqStatus = false; 
										       $("#PresetTorque_"+parseInt(i+1)).css("background-color", "#ffffff"); 
										   }
										   else
										   {
											 $scope.dataField[i].reqStatus = true; 
										     $("#PresetTorque_"+parseInt(i+1)).css("background-color", "#ffff7f");   
										   }
										  
									   }
								 
							 }
							   
							  
						});
						});
			
			
		}
		
		$scope.competitorReplaceTempGrid = function(Qtnmaster,form)
		{
			
			form.$setPristine(true);
			 // $('#menu2').addClass('active');
		      //$('#competitorReplace').addClass('active');
			 //$scope.addCase = " ";
			$("#newSelection").hide();
			$("#competitorReplace").show();
			$("#sumitomoReplace").hide();
			$("#sparePart").hide();
			$("#techQuery").hide();  
			$("#blogHideComp").hide();
			$("#remarksHideComp").hide();
			//$("#codeNotFound").hide();
			//$("#dataNotFound").hide(); 
			//$("#qtnBtnComp-hide").hide(); 
			$scope.qtnBtnComp = '0';
			
			$timeout(function(){
					$.post("loadingcasessdatafortabclick.do",{qtnmaster:Qtnmaster,tab:2},function(json)
					{
						//alert(JSON.stringify(json));
				var tab=parseInt(json['tab']);
				var validdata = json['maincaseform'][0];
				var validgriddata = json['griddata'];
				      
				var gridVal = json['value'];
				if(gridVal==0)
				{
					//alert(gridVal);
					//alert(JSON.stringify(json['maincaseform']));
					//alert(JSON.stringify($scope.addCase));
					  $scope.addCase = json['maincaseform'][0];
					  $scope.addDespComp=json['description'][0];
					  $indexTab2=1;
					  $scope.dataCompetitor=[{'id':$indexTab2,'gm':'0','model':'0','ambientTemp':'40','rpm':'1450','motorType':'NO','gearProduct':'CYCLO 6000','quantity':'1','voltage':'200','pole':'4','phase':'3','hertz':'50','basefreq':'1','protectionGrade': 'IP55','internationalStd': 'JIS','mtrEfficncyClass':'0','inverter':'1','motorBrake':'1','motorBrakeVolt':'1','dimension':'0','conf':'0','mount':'0','ishaft':'0','jadapt':'0','oshaft':'0','mount2':'0',oshaftInc1:false,oshaftInc2:false,'oshafty':'0','oshafty2':'4','backStop':'0','rot':'0','hssRadialLoadKn':'0','hssRadialLoadMm':'0','hssAxialLoadKn':'0','sssRadialLoadKn':'0','sssRadialLoadMm':'0','sssAxialLoadKn':'0','dirHssAxial':'0','dirSssAxial':'0','presetTorqueRot':'0','terminalBox':'N33','cableEntry':'N3A','altitude':'0m'}];
                      $scope.stepsModelComp = [];
					  cusImageComp = new FormData();
					  
					  $scope.addCase.currentTab = tab;
					  
					  var departmentSplit = json['maincaseform'][0].assigned;
										 var departmentSales = [];
										 if(departmentSplit == undefined || departmentSplit == "" || departmentSplit == "NA")
										 {
											 //alert("if");
											 $('#picturegallery').val("['']").trigger('chosen:updated');
											 $("#picturegallery").css("background-color", "#ffff7f");
										 }
										 else
										 {
											//alert(departmentSplit.length + " " + " else ");
											 for (var s = 0; s < departmentSplit.length; s++) {
									
														departmentSales.push(departmentSplit[s]);
														//alert("accessoriesSales"+accessoriesSales);
											}
											 $('#picturegallery').val(departmentSales).trigger('chosen:updated');
															$scope.addCase.assigned = departmentSales;
															$("#picturegallery").css("background-color", "#99ff99");
										 }
					  
					  //$('.btn-hideComp').attr('disabled',false);
					  $('.btn-hideComp').removeClass('disabled');
							  //$('.Send-hideComp').removeClass('disabled');
					  $('.btn-discarComp').removeClass('disabled');
					  
					  if(validdata.customerCode == "" || validdata.customerCode == undefined || validdata.customerCode == "NA")
									   {
										   $("#CustomerCode").css("background-color", "#ffff7f"); 
									   }
									   else
									   {
										  
										   $("#CustomerCode").css("background-color", "#99ff99");
									   }
									   if(validdata.contactPerson == "" || validdata.contactPerson == undefined || validdata.contactPerson == "NA")
									   {
										   $("#ContactPerson").css("background-color", "#ffffff"); 
									   }
									   else
									   {
										    
										   $("#ContactPerson").css("background-color", "#99ff99");
									   }
									   if(validdata.phone == "" || validdata.phone == undefined || validdata.phone == "NA")
									   {
										   $("#Telephone").css("background-color", "#ffffff"); 
									   }
									   else
									   {
										  
										   $("#Telephone").css("background-color", "#99ff99");
									   }
									   if(validdata.address == "" || validdata.address == undefined || validdata.address == "NA")
									   {
										   $("#Address").css("background-color", "#ffffff"); 
									   }
									   else
									   {
										    
										   $("#Address").css("background-color", "#99ff99");
									   }
									  /* if(validdata.createdBy == "" || validdata.createdBy == undefined || validdata.createdBy == "NA")
										 {
											$("#CreatedBy").css("background-color", "#ffff7f"); 
											//$scope.addCase.createdBy = "";
										 }
										 else
										 {
											$("#CreatedBy").css("background-color", "#99ff99");
											//$scope.addCase.createdBy = validdata.createdby;
										 }*/
					  
					   for(var i = 0; i<$scope.dataCompetitor.length; i++)
									   {
										   if($scope.dataCompetitor[i].gearMotor == "" || $scope.dataCompetitor[i].gearMotor == undefined || $scope.dataCompetitor[i].gearMotor == "NA")
										   {
											   $scope.dataCompetitor[i].requiredStatus = false; 
										       $("#compGearMotor_"+parseInt(i+1)).css("background-color", "#ffffff"); 
										   }
										   else
										   {
											 $scope.dataCompetitor[i].requiredStatus = true; 
										     $("#compGearMotor_"+parseInt(i+1)).css("background-color", "#ffff7f");   
										   }
										   if($scope.dataCompetitor[i].othersPlz == "" || $scope.dataCompetitor[i].othersPlz == undefined || $scope.dataCompetitor[i].othersPlz == "NA")
										   {
											   $scope.dataCompetitor[i].reqOtherSts = false; 
										       $("#OthersPlzComp_"+parseInt(i+1)).css("background-color", "#ffffff"); 
										   }
										   else
										   {
											 $scope.dataCompetitor[i].reqOtherSts = true; 
										     $("#OthersPlzComp_"+parseInt(i+1)).css("background-color", "#ffff7f");   
										   }
										   if($scope.dataCompetitor[i].other == "" || $scope.dataCompetitor[i].other == undefined || $scope.dataCompetitor[i].other == "NA")
										   {
											   $scope.dataCompetitor[i].reqMotorKW = false; 
										       $("#OtherComp_"+parseInt(i+1)).css("background-color", "#ffffff"); 
										   }
										   else
										   {
											 $scope.dataCompetitor[i].reqMotorKW = true; 
										     $("#OtherComp_"+parseInt(i+1)).css("background-color", "#ffff7f");   
										   }
										   if($scope.dataCompetitor[i].presetTorque == "" || $scope.dataCompetitor[i].presetTorque == undefined || $scope.dataCompetitor[i].presetTorque == "NA")
										   {
											   $scope.dataCompetitor[i].reqStatus = false; 
										       $("#PresetTorqueComp_"+parseInt(i+1)).css("background-color", "#ffffff"); 
										   }
										   else
										   {
											 $scope.dataCompetitor[i].reqStatus = true; 
										     $("#PresetTorqueComp_"+parseInt(i+1)).css("background-color", "#ffff7f");   
										   }
										  
									   }
					  
					  $scope.qtnBtnComp = '0';
					  $scope.$apply();
				}
				else
				{
					   $scope.addCase=json['maincaseform'][0];
					   $scope.addDespComp=json['description'][0]; 
					   $scope.dataCompetitor=json['griddata'];
					   $scope.qtnBtnComp = '0';
					   $scope.addCase.currentTab = tab;
					   //$scope.stepsModelComp = json['maincaseform'][0].images.split(',');
					    $scope.$apply(); 
					   var getImageComp = json['maincaseform'][0].images;
								  // alert(getImage);
									 if(getImageComp!=null)
									   {
										   //alert(getImage + " " + 1);
										   var imgPrew = getImageComp.trim();
										   if(imgPrew==null || imgPrew=="" )
										   {
											  
											  $scope.stepsModelComp = [];
											  $scope.$apply();
											  //$scope.dummyPhoto="";
					                          //$('#dummyPhoto').trigger('blur');
										   }
										   else
										   {
											   //alert(getImage + " " + 3);
											   $scope.stepsModelComp = getImageComp.split(',');
											   $scope.$apply();
											   
										   }
									   }
									   else
									   {
										   //alert(getImage + " " + 4);
										    $scope.stepsModelComp = [];
										    $scope.$apply();
										 
									   }
									   
									   var departmentSplit = json['maincaseform'][0].assigned;
										 var departmentSales = [];
										 if(departmentSplit == undefined || departmentSplit == "" || departmentSplit == "NA")
										 {
											 //alert("if");
											 $('#picturegallery').val("['']").trigger('chosen:updated');
											 $("#picturegallery").css("background-color", "#ffff7f");
										 }
										 else
										 {
											//alert(departmentSplit.length + " " + " else ");
											 for (var s = 0; s < departmentSplit.length; s++) {
									
														departmentSales.push(departmentSplit[s]);
														//alert("accessoriesSales"+accessoriesSales);
											}
											 $('#picturegallery').val(departmentSales).trigger('chosen:updated');
															$scope.addCase.assigned = departmentSales;
															$("#picturegallery").css("background-color", "#99ff99");
										 }
									   
									   if(validdata.customerCode == "" || validdata.customerCode == undefined || validdata.customerCode == "NA")
									   {
										   $("#CustomerCode").css("background-color", "#ffff7f"); 
									   }
									   else
									   {
										   $("#CustomerCode").css("background-color", "#99ff99");
									   }
									   if(validdata.contactPerson == "" || validdata.contactPerson == undefined || validdata.contactPerson == "NA")
									   {
										   $("#ContactPerson").css("background-color", "#ffffff"); 
									   }
									   else
									   {
										   $("#ContactPerson").css("background-color", "#99ff99");
									   }
									   if(validdata.phone == "" || validdata.phone == undefined || validdata.phone == "NA")
									   {
										   $("#Telephone").css("background-color", "#ffffff"); 
									   }
									   else
									   {
										   $("#Telephone").css("background-color", "#99ff99");
									   }
									   if(validdata.address == "" || validdata.address == undefined || validdata.address == "NA")
									   {
										   $("#Address").css("background-color", "#ffffff"); 
									   }
									   else
									   {
										   $("#Address").css("background-color", "#99ff99");
									   }
									   /*if(validdata.createdBy == "" || validdata.createdBy == undefined || validdata.createdBy == "NA")
										 {
											$("#CreatedBy").css("background-color", "#ffff7f"); 
											//$scope.addCase.createdBy = "";
										 }
										 else
										 {
											$("#CreatedBy").css("background-color", "#99ff99");
											//$scope.addCase.createdBy = validdata.createdby;
										 }*/
									   
									    for(var i = 0; i<validgriddata.length; i++)
									   {
										   if(validgriddata[i].gearMotor == "" || validgriddata[i].gearMotor == undefined || validgriddata[i].gearMotor == "NA")
										   {
											   $scope.dataCompetitor[i].requiredStatus = false; 
										       $("#compGearMotor_"+parseInt(i+1)).css("background-color", "#ffffff"); 
										   }
										   else
										   {
											 $scope.dataCompetitor[i].requiredStatus = true; 
										     $("#compGearMotor_"+parseInt(i+1)).css("background-color", "#ffff7f");   
										   }
										   if(validgriddata[i].othersPlz == "" || validgriddata[i].othersPlz == undefined || validgriddata[i].othersPlz == "NA")
										   {
											   $scope.dataCompetitor[i].reqOtherSts = false; 
										       $("#OthersPlzComp_"+parseInt(i+1)).css("background-color", "#ffffff"); 
										   }
										   else
										   {
											 $scope.dataCompetitor[i].reqOtherSts = true; 
										     $("#OthersPlzComp_"+parseInt(i+1)).css("background-color", "#ffff7f");   
										   }
										   if(validgriddata[i].other == "" || validgriddata[i].other == undefined || validgriddata[i].other == "NA")
										   {
											   $scope.dataCompetitor[i].reqMotorKW = false; 
										       $("#OtherComp_"+parseInt(i+1)).css("background-color", "#ffffff"); 
										   }
										   else
										   {
											 $scope.dataCompetitor[i].reqMotorKW = true; 
										     $("#OtherComp_"+parseInt(i+1)).css("background-color", "#ffff7f");   
										   }
										   if(validgriddata[i].presetTorque == "" || validgriddata[i].presetTorque == undefined || validgriddata[i].presetTorque == "NA")
										   {
											   $scope.dataCompetitor[i].reqStatus = false; 
										       $("#PresetTorqueComp_"+parseInt(i+1)).css("background-color", "#ffffff"); 
										   }
										   else
										   {
											 $scope.dataCompetitor[i].reqStatus = true; 
										     $("#PresetTorqueComp_"+parseInt(i+1)).css("background-color", "#ffff7f");   
										   }
										  
									   }
					
				}
						   
						  
					});
				});
			
		}
		$scope.sumitomoReplaceTempGrid = function(Qtnmaster,form)
		{
			form.$setPristine(true);
			  
		      //$('#competitorReplace').addClass('active');
			//$scope.addCase = " ";
			$("#newSelection").hide();
			$("#competitorReplace").hide();
			$("#sumitomoReplace").show();
			$("#sparePart").hide();
			$("#techQuery").hide();  
			$("#blogHideSumit").hide(); 
			$("#remarksHideSumit").hide();
			//$("#codeNotFound").hide();
			//$("#dataNotFound").hide(); 
			//$("#qtnBtnSumit-hide").hide();
			 $scope.qtnBtnSumit = '0';
			 
			 $timeout(function(){
				 	$.post("loadingcasessdatafortabclick.do",{qtnmaster:Qtnmaster,tab:3},function(json)
					{
						//alert(JSON.stringify(json));
				     // alert("sumitomoReplaceTempGrid");
				//alert(JSON.stringify(json['maincaseform']));
				var tab=parseInt(json['tab']);
				var gridVal = json['value'];
				var validdata = json['maincaseform'][0];
				var validgriddata = json['griddata'];
				if(gridVal==0)
				{
					  $scope.addCase=json['maincaseform'][0];
					  $scope.addDespSumit=json['description'][0];
					  $indexTab3=1;
					  $scope.dataSumitomo=[{'id':$indexTab3,'gm':'0','model':'0','ambientTemp':'40','motorType':'NO','rpm':'1450','gearProduct':'CYCLO 6000','quantity':'1','hertz':'50','basefreq':'1','protectionGrade': 'IP55','internationalStd': 'JIS','voltage':'200','pole':'4','phase':'3','mtrEfficncyClass':'0','inverter':'1','motorBrake':'1','motorBrakeVolt':'1','dimension':'1','conf':'0','mount':'0','mount2':'0',oshaftInc1:false,oshaftInc2:false,'ishaft':'0','jadapt':'0','oshaft':'0','oshafty':'0','oshafty2':'4','backStop':'0','rot':'0','hssRadialLoadKn':'0','hssRadialLoadMm':'0','hssAxialLoadKn':'0','sssRadialLoadKn':'0','sssRadialLoadMm':'0','sssAxialLoadKn':'0','dirHssAxial':'0','dirSssAxial':'0','presetTorqueRot':'0','terminalBox':'N33','cableEntry':'N3A','altitude':'0m'}];
                       $scope.stepsModelSumit = [];
					    cusImageSumit = new FormData();
						 $scope.addCase.currentTab = tab;
						 
						 var departmentSplit = json['maincaseform'][0].assigned;
										 var departmentSales = [];
										 if(departmentSplit == undefined || departmentSplit == "" || departmentSplit == "NA")
										 {
											 //alert("if");
											 $('#picturegallery').val("['']").trigger('chosen:updated');
											 $("#picturegallery").css("background-color", "#ffff7f");
										 }
										 else
										 {
											//alert(departmentSplit.length + " " + " else ");
											 for (var s = 0; s < departmentSplit.length; s++) {
									
														departmentSales.push(departmentSplit[s]);
														//alert("accessoriesSales"+accessoriesSales);
											}
											 $('#picturegallery').val(departmentSales).trigger('chosen:updated');
															$scope.addCase.assigned = departmentSales;
															$("#picturegallery").css("background-color", "#99ff99");
										 }
					  //$('.btn-hide').attr('disabled',false);
					  $('.btn-hideSumit').removeClass('disabled');
							  //$('.Send-hideSumit').removeClass('disabled');
					  $('.btn-discarSumit').removeClass('disabled');
					  
					 if(validdata.customerCode == "" || validdata.customerCode == undefined || validdata.customerCode == "NA")
									   {
										   $("#CustomerCode").css("background-color", "#ffff7f"); 
									   }
									   else
									   {
										  
										   $("#CustomerCode").css("background-color", "#99ff99");
									   }
									   if(validdata.contactPerson == "" || validdata.contactPerson == undefined || validdata.contactPerson == "NA")
									   {
										   $("#ContactPerson").css("background-color", "#ffffff"); 
									   }
									   else
									   {
										    
										   $("#ContactPerson").css("background-color", "#99ff99");
									   }
									   if(validdata.phone == "" || validdata.phone == undefined || validdata.phone == "NA")
									   {
										   $("#Telephone").css("background-color", "#ffffff"); 
									   }
									   else
									   {
										  
										   $("#Telephone").css("background-color", "#99ff99");
									   }
									   if(validdata.address == "" || validdata.address == undefined || validdata.address == "NA")
									   {
										   $("#Address").css("background-color", "#ffffff"); 
									   }
									   else
									   {
										    
										   $("#Address").css("background-color", "#99ff99");
									   }
									   /*if(validdata.createdBy == "" || validdata.createdBy == undefined || validdata.createdBy == "NA")
										 {
											$("#CreatedBy").css("background-color", "#ffff7f"); 
											//$scope.addCase.createdBy = "";
										 }
										 else
										 {
											$("#CreatedBy").css("background-color", "#99ff99");
											//$scope.addCase.createdBy = validdata.createdby;
										 }*/
					  
					    for(var i = 0; i<$scope.dataSumitomo.length; i++)
									   {
										   if($scope.dataSumitomo[i].gearMotor == "" || $scope.dataSumitomo[i].gearMotor == undefined || $scope.dataSumitomo[i].gearMotor == "NA")
										   {
											   $scope.dataSumitomo[i].requiredStatus = false; 
										       $("#sumitGearMotor_"+parseInt(i+1)).css("background-color", "#ffffff"); 
										   }
										   else
										   {
											 $scope.dataSumitomo[i].requiredStatus = true; 
										     $("#sumitGearMotor_"+parseInt(i+1)).css("background-color", "#ffff7f");   
										   }
										   if($scope.dataSumitomo[i].othersPlz == "" || $scope.dataSumitomo[i].othersPlz == undefined || $scope.dataSumitomo[i].othersPlz == "NA")
										   {
											   $scope.dataSumitomo[i].reqOtherSts = false; 
										       $("#OthersPlzSumit_"+parseInt(i+1)).css("background-color", "#ffffff"); 
										   }
										   else
										   {
											 $scope.dataSumitomo[i].reqOtherSts = true; 
										     $("#OthersPlzSumit_"+parseInt(i+1)).css("background-color", "#ffff7f");   
										   }
										   if($scope.dataSumitomo[i].other == "" || $scope.dataSumitomo[i].other == undefined || $scope.dataSumitomo[i].other == "NA")
										   {
											   $scope.dataSumitomo[i].reqMotorKW = false; 
										       $("#OtherSumit_"+parseInt(i+1)).css("background-color", "#ffffff"); 
										   }
										   else
										   {
											 $scope.dataSumitomo[i].reqMotorKW = true; 
										     $("#OtherSumit_"+parseInt(i+1)).css("background-color", "#ffff7f");   
										   }
										   if($scope.dataSumitomo[i].presetTorque == "" || $scope.dataSumitomo[i].presetTorque == undefined || $scope.dataSumitomo[i].presetTorque == "NA")
										   {
											   $scope.dataSumitomo[i].reqStatus = false; 
										       $("#PresetTorqueSumit_"+parseInt(i+1)).css("background-color", "#ffffff"); 
										   }
										   else
										   {
											 $scope.dataSumitomo[i].reqStatus = true; 
										     $("#PresetTorqueSumit_"+parseInt(i+1)).css("background-color", "#ffff7f");   
										   }
										  
									   }
					  
					  $scope.qtnBtnSumit = '0';
					  $scope.$apply();
				}
				else
				{
					   $scope.addCase=json['maincaseform'][0];
					   $scope.addDespSumit=json['description'][0]; 
					   $scope.dataSumitomo=json['griddata'];
					   $scope.qtnBtnSumit = '0';
					    $scope.addCase.currentTab = tab;
						
						var departmentSplit = json['maincaseform'][0].assigned;
										 var departmentSales = [];
										 if(departmentSplit == undefined || departmentSplit == "" || departmentSplit == "NA")
										 {
											 //alert("if");
											 $('#picturegallery').val("['']").trigger('chosen:updated');
											 $("#picturegallery").css("background-color", "#ffff7f");
										 }
										 else
										 {
											//alert(departmentSplit.length + " " + " else ");
											 for (var s = 0; s < departmentSplit.length; s++) {
									
														departmentSales.push(departmentSplit[s]);
														//alert("accessoriesSales"+accessoriesSales);
											}
											 $('#picturegallery').val(departmentSales).trigger('chosen:updated');
															$scope.addCase.assigned = departmentSales;
															$("#picturegallery").css("background-color", "#99ff99");
										 }
					   //$scope.stepsModelSumit = json['maincaseform'][0].images.split(',');
					   //$('.sumitQtn').addClass('disabledBtn');
					     $scope.$apply();
					   var getImageSumit = json['maincaseform'][0].images;
								  // alert(getImage);
									 if(getImageSumit!=null)
									   {
										   //alert(getImage + " " + 1);
										   var imgPrew = getImageSumit.trim();
										   if(imgPrew==null || imgPrew=="" )
										   {
											  
											  $scope.stepsModelSumit = [];
											  $scope.$apply();
											  //$scope.dummyPhoto="";
					                          //$('#dummyPhoto').trigger('blur');
										   }
										   else
										   {
											   //alert(getImage + " " + 3);
											   $scope.stepsModelSumit = getImageSumit.split(',');
											   $scope.$apply();
											  
										   }
									   }
									   else
									   {
										   //alert(getImage + " " + 4);
										    $scope.stepsModelSumit = [];
										    $scope.$apply();
										 
									   }
									   
									   if(validdata.customerCode == "" || validdata.customerCode == undefined || validdata.customerCode == "NA")
									   {
										   $("#CustomerCode").css("background-color", "#ffff7f"); 
									   }
									   else
									   {
										   $("#CustomerCode").css("background-color", "#99ff99");
									   }
									   if(validdata.contactPerson == "" || validdata.contactPerson == undefined || validdata.contactPerson == "NA")
									   {
										   $("#ContactPerson").css("background-color", "#ffffff"); 
									   }
									   else
									   {
										   $("#ContactPerson").css("background-color", "#99ff99");
									   }
									   if(validdata.phone == "" || validdata.phone == undefined || validdata.phone == "NA")
									   {
										   $("#Telephone").css("background-color", "#ffffff"); 
									   }
									   else
									   {
										   $("#Telephone").css("background-color", "#99ff99");
									   }
									   if(validdata.address == "" || validdata.address == undefined || validdata.address == "NA")
									   {
										   $("#Address").css("background-color", "#ffffff"); 
									   }
									   else
									   {
										   $("#Address").css("background-color", "#99ff99");
									   }
									   /*if(validdata.createdBy == "" || validdata.createdBy == undefined || validdata.createdBy == "NA")
										 {
											$("#CreatedBy").css("background-color", "#ffff7f"); 
											//$scope.addCase.createdBy = "";
										 }
										 else
										 {
											$("#CreatedBy").css("background-color", "#99ff99");
											//$scope.addCase.createdBy = validdata.createdby;
										 }
									   */
									     for(var i = 0; i<validgriddata.length; i++)
									   {
										   if(validgriddata[i].gearMotor == "" || validgriddata[i].gearMotor == undefined || validgriddata[i].gearMotor == "NA")
										   {
											   $scope.dataSumitomo[i].requiredStatus = false; 
										       $("#sumitGearMotor_"+parseInt(i+1)).css("background-color", "#ffffff"); 
										   }
										   else
										   {
											 $scope.dataSumitomo[i].requiredStatus = true; 
										     $("#sumitGearMotor_"+parseInt(i+1)).css("background-color", "#ffff7f");   
										   }
										   if(validgriddata[i].othersPlz == "" || validgriddata[i].othersPlz == undefined || validgriddata[i].othersPlz == "NA")
										   {
											   $scope.dataSumitomo[i].reqOtherSts = false; 
										       $("#OthersPlzSumit_"+parseInt(i+1)).css("background-color", "#ffffff"); 
										   }
										   else
										   {
											 $scope.dataSumitomo[i].reqOtherSts = true; 
										     $("#OthersPlzSumit_"+parseInt(i+1)).css("background-color", "#ffff7f");   
										   }
										   if(validgriddata[i].other == "" || validgriddata[i].other == undefined || validgriddata[i].other == "NA")
										   {
											   $scope.dataSumitomo[i].reqMotorKW = false; 
										       $("#OtherSumit_"+parseInt(i+1)).css("background-color", "#ffffff"); 
										   }
										   else
										   {
											 $scope.dataSumitomo[i].reqMotorKW = true; 
										     $("#OtherSumit_"+parseInt(i+1)).css("background-color", "#ffff7f");   
										   }
										   if(validgriddata[i].presetTorque == "" || validgriddata[i].presetTorque == undefined || validgriddata[i].presetTorque == "NA")
										   {
											   $scope.dataSumitomo[i].reqStatus = false; 
										       $("#PresetTorqueSumit_"+parseInt(i+1)).css("background-color", "#ffffff"); 
										   }
										   else
										   {
											 $scope.dataSumitomo[i].reqStatus = true; 
										     $("#PresetTorqueSumit_"+parseInt(i+1)).css("background-color", "#ffff7f");   
										   }
										  
									   }
					
				}
						   
						  
					});
				 });
			
		}

		$scope.sparePartTempGrid = function(Qtnmaster,form)
		{
			
			 // $('#menu2').addClass('active');
		      //$('#competitorReplace').addClass('active');
			//alert("sparePartTempGrid" + "1");
			form.$setPristine(true);
			
			//$scope.addCase = " ";
			    $("#newSelection").hide();
				$("#competitorReplace").hide();
				$("#sumitomoReplace").hide();
				$("#sparePart").show();
				$("#techQuery").hide(); 
				$("#blogHideSpare").hide(); 
				$("#remarksHideSpare").hide(); 
				//$("#codeNotFound").hide();
				//$("#dataNotFound").hide();
				//$('#qtnBtnSpare-hide').hide();
				$scope.qtnBtnSpare = '0';
				
				$timeout(function(){
					$.post("loadingcasessdatafortabclick.do",{qtnmaster:Qtnmaster,tab:4},function(json)
					{
						//alert(JSON.stringify(json));
				      //alert("sparePartTempGrid");
				//alert(JSON.stringify(json));
				var tab=parseInt(json['tab']);
				var gridVal = json['value'];
				var validdata = json['maincaseform'][0];
				var validgriddata = json['griddata'];
				if(gridVal==0)
				{
					//alert("if");
					  $scope.addCase=json['maincaseform'][0];
					  $scope.addDespSpare=json['description'][0]; 
					 
					  //$indexPart = 0;
					  $indexTab4=1;
					  $scope.dataSparePart=[{'id':$indexTab4,'gm':'0','pole':'4','rpm':'1450','motorType':'NO','voltage':'200','phase':'3','gearProduct':'CYCLO 6000','quantity':'1','hertz':'50','basefreq':'1','protectionGrade': 'IP55','internationalStd': 'JIS','mtrEfficncyClass':'0','model':'0','inverter':'1','motorBrake':'1','motorBrakeVolt':'1','mtrsnosts':true,'terminalBox':'N33','cableEntry':'N3A',childData:[{'id':0}]}];
                      $scope.stepsModelSpare = [];
					  cusImageSpare = new FormData();
					   $scope.addCase.currentTab = tab;
					   
					   var departmentSplit = json['maincaseform'][0].assigned;
										 var departmentSales = [];
										 if(departmentSplit == undefined || departmentSplit == "" || departmentSplit == "NA")
										 {
											 //alert("if");
											 $('#picturegallery').val("['']").trigger('chosen:updated');
											 $("#picturegallery").css("background-color", "#ffff7f");
										 }
										 else
										 {
											//alert(departmentSplit.length + " " + " else ");
											 for (var s = 0; s < departmentSplit.length; s++) {
									
														departmentSales.push(departmentSplit[s]);
														//alert("accessoriesSales"+accessoriesSales);
											}
											 $('#picturegallery').val(departmentSales).trigger('chosen:updated');
															$scope.addCase.assigned = departmentSales;
															$("#picturegallery").css("background-color", "#99ff99");
										 }
					  //$('.btn-hideSpare').attr('disabled',false);
					  $('.btn-hideSpare').removeClass('disabled');
							  //$('.Send-hideSpare').removeClass('disabled');
					  $('.btn-discarSpare').removeClass('disabled');
					  $scope.qtnBtnSpare = '0';
					  
					  if(validdata.customerCode == "" || validdata.customerCode == undefined || validdata.customerCode == "NA")
									   {
										   $("#CustomerCode").css("background-color", "#ffff7f"); 
									   }
									   else
									   {
										  
										   $("#CustomerCode").css("background-color", "#99ff99");
									   }
									   if(validdata.contactPerson == "" || validdata.contactPerson == undefined || validdata.contactPerson == "NA")
									   {
										   $("#ContactPerson").css("background-color", "#ffffff"); 
									   }
									   else
									   {
										    
										   $("#ContactPerson").css("background-color", "#99ff99");
									   }
									   if(validdata.phone == "" || validdata.phone == undefined || validdata.phone == "NA")
									   {
										   $("#Telephone").css("background-color", "#ffffff"); 
									   }
									   else
									   {
										  
										   $("#Telephone").css("background-color", "#99ff99");
									   }
									   if(validdata.address == "" || validdata.address == undefined || validdata.address == "NA")
									   {
										   $("#Address").css("background-color", "#ffffff"); 
									   }
									   else
									   {
										    
										   $("#Address").css("background-color", "#99ff99");
									   }
									   /*if(validdata.createdBy == "" || validdata.createdBy == undefined || validdata.createdBy == "NA")
										 {
											$("#CreatedBy").css("background-color", "#ffff7f"); 
											//$scope.addCase.createdBy = "";
										 }
										 else
										 {
											$("#CreatedBy").css("background-color", "#99ff99");
											//$scope.addCase.createdBy = validdata.createdby;
										 }*/
									  for(var i = 0; i<$scope.dataSparePart.length; i++)
									   {
										   if($scope.dataSparePart[i].gm == "0")
										   {
											    $scope.dataSparePart[i].requiredStatus = false;
											    $scope.dataSparePart[i].shiMfgsts = false;
											   // $scope.dataSparePart[i].expSts = false;
											   // $scope.dataSparePart[i].mtrSprSts = false;
												$scope.dataSparePart[i].poleSprSts = false;
												$scope.dataSparePart[i].phSprSts = false;
												$scope.dataSparePart[i].voltSprSts = false;
												$scope.dataSparePart[i].hzSprSts = false;
												$scope.dataSparePart[i].rpmSprSts = false;
												$scope.dataSparePart[i].gearsts = false;
												$scope.dataSparePart[i].mtrsnosts = true;
										       $("#spareGearMotor_"+parseInt(i+1)).css("background-color", "#ffffff");
											   $("#SHImfg_"+parseInt(i+1)).css("background-color", "#ffffff");
											   //$("#MotorType_"+parseInt(i+1)).css("background-color", "#ffffff");
											   //$("#MotorKW_"+parseInt(i+1)).css("background-color", "#ffffff");
											   $("#Pole_"+parseInt(i+1)).css("background-color", "#ffffff");
											   $("#Phase_"+parseInt(i+1)).css("background-color", "#ffffff");
											   $("#Voltage_"+parseInt(i+1)).css("background-color", "#ffffff");
											   $("#Hertz_"+parseInt(i+1)).css("background-color", "#ffffff");
											   $("#RPM_"+parseInt(i+1)).css("background-color", "#ffffff");
											   $("#gearHead_"+parseInt(i+1)).css("background-color", "#ffffff");
											   $("#MotorSerial_"+parseInt(i+1)).css("background-color", "#ffff7f");
											   if($scope.dataSparePart[i].motorKW == 'OTHER')
											   {
												   $scope.dataSparePart[i].mtrSprSts = true;
												   $scope.dataSparePart[i].reqMotorKW = true;
												   $("#MotorKW_"+parseInt(i+1)).css("background-color", "#ffff7f");
												   $("#OtherSpare_"+parseInt(i+1)).css("background-color", "#ffff7f");
											   }
											   else
											   {
												   $scope.dataSparePart[i].mtrSprSts = false;
												   $scope.dataSparePart[i].reqMotorKW = false;
												   $("#MotorKW_"+parseInt(i+1)).css("background-color", "#ffffff");
												   $("#OtherSpare_"+parseInt(i+1)).css("background-color", "#ffffff");
											   }
											   if($scope.dataSparePart[i].motorType == 'other - pls specify')
											   {
												  
												   $scope.dataSparePart[i].expSts = true;
												   $scope.dataSparePart[i].reqOtherSts = true;
												   $("#MotorType_"+parseInt(i+1)).css("background-color", "#ffff7f");
												   $("#OthersPlzSpare_"+parseInt(i+1)).css("background-color", "#ffff7f");
											   }
											   else
											   {
												   $scope.dataSparePart[i].expSts = false;
												   $scope.dataSparePart[i].reqOtherSts = false;
												   $("#MotorType_"+parseInt(i+1)).css("background-color", "#ffffff");
												   $("#OthersPlzSpare_"+parseInt(i+1)).css("background-color", "#ffffff");
											   }
										   }
										   else if($scope.dataSparePart[i].gm == "1")
										   {
											    $scope.dataSparePart[i].requiredStatus = false;
											    $scope.dataSparePart[i].shiMfgsts = false;
											   // $scope.dataSparePart[i].expSts = false;
											    //$scope.dataSparePart[i].mtrSprSts = false;
												$scope.dataSparePart[i].poleSprSts = false;
												$scope.dataSparePart[i].phSprSts = false;
												$scope.dataSparePart[i].voltSprSts = false;
												$scope.dataSparePart[i].hzSprSts = false;
												$scope.dataSparePart[i].rpmSprSts = false;
												$scope.dataSparePart[i].gearsts = true;
												$scope.dataSparePart[i].mtrsnosts = false;
										       $("#spareGearMotor_"+parseInt(i+1)).css("background-color", "#ffffff");
											   $("#SHImfg_"+parseInt(i+1)).css("background-color", "#ffffff");
											  // $("#MotorType_"+parseInt(i+1)).css("background-color", "#ffffff");
											   //$("#MotorKW_"+parseInt(i+1)).css("background-color", "#ffffff");
											   $("#Pole_"+parseInt(i+1)).css("background-color", "#ffffff");
											   $("#Phase_"+parseInt(i+1)).css("background-color", "#ffffff");
											   $("#Voltage_"+parseInt(i+1)).css("background-color", "#ffffff");
											   $("#Hertz_"+parseInt(i+1)).css("background-color", "#ffffff");
											   $("#RPM_"+parseInt(i+1)).css("background-color", "#ffffff");
											   $("#gearHead_"+parseInt(i+1)).css("background-color", "#ffff7f");
											   $("#MotorSerial_"+parseInt(i+1)).css("background-color", "#ffffff");
											   
											   if($scope.dataSparePart[i].motorKW == 'OTHER')
											   {
												   $scope.dataSparePart[i].mtrSprSts = true;
												   $scope.dataSparePart[i].reqMotorKW = true;
												   $("#MotorKW_"+parseInt(i+1)).css("background-color", "#ffff7f");
												   $("#OtherSpare_"+parseInt(i+1)).css("background-color", "#ffff7f");
											   }
											   else
											   {
												   $scope.dataSparePart[i].mtrSprSts = false;
												   $scope.dataSparePart[i].reqMotorKW = false;
												   $("#MotorKW_"+parseInt(i+1)).css("background-color", "#ffffff");
												   $("#OtherSpare_"+parseInt(i+1)).css("background-color", "#ffffff");
											   }
											   if($scope.dataSparePart[i].motorType == 'other - pls specify')
											   {
												  
												   $scope.dataSparePart[i].expSts = true;
												   $scope.dataSparePart[i].reqOtherSts = true;
												   $("#MotorType_"+parseInt(i+1)).css("background-color", "#ffff7f");
												   $("#OthersPlzSpare_"+parseInt(i+1)).css("background-color", "#ffff7f");
											   }
											   else
											   {
												   $scope.dataSparePart[i].expSts = false;
												   $scope.dataSparePart[i].reqOtherSts = false;
												   $("#MotorType_"+parseInt(i+1)).css("background-color", "#ffffff");
												   $("#OthersPlzSpare_"+parseInt(i+1)).css("background-color", "#ffffff");
											   }
										   }
										   else
										   {
											    $scope.dataSparePart[i].requiredStatus = true;
											    $scope.dataSparePart[i].shiMfgsts = true;
											    //$scope.dataSparePart[i].expSts = true;
											    //$scope.dataSparePart[i].mtrSprSts = true;
												$scope.dataSparePart[i].poleSprSts = true;
												$scope.dataSparePart[i].phSprSts = true;
												$scope.dataSparePart[i].voltSprSts = true;
												$scope.dataSparePart[i].hzSprSts = true;
												$scope.dataSparePart[i].rpmSprSts = true;
												$scope.dataSparePart[i].gearsts = false;
												$scope.dataSparePart[i].mtrsnosts = false;
										       $("#spareGearMotor_"+parseInt(i+1)).css("background-color", "#ffff7f");
											   $("#SHImfg_"+parseInt(i+1)).css("background-color", "#ffff7f");
											   //$("#MotorType_"+parseInt(i+1)).css("background-color", "#ffff7f");
											  // $("#MotorKW_"+parseInt(i+1)).css("background-color", "#ffff7f");
											   $("#Pole_"+parseInt(i+1)).css("background-color", "#ffff7f");
											   $("#Phase_"+parseInt(i+1)).css("background-color", "#ffff7f");
											   $("#Voltage_"+parseInt(i+1)).css("background-color", "#ffff7f");
											   $("#Hertz_"+parseInt(i+1)).css("background-color", "#ffff7f");
											   $("#RPM_"+parseInt(i+1)).css("background-color", "#ffff7f");
											   $("#gearHead_"+parseInt(i+1)).css("background-color", "#ffffff");
											   $("#MotorSerial_"+parseInt(i+1)).css("background-color", "#ffffff");
											   
											   if($scope.dataSparePart[i].motorKW == 'OTHER')
											   {
												   $scope.dataSparePart[i].mtrSprSts = true;
												   $scope.dataSparePart[i].reqMotorKW = true;
												   $("#MotorKW_"+parseInt(i+1)).css("background-color", "#ffff7f");
												   $("#OtherSpare_"+parseInt(i+1)).css("background-color", "#ffff7f");
											   }
											   else
											   {
												   $scope.dataSparePart[i].mtrSprSts = true;
												   $scope.dataSparePart[i].reqMotorKW = false;
												   $("#MotorKW_"+parseInt(i+1)).css("background-color", "#ffff7f");
												   $("#OtherSpare_"+parseInt(i+1)).css("background-color", "#ffffff");
											   }
											   if($scope.dataSparePart[i].motorType == 'other - pls specify')
											   {
												  
												   $scope.dataSparePart[i].expSts = true;
												   $scope.dataSparePart[i].reqOtherSts = true;
												   $("#MotorType_"+parseInt(i+1)).css("background-color", "#ffff7f");
												   $("#OthersPlzSpare_"+parseInt(i+1)).css("background-color", "#ffff7f");
											   }
											   else
											   {
												   $scope.dataSparePart[i].expSts = true;
												   $scope.dataSparePart[i].reqOtherSts = false;
												   $("#MotorType_"+parseInt(i+1)).css("background-color", "#ffff7f");
												   $("#OthersPlzSpare_"+parseInt(i+1)).css("background-color", "#ffffff");
											   }
										   }
									   }
					  //for(var i = 0; i<$scope.dataSparePart.length; i++)
//									   {
//										   //alert(JSON.stringify(validgriddata));
//										   if(validgriddata[i].gm == "0")
//										   {
//											     $scope.dataSparePart[i].requiredStatus = true; 
//										    	 $("#spareGearMotor_"+parseInt(i+1)).css("background-color", "#ffff7f");
//										   }
//										   else
//										   {
//											   $scope.dataSparePart[i].requiredStatus = false; 
//										       $("#spareGearMotor_"+parseInt(i+1)).css("background-color", "#ffffff");  
//										   }
//										   /*if($scope.dataSparePart[i].gearMotor == "" || $scope.dataSparePart[i].gearMotor == undefined || $scope.dataSparePart[i].gearMotor == "NA")
//										   {
//											   $scope.dataSparePart[i].requiredStatus = false; 
//										       $("#spareGearMotor_"+parseInt(i+1)).css("background-color", "#ffffff"); 
//										   }
//										   else
//										   {
//											 $scope.dataSparePart[i].requiredStatus = true; 
//										     $("#spareGearMotor_"+parseInt(i+1)).css("background-color", "#ffff7f");   
//										   }*/
//										   if($scope.dataSparePart[i].othersPlz == "" || $scope.dataSparePart[i].othersPlz == undefined || $scope.dataSparePart[i].othersPlz == "NA")
//										   {
//											   $scope.dataSparePart[i].reqOtherSts = false; 
//										       $("#OthersPlzSpare_"+parseInt(i+1)).css("background-color", "#ffffff"); 
//										   }
//										   else
//										   {
//											 $scope.dataSparePart[i].reqOtherSts = true; 
//										     $("#OthersPlzSpare_"+parseInt(i+1)).css("background-color", "#ffff7f");   
//										   }
//										   if($scope.dataSparePart[i].other == "" || $scope.dataSparePart[i].other == undefined || $scope.dataSparePart[i].other == "NA")
//										   {
//											   $scope.dataSparePart[i].reqMotorKW = false; 
//										       $("#OtherSpare_"+parseInt(i+1)).css("background-color", "#ffffff"); 
//										   }
//										   else
//										   {
//											 $scope.dataSparePart[i].reqMotorKW = true; 
//										     $("#OtherSpare_"+parseInt(i+1)).css("background-color", "#ffff7f");   
//										   }
//										   /*if($scope.dataSparePart[i].presetTorque == "" || $scope.dataSparePart[i].presetTorque == undefined || $scope.dataSparePart[i].presetTorque == "NA")
//										   {
//											   $scope.dataSparePart[i].reqStatus = false; 
//										       $("#PresetTorqueSumit_"+parseInt(i+1)).css("background-color", "#ffffff"); 
//										   }
//										   else
//										   {
//											 $scope.dataSparePart[i].reqStatus = true; 
//										     $("#PresetTorqueSumit_"+parseInt(i+1)).css("background-color", "#ffff7f");   
//										   }*/
//										   if($scope.dataSparePart[i].motorSerial == "" || $scope.dataSparePart[i].motorSerial == undefined || $scope.dataSparePart[i].motorSerial == "NA")
//										   {
//											   
//											   $scope.dataSparePart[i].mtrsnosts = true; 
//										       $("#MotorSerial_"+parseInt(i+1)).css("background-color", "#ffff7f"); 
//										   }
//										   else
//										   {
//											 $scope.dataSparePart[i].mtrsnosts = true; 
//										     $("#MotorSerial_"+parseInt(i+1)).css("background-color", "#ffff7f");   
//										   }
//										   if($scope.dataSparePart[i].motorType == "" || $scope.dataSparePart[i].motorType == undefined || $scope.dataSparePart[i].motorType == "NA")
//										   {
//											   $scope.dataSparePart[i].expSts = false; 
//										       $("#MotorType_"+parseInt(i+1)).css("background-color", "#ffffff"); 
//										   }
//										   else
//										   {
//											 $scope.dataSparePart[i].expSts = true; 
//										     $("#MotorType_"+parseInt(i+1)).css("background-color", "#ffff7f");   
//										   }
//										   if($scope.dataSparePart[i].motorKW == "" || $scope.dataSparePart[i].motorKW == undefined || $scope.dataSparePart[i].motorKW == "NA")
//										   {
//											   $scope.dataSparePart[i].mtrSprSts = false; 
//										       $("#MotorKW_"+parseInt(i+1)).css("background-color", "#ffffff"); 
//										   }
//										   else
//										   {
//											 $scope.dataSparePart[i].mtrSprSts = true; 
//										     $("#MotorKW_"+parseInt(i+1)).css("background-color", "#ffff7f");   
//										   }
//										   if($scope.dataSparePart[i].pole == "" || $scope.dataSparePart[i].pole == undefined || $scope.dataSparePart[i].pole == "NA")
//										   {
//											   $scope.dataSparePart[i].poleSprSts = false; 
//										       $("#Pole_"+parseInt(i+1)).css("background-color", "#ffffff"); 
//										   }
//										   else
//										   {
//											 $scope.dataSparePart[i].poleSprSts = true; 
//										     $("#Pole_"+parseInt(i+1)).css("background-color", "#ffff7f");   
//										   }
//										   if($scope.dataSparePart[i].voltage == "" || $scope.dataSparePart[i].voltage == undefined || $scope.dataSparePart[i].voltage == "NA")
//										   {
//											   $scope.dataSparePart[i].voltSprSts = false; 
//										       $("#Voltage_"+parseInt(i+1)).css("background-color", "#ffffff"); 
//										   }
//										   else
//										   {
//											 $scope.dataSparePart[i].voltSprSts = true; 
//										     $("#Voltage_"+parseInt(i+1)).css("background-color", "#ffff7f");   
//										   }
//										   if($scope.dataSparePart[i].hertz == "" || $scope.dataSparePart[i].hertz == undefined || $scope.dataSparePart[i].hertz == "NA")
//										   {
//											   $scope.dataSparePart[i].hzSprSts = false; 
//										       $("#Hertz_"+parseInt(i+1)).css("background-color", "#ffffff"); 
//										   }
//										   else
//										   {
//											 $scope.dataSparePart[i].hzSprSts = true; 
//										     $("#Hertz_"+parseInt(i+1)).css("background-color", "#ffff7f");   
//										   }
//										    if($scope.dataSparePart[i].rpm == "" || $scope.dataSparePart[i].rpm == undefined || $scope.dataSparePart[i].rpm == "NA")
//										   {
//											   $scope.dataSparePart[i].rpmSprSts = false; 
//										       $("#RPM_"+parseInt(i+1)).css("background-color", "#ffffff"); 
//										   }
//										   else
//										   {
//											 $scope.dataSparePart[i].rpmSprSts = true; 
//										     $("#RPM_"+parseInt(i+1)).css("background-color", "#ffff7f");   
//										   }
//										  
//									   } 
					  
					  $scope.$apply();
				}
				else
				{
					//alert("else");
					  $scope.addCase=json['maincaseform'][0];
					  $scope.addDespSpare=json['description'][0]; 
					  $scope.dataSparePart=json['griddata'];
					  $scope.qtnBtnSpare = '0';
					   $scope.addCase.currentTab = tab;
					   
					   var departmentSplit = json['maincaseform'][0].assigned;
										 var departmentSales = [];
										 if(departmentSplit == undefined || departmentSplit == "" || departmentSplit == "NA")
										 {
											 //alert("if");
											 $('#picturegallery').val("['']").trigger('chosen:updated');
											 $("#picturegallery").css("background-color", "#ffff7f");
										 }
										 else
										 {
											//alert(departmentSplit.length + " " + " else ");
											 for (var s = 0; s < departmentSplit.length; s++) {
									
														departmentSales.push(departmentSplit[s]);
														//alert("accessoriesSales"+accessoriesSales);
											}
											 $('#picturegallery').val(departmentSales).trigger('chosen:updated');
															$scope.addCase.assigned = departmentSales;
															$("#picturegallery").css("background-color", "#99ff99");
										 }
					 // $scope.stepsModelSpare = json['maincaseform'][0].images.split(',');
					  $scope.$apply();
					 var getImageSpare = json['maincaseform'][0].images;
								  // alert(getImage);
									 if(getImageSpare!=null)
									   {
										   //alert(getImage + " " + 1);
										   var imgPrew = getImageSpare.trim();
										   if(imgPrew==null || imgPrew=="" )
										   {
											  
											  $scope.stepsModelSpare = [];
											  $scope.$apply();
											  //$scope.dummyPhoto="";
					                          //$('#dummyPhoto').trigger('blur');
										   }
										   else
										   {
											   //alert(getImage + " " + 3);
											   $scope.stepsModelSpare = getImageSpare.split(',');
											   $scope.$apply();
											  
										   }
									   }
									   else
									   {
										   //alert(getImage + " " + 4);
										    $scope.stepsModelSpare = [];
										    $scope.$apply();
										 
									   }
									   
									   if(validdata.customerCode == "" || validdata.customerCode == undefined || validdata.customerCode == "NA")
									   {
										   $("#CustomerCode").css("background-color", "#ffff7f"); 
									   }
									   else
									   {
										   $("#CustomerCode").css("background-color", "#99ff99");
									   }
									   if(validdata.contactPerson == "" || validdata.contactPerson == undefined || validdata.contactPerson == "NA")
									   {
										   $("#ContactPerson").css("background-color", "#ffffff"); 
									   }
									   else
									   {
										   $("#ContactPerson").css("background-color", "#99ff99");
									   }
									   if(validdata.phone == "" || validdata.phone == undefined || validdata.phone == "NA")
									   {
										   $("#Telephone").css("background-color", "#ffffff"); 
									   }
									   else
									   {
										   $("#Telephone").css("background-color", "#99ff99");
									   }
									   if(validdata.address == "" || validdata.address == undefined || validdata.address == "NA")
									   {
										   $("#Address").css("background-color", "#ffffff"); 
									   }
									   else
									   {
										   $("#Address").css("background-color", "#99ff99");
									   }
									  /* if(validdata.createdBy == "" || validdata.createdBy == undefined || validdata.createdBy == "NA")
										 {
											$("#CreatedBy").css("background-color", "#ffff7f"); 
											//$scope.addCase.createdBy = "";
										 }
										 else
										 {
											$("#CreatedBy").css("background-color", "#99ff99");
											//$scope.addCase.createdBy = validdata.createdby;
										 }*/
									   /*if(validdata.assigned == "" || validdata.assigned == undefined || validdata.assigned == "NA")
									   {
										  $("#AssignedTo").css("background-color", "#ffff7f"); 
											//$scope.addCase.assigned = "";
									   }
									   else
									   {
										  $("#AssignedTo").css("background-color", "#99ff99");
											//$scope.addCase.assigned = validdata.departmentname;
									   }*/
									   
									   for(var i = 0; i<validgriddata.length; i++)
									   {
										   if(validgriddata[i].gm == "0")
										   {
											    $scope.dataSparePart[i].requiredStatus = false;
											    $scope.dataSparePart[i].shiMfgsts = false;
											   // $scope.dataSparePart[i].expSts = false;
											   // $scope.dataSparePart[i].mtrSprSts = false;
												$scope.dataSparePart[i].poleSprSts = false;
												$scope.dataSparePart[i].phSprSts = false;
												$scope.dataSparePart[i].voltSprSts = false;
												$scope.dataSparePart[i].hzSprSts = false;
												$scope.dataSparePart[i].rpmSprSts = false;
												$scope.dataSparePart[i].gearsts = false;
												$scope.dataSparePart[i].mtrsnosts = true;
										       $("#spareGearMotor_"+parseInt(i+1)).css("background-color", "#ffffff");
											   $("#SHImfg_"+parseInt(i+1)).css("background-color", "#ffffff");
											   //$("#MotorType_"+parseInt(i+1)).css("background-color", "#ffffff");
											   //$("#MotorKW_"+parseInt(i+1)).css("background-color", "#ffffff");
											   $("#Pole_"+parseInt(i+1)).css("background-color", "#ffffff");
											   $("#Phase_"+parseInt(i+1)).css("background-color", "#ffffff");
											   $("#Voltage_"+parseInt(i+1)).css("background-color", "#ffffff");
											   $("#Hertz_"+parseInt(i+1)).css("background-color", "#ffffff");
											   $("#RPM_"+parseInt(i+1)).css("background-color", "#ffffff");
											   $("#gearHead_"+parseInt(i+1)).css("background-color", "#ffffff");
											   $("#MotorSerial_"+parseInt(i+1)).css("background-color", "#ffff7f");
											   if(validgriddata[i].motorKW == 'OTHER')
											   {
												   $scope.dataSparePart[i].mtrSprSts = true;
												   $scope.dataSparePart[i].reqMotorKW = true;
												   $("#MotorKW_"+parseInt(i+1)).css("background-color", "#ffff7f");
												   $("#OtherSpare_"+parseInt(i+1)).css("background-color", "#ffff7f");
											   }
											   else
											   {
												   $scope.dataSparePart[i].mtrSprSts = false;
												   $scope.dataSparePart[i].reqMotorKW = false;
												   $("#MotorKW_"+parseInt(i+1)).css("background-color", "#ffffff");
												   $("#OtherSpare_"+parseInt(i+1)).css("background-color", "#ffffff");
											   }
											   if(validgriddata[i].motorType == 'other - pls specify')
											   {
												  
												   $scope.dataSparePart[i].expSts = true;
												   $scope.dataSparePart[i].reqOtherSts = true;
												   $("#MotorType_"+parseInt(i+1)).css("background-color", "#ffff7f");
												   $("#OthersPlzSpare_"+parseInt(i+1)).css("background-color", "#ffff7f");
											   }
											   else
											   {
												   $scope.dataSparePart[i].expSts = false;
												   $scope.dataSparePart[i].reqOtherSts = false;
												   $("#MotorType_"+parseInt(i+1)).css("background-color", "#ffffff");
												   $("#OthersPlzSpare_"+parseInt(i+1)).css("background-color", "#ffffff");
											   }
										   }
										   else if(validgriddata[i].gm == "1")
										   {
											    $scope.dataSparePart[i].requiredStatus = false;
											    $scope.dataSparePart[i].shiMfgsts = false;
											   // $scope.dataSparePart[i].expSts = false;
											    //$scope.dataSparePart[i].mtrSprSts = false;
												$scope.dataSparePart[i].poleSprSts = false;
												$scope.dataSparePart[i].phSprSts = false;
												$scope.dataSparePart[i].voltSprSts = false;
												$scope.dataSparePart[i].hzSprSts = false;
												$scope.dataSparePart[i].rpmSprSts = false;
												$scope.dataSparePart[i].gearsts = true;
												$scope.dataSparePart[i].mtrsnosts = false;
										       $("#spareGearMotor_"+parseInt(i+1)).css("background-color", "#ffffff");
											   $("#SHImfg_"+parseInt(i+1)).css("background-color", "#ffffff");
											  // $("#MotorType_"+parseInt(i+1)).css("background-color", "#ffffff");
											   //$("#MotorKW_"+parseInt(i+1)).css("background-color", "#ffffff");
											   $("#Pole_"+parseInt(i+1)).css("background-color", "#ffffff");
											   $("#Phase_"+parseInt(i+1)).css("background-color", "#ffffff");
											   $("#Voltage_"+parseInt(i+1)).css("background-color", "#ffffff");
											   $("#Hertz_"+parseInt(i+1)).css("background-color", "#ffffff");
											   $("#RPM_"+parseInt(i+1)).css("background-color", "#ffffff");
											   $("#gearHead_"+parseInt(i+1)).css("background-color", "#ffff7f");
											   $("#MotorSerial_"+parseInt(i+1)).css("background-color", "#ffffff");
											   
											   if(validgriddata[i].motorKW == 'OTHER')
											   {
												   $scope.dataSparePart[i].mtrSprSts = true;
												   $scope.dataSparePart[i].reqMotorKW = true;
												   $("#MotorKW_"+parseInt(i+1)).css("background-color", "#ffff7f");
												   $("#OtherSpare_"+parseInt(i+1)).css("background-color", "#ffff7f");
											   }
											   else
											   {
												   $scope.dataSparePart[i].mtrSprSts = false;
												   $scope.dataSparePart[i].reqMotorKW = false;
												   $("#MotorKW_"+parseInt(i+1)).css("background-color", "#ffffff");
												   $("#OtherSpare_"+parseInt(i+1)).css("background-color", "#ffffff");
											   }
											   if(validgriddata[i].motorType == 'other - pls specify')
											   {
												  
												   $scope.dataSparePart[i].expSts = true;
												   $scope.dataSparePart[i].reqOtherSts = true;
												   $("#MotorType_"+parseInt(i+1)).css("background-color", "#ffff7f");
												   $("#OthersPlzSpare_"+parseInt(i+1)).css("background-color", "#ffff7f");
											   }
											   else
											   {
												   $scope.dataSparePart[i].expSts = false;
												   $scope.dataSparePart[i].reqOtherSts = false;
												   $("#MotorType_"+parseInt(i+1)).css("background-color", "#ffffff");
												   $("#OthersPlzSpare_"+parseInt(i+1)).css("background-color", "#ffffff");
											   }
										   }
										   else
										   {
											    $scope.dataSparePart[i].requiredStatus = true;
											    $scope.dataSparePart[i].shiMfgsts = true;
											    //$scope.dataSparePart[i].expSts = true;
											    //$scope.dataSparePart[i].mtrSprSts = true;
												$scope.dataSparePart[i].poleSprSts = true;
												$scope.dataSparePart[i].phSprSts = true;
												$scope.dataSparePart[i].voltSprSts = true;
												$scope.dataSparePart[i].hzSprSts = true;
												$scope.dataSparePart[i].rpmSprSts = true;
												$scope.dataSparePart[i].gearsts = false;
												$scope.dataSparePart[i].mtrsnosts = false;
										       $("#spareGearMotor_"+parseInt(i+1)).css("background-color", "#ffff7f");
											   $("#SHImfg_"+parseInt(i+1)).css("background-color", "#ffff7f");
											   //$("#MotorType_"+parseInt(i+1)).css("background-color", "#ffff7f");
											  // $("#MotorKW_"+parseInt(i+1)).css("background-color", "#ffff7f");
											   $("#Pole_"+parseInt(i+1)).css("background-color", "#ffff7f");
											   $("#Phase_"+parseInt(i+1)).css("background-color", "#ffff7f");
											   $("#Voltage_"+parseInt(i+1)).css("background-color", "#ffff7f");
											   $("#Hertz_"+parseInt(i+1)).css("background-color", "#ffff7f");
											   $("#RPM_"+parseInt(i+1)).css("background-color", "#ffff7f");
											   $("#gearHead_"+parseInt(i+1)).css("background-color", "#ffffff");
											   $("#MotorSerial_"+parseInt(i+1)).css("background-color", "#ffffff");
											   
											   if(validgriddata[i].motorKW == 'OTHER')
											   {
												   $scope.dataSparePart[i].mtrSprSts = true;
												   $scope.dataSparePart[i].reqMotorKW = true;
												   $("#MotorKW_"+parseInt(i+1)).css("background-color", "#ffff7f");
												   $("#OtherSpare_"+parseInt(i+1)).css("background-color", "#ffff7f");
											   }
											   else
											   {
												   $scope.dataSparePart[i].mtrSprSts = true;
												   $scope.dataSparePart[i].reqMotorKW = false;
												   $("#MotorKW_"+parseInt(i+1)).css("background-color", "#ffff7f");
												   $("#OtherSpare_"+parseInt(i+1)).css("background-color", "#ffffff");
											   }
											   if(validgriddata[i].motorType == 'other - pls specify')
											   {
												  
												   $scope.dataSparePart[i].expSts = true;
												   $scope.dataSparePart[i].reqOtherSts = true;
												   $("#MotorType_"+parseInt(i+1)).css("background-color", "#ffff7f");
												   $("#OthersPlzSpare_"+parseInt(i+1)).css("background-color", "#ffff7f");
											   }
											   else
											   {
												   $scope.dataSparePart[i].expSts = true;
												   $scope.dataSparePart[i].reqOtherSts = false;
												   $("#MotorType_"+parseInt(i+1)).css("background-color", "#ffff7f");
												   $("#OthersPlzSpare_"+parseInt(i+1)).css("background-color", "#ffffff");
											   }
										   }
									   }
							 ///*for(var i = 0; i<validgriddata.length; i++)
//									   {
//										   //alert(JSON.stringify(validgriddata));
//										   if(validgriddata[i].gm == "2")
//										   {
//											     $scope.dataSparePart[i].requiredStatus = true; 
//										    	 $("#spareGearMotor_"+parseInt(i+1)).css("background-color", "#ffff7f");
//										   }
//										   else
//										   {
//											   $scope.dataSparePart[i].requiredStatus = false; 
//										       $("#spareGearMotor_"+parseInt(i+1)).css("background-color", "#ffffff");  
//										   }
//										   if(validgriddata[i].gearMotor == "" || validgriddata[i].gearMotor == undefined || validgriddata[i].gearMotor == "NA")
//										   {
//											   $scope.dataSparePart[i].requiredStatus = false; 
//										       $("#spareGearMotor_"+parseInt(i+1)).css("background-color", "#ffffff"); 
//										   }
//										   else
//										   {
//											 $scope.dataSparePart[i].requiredStatus = true; 
//										     $("#spareGearMotor_"+parseInt(i+1)).css("background-color", "#ffff7f");   
//										   }
//										   if(validgriddata[i].othersPlz == "" || validgriddata[i].othersPlz == undefined || validgriddata[i].othersPlz == "NA")
//										   {
//											   $scope.dataSparePart[i].reqOtherSts = false; 
//										       $("#OthersPlzSpare_"+parseInt(i+1)).css("background-color", "#ffffff"); 
//										   }
//										   else
//										   {
//											 $scope.dataSparePart[i].reqOtherSts = true; 
//										     $("#OthersPlzSpare_"+parseInt(i+1)).css("background-color", "#ffff7f");   
//										   }
//										   if(validgriddata[i].other == "" || validgriddata[i].other == undefined || validgriddata[i].other == "NA")
//										   {
//											   $scope.dataSparePart[i].reqMotorKW = false; 
//										       $("#OtherSpare_"+parseInt(i+1)).css("background-color", "#ffffff"); 
//										   }
//										   else
//										   {
//											 $scope.dataSparePart[i].reqMotorKW = true; 
//										     $("#OtherSpare_"+parseInt(i+1)).css("background-color", "#ffff7f");   
//										   }
//										   if(validgriddata[i].presetTorque == "" || validgriddata[i].presetTorque == undefined || validgriddata[i].presetTorque == "NA")
//										   {
//											   $scope.dataSparePart[i].reqStatus = false; 
//										       $("#PresetTorqueSumit_"+parseInt(i+1)).css("background-color", "#ffffff"); 
//										   }
//										   else
//										   {
//											 $scope.dataSparePart[i].reqStatus = true; 
//										     $("#PresetTorqueSumit_"+parseInt(i+1)).css("background-color", "#ffff7f");   
//										   }*/
//										   if(validgriddata[i].motorSerial == "" || validgriddata[i].motorSerial == undefined || validgriddata[i].motorSerial == "NA")
//										   {
//											   $scope.dataSparePart[i].mtrsnosts = false; 
//										       $("#MotorSerial_"+parseInt(i+1)).css("background-color", "#ffffff"); 
//										   }
//										   else
//										   {
//											 $scope.dataSparePart[i].mtrsnosts = true; 
//										     $("#MotorSerial_"+parseInt(i+1)).css("background-color", "#ffff7f");   
//										   }
//										   if(validgriddata[i].motorType == "" || validgriddata[i].motorType == undefined || validgriddata[i].motorType == "NA")
//										   {
//											   $scope.dataSparePart[i].expSts = false; 
//										       $("#MotorType_"+parseInt(i+1)).css("background-color", "#ffffff"); 
//										   }
//										   else
//										   {
//											 $scope.dataSparePart[i].expSts = true; 
//										     $("#MotorType_"+parseInt(i+1)).css("background-color", "#ffff7f");   
//										   }
//										   if(validgriddata[i].motorKW == "" || validgriddata[i].motorKW == undefined || validgriddata[i].motorKW == "NA")
//										   {
//											   $scope.dataSparePart[i].mtrSprSts = false; 
//										       $("#MotorKW_"+parseInt(i+1)).css("background-color", "#ffffff"); 
//										   }
//										   else
//										   {
//											 $scope.dataSparePart[i].mtrSprSts = true; 
//										     $("#MotorKW_"+parseInt(i+1)).css("background-color", "#ffff7f");   
//										   }
//										   if(validgriddata[i].pole == "" || validgriddata[i].pole == undefined || validgriddata[i].pole == "NA")
//										   {
//											   $scope.dataSparePart[i].poleSprSts = false; 
//										       $("#Pole_"+parseInt(i+1)).css("background-color", "#ffffff"); 
//										   }
//										   else
//										   {
//											 $scope.dataSparePart[i].poleSprSts = true; 
//										     $("#Pole_"+parseInt(i+1)).css("background-color", "#ffff7f");   
//										   }
//										   if(validgriddata[i].voltage == "" || validgriddata[i].voltage == undefined || validgriddata[i].voltage == "NA")
//										   {
//											   $scope.dataSparePart[i].voltSprSts = false; 
//										       $("#Voltage_"+parseInt(i+1)).css("background-color", "#ffffff"); 
//										   }
//										   else
//										   {
//											 $scope.dataSparePart[i].voltSprSts = true; 
//										     $("#Voltage_"+parseInt(i+1)).css("background-color", "#ffff7f");   
//										   }
//										   if(validgriddata[i].hertz == "" || validgriddata[i].hertz == undefined || validgriddata[i].hertz == "NA")
//										   {
//											   $scope.dataSparePart[i].hzSprSts = false; 
//										       $("#Hertz_"+parseInt(i+1)).css("background-color", "#ffffff"); 
//										   }
//										   else
//										   {
//											 $scope.dataSparePart[i].hzSprSts = true; 
//										     $("#Hertz_"+parseInt(i+1)).css("background-color", "#ffff7f");   
//										   }
//										    if(validgriddata[i].rpm == "" || validgriddata[i].rpm == undefined || validgriddata[i].rpm == "NA")
//										   {
//											   $scope.dataSparePart[i].rpmSprSts = false; 
//										       $("#RPM_"+parseInt(i+1)).css("background-color", "#ffffff"); 
//										   }
//										   else
//										   {
//											 $scope.dataSparePart[i].rpmSprSts = true; 
//										     $("#RPM_"+parseInt(i+1)).css("background-color", "#ffff7f");   
//										   }
//										  
//									   }
							  
				}
				  
						  
					});
					});
			
		}
		
		$scope.techQueryTempGrid = function(Qtnmaster,form)
		{
			
			//alert(status);
			     form.$setPristine(true); 
			
			//$scope.addCase = " ";
			$("#newSelection").hide();
			$("#competitorReplace").hide();
			$("#sumitomoReplace").hide();
			$("#sparePart").hide();
			$("#techQuery").show();  
			$("#blogHideTech").hide(); 
			$("#remarksHideTech").hide(); 
			//$("#codeNotFound").hide();
      		//$("#dataNotFound").hide();
			//$('#qtnBtnTech-hide').hide(); 
			$scope.qtnBtnTech = '0';
			
			$timeout(function(){
					$.post("loadingcasessdatafortabclick.do",{qtnmaster:Qtnmaster,tab:5},function(json)
					{
						//alert(JSON.stringify(json));
				    //  alert("techQueryTempGrid");
				//alert(JSON.stringify(json['maincaseform']));
				//alert(JSON.stringify($scope.addCase.caseRef));
				var tab=parseInt(json['tab']);
				var gridVal = json['value'];
				var validdata = json['maincaseform'][0];
				var validgriddata = json['griddata'];
				
				if(gridVal==0)
				{
					//alert(JSON.stringify(json['description'][0]));
					  $scope.addCase=json['maincaseform'][0];
					  $scope.addDespTech=json['description'][0];
					  $indexTab5=1;
					  $scope.dataQuery=[{'id':$indexTab5,'gm':'0','model':'0','ambientTemp':'40','pole':'4','rpm':'1450','motorType':'NO','voltage':'200','phase':'3','quantity':'1','gearProduct':'CYCLO 6000','hertz':'50','basefreq':'1','protectionGrade': 'IP55','internationalStd': 'JIS','mtrEfficncyClass':'0','inverter':'1','motorBrake':'1','motorBrakeVolt':'1','conf':'0','mount':'0','mount2':'0',oshaftInc1:false,oshaftInc2:false,'ishaft':'0','jadapt':'0','oshaft':'0','oshafty':'0','oshafty2':'4','backStop':'0','rot':'0','hssRadialLoadKn':'0','hssRadialLoadMm':'0','hssAxialLoadKn':'0','sssRadialLoadKn':'0','sssRadialLoadMm':'0','sssAxialLoadKn':'0','dirHssAxial':'0','dirSssAxial':'0','presetTorqueRot':'0','terminalBox':'N33','cableEntry':'N3A','altitude':'0m'}];
                      $scope.stepsModelTech = [];
					  cusImageTech = new FormData();
					   $scope.addCase.currentTab = tab;
					   
					   var departmentSplit = json['maincaseform'][0].assigned;
										 var departmentSales = [];
										 if(departmentSplit == undefined || departmentSplit == "" || departmentSplit == "NA")
										 {
											 //alert("if");
											 $('#picturegallery').val("['']").trigger('chosen:updated');
											 $("#picturegallery").css("background-color", "#ffff7f");
										 }
										 else
										 {
											//alert(departmentSplit.length + " " + " else ");
											 for (var s = 0; s < departmentSplit.length; s++) {
									
														departmentSales.push(departmentSplit[s]);
														//alert("accessoriesSales"+accessoriesSales);
											}
											 $('#picturegallery').val(departmentSales).trigger('chosen:updated');
															$scope.addCase.assigned = departmentSales;
															$("#picturegallery").css("background-color", "#99ff99");
										 }
					  //$('.btn-hideTech').attr('disabled',false);
					  $('.btn-hideTech').removeClass('disabled');
							  //$('.Send-hideTech').removeClass('disabled');
					  $('.btn-discarTech').removeClass('disabled');
					  
					  /*$("#CustomerCode").css("background-color", "#ffff7f"); 
					  $("#ContactPerson").css("background-color", "#ffffff");
					  $("#Telephone").css("background-color", "#ffffff"); 
					  $("#Address").css("background-color", "#ffffff");*/
					  if(validdata.customerCode == "" || validdata.customerCode == undefined || validdata.customerCode == "NA")
									   {
										   $("#CustomerCode").css("background-color", "#ffff7f"); 
									   }
									   else
									   {
										  
										   $("#CustomerCode").css("background-color", "#99ff99");
									   }
									   if(validdata.contactPerson == "" || validdata.contactPerson == undefined || validdata.contactPerson == "NA")
									   {
										   $("#ContactPerson").css("background-color", "#ffffff"); 
									   }
									   else
									   {
										    
										   $("#ContactPerson").css("background-color", "#99ff99");
									   }
									   if(validdata.phone == "" || validdata.phone == undefined || validdata.phone == "NA")
									   {
										   $("#Telephone").css("background-color", "#ffffff"); 
									   }
									   else
									   {
										  
										   $("#Telephone").css("background-color", "#99ff99");
									   }
									   if(validdata.address == "" || validdata.address == undefined || validdata.address == "NA")
									   {
										   $("#Address").css("background-color", "#ffffff"); 
									   }
									   else
									   {
										    
										   $("#Address").css("background-color", "#99ff99");
									   }
									  /* if(validdata.createdBy == "" || validdata.createdBy == undefined || validdata.createdBy == "NA")
										 {
											$("#CreatedBy").css("background-color", "#ffff7f"); 
											//$scope.addCase.createdBy = "";
										 }
										 else
										 {
											$("#CreatedBy").css("background-color", "#99ff99");
											//$scope.addCase.createdBy = validdata.createdby;
										 }*/
					  
					  for(var i = 0; i<$scope.dataQuery.length; i++)
									   {
										   if($scope.dataQuery[i].gearMotor == "" || $scope.dataQuery[i].gearMotor == undefined || $scope.dataQuery[i].gearMotor == "NA")
										   {
											   
											   $scope.dataQuery[i].requiredStatus = false; 
										       $("#techGearMotor_"+parseInt(i+1)).css("background-color", "#ffffff"); 
										   }
										   else
										   {
											 $scope.dataQuery[i].requiredStatus = true; 
										     $("#techGearMotor_"+parseInt(i+1)).css("background-color", "#ffff7f");   
										   }
										   if($scope.dataQuery[i].othersPlz == "" || $scope.dataQuery[i].othersPlz == undefined || $scope.dataQuery[i].othersPlz == "NA")
										   {
											   $scope.dataQuery[i].reqOtherSts = false; 
										       $("#OthersPlzTech_"+parseInt(i+1)).css("background-color", "#ffffff"); 
										   }
										   else
										   {
											 $scope.dataQuery[i].reqOtherSts = true; 
										     $("#OthersPlzTech_"+parseInt(i+1)).css("background-color", "#ffff7f");   
										   }
										   if($scope.dataQuery[i].other == "" || $scope.dataQuery[i].other == undefined || $scope.dataQuery[i].other == "NA")
										   {
											   $scope.dataQuery[i].reqMotorKW = false; 
										       $("#OtherTech_"+parseInt(i+1)).css("background-color", "#ffffff"); 
										   }
										   else
										   {
											 $scope.dataQuery[i].reqMotorKW = true; 
										     $("#OtherTech_"+parseInt(i+1)).css("background-color", "#ffff7f");   
										   }
										   if($scope.dataQuery[i].presetTorque == "" || $scope.dataQuery[i].presetTorque == undefined || $scope.dataQuery[i].presetTorque == "NA")
										   {
											   $scope.dataQuery[i].reqStatus = false; 
										       $("#PresetTorqueTech_"+parseInt(i+1)).css("background-color", "#ffffff"); 
										   }
										   else
										   {
											 $scope.dataQuery[i].reqStatus = true; 
										     $("#PresetTorqueTech_"+parseInt(i+1)).css("background-color", "#ffff7f");   
										   }
										  
									   }
					   
					  $scope.qtnBtnTech = '0';
					   $scope.$apply();
				}
				else
				{
					//alert(JSON.stringify(validdata));
					  $scope.addCase=json['maincaseform'][0];
					  $scope.addDespTech=json['description'][0]; 
					  $scope.dataQuery=json['griddata'];
					  $scope.qtnBtnTech = '0';
					   $scope.addCase.currentTab = tab;
					   
					   var departmentSplit = json['maincaseform'][0].assigned;
										 var departmentSales = [];
										 if(departmentSplit == undefined || departmentSplit == "" || departmentSplit == "NA")
										 {
											 //alert("if");
											 $('#picturegallery').val("['']").trigger('chosen:updated');
											 $("#picturegallery").css("background-color", "#ffff7f");
										 }
										 else
										 {
											//alert(departmentSplit.length + " " + " else ");
											 for (var s = 0; s < departmentSplit.length; s++) {
									
														departmentSales.push(departmentSplit[s]);
														//alert("accessoriesSales"+accessoriesSales);
											}
											 $('#picturegallery').val(departmentSales).trigger('chosen:updated');
															$scope.addCase.assigned = departmentSales;
															$("#picturegallery").css("background-color", "#99ff99");
										 }
					  //$scope.stepsModelTech = json['maincaseform'][0].images.split(',');
					  $scope.$apply();
					   var getImageTech = json['maincaseform'][0].images;
								  // alert(getImage);
									 if(getImageTech!=null)
									   {
										   //alert(getImage + " " + 1);
										   var imgPrew = getImageTech.trim();
										   if(imgPrew==null || imgPrew=="" )
										   {
											  $scope.stepsModelTech = [];
											  $scope.$apply();
											  //$scope.dummyPhoto="";
					                          //$('#dummyPhoto').trigger('blur');
										   }
										   else
										   {
											   //alert(getImage + " " + 3);
											   $scope.stepsModelTech = getImageTech.split(',');
											   $scope.$apply();
										   }
									   }
									   else
									   {
										   //alert(getImage + " " + 4);
										    $scope.stepsModelTech = [];
										    $scope.$apply();
									   }
									   
									   
									   if(validdata.customerCode == "" || validdata.customerCode == undefined || validdata.customerCode == "NA")
									   {
										   $("#CustomerCode").css("background-color", "#ffff7f"); 
									   }
									   else
									   {
										  
										   $("#CustomerCode").css("background-color", "#99ff99");
									   }
									   if(validdata.contactPerson == "" || validdata.contactPerson == undefined || validdata.contactPerson == "NA")
									   {
										   $("#ContactPerson").css("background-color", "#ffffff"); 
									   }
									   else
									   {
										    
										   $("#ContactPerson").css("background-color", "#99ff99");
									   }
									   if(validdata.phone == "" || validdata.phone == undefined || validdata.phone == "NA")
									   {
										   $("#Telephone").css("background-color", "#ffffff"); 
									   }
									   else
									   {
										  
										   $("#Telephone").css("background-color", "#99ff99");
									   }
									   if(validdata.address == "" || validdata.address == undefined || validdata.address == "NA")
									   {
										   $("#Address").css("background-color", "#ffffff"); 
									   }
									   else
									   {
										    
										   $("#Address").css("background-color", "#99ff99");
									   }
									  /* if(validdata.createdBy == "" || validdata.createdBy == undefined || validdata.createdBy == "NA")
										 {
											$("#CreatedBy").css("background-color", "#ffff7f"); 
											//$scope.addCase.createdBy = "";
										 }
										 else
										 {
											$("#CreatedBy").css("background-color", "#99ff99");
											//$scope.addCase.createdBy = validdata.createdby;
										 }
									   */
									   for(var i = 0; i<validgriddata.length; i++)
									   {
										   if(validgriddata[i].gearMotor == "" || validgriddata[i].gearMotor == undefined || validgriddata[i].gearMotor == "NA")
										   {
											   $scope.dataQuery[i].requiredStatus = false; 
										       $("#techGearMotor_"+parseInt(i+1)).css("background-color", "#ffffff"); 
										   }
										   else
										   {
											 $scope.dataQuery[i].requiredStatus = true; 
										     $("#techGearMotor_"+parseInt(i+1)).css("background-color", "#ffff7f");   
										   }
										   if(validgriddata[i].othersPlz == "" || validgriddata[i].othersPlz == undefined || validgriddata[i].othersPlz == "NA")
										   {
											   $scope.dataQuery[i].reqOtherSts = false; 
										       $("#OthersPlzTech_"+parseInt(i+1)).css("background-color", "#ffffff"); 
										   }
										   else
										   {
											 $scope.dataQuery[i].reqOtherSts = true; 
										     $("#OthersPlzTech_"+parseInt(i+1)).css("background-color", "#ffff7f");   
										   }
										   if(validgriddata[i].other == "" || validgriddata[i].other == undefined || validgriddata[i].other == "NA")
										   {
											   $scope.dataQuery[i].reqMotorKW = false; 
										       $("#OtherTech_"+parseInt(i+1)).css("background-color", "#ffffff"); 
										   }
										   else
										   {
											 $scope.dataQuery[i].reqMotorKW = true; 
										     $("#OtherTech_"+parseInt(i+1)).css("background-color", "#ffff7f");   
										   }
										   if(validgriddata[i].presetTorque == "" || validgriddata[i].presetTorque == undefined || validgriddata[i].presetTorque == "NA")
										   {
											   $scope.dataQuery[i].reqStatus = false; 
										       $("#PresetTorqueTech_"+parseInt(i+1)).css("background-color", "#ffffff"); 
										   }
										   else
										   {
											 $scope.dataQuery[i].reqStatus = true; 
										     $("#PresetTorqueTech_"+parseInt(i+1)).css("background-color", "#ffff7f");   
										   }
										  
									   }
							  
				}
				 
						  
					});
				});
			
		};

	 //========New Selection Form Submit=======//   
			
	var newSelectTabData = [];
	var newSelectTabDescp = [];
	var newSelect = [];
	var newSelectImg = [];
//alert(JSON.stringify($scope.formData));
  $scope.newSelectionFormSubmit = function(addCase,form,formData,form2,addDesp)
		{
         //alert("Main Data");
	       //alert(JSON.stringify(addCase));
		   //alert(JSON.stringify($scope.dataField));
	       //$scope.submitted = true;
		     if($scope.caseManagementForm.$valid)
			    {
					//alert($scope.newSelectionForm.$valid);
					//$scope.submitted = true;
					if($scope.newSelectionForm.$valid)
					{
						
						//alert(JSON.stringify(addDesp));
						newSelectTabData = [];
			    	    $scope.dataField.forEach(function(formData)
								{ 
									 
									//alert(JSON.stringify(formData));
								   newSelectTabData.push(angular.toJson(formData));	 
								});
						newSelectImg = [];
			    	    $scope.stepsModel.forEach(function(step)
								{ 
									 
									//alert($scope.docFile);
								   newSelectImg.push(angular.toJson(step));	 
								});
								/*newSelect = [];
								$scope.getChkIdArr.forEach(function(chkName)
								{ 
									 
									alert($scope.getChkIdArr);
								   newSelect.push(angular.toJson(chkName));	 
								});*/
								//alert(JSON.stringify(newSelectTabData));
			    	    cusImage.append("formData",angular.toJson(addCase));
						cusImage.append("gridData",angular.toJson(newSelectTabData));
						cusImage.append("fieldData",angular.toJson(addDesp));
						//cusImage.append("chkBox",newSelect);
						cusImage.append("motorFile",newSelectImg);
						
						//alert(JSON.stringify(cusImage));
						 $('.btn-hideNew').addClass('active2');
						 $('.Send-hideNew').addClass('active2');
						 $('.btn-discardNew').addClass('active2');
						
						$.ajax({
						       url         : "/SCA-360/newcasemaindataformsubmit.do",
						       data        : cusImage,
						       contentType : false,
						       processData : false,
						       type        : 'POST'
						   }).success(function(data, status){
							   //alert(data);
								if(data==true)
									{
										swal("", 'Saved Successfully!' , "success");
										$scope.addCase = angular.copy($scope.master);
							            $scope.addDesp = angular.copy($scope.master);
										$scope.remarks = "";
								        $indexTab1=1;
							          $scope.dataField=[{'id':$indexTab1,'gm':'0','model':'0','ambientTemp':'40','rpm':'1450','motorType':'NO','voltage':'200','pole':'4','phase':'3','quantity':'1','gearProduct':'CYCLO 6000','hertz':'50','basefreq':'1','protectionGrade': 'IP55','internationalStd': 'JIS','mtrEfficncyClass':'0','inverter':'1','motorBrake':'1','motorBrakeVolt':'1','conf':'0','mount':'0','oshaft':'0','mount2':'0',oshaftInc1:false,oshaftInc2:false,'ishaft':'0','jadapt':'0','oshafty':'0','oshafty2':'4','backStop':'0','rot':'0','basePlate':'0','hssRadialLoadKn':'0','hssRadialLoadMm':'0','hssAxialLoadKn':'0','sssRadialLoadKn':'0','sssRadialLoadMm':'0','sssAxialLoadKn':'0','dirHssAxial':'0','dirSssAxial':'0','presetTorqueRot':'0','terminalBox':'N33','cableEntry':'N3A','altitude':'0m'}];
									    $scope.stepsModel = [];
								        form.$setPristine(true); 
										form2.$setPristine(true);
										cusImage = new FormData();
										if($rootScope.Salesreportflag == "true")
										{
											$rootScope.onloadSales="true";
											$state.go('app.salesreport');
											
											$scope.$apply();

										}
										else
										{
											$.post("loadingsequenceNember.do",function(json)
											{
										
												// alert(JSON.stringify(json['maincaseform'][0])); 
												    $scope.addCase=json['maincaseform'][0];
                                                    $scope.addDesp=json['description'][0];
													
													 var departmentSplit = json['maincaseform'][0].assigned;
													 var departmentSales = [];
													 if(departmentSplit == undefined || departmentSplit == "" || departmentSplit == "NA")
													 {
														 //alert("if");
														 $('#picturegallery').val("['']").trigger('chosen:updated');
														 $("#picturegallery").css("background-color", "#ffff7f");
													 }
													 else
													 {
														//alert(departmentSplit.length + " " + " else ");
														 for (var s = 0; s < departmentSplit.length; s++) {
												
																	departmentSales.push(departmentSplit[s]);
																	//alert("accessoriesSales"+accessoriesSales);
														}
														 $('#picturegallery').val(departmentSales).trigger('chosen:updated');
																		$scope.addCase.assigned = departmentSales;
																		$("#picturegallery").css("background-color", "#99ff99");
													 }
													//$rootScope.newcase='';
													$scope.$apply();
											});
										}
										
										
										
											
											$rootScope.newcase = '';
											$rootScope.caseCustomerRef = '';
											$rootScope.caseCustomer = '';
											$rootScope.tab = '';
											$rootScope.actionTab='';
											$rootScope.action = "";
											$rootScope.caseid = "";
											
											$scope.QtnBtnNew = '0';
											$scope.isDisabled = false;
											$scope.isDisabled2 = false;
											$scope.isDisabled3 = false;
										//$scope.getCaseData(addCase,form);	
                                         $("#remarksHide").hide();
                                         $("#blogHide").hide();
										 $("#QuotationTypeBlock").hide();
											$scope.isDisabledQtn = false;
											$scope.isDisabledQtn2 = false;
                                        // $('.btn-hideNew').attr('disabled',false);
						                 //$('.Send-hideNew').attr('disabled',false);
										 $('.btn-hideNew').removeClass('active2');
										 $('.Send-hideNew').removeClass('active2');
										 $('.btn-discardNew').removeClass('active2');
										 
										$('#menu1').removeClass('active2');
										$('#menu2').removeClass('active2');
										$('#menu3').removeClass('active2');
										$('#menu4').removeClass('active2');
										$('#menu5').removeClass('active2');
										 
										 $("#CustomerCode").css("background-color", "#ffff7f"); 
										 $("#ContactPerson").css("background-color", "#ffffff");
										 $("#Telephone").css("background-color", "#ffffff"); 
										 $("#Address").css("background-color", "#ffffff");
										 $("#CreatedBy").css("background-color", "#ffff7f"); 
										//$scope.addBlog();
										$scope.$apply();
										
										
										
									}
								else
									{
									   swal("Oops sorry...", "Something went wrong!", "error");
									    $('.btn-hideNew').addClass('active2');
										$('.Send-hideNew').addClass('active2');
										$('.btn-discardNew').addClass('active2');
									}
							    
							   
				        	   
				           });
					}
					else
					{
						var field = null, firstError = null;
						for (field in form2) 
						{
							if (field[0] != '$') 
							{
								if (firstError === null && !form2[field].$valid) 
								{
									firstError = form2[field].$name;
								}
								if (form2[field].$pristine) 
								{
									form2[field].$dirty = true;
								}
							}	
						}
					}
			    }
		     else
				{
					
					var field = null, firstError = null;
						for (field in form) 
						{
							if (field[0] != '$') 
							{
								if (firstError === null && !form[field].$valid) 
								{
									firstError = form[field].$name;
								}
								if (form[field].$pristine) 
								{
									form[field].$dirty = true;
								}
							}	
						}
				}
		}
		
		$scope.newSelectionTempFormSubmit = function(addCase,form,formData,form2,addDesp)
		{
            //alert("Temp Data");
	      
		  //alert(JSON.stringify(addCase.customerCode));
	       //$scope.submitted = true;
		     if($scope.caseManagementForm.$valid)
			    {
					//alert($scope.newSelectionForm.$valid);
					//$scope.submitted = true;
					if($scope.newSelectionForm.$valid)
					{
						
						//alert(JSON.stringify(addCase));
						newSelectTabData = [];
			    	    $scope.dataField.forEach(function(formData)
								{ 
									 
									//alert(JSON.stringify(formData));
								   newSelectTabData.push(angular.toJson(formData));	 
								});
						newSelectImg = [];
			    	    $scope.stepsModel.forEach(function(step)
								{ 
									 
									//alert($scope.docFile);
								   newSelectImg.push(angular.toJson(step));	 
								});
						/*newSelect = [];
								$scope.getChkIdArr.forEach(function(chkName)
								{ 
									 
									//alert($scope.getChkIdArr);
								   newSelect.push(angular.toJson(chkName));	 
								});*/
								//alert(JSON.stringify(newSelect));
			    	    cusImage.append("formData",angular.toJson(addCase));
						cusImage.append("gridData",angular.toJson(newSelectTabData));
						cusImage.append("fieldData",angular.toJson(addDesp));
						//cusImage.append("chkBox",newSelect);
						cusImage.append("motorFile",newSelectImg);
						 $('.btn-hideNew').addClass('active2');
						 $('.Send-hideNew').addClass('active2');
						 $('.btn-discardNew').addClass('active2');
						 //alert(JSON.stringify(addCase));
						 
						 swal({
							  title: "Are you sure?",
							  text: "Your File Will Be Save As Draft!",
							  type: "warning",
							  showCancelButton: true,
							  confirmButtonClass: "btn-danger",
							  confirmButtonText: "Yes, Save it!",
							  closeOnConfirm: false
							},
							
							function(){
								
							 
							   $.ajax({
									   url         : "/SCA-360/newcasetempformsubmit.do",
									   data        : cusImage,
									   contentType : false,
									   processData : false,
									   type        : 'POST'
								   }).success(function(data, status){
									  //alert(status);
										if(data==true)
											{
												swal("", "Draft Saved Successfully!", "success");
												$scope.addCase = angular.copy($scope.master);
												$scope.addDesp = angular.copy($scope.master);
												$scope.remarks = "";
												$indexTab1=1;
											  $scope.dataField=[{'id':$indexTab1,'gm':'0','model':'0','ambientTemp':'40','rpm':'1450','motorType':'NO','voltage':'200','pole':'4','phase':'3','quantity':'1','gearProduct':'CYCLO 6000','hertz':'50','basefreq':'1','protectionGrade': 'IP55','internationalStd': 'JIS','mtrEfficncyClass':'0','inverter':'1','motorBrake':'1','motorBrakeVolt':'1','conf':'0','mount':'0','oshaft':'0','mount2':'0',oshaftInc1:false,oshaftInc2:false,'ishaft':'0','jadapt':'0','oshafty':'0','oshafty2':'4','backStop':'0','rot':'0','basePlate':'0','hssRadialLoadKn':'0','hssRadialLoadMm':'0','hssAxialLoadKn':'0','sssRadialLoadKn':'0','sssRadialLoadMm':'0','sssAxialLoadKn':'0','dirHssAxial':'0','dirSssAxial':'0','presetTorqueRot':'0','terminalBox':'N33','cableEntry':'N3A','altitude':'0m'}];
												$scope.stepsModel = [];
												form.$setPristine(true); 
												form2.$setPristine(true);
												$scope.isDisabled = false;
												$scope.isDisabled2 = false;
												$scope.isDisabled3 = false;
												cusImage = new FormData();	
												//alert("naveena"+$rootScope.Salesreportflag);
												if($rootScope.Salesreportflag == "true")
												{
													
													$state.go('app.salesreport');
													$scope.$apply();
		
												}
												else
												{
													$scope.getCaseData(addCase,form);
												}
												
												$('#picturegallery').val("['']").trigger('chosen:updated');
											    $("#picturegallery").css("background-color", "#ffff7f");
											  
											   $scope.$apply();	
												 $('.btn-hideNew').removeClass('active2');
												 $('.Send-hideNew').removeClass('active2');
												 $('.btn-discardNew').removeClass('active2');
												 
												
											}
										else
											{
											   swal("Oops sorry...", "Something went wrong!", "error");
												$('.btn-hideNew').addClass('active2');
												$('.Send-hideNew').addClass('active2');
												$('.btn-discardNew').addClass('active2');
											}
										
									   
									   
								   }); 
							});
							 $('.btn-hideNew').removeClass('active2');
							 $('.Send-hideNew').removeClass('active2');
							 $('.btn-discardNew').removeClass('active2');
						 
						
					}
					else
					{
						var field = null, firstError = null;
						for (field in form2) 
						{
							if (field[0] != '$') 
							{
								if (firstError === null && !form2[field].$valid) 
								{
									firstError = form2[field].$name;
								}
								if (form2[field].$pristine) 
								{
									form2[field].$dirty = true;
								}
							}	
						}
					}
			    }
		     else
				{
					
					var field = null, firstError = null;
						for (field in form) 
						{
							if (field[0] != '$') 
							{
								if (firstError === null && !form[field].$valid) 
								{
									firstError = form[field].$name;
								}
								if (form[field].$pristine) 
								{
									form[field].$dirty = true;
								}
							}	
						}
				}
		}
		
		//=======New Selection Reset Form============//
		  $scope.resetNewSelectionForm = function(addCase,form,formData,form2,addDesp)
		  {
			  
			 			newSelectTabData = [];
			    	    $scope.dataField.forEach(function(formData)
								{ 
									 
									//alert(JSON.stringify(formData));
								   newSelectTabData.push(angular.toJson(formData));	 
								});
						newSelectImg = [];
			    	    $scope.stepsModel.forEach(function(step)
								{ 
									 
									//alert($scope.docFile);
								   newSelectImg.push(angular.toJson(step));	 
								});
			    cusImage.append("formData",angular.toJson(addCase));
				cusImage.append("gridData",angular.toJson(newSelectTabData));
				cusImage.append("fieldData",angular.toJson(addDesp));
				cusImage.append("motorFile",newSelectImg);
				
				//alert(JSON.stringify(cusImage));
				//$('.btn-hideNew').attr('disabled',true);
				//$('.Send-hideNew').attr('disabled',true);
				$('.btn-hideNew').addClass('active2');
				$('.Send-hideNew').addClass('active2');
				$('.btn-discardNew').addClass('active2');
				 swal({
					  title: "Are you sure?",
					  text: "Your will not be able to recover this Draft file!",
					  type: "warning",
					  showCancelButton: true,
					  confirmButtonClass: "btn-danger",
					  confirmButtonText: "Yes, delete it!",
					  closeOnConfirm: false
					},
					function(){
					 
							  $.ajax({
							   url         : "/SCA-360/deletetempdatainnewcasetemp.do",
							   data        : cusImage,
							   contentType : false,
							   processData : false,
							   type        : 'POST'
						   }).success(function(data, status){
							 // alert(data);
								if(data==true)
									{
										 swal("Deleted!", "Draft Discarded Successfully.", "success");
										
										$scope.addCase = angular.copy($scope.master);
										$scope.addDesp = angular.copy($scope.master);
										//$scope.remarks = "";
										$indexTab1=1;
										$scope.dataField=[{'id':$indexTab1,'gm':'0','model':'0','ambientTemp':'40','motorType':'NO','rpm':'1450','voltage':'200','pole':'4','phase':'3','quantity':'1','gearProduct':'CYCLO 6000','hertz':'50','basefreq':'1','protectionGrade': 'IP55','internationalStd': 'JIS','mtrEfficncyClass':'0','inverter':'1','motorBrake':'1','motorBrakeVolt':'1','conf':'0','mount':'0','oshaft':'0','mount2':'0',oshaftInc1:false,oshaftInc2:false,'ishaft':'0','jadapt':'0','oshafty':'0','oshafty2':'4','backStop':'0','rot':'0','basePlate':'0','hssRadialLoadKn':'0','hssRadialLoadMm':'0','hssAxialLoadKn':'0','sssRadialLoadKn':'0','sssRadialLoadMm':'0','sssAxialLoadKn':'0','dirHssAxial':'0','dirSssAxial':'0','presetTorqueRot':'0','terminalBox':'N33','cableEntry':'N3A','altitude':'0m'}];
										$scope.stepsModel = [];
										cusImage = new FormData();
										form.$setPristine(true); 
										form2.$setPristine(true);
										$.post("loadingsequenceNember.do",function(json)
										{
											$scope.addCase=json['maincaseform'][0];
											$scope.addDesp=json['description'][0]; 
											//alert(JSON.stringify(json['description'][0]));
											 var departmentSplit = json['maincaseform'][0].assigned;
											 var departmentSales = [];
											 if(departmentSplit == undefined || departmentSplit == "" || departmentSplit == "NA")
											 {
												 //alert("if");
												 $('#picturegallery').val("['']").trigger('chosen:updated');
												 $("#picturegallery").css("background-color", "#ffff7f");
											 }
											 else
											 {
												//alert(departmentSplit.length + " " + " else ");
												 for (var s = 0; s < departmentSplit.length; s++) {
										
															departmentSales.push(departmentSplit[s]);
															//alert("accessoriesSales"+accessoriesSales);
												}
												 $('#picturegallery').val(departmentSales).trigger('chosen:updated');
																$scope.addCase.assigned = departmentSales;
																$("#picturegallery").css("background-color", "#99ff99");
											 }
											$scope.$apply();
										});
										$rootScope.newcase = '';
										$rootScope.caseCustomerRef = '';
										$rootScope.caseCustomer = '';
										$rootScope.tab = '';
										$rootScope.actionTab='';
										$scope.isDisabled = false;
										$scope.isDisabled2 = false;
										$scope.isDisabled3 = false;
										//$scope.getCaseData(addCase,form);
										//$('.btn-hideNew').attr('disabled',false);
//										$('.Send-hideNew').attr('disabled',false);
										 $('.btn-hideNew').removeClass('active2');
										 $('.Send-hideNew').removeClass('active2');
										 $('.btn-discardNew').removeClass('active2');
										//$scope.addBlog();
										$("#CustomerCode").css("background-color", "#ffff7f"); 
										$("#ContactPerson").css("background-color", "#ffffff");
										$("#Telephone").css("background-color", "#ffffff"); 
										$("#Address").css("background-color", "#ffffff");
										$("#CreatedBy").css("background-color", "#ffff7f"); 
										$scope.$apply();
										
										
										
										
								  }
						   });
						   
					});
					$('.btn-hideNew').removeClass('active2');
					$('.Send-hideNew').removeClass('active2');
					$('.btn-discardNew').removeClass('active2');
				
				
					
		  };





	
	
//=======Competitor Replace form submit=============//
			
	var compReplaceTabData = [];
	var compReplaceTabDescp = [];
	var compReplaceImgData = [];
	var compReplace = new Object();
//alert(JSON.stringify($scope.formData));

  $scope.compReplaceFormSubmit = function(addCase,form,competitorFormData,form2,addDespComp)
		{
	       //alert(JSON.stringify(addCase));
		   //alert(JSON.stringify($scope.dataField));
	       //$scope.submitted = true;
		     if($scope.caseManagementForm.$valid)
			    {
					//alert($scope.competitorReplaceForm.$valid);
					//$scope.submitted = true;
					if($scope.competitorReplaceForm.$valid)
					{
						
						//alert(JSON.stringify(addDesp));
						compReplaceTabData = [];
					$scope.dataCompetitor.forEach(function(competitorFormData)
					{ 
						//alert(JSON.stringify(formData)); 
					   compReplaceTabData.push(angular.toJson(competitorFormData));	 
					});
					    compReplaceImgData = [];
					$scope.stepsModelComp.forEach(function(stepComp)
					{ 
						//alert(JSON.stringify(formData)); 
					   compReplaceImgData.push(angular.toJson(stepComp));	 
					});
			        cusImageComp.append("formData",angular.toJson(addCase));
					cusImageComp.append("gridData",angular.toJson(compReplaceTabData));
					cusImageComp.append("fieldData",angular.toJson(addDespComp));
					cusImageComp.append("motorFile",compReplaceImgData);
					//alert(JSON.stringify(cusImageComp));
					//$('.btn-hideComp').attr('disabled',true);
					//$('.Send-hideComp').attr('disabled',true);
					$('.btn-hideComp').addClass('active2');
					$('.Send-hideComp').addClass('active2');
					$('.btn-discarComp').addClass('active2');
					 $.ajax({
					       url         : "/SCA-360/newcasemaindataformsubmit.do",
					       data        : cusImageComp,
					       contentType : false,
					       processData : false,
					       type        : 'POST'
					   }).success(function(data, status){
						   if(data==true)
									{
										swal("", 'Saved Successfully!' , "success");
										$scope.addCase = angular.copy($scope.master);
							            $scope.addDespComp = angular.copy($scope.master);
										$scope.remarksComp = "";
								        $indexTab2=1;
							          $scope.dataCompetitor=[{'id':$indexTab2,'gm':'0','model':'0','ambientTemp':'40','rpm':'1450','motorType':'NO','voltage':'200','pole':'4','phase':'3','quantity':'1','gearProduct':'CYCLO 6000','hertz':'50','basefreq':'1','protectionGrade': 'IP55','internationalStd': 'JIS','mtrEfficncyClass':'0','inverter':'1','motorBrake':'1','motorBrakeVolt':'1','dimension':'0','conf':'0','mount':'0','ishaft':'0','jadapt':'0','oshaft':'0','mount2':'0',oshaftInc1:false,oshaftInc2:false,'oshafty':'0','oshafty2':'4','backStop':'0','rot':'0','hssRadialLoadKn':'0','hssRadialLoadMm':'0','hssAxialLoadKn':'0','sssRadialLoadKn':'0','sssRadialLoadMm':'0','sssAxialLoadKn':'0','dirHssAxial':'0','dirSssAxial':'0','presetTorqueRot':'0','terminalBox':'N33','cableEntry':'N3A','altitude':'0m'}];
                                         $scope.stepsModelComp = [];
										 cusImageComp = new FormData(); 
								        form.$setPristine(true); 
										form2.$setPristine(true);
										$.post("loadingsequenceNember.do",function(json)
											{
												   $scope.addCase=json['maincaseform'][0];
                                                   $scope.addDespComp=json['description'][0]; 
												    var departmentSplit = json['maincaseform'][0].assigned;
													 var departmentSales = [];
													 if(departmentSplit == undefined || departmentSplit == "" || departmentSplit == "NA")
													 {
														 //alert("if");
														 $('#picturegallery').val("['']").trigger('chosen:updated');
														 $("#picturegallery").css("background-color", "#ffff7f");
													 }
													 else
													 {
														//alert(departmentSplit.length + " " + " else ");
														 for (var s = 0; s < departmentSplit.length; s++) {
												
																	departmentSales.push(departmentSplit[s]);
																	//alert("accessoriesSales"+accessoriesSales);
														}
														 $('#picturegallery').val(departmentSales).trigger('chosen:updated');
																		$scope.addCase.assigned = departmentSales;
																		$("#picturegallery").css("background-color", "#99ff99");
													 }
													$scope.$apply();
											});
									    $rootScope.newcase = '';
										$rootScope.caseCustomerRef = '';
										$rootScope.caseCustomer = '';
										$rootScope.tab = '';
										$rootScope.actionTab='';
										$rootScope.action = "";
										$rootScope.caseid = "";
										$scope.qtnBtnComp = '0';
										$scope.isDisabled = false;
										$scope.isDisabled2 = false;
										$scope.isDisabled3 = false;
										//$scope.getCaseData(addCase,form);
										$("#remarksHideComp").hide();
                                         $("#blogHideComp").hide();
										 $("#QuotationTypeBlock").hide();
											$scope.isDisabledQtn = false;
											$scope.isDisabledQtn2 = false;
                                         //$('.btn-hideComp').attr('disabled',false);
					                    //$('.Send-hideComp').attr('disabled',false);
										 $('.btn-hideComp').removeClass('active2');
										 $('.Send-hideComp').removeClass('active2');
										 $('.btn-discarComp').removeClass('active2');
										 
										 $('#menu1').removeClass('active2');
										 $('#menu2').removeClass('active2');
										 $('#menu3').removeClass('active2');
										 $('#menu4').removeClass('active2');
										 $('#menu5').removeClass('active2');
										 
										 $("#CustomerCode").css("background-color", "#ffff7f"); 
										 $("#ContactPerson").css("background-color", "#ffffff");
										 $("#Telephone").css("background-color", "#ffffff"); 
										 $("#Address").css("background-color", "#ffffff");
										 $("#CreatedBy").css("background-color", "#ffff7f"); 
										$scope.$apply();
										//alert(JSON.stringify( $scope.dataField));
										
									}
								else
									{
									   swal("Oops sorry...", "Something went wrong!", "error");
									    $('.btn-hideComp').addClass('active2');
										$('.Send-hideComp').addClass('active2');
										$('.btn-discarComp').addClass('active2');
									}
			        	   
			           });
					}
					else
					{
						var field = null, firstError = null;
						for (field in form2) 
						{
							if (field[0] != '$') 
							{
								if (firstError === null && !form2[field].$valid) 
								{
									firstError = form2[field].$name;
								}
								if (form2[field].$pristine) 
								{
									form2[field].$dirty = true;
								}
							}	
						}
					}
			    }
		     else
				{
					
					var field = null, firstError = null;
						for (field in form) 
						{
							if (field[0] != '$') 
							{
								if (firstError === null && !form[field].$valid) 
								{
									firstError = form[field].$name;
								}
								if (form[field].$pristine) 
								{
									form[field].$dirty = true;
								}
							}	
						}
				}
		}
  $scope.compReplaceTempFormSubmit = function(addCase,form,competitorFormData,form2,addDespComp)
		{
	       //alert(JSON.stringify(addCase));
		   //alert(JSON.stringify($scope.dataField));
	       //$scope.submitted = true;
		     if($scope.caseManagementForm.$valid)
			    {
					//alert($scope.competitorReplaceForm.$valid);
					//$scope.submitted = true;
					if($scope.competitorReplaceForm.$valid)
					{
						
						//alert(JSON.stringify(addCase));
						compReplaceTabData = [];
						$scope.dataCompetitor.forEach(function(competitorFormData)
						{ 
							
						   compReplaceTabData.push(angular.toJson(competitorFormData));	 
						   //alert(JSON.stringify(compReplaceTabData)); 
						});
			            compReplaceImgData = [];
						$scope.stepsModelComp.forEach(function(stepComp)
						{ 
							//alert(JSON.stringify(formData)); 
						   compReplaceImgData.push(angular.toJson(stepComp));	 
						});
						cusImageComp.append("formData",angular.toJson(addCase));
						cusImageComp.append("gridData",angular.toJson(compReplaceTabData));
						cusImageComp.append("fieldData",angular.toJson(addDespComp));
						cusImageComp.append("motorFile",compReplaceImgData);
						
					     //alert(JSON.stringify(compReplaceTabData));
					    $('.btn-hideComp').addClass('active2');
						$('.Send-hideComp').addClass('active2');
						$('.btn-discarComp').addClass('active2');
						
						swal({
							  title: "Are you sure?",
							  text: "Your File Will Be Save As Draft!",
							  type: "warning",
							  showCancelButton: true,
							  confirmButtonClass: "btn-danger",
							  confirmButtonText: "Yes, Save it!",
							  closeOnConfirm: false
							},
							
							function(){
								
							 
							  $.ajax({
								   url         : "/SCA-360/newcasetempformsubmit.do",
								   data        : cusImageComp,
								   contentType : false,
								   processData : false,
								   type        : 'POST'
							   }).success(function(data, status){
								   if(data==true)
											{
												
												//$scope.remarksComp = "";
												//$scope.addBlogComp();
												//$scope.getCaseData();
											  swal("", "Draft Saved Successfully!", "success");
												$scope.addCase = angular.copy($scope.master);
												$scope.addDespComp = angular.copy($scope.master);
												$scope.remarksComp = "";
												$indexTab2=1;
											  $scope.dataCompetitor=[{'id':$indexTab2,'gm':'0','model':'0','ambientTemp':'40','rpm':'1450','motorType':'NO','voltage':'200','pole':'4','phase':'3','quantity':'1','gearProduct':'CYCLO 6000','hertz':'50','basefreq':'1','protectionGrade': 'IP55','internationalStd': 'JIS','mtrEfficncyClass':'0','inverter':'1','motorBrake':'1','motorBrakeVolt':'1','dimension':'0','conf':'0','mount':'0','ishaft':'0','jadapt':'0','oshaft':'0','mount2':'0',oshaftInc1:false,oshaftInc2:false,'oshafty':'0','oshafty2':'4','backStop':'0','rot':'0','hssRadialLoadKn':'0','hssRadialLoadMm':'0','hssAxialLoadKn':'0','sssRadialLoadKn':'0','sssRadialLoadMm':'0','sssAxialLoadKn':'0','dirHssAxial':'0','dirSssAxial':'0','presetTorqueRot':'0','terminalBox':'N33','cableEntry':'N3A','altitude':'0m'}];
												 $scope.stepsModelComp = [];
												form.$setPristine(true); 
												form2.$setPristine(true);
												$scope.isDisabled = false;
												$scope.isDisabled2 = false;
												$scope.isDisabled3 = false;
												cusImageComp = new FormData(); 
												$scope.getCaseData(addCase,form);
												$('.btn-hideComp').removeClass('active2');
												$('.Send-hideComp').removeClass('active2');
												$('.btn-discarComp').removeClass('active2');
												$('#picturegallery').val("['']").trigger('chosen:updated');
											    $("#picturegallery").css("background-color", "#ffff7f");
												 
												$scope.$apply();
												
												
											}
										else
											{
											   swal("Oops sorry...", "Something went wrong!", "error");
											  $('.btn-hideComp').addClass('active2');
											  $('.Send-hideComp').addClass('active2');
											  $('.btn-discarComp').addClass('active2');
											}
								   
							   });
							});
							 $('.btn-hideComp').removeClass('active2');
							 $('.Send-hideComp').removeClass('active2');
							 $('.btn-discarComp').removeClass('active2');
					   
					 
					}
					else
					{
						var field = null, firstError = null;
						for (field in form2) 
						{
							if (field[0] != '$') 
							{
								if (firstError === null && !form2[field].$valid) 
								{
									firstError = form2[field].$name;
								}
								if (form2[field].$pristine) 
								{
									form2[field].$dirty = true;
								}
							}	
						}
					}
			    }
		     else
				{
					
					var field = null, firstError = null;
						for (field in form) 
						{
							if (field[0] != '$') 
							{
								if (firstError === null && !form[field].$valid) 
								{
									firstError = form[field].$name;
								}
								if (form[field].$pristine) 
								{
									form[field].$dirty = true;
								}
							}	
						}
				}
		};
		//=======Comp Form Reset===========//
		  $scope.resetCompReplaceForm = function(addCase,form,competitorFormData,form2,addDespComp)
		  {
			         		compReplaceTabData = [];
					$scope.dataCompetitor.forEach(function(competitorFormData)
					{ 
						//alert(JSON.stringify(formData)); 
					   compReplaceTabData.push(angular.toJson(competitorFormData));	 
					});
					    compReplaceImgData = [];
					$scope.stepsModelComp.forEach(function(stepComp)
					{ 
						//alert(JSON.stringify(formData)); 
					   compReplaceImgData.push(angular.toJson(stepComp));	 
					});
					    cusImageComp.append("formData",angular.toJson(addCase));
						cusImageComp.append("gridData",angular.toJson(compReplaceTabData));
						cusImageComp.append("fieldData",angular.toJson(addDespComp));
						cusImageComp.append("motorFile",compReplaceImgData);
						
					     //alert(JSON.stringify(compReplaceTabData));
					$('.btn-hideComp').addClass('active2');
					$('.Send-hideComp').addClass('active2');
					$('.btn-discarComp').addClass('active2');
					swal({
					  title: "Are you sure?",
					  text: "Your will not be able to recover this Draft file!",
					  type: "warning",
					  showCancelButton: true,
					  confirmButtonClass: "btn-danger",
					  confirmButtonText: "Yes, delete it!",
					  closeOnConfirm: false
					},
					function(){
					 
							  $.ajax({
					       url         : "/SCA-360/deletetempdatainnewcasetemp.do",
					       data        : cusImageComp,
					       contentType : false,
					       processData : false,
					       type        : 'POST'
					   }).success(function(data, status){
						   if(data==true)
									{
										
										 swal("Deleted!", "Draft Discarded Successfully.", "success");
										$scope.addCase = angular.copy($scope.master);
							            $scope.addDespComp = angular.copy($scope.master);
										//$scope.remarksComp = "";
								        $indexTab2=1;
							          $scope.dataCompetitor=[{'id':$indexTab2,'gm':'0','model':'0','ambientTemp':'40','rpm':'1450','motorType':'NO','voltage':'200','pole':'4','phase':'3','quantity':'1','gearProduct':'CYCLO 6000','hertz':'50','basefreq':'1','protectionGrade': 'IP55','internationalStd': 'JIS','mtrEfficncyClass':'0','inverter':'1','motorBrake':'1','motorBrakeVolt':'1','dimension':'0','conf':'0','mount':'0','ishaft':'0','jadapt':'0','oshaft':'0','mount2':'0',oshaftInc1:false,oshaftInc2:false,'oshafty':'0','oshafty2':'4','backStop':'0','rot':'0','hssRadialLoadKn':'0','hssRadialLoadMm':'0','hssAxialLoadKn':'0','sssRadialLoadKn':'0','sssRadialLoadMm':'0','sssAxialLoadKn':'0','dirHssAxial':'0','dirSssAxial':'0','presetTorqueRot':'0','terminalBox':'N33','cableEntry':'N3A','altitude':'0m'}];
									    cusImageComp = new FormData();
									    $scope.stepsModelComp = []; 
								        form.$setPristine(true); 
										form2.$setPristine(true);
										$.post("loadingsequenceNember.do",function(json)
											{
												   $scope.addCase=json['maincaseform'][0];
                                                   $scope.addDespComp=json['description'][0]; 
												   var departmentSplit = json['maincaseform'][0].assigned;
													 var departmentSales = [];
													 if(departmentSplit == undefined || departmentSplit == "" || departmentSplit == "NA")
													 {
														 //alert("if");
														 $('#picturegallery').val("['']").trigger('chosen:updated');
														 $("#picturegallery").css("background-color", "#ffff7f");
													 }
													 else
													 {
														//alert(departmentSplit.length + " " + " else ");
														 for (var s = 0; s < departmentSplit.length; s++) {
												
																	departmentSales.push(departmentSplit[s]);
																	//alert("accessoriesSales"+accessoriesSales);
														}
														 $('#picturegallery').val(departmentSales).trigger('chosen:updated');
																		$scope.addCase.assigned = departmentSales;
																		$("#picturegallery").css("background-color", "#99ff99");
													 }
													$scope.$apply();
											});
											$rootScope.newcase = '';
											$rootScope.caseCustomerRef = '';
											$rootScope.caseCustomer = '';
											$rootScope.tab = '';
											$rootScope.actionTab='';
											$scope.isDisabled = false;
											$scope.isDisabled2 = false;
											$scope.isDisabled3 = false;
											//$scope.getCaseData(addCase,form);
										$('.btn-hideComp').removeClass('active2');
										$('.Send-hideComp').removeClass('active2');
										$('.btn-discarComp').removeClass('active2');
										
										$("#CustomerCode").css("background-color", "#ffff7f"); 
										$("#ContactPerson").css("background-color", "#ffffff");
										$("#Telephone").css("background-color", "#ffffff"); 
										$("#Address").css("background-color", "#ffffff");
										$("#CreatedBy").css("background-color", "#ffff7f"); 
									   
										//$scope.addBlogComp(); 
										$scope.$apply();
										
										
									}
			           });
					});
					
					$('.btn-hideComp').removeClass('active2');
					$('.Send-hideComp').removeClass('active2');
					$('.btn-discarComp').removeClass('active2');
					 
		  };


//	   	   	var cusImageSumit = new FormData();
//  $scope.uploadSumitFile = function(files,dummyId) 
//			{
//				//alert(files);
//				//alert(JSON.stringify(dummyId));
//				//$scope.dummyId = 0;
//				//alert($scope.dummyId);
//				cusImageSumit.delete("docFile");
//				cusImageSumit.delete("docFileId");
//	    		cusImageSumit.append("docFile",files[0]);
//				cusImageSumit.append("docFileId",dummyId);
//				
//				/*$http.post("/SCA-360/newcaseselectiongridimage.do", cusImageSumit, {
//								withCredentials: true,
//								 headers: {'Content-Type': undefined },
//								 transformRequest: angular.identity
//							  }).success(function(data, status) 
//							   { 
//									//swal( 'Saved Successfully'); 
//							   });*/
//				$scope.$apply();
//			};

 $scope.enterGearhead = function(gear,shiMFG)
 {
	// alert(gear);
	 ///alert(shiMFG);
	 
	 if(gear.length<1)
	 {
		// $('.btn-hide').attr('disabled',true);
		// $('.Send-hideSumit').attr('disabled',true); 
	 }
	 else
	 {
		 //$('.btn-hide').attr('disabled',false);
		 //$('.Send-hideSumit').attr('disabled',false);
		 $('.btn-hideSumit').removeClass('active2');
		 $('.Send-hideSumit').removeClass('active2');
		 $('.btn-discarSumit').removeClass('active2');
	 }
	
	
 }
 
 $scope.enterShiMfg = function(gear,shiMFG)
 {
	 //alert(gear);
	 if(shiMFG.length<1)
	 {
		// $('.btn-hide').attr('disabled',true);
		// $('.Send-hideSumit').attr('disabled',true); 
	 }
	 else
	 {
		 //$('.btn-hide').attr('disabled',false);
		 //$('.Send-hideSumit').attr('disabled',false);
		 $('.btn-hideSumit').removeClass('active2');
		 $('.Send-hideSumit').removeClass('active2');
		 $('.btn-discarSumit').removeClass('active2');
	 }
	 
	
 }


//=============Sumitomo Replace Form Submit=======//			
	var sumitReplaceTabData = [];
	var sumitReplaceTabDescp = [];
	var sumitReplaceImgData = [];
	//var sumitReplace = new Object();
		
   $scope.sumitReplaceFormSubmit = function(addCase,form,sumitomoData,form2,addDespSumit)
		{
			
	       //alert(JSON.stringify(addCase));
		   //alert(JSON.stringify($scope.dataField));
	       //$scope.submitted = true;
		     if($scope.caseManagementForm.$valid)
			    {
					//alert($scope.newSelectionForm.$valid);
					//$scope.submitted = true;
					if($scope.sumitomoReplaceForm.$valid)
					{
						
						
						sumitReplaceTabData = [];
						$scope.dataSumitomo.forEach(function(sumitomoData)
						{ 
						    //alert(235235624);
							//alert(JSON.stringify(sumitomoData.gearhead)); 
							//alert(JSON.stringify(sumitomoData.shiMfg)); 
							/*if(sumitomoData.gearhead == undefined && sumitomoData.shiMfg == undefined)
							{
								
								//swal( 'Please Enter Either GearHead SNo. or SHI Mfg No.');
								//$scope.gearSts = true;
								
								//$('.btn-hide').attr('disabled',true);
								//$('.Send-hideSumit').attr('disabled',true);
							}
							else
							{
								
							}*/
							
							sumitReplaceTabData.push(angular.toJson(sumitomoData));	
							
						});
					    sumitReplaceImgData = [];
					$scope.stepsModelSumit.forEach(function(stepSumit)
					{ 
						//alert(JSON.stringify(formData)); 
					   sumitReplaceImgData.push(angular.toJson(stepSumit));	 
					});
					cusImageSumit.append("formData",angular.toJson(addCase));
					cusImageSumit.append("gridData",angular.toJson(sumitReplaceTabData));
					cusImageSumit.append("fieldData",angular.toJson(addDespSumit));
					cusImageSumit.append("motorFile",sumitReplaceImgData);
					//alert(JSON.stringify(cusImageSumit));
						//$('.btn-hide').attr('disabled',true);
					    //$('.Send-hideSumit').attr('disabled',true);
						$('.btn-hideSumit').addClass('active2');
						$('.Send-hideSumit').addClass('active2');
						$('.btn-discarSumit').addClass('active2');
						
						$.ajax({
						       url         : "/SCA-360/newcasemaindataformsubmit.do",
						       data        : cusImageSumit,
						       contentType : false,
						       processData : false,
						       type        : 'POST'
						   }).success(function(data, status){
							   //alert(data);
								if(data==true)
									{
										swal("", 'Saved Successfully!' , "success");
										$scope.addCase = angular.copy($scope.master);
							            $scope.addDespSumit = angular.copy($scope.master);
										$scope.remarksSumit = "";
								        $indexTab3=1;
							          $scope.dataSumitomo=[{'id':$indexTab3,'gm':'0','model':'0','ambientTemp':'40','rpm':'1450','motorType':'NO','voltage':'200','pole':'4','phase':'3','quantity':'1','gearProduct':'CYCLO 6000','hertz':'50','basefreq':'1','protectionGrade': 'IP55','internationalStd': 'JIS','mtrEfficncyClass':'0','inverter':'1','motorBrake':'1','motorBrakeVolt':'1','dimension':'1','conf':'0','mount':'0','mount2':'0',oshaftInc1:false,oshaftInc2:false,'ishaft':'0','jadapt':'0','oshaft':'0','oshafty':'0','oshafty2':'4','backStop':'0','rot':'0','hssRadialLoadKn':'0','hssRadialLoadMm':'0','hssAxialLoadKn':'0','sssRadialLoadKn':'0','sssRadialLoadMm':'0','sssAxialLoadKn':'0','dirHssAxial':'0','dirSssAxial':'0','presetTorqueRot':'0','terminalBox':'N33','cableEntry':'N3A','altitude':'0m'}];
                                        $scope.stepsModelSumit = [];
										cusImageSumit = new FormData();
								        form.$setPristine(true); 
										form2.$setPristine(true);
										$.post("loadingsequenceNember.do",function(json)
											{
												   $scope.addCase=json['maincaseform'][0];
                                                   $scope.addDespSumit=json['description'][0]; 
												   var departmentSplit = json['maincaseform'][0].assigned;
												 var departmentSales = [];
												 if(departmentSplit == undefined || departmentSplit == "" || departmentSplit == "NA")
												 {
													 //alert("if");
													 $('#picturegallery').val("['']").trigger('chosen:updated');
													 $("#picturegallery").css("background-color", "#ffff7f");
												 }
												 else
												 {
													//alert(departmentSplit.length + " " + " else ");
													 for (var s = 0; s < departmentSplit.length; s++) {
											
																departmentSales.push(departmentSplit[s]);
																//alert("accessoriesSales"+accessoriesSales);
													}
													 $('#picturegallery').val(departmentSales).trigger('chosen:updated');
																	$scope.addCase.assigned = departmentSales;
																	$("#picturegallery").css("background-color", "#99ff99");
												 }
													$scope.$apply();
											});
										$rootScope.newcase = '';
										$rootScope.caseCustomerRef = '';
										$rootScope.caseCustomer = '';
										$rootScope.tab = '';
										$rootScope.actionTab='';
										$rootScope.action = "";
										$rootScope.caseid = "";
										$scope.qtnBtnSumit = '0';
										$scope.isDisabled = false;
										$scope.isDisabled2 = false;
										$scope.isDisabled3 = false;
										//$scope.getCaseData(addCase,form);
										//$scope.addBlogSumit();
                                        $("#remarksHideSumit").hide();
                                         $("#blogHideSumit").hide();
										 $("#QuotationTypeBlock").hide();
											$scope.isDisabledQtn = false;
											$scope.isDisabledQtn2 = false;
                                         //$('.btn-hide').attr('disabled',false);
					                    // $('.Send-hideSumit').attr('disabled',false);
										$('.btn-hideSumit').removeClass('active2');
										$('.Send-hideSumit').removeClass('active2');
										$('.btn-discarSumit').removeClass('active2');
										
										 $('#menu1').removeClass('active2');
										 $('#menu2').removeClass('active2');
										 $('#menu3').removeClass('active2');
										 $('#menu4').removeClass('active2');
										 $('#menu5').removeClass('active2');
										
										$("#CustomerCode").css("background-color", "#ffff7f"); 
										$("#ContactPerson").css("background-color", "#ffffff");
										$("#Telephone").css("background-color", "#ffffff"); 
										$("#Address").css("background-color", "#ffffff");
										$("#CreatedBy").css("background-color", "#ffff7f"); 
										
										$scope.$apply(); 
										//alert(JSON.stringify( $scope.dataField));
										
									}
								else
									{
									   //swal("Oops sorry...", "Something went wrong!", "error");
									   swal("Oops sorry...", "Either GearHead Serial No. Or SHI Mfg No. Must be filled", "error");
									   cusImageSumit = new FormData();
									   //$('.btn-hide').attr('disabled',true);
					                  // $('.Send-hideSumit').attr('disabled',true);
									   $('.btn-hideSumit').addClass('active2');
										$('.Send-hideSumit').addClass('active2');
										$('.btn-discarSumit').addClass('active2');
									}
							    
							   
				        	   
				           });
					}
					else
					{
						var field = null, firstError = null;
						for (field in form2) 
						{
							if (field[0] != '$') 
							{
								if (firstError === null && !form2[field].$valid) 
								{
									firstError = form2[field].$name;
								}
								if (form2[field].$pristine) 
								{
									form2[field].$dirty = true;
								}
							}	
						}
					}
			    }
		     else
				{
					
					var field = null, firstError = null;
						for (field in form) 
						{
							if (field[0] != '$') 
							{
								if (firstError === null && !form[field].$valid) 
								{
									firstError = form[field].$name;
								}
								if (form[field].$pristine) 
								{
									form[field].$dirty = true;
								}
							}	
						}
				}
		}
		//var GearHead;
   $scope.sumitReplaceTempFormSubmit = function(addCase,form,sumitomoData,form2,addDespSumit)
		{
	       //alert(JSON.stringify(addCase));
		   //alert(JSON.stringify($scope.dataField));
	       //$scope.submitted = true;
		     if($scope.caseManagementForm.$valid)
			    {
					//alert($scope.newSelectionForm.$valid);
					//$scope.submitted = true;
					if($scope.sumitomoReplaceForm.$valid)
					{
						
						sumitReplaceTabData = [];
						$scope.dataSumitomo.forEach(function(sumitomoData)
						{ 
							sumitReplaceTabData.push(angular.toJson(sumitomoData));
						   
						});
					
					    sumitReplaceImgData = [];
					$scope.stepsModelSumit.forEach(function(stepSumit)
					{ 
						//alert(JSON.stringify(formData)); 
					   sumitReplaceImgData.push(angular.toJson(stepSumit));	 
					});
					cusImageSumit.append("formData",angular.toJson(addCase));
					cusImageSumit.append("gridData",angular.toJson(sumitReplaceTabData));
					cusImageSumit.append("fieldData",angular.toJson(addDespSumit));
					cusImageSumit.append("motorFile",sumitReplaceImgData);
					//alert(JSON.stringify(cusImageSumit));
						$('.btn-hideSumit').addClass('active2');
						$('.Send-hideSumit').addClass('active2');
						$('.btn-discarSumit').addClass('active2');
						
						swal({
							  title: "Are you sure?",
							  text: "Your File Will Be Save As Draft!",
							  type: "warning",
							  showCancelButton: true,
							  confirmButtonClass: "btn-danger",
							  confirmButtonText: "Yes, Save it!",
							  closeOnConfirm: false
							},
							
							function(){
								
							
								 $.ajax({
								   url         : "/SCA-360/newcasetempformsubmit.do",
								   data        : cusImageSumit,
								   contentType : false,
								   processData : false,
								   type        : 'POST'
							   }).success(function(data, status){
								  // alert(data);
									if(data==true)
										{
											
											//$scope.remarksSumit = "";
											//$scope.addBlogSumit();
											//$scope.getCaseData();
											  swal("", "Draft Saved Successfully!", "success");
											$scope.addCase = angular.copy($scope.master);
											$scope.addDespSumit = angular.copy($scope.master);
											$scope.remarksSumit = "";
											$indexTab3=1;
										  $scope.dataSumitomo=[{'id':$indexTab3,'gm':'0','model':'0','ambientTemp':'40','rpm':'1450','motorType':'NO','voltage':'200','pole':'4','phase':'3','quantity':'1','gearProduct':'CYCLO 6000','hertz':'50','basefreq':'1','protectionGrade': 'IP55','internationalStd': 'JIS','mtrEfficncyClass':'0','inverter':'1','motorBrake':'1','motorBrakeVolt':'1','dimension':'1','conf':'0','mount':'0','mount2':'0',oshaftInc1:false,oshaftInc2:false,'ishaft':'0','jadapt':'0','oshaft':'0','oshafty':'0','oshafty2':'4','backStop':'0','rot':'0','hssRadialLoadKn':'0','hssRadialLoadMm':'0','hssAxialLoadKn':'0','sssRadialLoadKn':'0','sssRadialLoadMm':'0','sssAxialLoadKn':'0','dirHssAxial':'0','dirSssAxial':'0','presetTorqueRot':'0','terminalBox':'N33','cableEntry':'N3A','altitude':'0m'}];
											$scope.stepsModelSumit = [];
											form.$setPristine(true); 
											form2.$setPristine(true);
											$scope.isDisabled = false;
											$scope.isDisabled2 = false;
											$scope.isDisabled3 = false;
											cusImageSumit = new FormData();
											$scope.getCaseData(addCase,form);
											$('.btn-hideSumit').removeClass('active2');
											$('.Send-hideSumit').removeClass('active2');
											$('.btn-discarSumit').removeClass('active2');
											$('#picturegallery').val("['']").trigger('chosen:updated');
											 $("#picturegallery").css("background-color", "#ffff7f");
											
											
											$scope.$apply(); 
											
											
										}
									else
										{
										   //swal("Oops sorry...", "Something went wrong!", "error");
										   swal("Oops sorry...", "Either GearHead Serial No. Or SHI Mfg No. Must be filled", "error");
										  // $scope.gearSts = true;
										  cusImageSumit = new FormData();
										    $('.btn-hideSumit').addClass('active2');
											$('.Send-hideSumit').addClass('active2');
											$('.btn-discarSumit').addClass('active2');
										}
									
								   
								   
							   });
							});
							 $('.btn-hideSumit').removeClass('active2');
							 $('.Send-hideSumit').removeClass('active2');
							 $('.btn-discarSumit').removeClass('active2');
						
						
					}
					else
					{
						var field = null, firstError = null;
						for (field in form2) 
						{
							if (field[0] != '$') 
							{
								if (firstError === null && !form2[field].$valid) 
								{
									firstError = form2[field].$name;
								}
								if (form2[field].$pristine) 
								{
									form2[field].$dirty = true;
								}
							}	
						}
					}
			    }
		     else
				{
					
					var field = null, firstError = null;
						for (field in form) 
						{
							if (field[0] != '$') 
							{
								if (firstError === null && !form[field].$valid) 
								{
									firstError = form[field].$name;
								}
								if (form[field].$pristine) 
								{
									form[field].$dirty = true;
								}
							}	
						}
				}
		}
		
		//==============Sumit Form Reset============//
		   $scope.resetSumitReplaceForm = function(addCase,form,sumitomoData,form2,addDespSumit)
		   {
			   
						sumitReplaceTabData = [];
						$scope.dataSumitomo.forEach(function(sumitomoData)
						{ 
							sumitReplaceTabData.push(angular.toJson(sumitomoData));
						   
						});
					
					    sumitReplaceImgData = [];
					$scope.stepsModelSumit.forEach(function(stepSumit)
					{ 
						//alert(JSON.stringify(formData)); 
					   sumitReplaceImgData.push(angular.toJson(stepSumit));	 
					});
			        cusImageSumit.append("formData",angular.toJson(addCase));
					cusImageSumit.append("gridData",angular.toJson(sumitReplaceTabData));
					cusImageSumit.append("fieldData",angular.toJson(addDespSumit));
					cusImageSumit.append("motorFile",sumitReplaceImgData);
					//alert(JSON.stringify(cusImageSumit));
						
					$('.btn-hideSumit').addClass('active2');
					$('.Send-hideSumit').addClass('active2');
					$('.btn-discarSumit').addClass('active2');
						swal({
					  title: "Are you sure?",
					  text: "Your will not be able to recover this Draft file!",
					  type: "warning",
					  showCancelButton: true,
					  confirmButtonClass: "btn-danger",
					  confirmButtonText: "Yes, delete it!",
					  closeOnConfirm: false
					},
					function(){
					 
							$.ajax({
						       url         : "/SCA-360/deletetempdatainnewcasetemp.do",
						       data        : cusImageSumit,
						       contentType : false,
						       processData : false,
						       type        : 'POST'
						   }).success(function(data, status){
							   //alert(data);
								if(data==true)
									{
										
										 swal("Deleted!", "Draft Discarded Successfully.", "success");
										$scope.addCase = angular.copy($scope.master);
							            $scope.addDespSumit = angular.copy($scope.master);
										//$scope.remarksSumit = "";
								        $indexTab3=1;
							          $scope.dataSumitomo=[{'id':$indexTab3,'gm':'0','model':'0','ambientTemp':'40','rpm':'1450','motorType':'NO','voltage':'200','pole':'4','phase':'3','quantity':'1','gearProduct':'CYCLO 6000','hertz':'50','basefreq':'1','protectionGrade': 'IP55','internationalStd': 'JIS','mtrEfficncyClass':'0','inverter':'1','motorBrake':'1','motorBrakeVolt':'1','dimension':'1','conf':'0','mount':'0','mount2':'0',oshaftInc1:false,oshaftInc2:false,'ishaft':'0','jadapt':'0','oshaft':'0','oshafty':'0','oshafty2':'4','backStop':'0','rot':'0','hssRadialLoadKn':'0','hssRadialLoadMm':'0','hssAxialLoadKn':'0','sssRadialLoadKn':'0','sssRadialLoadMm':'0','sssAxialLoadKn':'0','dirHssAxial':'0','dirSssAxial':'0','presetTorqueRot':'0','terminalBox':'N33','cableEntry':'N3A','altitude':'0m'}];
									    cusImageSumit = new FormData();
								        form.$setPristine(true); 
										form2.$setPristine(true);
										$.post("loadingsequenceNember.do",function(json)
											{
												   $scope.addCase=json['maincaseform'][0];
                                                   $scope.addDespSumit=json['description'][0]; 
												   var departmentSplit = json['maincaseform'][0].assigned;
												 var departmentSales = [];
												 if(departmentSplit == undefined || departmentSplit == "" || departmentSplit == "NA")
												 {
													 //alert("if");
													 $('#picturegallery').val("['']").trigger('chosen:updated');
													 $("#picturegallery").css("background-color", "#ffff7f");
												 }
												 else
												 {
													//alert(departmentSplit.length + " " + " else ");
													 for (var s = 0; s < departmentSplit.length; s++) {
											
																departmentSales.push(departmentSplit[s]);
																//alert("accessoriesSales"+accessoriesSales);
													}
													 $('#picturegallery').val(departmentSales).trigger('chosen:updated');
																	$scope.addCase.assigned = departmentSales;
																	$("#picturegallery").css("background-color", "#99ff99");
												 }
													$scope.$apply();
											});
										$rootScope.newcase = '';
										$rootScope.caseCustomerRef = '';
										$rootScope.caseCustomer = '';
										$rootScope.tab = '';
										$rootScope.actionTab='';
										$scope.isDisabled = false;
										$scope.isDisabled2 = false;
										$scope.isDisabled3 = false;
										//$scope.getCaseData(addCase,form);	
										$scope.stepsModelSumit = [];
										$('.btn-hideSumit').removeClass('active2');
										$('.Send-hideSumit').removeClass('active2');
										$('.btn-discarSumit').removeClass('active2');
										
										$("#CustomerCode").css("background-color", "#ffff7f"); 
										$("#ContactPerson").css("background-color", "#ffffff");
										$("#Telephone").css("background-color", "#ffffff"); 
										$("#Address").css("background-color", "#ffffff");
										$("#CreatedBy").css("background-color", "#ffff7f"); 
										$scope.$apply(); 
										
										
									}
				           });
					});
					
					$('.btn-hideSumit').removeClass('active2');
					$('.Send-hideSumit').removeClass('active2');
					$('.btn-discarSumit').removeClass('active2');
						
		   };


/*$scope.dataPart = [];
$indexTab4=0;

 
$scope.addSparePartField = function() 
	{
		//alert('indexTab4---------'+$indexTab4);
		$indexTab4++;
		
	    $scope.dataPart.push({'id':$indexTab4,'gm':'0','ambientTemp':'40','pole':'4','rpm':'1450','phase':'3','quantity':'1','gearProduct':'CYCLO 6000','hertz':'50','protectionGrade': 'IP55','internationalStd': 'JIS','motorType':'NO','voltage':'400','mtrEfficncyClass':'0','model':'0','inverter':'1','motorBrake':'1','motorBrakeVolt':'1',childData:({'id':$indexTab4})});
		
	};
	$scope.removeSparePartRow = function(name)
	{	
	   // alert(name);
		var IndexTab4 = -1;		
		var comArrTab4 = eval( $scope.dataPart );
		for( var p = 0; p < comArrTab4.length; p++ ) 
		{
			if( comArrTab4[p].id === name ) 
			{
				IndexTab4 = p;
				break;
			}				
		}
		$scope.dataPart.splice( IndexTab4, 1 );
		$indexTab4 = comArrTab4.length;
		for(var m=0;m<$indexTab4;m++)
		{
			$scope.dataPart[m].id = Number(m)+Number(1);
		}			
   };

 
 
*/

//
//  	   	   	var cusImageSpare = new FormData();
//  $scope.uploadSpareFile = function(files,dummyId) 
//			{
//				//alert(files);
//				//alert(JSON.stringify(dummyId));
//				//$scope.dummyId = 0;
//				//alert($scope.dummyId);
//				cusImageSpare.delete("docFile");
//				cusImageSpare.delete("docFileId");
//	    		cusImageSpare.append("docFile",files[0]);
//				cusImageSpare.append("docFileId",dummyId);
//				
//				/*$http.post("/SCA-360/newcaseselectiongridimage.do", cusImageSpare, {
//								withCredentials: true,
//								 headers: {'Content-Type': undefined },
//								 transformRequest: angular.identity
//							  }).success(function(data, status) 
//							   { 
//									//swal( 'Saved Successfully'); 
//							   });*/
//				$scope.$apply();
//			};
//	

/*$scope.changeReqStatus = function(gear,shimfg)
{
	if(gear.length<1)
	 {
		 //$('.btn-hideSpare').attr('disabled',true);
		 //$('.Send-hideSpare').attr('disabled',true); 
	 }
	 else
	 {
		// $('.btn-hideSpare').attr('disabled',false);
		 //$('.Send-hideSpare').attr('disabled',false); 
		 $('.btn-hideSpare').removeClass('active2');
		 $('.Send-hideSpare').removeClass('active2');
		 $('.btn-discarSpare').removeClass('active2');
	 }
	
		
}*/	
/*$scope.changeReqshiStatus = function(gear,shimfg)
{
	if(shimfg.length<1)
	 {
		// $('.btn-hideSpare').attr('disabled',true);
		 //$('.Send-hideSpare').attr('disabled',true); 
	 }
	 else
	 {
		 //$('.btn-hideSpare').attr('disabled',false);
		 //$('.Send-hideSpare').attr('disabled',false); 
		 $('.btn-hideSpare').removeClass('active2');
		 $('.Send-hideSpare').removeClass('active2');
		 $('.btn-discarSpare').removeClass('active2');
	 }
	
		
}	*/
			
	var sparePartTabData = [];
	var sparePartImgData = [];
	var sparePartTabDescp = [];
	var sparePartsAdded = [];
	//var sparePart = new Object();
		//alert(JSON.stringify($scope.formData));
  $scope.sparePartFormSubmit = function(addCase,form,sparePartData,form2,addDespSpare)
		{
			
	       //alert(JSON.stringify(addCase));
		   //alert(JSON.stringify($scope.dataField));
	       //$scope.submitted = true;
		     if($scope.caseManagementForm.$valid)
			    {
					//alert($scope.newSelectionForm.$valid);
					//$scope.submitted = true;
					if($scope.sparePartForm.$valid)
					{
						
						sparePartTabData = [];
						$scope.dataSparePart.forEach(function(sparePartData)
						{ 
						   
						   
							//alert(JSON.stringify(sparePartData)); 
						   sparePartTabData.push(angular.toJson(sparePartData));	 
						});
						
						/*sparePartsAdded = [];
						
						$scope.sparePartRow.forEach(function(spareparts)
						{
							alert(JSON.stringify(spareparts));
							sparePartsAdded.push(angular.toJson(spareparts));	
						});*/
						
						sparePartImgData = [];
						
					$scope.stepsModelSpare.forEach(function(stepSpare)
					{ 
						//alert(JSON.stringify(formData)); 
					   sparePartImgData.push(angular.toJson(stepSpare));	 
					});
					cusImageSpare.append("formData",angular.toJson(addCase));
					cusImageSpare.append("gridData",angular.toJson(sparePartTabData));
					cusImageSpare.append("fieldData",angular.toJson(addDespSpare));
					cusImageSpare.append("motorFile",sparePartImgData);
					//cusImageSpare.append("gridSpares",angular.toJson(sparePartsAdded));
					//alert(JSON.stringify(cusImageSpare));
						
						//$('.btn-hideSpare').attr('disabled',true);
					    //$('.Send-hideSpare').attr('disabled',true);
						$('.btn-hideSpare').addClass('active2');
						$('.Send-hideSpare').addClass('active2');
						$('.btn-discarSpare').addClass('active2');
						$.ajax({
						       url         : "/SCA-360/newcasemaindataformsubmit.do",
						       data        : cusImageSpare,
						       contentType : false,
						       processData : false,
						       type        : 'POST'
						   }).success(function(data, status){
							   //alert(data);
								if(data==true)
									{
										swal("", 'Saved Successfully!' , "success");
										$scope.addCase = angular.copy($scope.master);
							            $scope.addDespSpare = angular.copy($scope.master);
										$scope.remarksSpare = "";
										$indexTab4 = 1;
					  					$scope.dataSparePart = [{'id':$indexTab4,'gm':'0','pole':'4','rpm':'1450','phase':'3','quantity':'1','gearProduct':'CYCLO 6000','hertz':'50','basefreq':'1','protectionGrade': 'IP55','internationalStd': 'JIS','motorType':'NO','voltage':'200','mtrEfficncyClass':'0','model':'0','inverter':'1','motorBrake':'1','mtrsnosts':true,'motorBrakeVolt':'1','terminalBox':'N33','cableEntry':'N3A', childData: [{'id':0}] }];
								        /*$indexTab4=1;
							          $scope.dataPart=[{'id':$indexTab4,'gm':'0','ambientTemp':'40','pole':'4','rpm':'1450','motorType':'NO','voltage':'400','phase':'3','quantity':'1','gearProduct':'CYCLO 6000','hertz':'50','protectionGrade': 'IP55','internationalStd': 'JIS','mtrEfficncyClass':'0','model':'0','inverter':'1','motorBrake':'1','motorBrakeVolt':'1'}];*/
                                        $scope.stepsModelSpare = [];
										cusImageSpare = new FormData();
								        form.$setPristine(true); 
										form2.$setPristine(true); 
										$.post("loadingsequenceNember.do",function(json)
											{
												   $scope.addCase=json['maincaseform'][0];
                                                   $scope.addDespSpare=json['description'][0]; 
												   var departmentSplit = json['maincaseform'][0].assigned;
													 var departmentSales = [];
													 if(departmentSplit == undefined || departmentSplit == "" || departmentSplit == "NA")
													 {
														 //alert("if");
														 $('#picturegallery').val("['']").trigger('chosen:updated');
														 $("#picturegallery").css("background-color", "#ffff7f");
													 }
													 else
													 {
														//alert(departmentSplit.length + " " + " else ");
														 for (var s = 0; s < departmentSplit.length; s++) {
												
																	departmentSales.push(departmentSplit[s]);
																	//alert("accessoriesSales"+accessoriesSales);
														}
														 $('#picturegallery').val(departmentSales).trigger('chosen:updated');
																		$scope.addCase.assigned = departmentSales;
																		$("#picturegallery").css("background-color", "#99ff99");
													 }
													$scope.$apply();
											});
										
										$rootScope.newcase = '';
										$rootScope.caseCustomerRef = '';
										$rootScope.caseCustomer = '';
										$rootScope.tab = '';
										$rootScope.actionTab='';
										$rootScope.action = "";
										$rootScope.caseid = "";
										$scope.qtnBtnSpare = '0';
										$scope.isDisabled = false;
										$scope.isDisabled2 = false;
										$scope.isDisabled3 = false;
										//$scope.getCaseData(addCase,form);
										//$scope.addBlogSpare();
                                        $("#remarksHideSpare").hide();
                                        $("#blogHideSpare").hide();
										$("#QuotationTypeBlock").hide();
											$scope.isDisabledQtn = false;
											$scope.isDisabledQtn2 = false;
                                        //$('.btn-hideSpare').attr('disabled',false);
					                   // $('.Send-hideSpare').attr('disabled',false);
									    $('.btn-hideSpare').removeClass('active2');
										$('.Send-hideSpare').removeClass('active2');
										$('.btn-discarSpare').removeClass('active2');
										
										 $('#menu1').removeClass('active2');
										 $('#menu2').removeClass('active2');
										 $('#menu3').removeClass('active2');
										 $('#menu4').removeClass('active2');
										 $('#menu5').removeClass('active2');
										
										$("#CustomerCode").css("background-color", "#ffff7f"); 
										$("#ContactPerson").css("background-color", "#ffffff");
										$("#Telephone").css("background-color", "#ffffff"); 
										$("#Address").css("background-color", "#ffffff");
										$("#CreatedBy").css("background-color", "#ffff7f"); 
										$scope.$apply();
										//alert(JSON.stringify( $scope.dataField));
										
									}
								else
									{
									 swal("Oops sorry...", "Something went wrong!", "error");
									   //swal("Oops sorry...", "Either GearHead Serial No. Or SHI Mfg No. Must be filled", "error");
									   cusImageSpare = new FormData();
									    $('.btn-hideSpare').addClass('active2');
										$('.Send-hideSpare').addClass('active2');
										$('.btn-discarSpare').addClass('active2');
									}
							    
							   
				        	   
				           });
					}
					else
					{
						var field = null, firstError = null;
						for (field in form2) 
						{
							if (field[0] != '$') 
							{
								if (firstError === null && !form2[field].$valid) 
								{
									firstError = form2[field].$name;
								}
								if (form2[field].$pristine) 
								{
									form2[field].$dirty = true;
								}
							}	
						}
					}
			    }
		     else
				{
					
					var field = null, firstError = null;
						for (field in form) 
						{
							if (field[0] != '$') 
							{
								if (firstError === null && !form[field].$valid) 
								{
									firstError = form[field].$name;
								}
								if (form[field].$pristine) 
								{
									form[field].$dirty = true;
								}
							}	
						}
				}
		}		
 $scope.sparePartTempFormSubmit = function(addCase,form,sparePartData,form2,addDespSpare)
		{
	       //alert(JSON.stringify(addCase));
		   //alert(JSON.stringify($scope.dataField));
	       //$scope.submitted = true;
		     if($scope.caseManagementForm.$valid)
			    {
					//alert($scope.newSelectionForm.$valid);
					//$scope.submitted = true;
					if($scope.sparePartForm.$valid)
					{
						
						sparePartTabData = [];
					$scope.dataSparePart.forEach(function(sparePartData)
					{ 
						//alert(JSON.stringify(sparePartData)); 
					   sparePartTabData.push(angular.toJson(sparePartData));	 
					});
					
					sparePartImgData = [];
					$scope.stepsModelSpare.forEach(function(stepSpare)
					{ 
						//alert(JSON.stringify(formData)); 
					   sparePartImgData.push(angular.toJson(stepSpare));	 
					});
					cusImageSpare.append("formData",angular.toJson(addCase));
					cusImageSpare.append("gridData",angular.toJson(sparePartTabData));
					cusImageSpare.append("fieldData",angular.toJson(addDespSpare));
					cusImageSpare.append("motorFile",sparePartImgData);
					//alert(JSON.stringify(cusImageSpare));
					$('.btn-hideSpare').addClass('active2');
					$('.Send-hideSpare').addClass('active2');
					$('.btn-discarSpare').addClass('active2');
						
						
						swal({
							  title: "Are you sure?",
							  text: "Your File Will Be Save As Draft!",
							  type: "warning",
							  showCancelButton: true,
							  confirmButtonClass: "btn-danger",
							  confirmButtonText: "Yes, Save it!",
							  closeOnConfirm: false
							},
							
							function(){
								
							 
								 $.ajax({
								   url         : "/SCA-360/newcasetempformsubmit.do",
								   data        : cusImageSpare,
								   contentType : false,
								   processData : false,
								   type        : 'POST'
							   }).success(function(data, status){
								   //alert(data);
									if(data==true)
										{
											
											//$scope.remarksSpare = "";
											//$scope.addBlogSpare();
											//$scope.getCaseData();
										 swal("", "Draft Saved Successfully!", "success");
											$scope.addCase = angular.copy($scope.master);
											$scope.addDespSpare = angular.copy($scope.master);
											$scope.remarksSpare = "";
											$indexTab4 = 1;
											$scope.dataSparePart = [{'id':$indexTab4,'gm':'0','pole':'4','rpm':'1450','phase':'3','quantity':'1','gearProduct':'CYCLO 6000','hertz':'50','basefreq':'1','protectionGrade': 'IP55','internationalStd': 'JIS','motorType':'NO','voltage':'200','mtrEfficncyClass':'0','model':'0','inverter':'1','motorBrake':'1','mtrsnosts':true,'motorBrakeVolt':'1','terminalBox':'N33','cableEntry':'N3A', childData: [{'id':0}] }];
											
											$scope.stepsModelSpare = [];
											form.$setPristine(true); 
											form2.$setPristine(true); 
											$scope.isDisabled = false;
											$scope.isDisabled2 = false;
											$scope.isDisabled3 = false;
											$('.btn-hideSpare').removeClass('active2');
											$('.Send-hideSpare').removeClass('active2');
											$('.btn-discarSpare').removeClass('active2');
											
											cusImageSpare = new FormData();
											$scope.getCaseData(addCase,form);
											$('#picturegallery').val("['']").trigger('chosen:updated');
											 $("#picturegallery").css("background-color", "#ffff7f");
											
											
											$scope.$apply();
											
										}
									else
										{
										   swal("Oops sorry...", "Something went wrong!", "error");
										   //swal("Oops sorry...", "Either GearHead Serial No. Or SHI Mfg No. Must be filled", "error");
										   cusImageSpare = new FormData();
											$('.btn-hideSpare').addClass('active2');
											$('.Send-hideSpare').addClass('active2');
											$('.btn-discarSpare').addClass('active2');
										}
									
								   
								   
							   });
							});
							 $('.btn-hideSpare').removeClass('active2');
							 $('.Send-hideSpare').removeClass('active2');
							 $('.btn-discarSpare').removeClass('active2');
						
						
					}
					else
					{
						var field = null, firstError = null;
						for (field in form2) 
						{
							if (field[0] != '$') 
							{
								if (firstError === null && !form2[field].$valid) 
								{
									firstError = form2[field].$name;
								}
								if (form2[field].$pristine) 
								{
									form2[field].$dirty = true;
								}
							}	
						}
					}
			    }
		     else
				{
					
					var field = null, firstError = null;
						for (field in form) 
						{
							if (field[0] != '$') 
							{
								if (firstError === null && !form[field].$valid) 
								{
									firstError = form[field].$name;
								}
								if (form[field].$pristine) 
								{
									form[field].$dirty = true;
								}
							}	
						}
				}
		}
		
		//=========Spare Form Reset==========//
		  $scope.resetsparePartForm = function(addCase,form,sparePartData,form2,addDespSpare)
		  {
			  			sparePartTabData = [];
						$scope.dataSparePart.forEach(function(sparePartData)
						{ 
						   
						   
							//alert(JSON.stringify(sparePartData)); 
						   sparePartTabData.push(angular.toJson(sparePartData));	 
						});
						
						/*sparePartsAdded = [];
						
						$scope.sparePartRow.forEach(function(spareparts)
						{
							alert(JSON.stringify(spareparts));
							sparePartsAdded.push(angular.toJson(spareparts));	
						});*/
						
						sparePartImgData = [];
						
					$scope.stepsModelSpare.forEach(function(stepSpare)
					{ 
						//alert(JSON.stringify(formData)); 
					   sparePartImgData.push(angular.toJson(stepSpare));	 
					});
			        cusImageSpare.append("formData",angular.toJson(addCase));
					cusImageSpare.append("gridData",angular.toJson(sparePartTabData));
					cusImageSpare.append("fieldData",angular.toJson(addDespSpare));
					cusImageSpare.append("motorFile",sparePartImgData);
					//alert(JSON.stringify(cusImageSpare));
						
						$('.btn-hideSpare').addClass('active2');
						$('.Send-hideSpare').addClass('active2');
						$('.btn-discarSpare').addClass('active2');
							swal({
					  title: "Are you sure?",
					  text: "Your will not be able to recover this Draft file!",
					  type: "warning",
					  showCancelButton: true,
					  confirmButtonClass: "btn-danger",
					  confirmButtonText: "Yes, delete it!",
					  closeOnConfirm: false
					},
					function(){
					  
							$.ajax({
						       url         : "/SCA-360/deletetempdatainnewcasetemp.do",
						       data        : cusImageSpare,
						       contentType : false,
						       processData : false,
						       type        : 'POST'
						   }).success(function(data, status){
							   //alert(data);
								if(data==true)
									{
										
										swal("Deleted!", "Draft Discarded Successfully.", "success");
										$scope.addCase = angular.copy($scope.master);
							            $scope.addDespSpare = angular.copy($scope.master);
										//$scope.remarksSpare = "";
										$indexTab4 = 1;
					  					$scope.dataSparePart = [{'id':$indexTab4,'gm':'0','pole':'4','rpm':'1450','phase':'3','quantity':'1','gearProduct':'CYCLO 6000','hertz':'50','basefreq':'1','protectionGrade': 'IP55','internationalStd': 'JIS','motorType':'NO','voltage':'200','mtrEfficncyClass':'0','model':'0','inverter':'1','motorBrake':'1','motorBrakeVolt':'1','mtrsnosts':true,'terminalBox':'N33','cableEntry':'N3A', childData: [{'id':0}] }];
								        
									  cusImageSpare = new FormData();
								        form.$setPristine(true); 
										form2.$setPristine(true); 
										$.post("loadingsequenceNember.do",function(json)
											{
										
												   $scope.addCase=json['maincaseform'][0];
                                                   $scope.addDespSpare=json['description'][0];
												   var departmentSplit = json['maincaseform'][0].assigned;
												 var departmentSales = [];
												 if(departmentSplit == undefined || departmentSplit == "" || departmentSplit == "NA")
												 {
													 //alert("if");
													 $('#picturegallery').val("['']").trigger('chosen:updated');
													 $("#picturegallery").css("background-color", "#ffff7f");
												 }
												 else
												 {
													//alert(departmentSplit.length + " " + " else ");
													 for (var s = 0; s < departmentSplit.length; s++) {
											
																departmentSales.push(departmentSplit[s]);
																//alert("accessoriesSales"+accessoriesSales);
													}
													 $('#picturegallery').val(departmentSales).trigger('chosen:updated');
																	$scope.addCase.assigned = departmentSales;
																	$("#picturegallery").css("background-color", "#99ff99");
												 }
												   $scope.$apply();
											});
											$rootScope.newcase = '';
											$rootScope.caseCustomerRef = '';
											$rootScope.caseCustomer = '';
											$rootScope.tab = '';
											$rootScope.actionTab='';
											$scope.isDisabled = false;
											$scope.isDisabled2 = false;
											$scope.isDisabled3 = false;
											//$scope.getCaseData(addCase,form);
										$scope.stepsModelSpare = [];
										$('.btn-hideSpare').removeClass('active2');
										$('.Send-hideSpare').removeClass('active2');
										$('.btn-discarSpare').removeClass('active2');
										
										$("#CustomerCode").css("background-color", "#ffff7f"); 
										$("#ContactPerson").css("background-color", "#ffffff");
										$("#Telephone").css("background-color", "#ffffff"); 
										$("#Address").css("background-color", "#ffffff");
										$("#CreatedBy").css("background-color", "#ffff7f"); 
										$scope.$apply();
										
									}
				           });
					});
					
					$('.btn-hideSpare').removeClass('active2');
					$('.Send-hideSpare').removeClass('active2');
					$('.btn-discarSpare').removeClass('active2');
						
		  };


//  	   	   	var cusImageTech = new FormData();
//  $scope.uploadTechFile = function(files,dummyId) 
//			{
//				//alert(files);
//				//alert(JSON.stringify(dummyId));
//				//$scope.dummyId = 0;
//				//alert($scope.dummyId);
//				cusImageTech.delete("docFile");
//				cusImageTech.delete("docFileId");
//	    		cusImageTech.append("docFile",files[0]);
//				cusImageTech.append("docFileId",dummyId);
//				
//				/*$http.post("/SCA-360/newcaseselectiongridimage.do", cusImageTech, {
//								withCredentials: true,
//								 headers: {'Content-Type': undefined },
//								 transformRequest: angular.identity
//							  }).success(function(data, status) 
//							   { 
//									//swal( 'Saved Successfully'); 
//							   });*/
//				$scope.$apply();
//			};
			
	var techQueryTabData = [];
	var techQueryTabDescp = [];
	var techQueryImgData = [];
	var techQuery = new Object();
		//alert(JSON.stringify($scope.formData));
//==========Tech Query Form Submit===========//
  $scope.techQueryFormSubmit = function(addCase,form,techQueryData,form2,addDespTech)
		{
	       //alert(JSON.stringify(addCase));
		   //alert(JSON.stringify($scope.dataField));
	       //$scope.submitted = true;
		     if($scope.caseManagementForm.$valid)
			    {
					//alert($scope.techQueryForm.$valid);
					//$scope.submitted = true;
					if($scope.techQueryForm.$valid)
					{
							techQueryTabData = [];
							$scope.dataQuery.forEach(function(techQueryData)
							{ 
								//alert(JSON.stringify(formData)); 
							   techQueryTabData.push(angular.toJson(techQueryData));	 
							});
							techQueryImgData = [];
							$scope.stepsModelTech.forEach(function(stepTech)
							{ 
								//alert(JSON.stringify(formData)); 
							   techQueryImgData.push(angular.toJson(stepTech));	 
							});
					cusImageTech.append("formData",angular.toJson(addCase));
					cusImageTech.append("gridData",angular.toJson(techQueryTabData));
					cusImageTech.append("fieldData",angular.toJson(addDespTech));
					cusImageTech.append("motorFile",techQueryImgData);
					//alert(JSON.stringify(cusImageTech));
						//$('.btn-hideTech').attr('disabled',true);
					    //$('.Send-hideTech').attr('disabled',true);
						$('.btn-hideTech').addClass('active2');
						$('.Send-hideTech').addClass('active2');
						$('.btn-discarTech').addClass('active2');
						
						$.ajax({
						       url         : "/SCA-360/newcasemaindataformsubmit.do",
						       data        : cusImageTech,
						       contentType : false,
						       processData : false,
						       type        : 'POST'
						   }).success(function(data, status){
							   //alert(data);
								if(data==true)
									{
										swal("", 'Saved Successfully!' , "success");
										$scope.addCase = angular.copy($scope.master);
							            $scope.addDespTech = angular.copy($scope.master);
										$scope.remarksTech = "";
								        $indexTab5=1;
							          $scope.dataQuery=[{'id':$indexTab5,'gm':'0','model':'0','ambientTemp':'40','pole':'4','rpm':'1450','motorType':'NO','voltage':'200','phase':'3','quantity':'1','gearProduct':'CYCLO 6000','hertz':'50','basefreq':'1','protectionGrade': 'IP55','internationalStd': 'JIS','mtrEfficncyClass':'0','inverter':'1','motorBrake':'1','motorBrakeVolt':'1','conf':'0','mount':'0','mount2':'0',oshaftInc1:false,oshaftInc2:false,'ishaft':'0','jadapt':'0','oshaft':'0','oshafty':'0','oshafty2':'4','backStop':'0','rot':'0','hssRadialLoadKn':'0','hssRadialLoadMm':'0','hssAxialLoadKn':'0','sssRadialLoadKn':'0','sssRadialLoadMm':'0','sssAxialLoadKn':'0','dirHssAxial':'0','dirSssAxial':'0','presetTorqueRot':'0','terminalBox':'N33','cableEntry':'N3A','altitude':'0m'}];
                                        $scope.stepsModelTech = [];
										cusImageTech = new FormData(); 
								        form.$setPristine(true); 
										form2.$setPristine(true);
										$.post("loadingsequenceNember.do",function(json)
											{
												    $scope.addCase=json['maincaseform'][0];
                                                    $scope.addDespTech=json['description'][0];
													var departmentSplit = json['maincaseform'][0].assigned;
												 var departmentSales = [];
												 if(departmentSplit == undefined || departmentSplit == "" || departmentSplit == "NA")
												 {
													 //alert("if");
													 $('#picturegallery').val("['']").trigger('chosen:updated');
													 $("#picturegallery").css("background-color", "#ffff7f");
												 }
												 else
												 {
													//alert(departmentSplit.length + " " + " else ");
													 for (var s = 0; s < departmentSplit.length; s++) {
											
																departmentSales.push(departmentSplit[s]);
																//alert("accessoriesSales"+accessoriesSales);
													}
													 $('#picturegallery').val(departmentSales).trigger('chosen:updated');
																	$scope.addCase.assigned = departmentSales;
																	$("#picturegallery").css("background-color", "#99ff99");
												 }
													$scope.$apply();
											});
										$rootScope.newcase = '';
										$rootScope.caseCustomerRef = '';
										$rootScope.caseCustomer = '';
										$rootScope.tab = '';
										$rootScope.actionTab='';
										$scope.qtnBtnTech = "0";
										$scope.isDisabled = false;
										$scope.isDisabled2 = false;
										$scope.isDisabled3 = false;
										//$scope.getCaseData(addCase,form);
										//$scope.addBlogTech();
                                        $("#remarksHideTech").hide();
                                         $("#blogHideTech").hide();
										 $("#QuotationTypeBlock").hide();
											$scope.isDisabledQtn = false;
											$scope.isDisabledQtn2 = false;
                                         //$('.btn-hideTech').attr('disabled',false);
					                     //$('.Send-hideTech').attr('disabled',false);
										 $('.btn-hideTech').removeClass('active2');
										$('.Send-hideTech').removeClass('active2');
										$('.btn-discarTech').removeClass('active2');
										
										$('#menu1').removeClass('active2');
										 $('#menu2').removeClass('active2');
										 $('#menu3').removeClass('active2');
										 $('#menu4').removeClass('active2');
										 $('#menu5').removeClass('active2');
										
										$("#CustomerCode").css("background-color", "#ffff7f"); 
										$("#ContactPerson").css("background-color", "#ffffff");
										$("#Telephone").css("background-color", "#ffffff"); 
										$("#Address").css("background-color", "#ffffff");
										$("#CreatedBy").css("background-color", "#ffff7f"); 
										$scope.$apply();
									}
								else
									{
									   swal("Oops sorry...", "Something went wrong!", "error");
									    $('.btn-hideTech').addClass('active2');
										$('.Send-hideTech').addClass('active2');
										$('.btn-discarTech').addClass('active2');
									}
							    
							   
				        	   
				           });
					}
					else
					{
						var field = null, firstError = null;
						for (field in form2) 
						{
							if (field[0] != '$') 
							{
								if (firstError === null && !form2[field].$valid) 
								{
									firstError = form2[field].$name;
								}
								if (form2[field].$pristine) 
								{
									form2[field].$dirty = true;
								}
							}	
						}
					}
			    }
		     else
				{
					
					var field = null, firstError = null;
						for (field in form) 
						{
							if (field[0] != '$') 
							{
								if (firstError === null && !form[field].$valid) 
								{
									firstError = form[field].$name;
								}
								if (form[field].$pristine) 
								{
									form[field].$dirty = true;
								}
							}	
						}
				}
		}		
  $scope.techQueryTempFormSubmit = function(addCase,form,techQueryData,form2,addDespTech)
		{
	       //alert(JSON.stringify(addCase));
		   //alert(JSON.stringify($scope.dataField));
	       //$scope.submitted = true;
		     if($scope.caseManagementForm.$valid)
			    {
					//alert($scope.techQueryForm.$valid);
					//$scope.submitted = true;
					if($scope.techQueryForm.$valid)
					{
							techQueryTabData = [];
							$scope.dataQuery.forEach(function(techQueryData)
							{ 
								//alert(JSON.stringify(formData)); 
							   techQueryTabData.push(angular.toJson(techQueryData));	 
							});
					         techQueryImgData = [];
							$scope.stepsModelTech.forEach(function(stepTech)
							{ 
								//alert(JSON.stringify(formData)); 
							   techQueryImgData.push(angular.toJson(stepTech));	 
							});
					cusImageTech.append("formData",angular.toJson(addCase));
					cusImageTech.append("gridData",angular.toJson(techQueryTabData));
					cusImageTech.append("fieldData",angular.toJson(addDespTech));
					cusImageTech.append("motorFile",techQueryImgData);
					//alert(JSON.stringify(cusImageTech));
					$('.btn-hideTech').addClass('active2');
					$('.Send-hideTech').addClass('active2');
					$('.btn-discarTech').addClass('active2');
					
					swal({
							  title: "Are you sure?",
							  text: "Your File Will Be Save As Draft!",
							  type: "warning",
							  showCancelButton: true,
							  confirmButtonClass: "btn-danger",
							  confirmButtonText: "Yes, Save it!",
							  closeOnConfirm: false
							},
							
							function(){
								
							 
							$.ajax({
						       url         : "/SCA-360/newcasetempformsubmit.do",
						       data        : cusImageTech,
						       contentType : false,
						       processData : false,
						       type        : 'POST'
						   }).success(function(data, status){
							   //alert(data);
								if(data==true)
									{
										
										//$scope.remarksTech = "";
										//$scope.addBlogTech();
                                       swal("", "Draft Saved Successfully!", "success");
										$scope.addCase = angular.copy($scope.master);
							            $scope.addDespTech = angular.copy($scope.master);
										$scope.remarksTech = "";
								        $indexTab5=1;
							          $scope.dataQuery=[{'id':$indexTab5,'gm':'0','model':'0','ambientTemp':'40','pole':'4','rpm':'1450','motorType':'NO','voltage':'200','phase':'3','quantity':'1','gearProduct':'CYCLO 6000','hertz':'50','basefreq':'1','protectionGrade': 'IP55','internationalStd': 'JIS','mtrEfficncyClass':'0','inverter':'1','motorBrake':'1','motorBrakeVolt':'1','conf':'0','mount':'0','mount2':'0',oshaftInc1:false,oshaftInc2:false,'ishaft':'0','jadapt':'0','oshaft':'0','oshafty':'0','oshafty2':'4','backStop':'0','rot':'0','hssRadialLoadKn':'0','hssRadialLoadMm':'0','hssAxialLoadKn':'0','sssRadialLoadKn':'0','sssRadialLoadMm':'0','sssAxialLoadKn':'0','dirHssAxial':'0','dirSssAxial':'0','presetTorqueRot':'0','terminalBox':'N33','cableEntry':'N3A','altitude':'0m'}];
                                        $scope.stepsModelTech = []; 
								        form.$setPristine(true); 
										form2.$setPristine(true);
										cusImageTech = new FormData();
										$scope.isDisabled = false;
										$scope.isDisabled2 = false;
										$scope.isDisabled3 = false;
                                        $scope.getCaseData(addCase,form);
										$('.btn-hideTech').removeClass('active2');
										$('.Send-hideTech').removeClass('active2');
										$('.btn-discarTech').removeClass('active2');
										$('#picturegallery').val("['']").trigger('chosen:updated');
										$("#picturegallery").css("background-color", "#ffff7f");
										
										
										$scope.$apply();
										
										
									}
								else
									{
									   swal("Oops sorry...", "Something went wrong!", "error");
									   $('.btn-hideTech').addClass('active2');
										$('.Send-hideTech').addClass('active2');
										$('.btn-discarTech').addClass('active2');
									}
							    
							   
				        	   
				           });
							});
							 $('.btn-hideTech').removeClass('active2');
							 $('.Send-hideTech').removeClass('active2');
							 $('.btn-discarTech').removeClass('active2');
						
					}
					else
					{
						var field = null, firstError = null;
						for (field in form2) 
						{
							if (field[0] != '$') 
							{
								if (firstError === null && !form2[field].$valid) 
								{
									firstError = form2[field].$name;
								}
								if (form2[field].$pristine) 
								{
									form2[field].$dirty = true;
								}
							}	
						}
					}
			    }
		     else
				{
					
					var field = null, firstError = null;
						for (field in form) 
						{
							if (field[0] != '$') 
							{
								if (firstError === null && !form[field].$valid) 
								{
									firstError = form[field].$name;
								}
								if (form[field].$pristine) 
								{
									form[field].$dirty = true;
								}
							}	
						}
				}
		}
		
		//============Tech Form Reset============//
		  $scope.resetTechQueryForm = function(addCase,form,techQueryData,form2,addDespTech)
		  {
			  			techQueryTabData = [];
							$scope.dataQuery.forEach(function(techQueryData)
							{ 
								//alert(JSON.stringify(formData)); 
							   techQueryTabData.push(angular.toJson(techQueryData));	 
							});
							techQueryImgData = [];
							$scope.stepsModelTech.forEach(function(stepTech)
							{ 
								//alert(JSON.stringify(formData)); 
							   techQueryImgData.push(angular.toJson(stepTech));	 
							});
			        cusImageTech.append("formData",angular.toJson(addCase));
					cusImageTech.append("gridData",angular.toJson(techQueryTabData));
					cusImageTech.append("fieldData",angular.toJson(addDespTech));
					cusImageTech.append("motorFile",techQueryImgData);
					//alert(JSON.stringify(cusImageTech));
						
					$('.btn-hideTech').addClass('active2');
					$('.Send-hideTech').addClass('active2');
					$('.btn-discarTech').addClass('active2');
						swal({
					  title: "Are you sure?",
					  text: "Your will not be able to recover this Draft file!",
					  type: "warning",
					  showCancelButton: true,
					  confirmButtonClass: "btn-danger",
					  confirmButtonText: "Yes, delete it!",
					  closeOnConfirm: false
					},
					function(){
					  
							$.ajax({
						       url         : "/SCA-360/deletetempdatainnewcasetemp.do",
						       data        : cusImageTech,
						       contentType : false,
						       processData : false,
						       type        : 'POST'
						   }).success(function(data, status){
							   //alert(data);
								if(data==true)
									{
										
									swal("Deleted!", "Draft Discarded Successfully.", "success");
										$scope.addCase = angular.copy($scope.master);
							            $scope.addDespTech = angular.copy($scope.master);
										//$scope.remarksTech = "";
								        $indexTab5=1;
							            $scope.dataQuery=[{'id':$indexTab5,'gm':'0','model':'0','ambientTemp':'40','pole':'4','rpm':'1450','motorType':'NO','voltage':'200','phase':'3','quantity':'1','gearProduct':'CYCLO 6000','hertz':'50','basefreq':'1','protectionGrade': 'IP55','internationalStd': 'JIS','mtrEfficncyClass':'0','inverter':'1','motorBrake':'1','motorBrakeVolt':'1','conf':'0','mount':'0','mount2':'0',oshaftInc1:false,oshaftInc2:false,'ishaft':'0','jadapt':'0','oshaft':'0','oshaftInc':'1','oshafty':'0','oshafty2':'4','backStop':'0','rot':'0','hssRadialLoadKn':'0','hssRadialLoadMm':'0','hssAxialLoadKn':'0','sssRadialLoadKn':'0','sssRadialLoadMm':'0','sssAxialLoadKn':'0','dirHssAxial':'0','dirSssAxial':'0','presetTorqueRot':'0','terminalBox':'N33','cableEntry':'N3A','altitude':'0m'}];
										cusImageTech = new FormData();
								        form.$setPristine(true); 
										form2.$setPristine(true);
										$.post("loadingsequenceNember.do",function(json)
											{
												   $scope.addCase=json['maincaseform'][0];
                                                   $scope.addDespTech=json['description'][0];
												   var departmentSplit = json['maincaseform'][0].assigned;
												 var departmentSales = [];
												 if(departmentSplit == undefined || departmentSplit == "" || departmentSplit == "NA")
												 {
													 //alert("if");
													 $('#picturegallery').val("['']").trigger('chosen:updated');
													 $("#picturegallery").css("background-color", "#ffff7f");
												 }
												 else
												 {
													//alert(departmentSplit.length + " " + " else ");
													 for (var s = 0; s < departmentSplit.length; s++) {
											
																departmentSales.push(departmentSplit[s]);
																//alert("accessoriesSales"+accessoriesSales);
													}
													 $('#picturegallery').val(departmentSales).trigger('chosen:updated');
																	$scope.addCase.assigned = departmentSales;
																	$("#picturegallery").css("background-color", "#99ff99");
												 }
													$scope.$apply();
											});
											$rootScope.newcase = '';
											$rootScope.caseCustomerRef = '';
											$rootScope.caseCustomer = '';
											$rootScope.tab = '';
											$rootScope.actionTab='';
											$scope.isDisabled = false;
											$scope.isDisabled2 = false;
											$scope.isDisabled3 = false;
											//$scope.getCaseData(addCase,form);
										$scope.stepsModelTech = []; 
										$('.btn-hideTech').removeClass('active2');
										$('.Send-hideTech').removeClass('active2');
										$('.btn-discarTech').removeClass('active2');
										
										$("#CustomerCode").css("background-color", "#ffff7f"); 
										$("#ContactPerson").css("background-color", "#ffffff");
										$("#Telephone").css("background-color", "#ffffff"); 
										$("#Address").css("background-color", "#ffffff");
										$("#CreatedBy").css("background-color", "#ffff7f"); 
										$scope.$apply();
										
										
									}
				           });
					});
					$('.btn-hideTech').removeClass('active2');
					$('.Send-hideTech').removeClass('active2');
					$('.btn-discarTech').removeClass('active2');
						
		  }
		  $scope.loadQuotationForm = function(QtnType)
		  {
			 var caseRefNo = 0;
		     $rootScope.loadQuotation = caseRefNo;
			 $rootScope.loadQtnType = QtnType;
			 $state.go('app.quotation');
		  };
});

//==========================================================//
     //--------------Add New Case--------------------//
//=========================================================//

angular.module('app')
.controller('addNewCaseCtrl',function($scope,$http,$rootScope,$state){
	
	
	$scope.master = {};
	$scope.isDisabled = true; 
	
	//$scope.addedNewCase = ({'count':false,'manufact':false,'month':false,'cases':false,'modelno':false,'ref':false,'uName':false,'serNo':false,'gear':false,'custname':false});
	//getAllCustmerNamesInCasess
	$scope.getAddNewCaseFormData = function()
	{
		$.post("getAllCustmerNamesforcase.do",function(json)
				{
			            //alert(JSON.stringify(json['data'])); 
					   $scope.names = json['data'];  
					  // alert(JSON.stringify(json['data'])); 
					  $scope.$apply();
				});
	};
	
	$scope.startsWith = function(state, viewValue) {
			//alert(state.substr(0, viewValue.length).toLowerCase() == viewValue.toLowerCase());
              return state.substr(0, viewValue.length).toLowerCase() == viewValue.toLowerCase();
            }
	
	$scope.loadAddNewCaseCountrys = function()
	{  
	
	 $scope.countryData = [];
	 
	  var httpRequest = $http({
                method: 'POST',
                url: "/SCA-360/getCoutries.do",
                data: {},
            }).success(function(data, status) {
				
				//alert(JSON.stringify(data['countries']));
				$scope.countryData = data['countries'];
				$scope.$apply();
			});
	 
	
	};
	 $scope.loadAddNewCaseSalesMan = function()
	   {
		   $scope.salesmanArray = [];
		    $.post("getAllSalesMan.do",function(json)
			{
				//alert(JSON.stringify(json['data']));
				 $scope.salesmanArray = json['data'];
				 $scope.$apply();
			});
	   };
	   
	  $scope.getAddNewCaseSalesmanCode = function()
	   {
		   $scope.salesManCodeArray = [];
		    $.post("getingSalesmanCode.do",function(json)
			{
				//alert(JSON.stringify(json['data']));
				 $scope.salesManCodeArray = json['data'];
				 $scope.$apply();
			});
	   };
	   
	   $scope.loadAddedNewcaseDepartments = function()
		{
			$.post("departmentView.do",function(json)
			{
				//alert(JSON.stringify(json['data']));
				$scope.departmentData = json['data'];
				 $scope.$apply();
			});		
		};
	   
	   /*$scope.disableCountry = function(country)
	   {
		   //alert(country);
		   if(country == true)
		   {
			  //alert("if");
			  $scope.isDisabled = false;  
		   }
		   else
		   {
			  //alert("else"); 
			  $scope.isDisabled = true;  
		   }
	   };*/
	   
	$scope.loadAllCaseTypes = function()
	{
		$scope.caseTypeData = [{id:'1',caseType : 'New Selection'},{id:'2',caseType : 'Competitor Replace'},{id:'3',caseType : 'Sumitomo Replace'},{id:'4',caseType : 'Spare Part'},{id:'5',caseType : 'Tech Query'}];
	};
	
	
	var addedCase  = new FormData();
	
	$scope.getCaseName = function(addedNewCase,form)
	{
		/*if(!addedNewCase.count)
		{
			//alert("if");
			delete addedNewCase['count'];
			delete addedNewCase['country'];
		}
		if(!addedNewCase.manufact)
		{
			//alert("if");
			delete addedNewCase['manufact'];
			delete addedNewCase['manufacturing'];
		}
		if(!addedNewCase.month)
		{
			//alert("if");
			delete addedNewCase['month'];
			delete addedNewCase['monthYear'];
		}
		if(!addedNewCase.cases)
		{
			//alert("if");
			delete addedNewCase['cases'];
			delete addedNewCase['caseType'];
		}
		if(!addedNewCase.modelno)
		{
			//alert("if");
			delete addedNewCase['modelno'];
			delete addedNewCase['modelNumber'];
		}
		if(!addedNewCase.ref)
		{
			//alert("if");
			delete addedNewCase['ref'];
			delete addedNewCase['caseRef'];
		}
		if(!addedNewCase.uName)
		{
			//alert("if");
			delete addedNewCase['uName'];
			delete addedNewCase['username'];
		}
		if(!addedNewCase.serNo)
		{
			//alert("if");
			delete addedNewCase['serNo'];
			delete addedNewCase['serialNo'];
		}
		if(!addedNewCase.gear)
		{
			//alert("if");
			delete addedNewCase['gear'];
			delete addedNewCase['gearhead'];
		}
		if(!addedNewCase.custname)
		{
			//alert("if");
			delete addedNewCase['custname'];
			delete addedNewCase['customer'];
		}
		delete addedNewCase['count'];
		delete addedNewCase['manufact'];
		delete addedNewCase['month'];
		delete addedNewCase['cases'];
		delete addedNewCase['modelno'];
		delete addedNewCase['ref'];
		delete addedNewCase['serNo'];
		delete addedNewCase['uName'];
		delete addedNewCase['gear'];
		delete addedNewCase['custname'];*/
		
		
		//alert(JSON.stringify(addedNewCase));
		
		
			//alert(e);
			addedCase.append("formData",angular.toJson(addedNewCase));
			
				$.ajax({
						       url         : "/SCA-360/newcasefilters.do",
						       data        : addedCase,
						       contentType : false,
						       processData : false,
						       type        : 'POST'
						   }).success(function(data, status){
							//alert(status);
							  //alert(JSON.stringify(data["data"][0].selectModel));
							  if(status == "success")
							  {
								  var datalength = data["data"];
								  // alert(datalength);
								   if(datalength != "0")
								   {
									  // alert("if");
									   $scope.addedNewCase = angular.copy($scope.master);
									   addedCase = new FormData();
									   form.$setPristine(true); 
									   $scope.addedCasesData = data["data"];
									 
								   
									$scope.$apply();
								   }
								   else
								   {
									   //alert("else");
									   swal("Oops sorry...", "Search Results Not Found!", "error");
									   addedCase = new FormData();
									   $scope.addedCasesData = [];
									   $scope.addedNewCase = angular.copy($scope.master);
									   form.$setPristine(true); 
									   $scope.$apply();
								   }
							  }
							  else
							  {
								  swal("Oops sorry...", "Something went wrong!", "error");
							  }
							   
							   
						   });
						   
						   
						   ///*$('form').keypress(function(e){
//							//alert(e);
//							if(e.which == 13){
//						   $(this).focusout();
//						
//							}
//						});*/
				
		
	};
	
	$scope.loadCaseCustomerDetails = function(getCaseCustomerRef,getCaseCustomer,gettab,actionrow,caseId)
	{
		//alert(JSON.stringify(getCaseCustomerRef));
		//alert(JSON.stringify(getCaseCustomer));
		//alert(getCaseCustomerRef);
		//alert(getCaseCustomer);
		//alert(gettab);
		//alert(actionrow);
		$rootScope.caseCustomerRef=getCaseCustomerRef;
		$rootScope.caseCustomer=getCaseCustomer;
		$rootScope.tab=gettab;
		$rootScope.actionTab= "Edit";
		$rootScope.action= actionrow;
		$rootScope.caseid= caseId;
		$state.go('app.newCaseManagement');
		$scope.$apply();
 
	};
	$scope.loadAddedCasesDetailsView = function(getCaseCustomerRef,getCaseCustomer,gettab,actionrow,caseId)
	{
		//alert(JSON.stringify(getCaseCustomerRef));
		//alert(JSON.stringify(getCaseCustomer));
		//alert(getCaseCustomerRef);
		//alert(getCaseCustomer);
		//alert(gettab);
		//alert(actionrow);
		$rootScope.caseCustomerRef=getCaseCustomerRef;
		$rootScope.caseCustomer=getCaseCustomer;
		$rootScope.tab=gettab;
		$rootScope.actionTab= "View";
		$rootScope.action= actionrow;
		$rootScope.caseid= caseId;
		$state.go('app.newCaseManagement');
		$scope.$apply();
 
	};
   
	$scope.loadAddedCasesDetailsCopy = function(getCaseCustomerRef,getCaseCustomer,gettab,actionrow,caseId)
	{
		//alert(JSON.stringify(getCaseCustomerRef));
		//alert(JSON.stringify(getCaseCustomer));
		$rootScope.caseCustomerRef=getCaseCustomerRef;
		$rootScope.caseCustomer=getCaseCustomer;
		$rootScope.tab=gettab;
		$rootScope.actionTab= "Copy";
		$rootScope.action= actionrow;
		$rootScope.caseid= caseId;
		$state.go('app.newCaseManagement');
		$scope.$apply();
 
	};
			
	/*$scope.loadNewCaseCustomer = function()
	{
		//alert("loadNewCaseCustomer");
		var checkCaseCustomer = 0;
		$rootScope.loadNewCase = checkCaseCustomer;
		$state.go('app.newCaseManagement');
		//alert($rootScope.loadNewCase);
	};*/
	
	$scope.removeCaseFromGrid = function(getCaseCustomerRef,gettab,getCaseAction,caseId)
	{
		//alert(JSON.stringify(getCaseCustomerRef));
		//alert(JSON.stringify(getCaseCustomer));
		//$rootScope.caseCustomerRef=getCaseCustomerRef;
		//$rootScope.caseCustomer=getCaseCustomer;
		//$rootScope.tab=gettab;
		//$rootScope.actionTab= "Copy";
		swal({
					  title: "Are you sure?",
					  text: "Your will not be able to recover this file!",
					  type: "warning",
					  showCancelButton: true,
					  confirmButtonClass: "btn-danger",
					  confirmButtonText: "Yes, delete it!",
					  closeOnConfirm: false
					},
					function(){
					
					  
					  $.post("newcasefiltersdelete.do",{caseref:getCaseCustomerRef,tab:gettab,action:getCaseAction,caseid:caseId},function(json)
						 {
							  swal("", "Deleted Successfully.!", "success");
								//alert(JSON.stringify(json['data']));
								$scope.addedCasesData = json["data"];
								$scope.$apply();
						 });
					});
		 
		
		
 
	};
	
	
});



//==================================================//
   //--------Quotation Type-----------------//

//==================================================//
angular.module('app')
.controller("QuotationController",function($scope,$http,$rootScope,$state,$timeout)
{
	
	//var Username = sessionStorage.getItem("sessionUserName");
	//$scope.colorCode = "1";
	var qtnFormData = new FormData();
	//alert(Username);
	$scope.master = {};
	
	$scope.addQuotation = angular.copy($scope.master);
	$scope.addQuotation = ({'qtnType':'0','qtnProgress':'0','showCost':'1','modifiedstatus':'0','qtnMaster':'1'});
	//$scope.addQuotation = ({'qtnType':'0','qtnProgress':'0','showCost':'0','modifiedstatus':'0','createdBy':Username,'currency':'AUD','tax':'VAT','country':'AUSTRALIA','taxPercent':'10','paymentTerm':'2','salesTerm':'CIF','estPercent':'10','assigned':'Sales'});
	
	//$(".resetBgColr").css("background-color", "#99ff99"); 
	//$("#Email").css("background-color", "#99ff99");
	
	$scope.loadCurrencyData = function()
	{
		$scope.currencyArrData = [];
		$.post("getingCurrencies.do",function(json)
			{
                       //alert(JSON.stringify(json['data']));
					  // var curArr = json['data'];
						   $scope.currencyArrData = json['data'];
						
						  //$("#getFullUnit").trigger("click"); 
						    $scope.$apply();
			});
	};
	
	$scope.getCountryNames = function()
	{  
	
	 $scope.countryNameData = [];
	 
	 $.post("getAllCountries.do",function(json)
				{
					//alert(JSON.stringify(json['data']));
					
					 $scope.countryNameData = json['data'];
					 //alert(JSON.stringify($scope.countryNameData));
					 $scope.$apply();
				});
		
	};
	
	
		
		
	
	
	//$(this).trigger("click");
	
	
	
	//================Customize Qtn IMG Upload Multiple==========//
					
					   $scope.stepsModel = [];

						$scope.uploadCustomizeQtnFile = function(event)
						{
							 var files = event.target.files; //FileList object
							 
							 for (var i = 0; i < files.length; i++) {
								 var file = files[i];
									 var reader = new FileReader();
									 reader.onload = $scope.imageIsLoaded; 
									 reader.readAsDataURL(file);
							 }
						}
						$scope.imageIsLoaded = function(e)
						{
							$scope.$apply(function() {
								 var imagelocation=e.target.result;
								 var base64result = imagelocation.split(',')[1];
												  
							   $scope.stepsModel.push(base64result);
									//alert($scope.stepsModel.length);
							});
						}
						$scope.removeCustomizeQtn=function(step)
						{
							 for(var i=0;i<$scope.stepsModel.length;i++) {
								
								if($scope.stepsModel[i] === step) {
								
									$scope.stepsModel.splice(i,1);
								
									break;
								}}
							
						};
   

    
//=============Full Unit=================//	
	$scope.qtnFullUnitData = [];
    $indexFullUnit=0;

  $scope.addQtnFormField = function() 
	{
		//alert("Add item");
		$indexFullUnit++;
		//$scope.qtnFullUnitData.push({'id':$indexFullUnit});
	    $scope.qtnFullUnitData.push({'id':$indexFullUnit,'motorType':'NO','protectionGrade':'IP55','internationalStd':'JIS','motorPower':'0.1','pole':'4','phase':'3','voltage':'200','freq':'50','mtrEfficncyClass':'0','inverter':'1','motorBrake':'1','motorBrakeVolt':'1','customerPrice':'0','tpricereq':true,'markUpreq':true,'qntyreq':true,'costreqsts':true,'tpfactorsts':true,'lpfactor':true})
		
		//$("#CustomerPrice").trigger("click"); 
		
	};
	
	
	var idStandard="";
	$scope.removeQtnFormRow = function(name)
	{	
	    idStandard=name;
			   // alert(name);
			   var overlay = jQuery('<div id="overlay"> </div>');	
						 overlay.appendTo(document.body);	
					 $("#popup_box").show();
					 
					 
		
		//alert($scope.fullUnitData[n].id);			
   };
   
   
   $scope.RemoveRowStandardPopup = function()
		   {
			var IndexFUnit = -1;		
			var comArrFUnit = eval( $scope.qtnFullUnitData );
			//alert(comArrFUnit.length);
			for( var q = 0; q < comArrFUnit.length; q++ ) 
			{
				if( comArrFUnit[q].id === idStandard ) 
				{
					IndexFUnit = q;
					break;
				}				
			}
			$scope.qtnFullUnitData.splice( IndexFUnit, 1 );
			$indexFullUnit = comArrFUnit.length;
			for(var n=0;n<$indexFullUnit;n++)
			{
				$scope.qtnFullUnitData[n].id = Number(n)+Number(1);
			}
					 $("#popup_box").hide();
					 $("#overlay").remove();
			};



$scope.cancelStandardPopup=function(){
					$("#popup_box").hide();
					 $("#overlay").remove();
					}	
    	
	
  //==============Project type===========//
    $scope.projectUnitData = [];
    $indexProject=0;

  $scope.addQtnProjFormField = function() 
	{
		//alert("Add item");
		$indexProject++;
	    $scope.projectUnitData.push({'id':$indexProject,'motorType':'NO','protectionGrade':'IP55','internationalStd':'JIS','motorPower':'0.1','pole':'4','phase':'3','voltage':'200','freq':'50','mtrEfficncyClass':'0','inverter':'1','motorBrake':'1','motorBrakeVolt':'1','customerPrice':'0','tpricereq':true,'markUpreq':true,'qntyreq':true,'costreqsts':true,'tpfactorsts':true,'lpfactor':true})
	};
	
	var idCustomize="";
	$scope.removeProjFormRow = function(name)
	{
		idCustomize=name;
			   // alert(name);
			   var overlay = jQuery('<div id="overlay"> </div>');	
						 overlay.appendTo(document.body);	
					 $("#popup_boxCust").show();
	    //alert(name);
		
		//alert($scope.projectUnitData[m].id);			
   };
   
   
     $scope.RemoveRowCustomizePopup = function()
		   {
			var IndexProj = -1;		
			var comArrProj = eval( $scope.projectUnitData );
			//alert(comArrProj.length);
			for( var s = 0; s < comArrProj.length; s++ ) 
			{
				if( comArrProj[s].id === idCustomize ) 
				{
					IndexProj = s;
					break;
				}
							
			}
			$scope.projectUnitData.splice( IndexProj, 1 );
			$indexProject = comArrProj.length;
			for(var m=0;m<$indexProject;m++)
			{
				$scope.projectUnitData[m].id = Number(m)+Number(1);
			}
					 $("#popup_boxCust").hide();
					 $("#overlay").remove();
			};



$scope.cancelCustomizePopup=function(){
					$("#popup_boxCust").hide();
					 $("#overlay").remove();
					}	
 	  //==============Spare Part (only)===========//
    $scope.sparePartData = [];
    $indexSpare=0;

  $scope.addQtnSpareFormField = function() 
	{
		//alert("Add item");
		$indexSpare++;
	    $scope.sparePartData.push({'id':$indexSpare,'gm':'0','motorType':'NO','protectionGrade':'IP55','internationalStd':'JIS','motorPower':'0.1','pole':'4','phase':'3','voltage':'200','freq':'50','mtrEfficncyClass':'0','inverter':'1','motorBrake':'1','motorBrakeVolt':'1','customerPrice':'0','tpricereq':true,'markUpreq':true,'qntyreq':true,'costreqsts':true,'tpfactorsts':true,'lpfactor':true})
	};
	
	var idSparepart="";
		$scope.removeSpareFormRow = function(name)
		{
			idSparepart=name;
			   // alert(name);
			   var overlay = jQuery('<div id="overlay"> </div>');	
						 overlay.appendTo(document.body);	
					 $("#popup_boxSpare").show();
			//alert(name);
			
			//alert($scope.sparePartData[j].id);			
	   };
	   
	      $scope.RemoveRowSparepartPopup = function()
		   {
				var IndexSpare = -1;		
				var comArrSpare = eval( $scope.sparePartData );
				//alert(comArrSpare.length);
				for( var t = 0; t < comArrSpare.length; t++ ) 
				{
					if( comArrSpare[t].id === idSparepart ) 
					{
						IndexSpare = t;
						break;
					}
								
				}
				$scope.sparePartData.splice( IndexSpare, 1 );
				$indexSpare = comArrSpare.length;
				for(var j=0;j<$indexSpare;j++)
				{
					$scope.sparePartData[j].id = Number(j)+Number(1);
				}
					 $("#popup_boxSpare").hide();
					 $("#overlay").remove();
			};



$scope.cancelSparepartPopup=function(){
					$("#popup_boxSpare").hide();
					 $("#overlay").remove();
					}

	  //==============Spare Part & Service===========//
    $scope.servicPartData = [];
    $indexService=0;

  $scope.addQtnServiceFormField = function() 
	{
		//alert("Add item");
		$indexService++;
	    $scope.servicPartData.push({'id':$indexService,'motorType':'NO','protectionGrade':'IP55','internationalStd':'JIS','motorPower':'0.1','pole':'4','phase':'3','voltage':'200','freq':'50','mtrEfficncyClass':'0','inverter':'1','motorBrake':'1','motorBrakeVolt':'1','customerPrice':'0','tpricereq':true,'markUpreq':true,'qntyreq':true,'costreqsts':true,'tpfactorsts':true,'lpfactor':true})
	};
	
	var idServicepart="";
		$scope.removeServiceFormRow = function(name)
		{	
		
			idServicepart=name;
			   // alert(name);
			   var overlay = jQuery('<div id="overlay"> </div>');	
						 overlay.appendTo(document.body);	
					 $("#popup_boxService").show();
			//alert(name);
			
			//alert($scope.sparePartData[j].id);			
	   };
	   
	   	      $scope.RemoveRowServicepartPopup = function()
			   {
					var IndexService = -1;		
					var serviceArr = eval( $scope.servicPartData );
					//alert(comArrSpare.length);
					for( var t = 0; t < serviceArr.length; t++ ) 
					{
						if( serviceArr[t].id === idServicepart ) 
						{
							IndexService = t;
							break;
						}
									
					}
					$scope.servicPartData.splice( IndexService, 1 );
					$indexService = serviceArr.length;
					for(var j=0;j<$indexService;j++)
					{
						$scope.servicPartData[j].id = Number(j)+Number(1);
					}
						 $("#popup_boxService").hide();
						 $("#overlay").remove();
				};
	
	
	
	$scope.cancelServicepartPopup=function(){
						$("#popup_boxService").hide();
						 $("#overlay").remove();
						}

//=============Term & Condition =============//
$scope.termData = [];
    $indexTerm = 0;
$scope.addTerms = function()
{
    $indexTerm++;
    $scope.termData.push({'id':$indexTerm})
}



/*$scope.removeTermRow = function(name)
{
	alert(name);
	var IndexTerm = -1;		
					var terms = eval( $scope.termData );
					//alert(comArrSpare.length);
					for( var i = 0; i < terms.length; i++ ) 
					{
						if( terms[i].id === name ) 
						{
							IndexTerm = i;
							break;
						}
									
					}
					$scope.termData.splice( IndexTerm, 1 );
					$indexTerm = terms.length;
					for(var k=0;k<$indexTerm;k++)
					{
						$scope.termData[k].id = Number(k)+Number(1);
					}
    
};*/
var idNote="";
$scope.removeTermRow = function(name)
{
	idNote=name;
			   // alert(name);
			   var overlay = jQuery('<div id="overlay"> </div>');	
						 overlay.appendTo(document.body);	
					 $("#popup_boxNotes").show();
    
};


	   	      $scope.RemoveRowNotesPopup = function()
			   {
					var IndexTerm = -1;		
					var terms = eval( $scope.termData );
					//alert(comArrSpare.length);
					for( var i = 0; i < terms.length; i++ ) 
					{
						if( terms[i].id === idNote ) 
						{
							IndexTerm = i;
							break;
						}
									
					}
					$scope.termData.splice( IndexTerm, 1 );
					$indexTerm = terms.length;
					for(var k=0;k<$indexTerm;k++)
					{
						$scope.termData[k].id = Number(k)+Number(1);
					}
						 $("#popup_boxNotes").hide();
						 $("#overlay").remove();
				};
	
	
	
	$scope.cancelNotesPopup=function(){
						$("#popup_boxNotes").hide();
						 $("#overlay").remove();
						}
						
						
						
		$scope.changMtrvoltStandard = function(mtrvolt,index)
		{
			var index = this.$index; 
				//alert(index);
				//alert(invertid);
				if(mtrvolt == "0")
				{
					$scope.qtnFullUnitData[index].voltage = "400";
					$scope.qtnFullUnitData[index].motorBrakeVolt = "1";
				}
				else
				{
					$scope.qtnFullUnitData[index].voltage = "200";
					$scope.qtnFullUnitData[index].motorBrakeVolt = "0";
				}
				$scope.$apply();
		};
		
		$scope.changBrakevoltStandard = function(brkvolt,index)
		{
			var index = this.$index; 
				//alert(index);
				//alert(invertid);
				if(brkvolt == "0")
				{
					$scope.qtnFullUnitData[index].voltage = "200";
					//$scope.dataField[index].basefreq = "1";
				}
				else
				{
					$scope.qtnFullUnitData[index].voltage = "400";
					//$scope.dataField[index].basefreq = "0";
				}
				$scope.$apply();
		};	
		
		$scope.changMtrvoltCustomize = function(mtrvolt,index)
		{
			var index = this.$index; 
				//alert(index);
				//alert(invertid);
				if(mtrvolt == "0")
				{
					$scope.projectUnitData[index].voltage = "400";
					$scope.projectUnitData[index].motorBrakeVolt = "1";
				}
				else
				{
					$scope.projectUnitData[index].voltage = "200";
					$scope.projectUnitData[index].motorBrakeVolt = "0";
				}
				$scope.$apply();
		};
		
		$scope.changBrakevoltCustomize = function(brkvolt,index)
		{
			var index = this.$index; 
				//alert(index);
				//alert(invertid);
				if(brkvolt == "0")
				{
					$scope.projectUnitData[index].voltage = "200";
					//$scope.dataField[index].basefreq = "1";
				}
				else
				{
					$scope.projectUnitData[index].voltage = "400";
					//$scope.dataField[index].basefreq = "0";
				}
				$scope.$apply();
		};	
		$scope.changMtrvoltSparePart = function(mtrvolt,index)
		{
			var index = this.$index; 
				//alert(index);
				//alert(invertid);
				if(mtrvolt == "0")
				{
					$scope.sparePartData[index].voltage = "400";
					$scope.sparePartData[index].motorBrakeVolt = "1";
				}
				else
				{
					$scope.sparePartData[index].voltage = "200";
					$scope.sparePartData[index].motorBrakeVolt = "0";
				}
				$scope.$apply();
		};
		
		$scope.changBrakevoltSparePart = function(brkvolt,index)
		{
			var index = this.$index; 
				//alert(index);
				//alert(invertid);
				if(brkvolt == "0")
				{
					$scope.sparePartData[index].voltage = "200";
					//$scope.dataField[index].basefreq = "1";
				}
				else
				{
					$scope.sparePartData[index].voltage = "400";
					//$scope.dataField[index].basefreq = "0";
				}
				$scope.$apply();
		};
		$scope.changMtrvoltService = function(mtrvolt,index)
		{
			var index = this.$index; 
				//alert(index);
				//alert(invertid);
				if(mtrvolt == "0")
				{
					$scope.servicPartData[index].voltage = "400";
					$scope.servicPartData[index].motorBrakeVolt = "1";
				}
				else
				{
					$scope.servicPartData[index].voltage = "200";
					$scope.servicPartData[index].motorBrakeVolt = "0";
				}
				$scope.$apply();
		};
		
		$scope.changBrakevoltService = function(brkvolt,index)
		{
			var index = this.$index; 
				//alert(index);
				//alert(invertid);
				if(brkvolt == "0")
				{
					$scope.servicPartData[index].voltage = "200";
					//$scope.dataField[index].basefreq = "1";
				}
				else
				{
					$scope.servicPartData[index].voltage = "400";
					//$scope.dataField[index].basefreq = "0";
				}
				$scope.$apply();
		};

$scope.changeMotorSpareStatus = function(status,index3)
{
	//alert(552522);
	var index3 = this.$index;
	if(status == '2') 
	{ 
		$scope.reqSpareStatus = true; 
		/*$scope.expSts = true;
		//$scope.expOthSts = true;
		$scope.mtrSprSts = true;
		$scope.poleSprSts = true;
		$scope.phSprSts = true;
		$scope.voltSprSts = true;
		$scope.hzSprSts = true;
		$scope.rpmSprSts = true;
		$scope.dataSparePart[index3].gearhead = "";
		$scope.dataSparePart[index3].shiMfg = "";*/
	}
	else 
	{ 
		$scope.reqSpareStatus = false;
		$scope.sparePartData[index3].gearMotor = "";
		/*$scope.expSts = false;
		//$scope.expOthSts = false;
		$scope.mtrSprSts = false;
		$scope.poleSprSts = false;
		$scope.phSprSts = false;
		$scope.voltSprSts = false;
		$scope.hzSprSts = false;
		$scope.rpmSprSts = false;
		$scope.dataSparePart[index3].gearMotor = "";
		$scope.dataSparePart[index3].gearhead = "";
		$scope.dataSparePart[index3].shiMfg = "";*/
	}
	
	/*if(status == '0')
	{
		$scope.mtrsnosts = true;
		$scope.dataSparePart[index3].motorSerial = "";
	}
	else
	{
		$scope.mtrsnosts = false;
		$scope.dataSparePart[index3].motorSerial = "";
		$scope.dataSparePart[index3].gearhead = "";
		$scope.dataSparePart[index3].shiMfg = "";
	}*/
	
	
	
}


	$scope.getMotorKw = function()
	  {
         
		 $.post("getmtr_kw.do",function(json)
					{
						//alert(JSON.stringify(json['data']));
						 $scope.motorKWData = json['data'];
                         //$("#getFullUnit").trigger("click"); 
						
					});
					 $scope.$apply();
	  };

 	  $scope.getMotorPole = function()
	  {
		  $scope.poleData = [{ id: '1', pole: '4' }, { id: '2', pole: '6' },{ id: '3', pole: '8' }, { id: '4', pole: '10' }]; 
	  };
	  
	  $scope.getMotorPhase = function()
	  {
		  $scope.phaseData = [{ id: '1', phase: '1' }, { id: '2', phase: '3' }]; 
	  };
	  
	  $scope.getMotorVoltage = function()
	  {
		  $scope.voltageData = [];
		  //$scope.voltageData = [{"id":"200","voltage":"200"},{"id":"220","voltage":"220"},{"id":"220/400","voltage":"220/400"},{"id":"220/440","voltage":"220/440"},{"id":"230","voltage":"230"},{"id":"230/400","voltage":"230/400"},{"id":"240","voltage":"240"},{"id":"240/415","voltage":"240/415"},{"id":"380","voltage":"380"},{"id":"400","voltage":"400"},{"id":"415","voltage":"415"},{"id":"440","voltage":"440"},{"id":"460","voltage":"460"},{"id":"480","voltage":"480"}]; 
		  $.post("getVoltagesforcase.do",function(json)
					{
						//alert(JSON.stringify(json['data']));
						 $scope.voltageData = json['data'];
						 
					});
					$scope.$apply();
	  };
	  $scope.getMotorHZ = function()
	  {
		  $scope.hertzData = [{ id: '1', 'hertz': '50' }, { id: '2', 'hertz': '60' }]; 
	  };
	  $scope.getMotorQtnType = function()
	  {
		  $.post("getexlositionclassfication.do",function(json)
					{
						//alert(JSON.stringify(json['data']));
						 $scope.motorTypeQtnData = json['data'];
						 $scope.$apply();
					});
	  };
      $scope.getQtnProtectionGrade = function()
	  {
		  $scope.protectionGradeQtnData = [{ id: '1', 'protectionGrade': 'IP44' }, { id: '2', 'protectionGrade': 'IP55' },{ id: '3', 'protectionGrade': 'IP56' }, { id: '4', 'protectionGrade': 'IP65' }]; 
	  };
	  
	  $scope.getQtnInternationalStandards = function()
	  {
		  $scope.internationalStdQtnData = [{ id: '1', 'internationalStd': 'CE' }, { id: '2', 'internationalStd': 'UL' },{ id: '3', 'internationalStd': 'CCC' }, { id: '4', 'internationalStd': 'JIS' },{ id: '5', 'internationalStd': 'IEC' }, { id: '6', 'internationalStd': 'NEMA'}];
		   
	  };
	  
	  
	  $scope.loadSTdRPM = function(pole,hz,index)
	  {
		
		 var index = this.$index;
		 $.post("getRpmforCase.do",{pole:pole,frequency:hz},function(json)
					{
						//alert(JSON.stringify(json['rpm']));
						$scope.qtnFullUnitData[index].inPutRPM = json['rpm'];
						 $scope.$apply();
					});
		  
		  $scope.$apply();
	  };
	  $scope.loadCustomRPM = function(pole,hz,index)
	  {
		
		 var index = this.$index;
		 $.post("getRpmforCase.do",{pole:pole,frequency:hz},function(json)
					{
						//alert(JSON.stringify(json['rpm']));
						$scope.projectUnitData[index].inPutRPM = json['rpm'];
						 $scope.$apply();
					});
		  
		  $scope.$apply();
	  };
	  $scope.loadSpareRPM = function(pole,hz,index)
	  {
		
		 var index = this.$index;
		 $.post("getRpmforCase.do",{pole:pole,frequency:hz},function(json)
					{
						//alert(JSON.stringify(json['rpm']));
						$scope.sparePartData[index].inPutRPM = json['rpm'];
						 $scope.$apply();
					});
		  
		  $scope.$apply();
	  };
	  $scope.loadServiceRPM = function(pole,hz,index)
	  {
		
		 var index = this.$index;
		 $.post("getRpmforCase.do",{pole:pole,frequency:hz},function(json)
					{
						//alert(JSON.stringify(json['rpm']));
						$scope.servicPartData[index].inPutRPM = json['rpm'];
						 $scope.$apply();
					});
		  
		  $scope.$apply();
	  };
	  
	 /* $scope.loadTechRPM = function(pole,hz,ratioReq,index)
	  {
		
		 var index = this.$index;
		 $.getJSON("getRpmforCase.do",{pole:pole,frequency:hz},function(json)
					{
						//alert(JSON.stringify(json['rpm']));
						$scope.dataQuery[index].rpm = json['rpm'];
						var rpmVal = json['rpm'];
						var ratioVal = ratioReq;
						var reqOutputSpeed;
						reqOutputSpeed = rpmVal/ratioVal
						
						 var reqGetSpeed ;
						if(isNaN(reqOutputSpeed) || reqOutputSpeed == "Infinity") {reqGetSpeed = 0;} else { reqGetSpeed = reqOutputSpeed;}
						
						$scope.dataQuery[index].requiredOutputSpeed = reqGetSpeed.toFixed(2);
						
						 $scope.$apply();
					});
		  
		  $scope.$apply();
	  };*/
	  
	  $scope.validateEmailId = function(emailId)
			   {
				  // alert(emailId);
				   var mailformat = /^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/; 
				   if(emailId.length>=5)
					   {
						  if(emailId.match(mailformat))
						   {
							 // alert("Valid"); 
							   $("#existVal" ).hide();
						   }
						  else
						   {
							   //alert("Invalid"); 
							   $("#existVal" ).show();
						   } 
					   }
				   else
					   {
							$("#existVal" ).hide();
					   }
				   
				   
			   }
	  
   $scope.getFullUnitItemized = function(QtnType,QtnMaster,form)
    {
		qtnFormData = new FormData();
		$scope.addQuotation = angular.copy($scope.master);
		form.$setPristine(true);
		
		//$scope.addQuotation.madatory = "0";
       //alert(qtnType);
	   //$rootScope.qtnAction = qtnType;
	    //$scope.serviceplaceholder = "Case Ref.No";
        /*qtnFormData = new FormData();
		$indexFullUnit=1;
		$scope.qtnFullUnitData=[{'id':$indexFullUnit,'motorPower':'0.1','pole':'4','phase':'3','voltage':'400','freq':'50'}];
		$indexTerm=1;
    	$scope.termData=[{'id':$indexTerm}];
		$scope.addQuotation = angular.copy($scope.master);
 		$scope.loadQuotationSeqNum(QtnType,form);
		$scope.loadSysDate();
		$scope.getvalidDate();
		$scope.addQuotation = ({'qtnType':'0','qtnProgress':'0','showCost':'0','modifiedstatus':'0','createdBy':Username,'currency':'AUD','tax':'VAT','country':'AUSTRALIA','taxPercent':'10','paymentTerm':'2','salesTerm':'CIF','estPercent':'10','assigned':'Sales'});
		form.$setPristine(true); */
		
			
			$.post("getSavedQuatationDataOnQuatationNumberFromQuatationTempwithclick.do",{code:QtnType,qtnmaster:QtnMaster},function(json)
			{
				//alert(JSON.stringify(json));
				   $scope.addQuotation = json['quatationform'][0];
				   $scope.qtnFullUnitData = json['quatationgrid'];
				   $scope.termData = json['quatationtermsgrid'];
				   
				   var validData = json['quatationform'][0];
				   //alert(JSON.stringify(validData.emailAddr));
				   
				   if(validData.currency == "" || validData.currency == undefined || validData.currency == "NA")
						{
							//alert("if");
							//$scope.addQuotation.currency = "";
							//$scope.addQuotation.madatory = "1";
							$("#Currency").css("background-color", "#ffff7f"); 
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.currency = validData.currency;
							//$scope.addQuotation.madatory = "0";
							$("#Currency").css("background-color", "#99ff99"); 
						}
						if(validData.attention == "" || validData.attention == undefined || validData.attention == "NA")
						{
							//alert("if");
							//$scope.addQuotation.attention = "";
							//$scope.addQuotation.madatory = "1";
							$("#Attention").css("background-color", "#ffff7f"); 
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.attention = validData.contName;
							//$scope.addQuotation.madatory = "0";
							$("#Attention").css("background-color", "#99ff99"); 
						}
						if(validData.custCode == "" || validData.custCode == undefined || validData.custCode == "NA")
						{
							//alert("if");
							//$scope.addQuotation.custCode = "";
							//$scope.addQuotation.madatory = "1";
							
									$("#CustCode").css("background-color", "#ffff7f"); 
									//$("#CustProsCode").css("background-color", "#ffff7f"); 
							$scope.$apply();
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.custCode = validData.account;
							//$scope.addQuotation.madatory = "0";
							
									$("#CustCode").css("background-color", "#99ff99"); 
									//$("#CustProsCode").css("background-color", "#99ff99"); 
							$scope.$apply();
						}
						if(validData.telephone == "" || validData.telephone == undefined || validData.telephone == "NA")
						{
							//alert("if");
							//$scope.addQuotation.telephone = "";
							//$scope.addQuotation.madatory = "1";
							$("#Telephone").css("background-color", "#ffff7f"); 
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.telephone = validData.phnumber;
							//$scope.addQuotation.madatory = "0";
							$("#Telephone").css("background-color", "#99ff99"); 
						}
						if(validData.tax == "" || validData.tax == undefined || validData.tax == "NA")
						{
							//alert("if");
							//$scope.addQuotation.tax = "";
							//$scope.addQuotation.madatory = "1";
							$("#TaxName").css("background-color", "#ffff7f"); 
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.tax = validData.taxName;
							//$scope.addQuotation.madatory = "0";
							$("#TaxName").css("background-color", "#99ff99");
						}
						if(validData.country == "" || validData.country == undefined || validData.country == "NA")
						{
							//alert("if");
							//$scope.addQuotation.country = "";
							//$scope.addQuotation.madatory = "1";
							$("#CountryName").css("background-color", "#ffff7f"); 
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.country = validData.billingCountries;
							//$scope.addQuotation.madatory = "0";
							$("#CountryName").css("background-color", "#99ff99");
						}
						if(validData.salesMan == "" || validData.salesMan == undefined || validData.salesMan == "NA")
						{
							//alert("if");
							//$scope.addQuotation.salesMan = "";
							//$scope.addQuotation.madatory = "1";
							$("#SalesMan").css("background-color", "#ffff7f");
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.salesMan = validData.salesPerson;
							//$scope.addQuotation.madatory = "0";
							$("#SalesMan").css("background-color", "#99ff99");
						}
						
						if(validData.taxPercent == "" || validData.taxPercent == undefined || validData.taxPercent == "NA")
						{
							//alert("if");
							//$scope.addQuotation.taxPercent = "";
							//$scope.addQuotation.madatory = "1";
							$("#TaxPercent").css("background-color", "#ffff7f");
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.taxPercent = validData.taxPercent;
							//$scope.addQuotation.madatory = "0";
							$("#TaxPercent").css("background-color", "#99ff99");
						}
						
						if(validData.salesManCode == "" || validData.salesManCode == undefined || validData.salesManCode == "NA")
						{
							//alert("if");
							//$scope.addQuotation.salesManCode = "";
							//$scope.addQuotation.madatory = "1";
							$("#SalesManCode").css("background-color", "#ffff7f");
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.salesManCode = validData.salesPersonCode;
							//$scope.addQuotation.madatory = "0";
							$("#SalesManCode").css("background-color", "#99ff99");
						}
						if(validData.emailAddr == "" || validData.emailAddr == undefined || validData.emailAddr == "NA")
						{
							//alert("if");
							//$scope.addQuotation.emailAddr = "";
							//$scope.addQuotation.madatory = "1";
							$("#Email").css("background-color", "#ffffff");
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.emailAddr = validData.email;
							//$scope.addQuotation.madatory = "0";
							$("#Email").css("background-color", "#99ff99");
						}
						if(validData.paymentTerm == "" || validData.paymentTerm == undefined || validData.paymentTerm == "NA")
						{
							//alert("if");
							//$scope.addQuotation.paymentTerm = "";
							//$scope.addQuotation.madatory = "1";
							$("#PaymentTerm").css("background-color", "#ffff7f");
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.paymentTerm = validData.paymentTerm;
							//$scope.addQuotation.madatory = "0";
							$("#PaymentTerm").css("background-color", "#99ff99");
						}
						/*if(validData.assigned == "" || validData.assigned == undefined || validData.assigned == "NA")
						{
							//alert("if");
							//$scope.addQuotation.assigned = "";
							//$scope.addQuotation.madatory = "1";
							$("#AssignTo").css("background-color", "#ffff7f");
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.assigned = validData.departmentname;
							//$scope.addQuotation.madatory = "0";
							$("#AssignTo").css("background-color", "#99ff99");
						}*/
						if(validData.createdBy == "" || validData.createdBy == undefined || validData.createdBy == "NA")
						{
							//alert("if");
							//$scope.addQuotation.createdBy = "";
							//$scope.addQuotation.madatory = "1";
							$("#CreatedBy").css("background-color", "#ffff7f");
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.createdBy = validData.createdby;
							//$scope.addQuotation.madatory = "0";
							$("#CreatedBy").css("background-color", "#99ff99");
						}
				   
				   /*if(validData.emailAddr == "" || validData.emailAddr == undefined || validData.emailAddr == "NA")
					{
						//alert("if");
						$scope.addQuotation.emailAddr = "";
						//$scope.addQuotation.madatory = "1";
						$("#Email").css("background-color", "#ffffff");
					}
					else
					{
						//alert("else");
						$scope.addQuotation.emailAddr = validData.emailAddr;
						//$scope.addQuotation.madatory = "0";
						$("#Email").css("background-color", "#99ff99");
					}*/
				   
				   var departmentSplit = json['quatationform'][0].assigned;
						 var departmentSales = [];
						 if(departmentSplit == undefined || departmentSplit == "" || departmentSplit == "NA")
						 {
							 //alert("if");
							 $('#picturegallery1').val("['']").trigger('chosen:updated');
							 $("#picturegallery1").css("background-color", "#ffff7f");
						 }
						 else
						 {
							 //alert(departmentSplit.length + " " + " else ");
							 for (var s = 0; s < departmentSplit.length; s++) {
					
										departmentSales.push(departmentSplit[s]);
										//alert("accessoriesSales"+accessoriesSales);
							}
							 $('#picturegallery1').val(departmentSales).trigger('chosen:updated');
											$scope.addQuotation.assigned = departmentSales;
											$("#picturegallery1").css("background-color", "#99ff99");
						 }
						 
						/* if(validData.flag == 1)
						{
							//alert("if");
							
							$scope.addQuotation.madatory = "0";
							
						}
						else
						{
							//alert("else");
							
							$scope.addQuotation.madatory = "1";
							
						}*/
						/*if(validData.attention == "" || validData.attention == undefined || validData.attention == "NA")
						{
							//alert("if");
							$scope.addQuotation.attention = "";
							//$scope.addQuotation.madatory = "1";
							$("#Attention").css("background-color", "#ffff7f"); 
						}
						else
						{
							//alert("else");
							$scope.addQuotation.attention = validData.attention;
							//$scope.addQuotation.madatory = "0";
							$("#Attention").css("background-color", "#99ff99"); 
						}*/
				   
				     var asd = json['quatationform'][0].qtnNo;
				     asd2 = asd.split("-");
					 $scope.qType = asd2[0];
					 $scope.coun_year_Code = asd2[1];
					 $scope.runNo = asd2[2];
					 $scope.version = asd2[3];
					 $scope.addQuotation.qtnNo = json['quatationform'][0].qtnNo;
				   
				 
				 $scope.$apply();
			});
			/*$timeout(function(){

		}, 3000);*/
		
		
		
       
    };
    $scope.getProjectItemized = function(QtnType,QtnMaster,form)
    {
		qtnFormData = new FormData();
		$scope.addQuotation = angular.copy($scope.master);
		form.$setPristine(true);
		$scope.stepsModel = [];
		 
		//$scope.serviceplaceholder = "Case Ref.No";
		/*qtnFormData = new FormData();
        $indexProject=1;
		$scope.projectUnitData=[{'id':$indexProject}];
		$indexTerm=1;
    	$scope.termData=[{'id':$indexTerm}];
		$scope.addQuotation = angular.copy($scope.master);
	    $scope.loadQuotationSeqNum(QtnType,form);
		$scope.loadSysDate();
		$scope.getvalidDate();
		$scope.addQuotation = ({'qtnType':'1','qtnProgress':'0','showCost':'0','modifiedstatus':'0','createdBy':Username,'currency':'USD','tax':'VAT','country':'AUSTRALIA','taxPercent':'10','paymentTerm':'2','salesTerm':'CIF','estPercent':'10','assigned':'Sales'});
		form.$setPristine(true); */
		
		
			
			$.post("getSavedQuatationDataOnQuatationNumberFromQuatationTempwithclick.do",{code:QtnType,qtnmaster:QtnMaster},function(json)
			{
				//alert(JSON.stringify(json['quatationgrid']));
				
				   
				   
				   //emailAddr
				   var validData = json['quatationform'][0];
				   //alert(JSON.stringify(validData.emailAddr));
				    $scope.addQuotation = json['quatationform'][0];
				   $scope.projectUnitData = json['quatationgrid'];
				   $scope.termData = json['quatationtermsgrid'];
				   
				   
				   if(validData.currency == "" || validData.currency == undefined || validData.currency == "NA")
						{
							//alert("if");
							//$scope.addQuotation.currency = "";
							//$scope.addQuotation.madatory = "1";
							$("#Currency").css("background-color", "#ffff7f"); 
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.currency = validData.currency;
							//$scope.addQuotation.madatory = "0";
							$("#Currency").css("background-color", "#99ff99"); 
						}
						if(validData.attention == "" || validData.attention == undefined || validData.attention == "NA")
						{
							//alert("if");
							//$scope.addQuotation.attention = "";
							//$scope.addQuotation.madatory = "1";
							$("#Attention").css("background-color", "#ffff7f"); 
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.attention = validData.contName;
							//$scope.addQuotation.madatory = "0";
							$("#Attention").css("background-color", "#99ff99"); 
						}
						
						if(validData.custCode == "" || validData.custCode == undefined || validData.custCode == "NA")
						{
							//alert("if");
							//$scope.addQuotation.custCode = "";
							//$scope.addQuotation.madatory = "1";
							$("#CustCode").css("background-color", "#ffff7f"); 
							//$("#CustProsCode").css("background-color", "#ffff7f");
							$scope.$apply();
						}
						else
						{
							//alert("else"+"--------------");
							//$scope.addQuotation.custCode = validData.account;
							//$scope.addQuotation.madatory = "0";
							$("#CustCode").css("background-color", "#99ff99");
							//$("#CustProsCode").css("background-color", "#99ff99");
							$scope.$apply();
						}
						if(validData.telephone == "" || validData.telephone == undefined || validData.telephone == "NA")
						{
							//alert("if");
							//$scope.addQuotation.telephone = "";
							//$scope.addQuotation.madatory = "1";
							$("#Telephone").css("background-color", "#ffff7f"); 
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.telephone = validData.phnumber;
							//$scope.addQuotation.madatory = "0";
							$("#Telephone").css("background-color", "#99ff99"); 
						}
						if(validData.tax == "" || validData.tax == undefined || validData.tax == "NA")
						{
							//alert("if");
							//$scope.addQuotation.tax = "";
							//$scope.addQuotation.madatory = "1";
							$("#TaxName").css("background-color", "#ffff7f"); 
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.tax = validData.taxName;
							//$scope.addQuotation.madatory = "0";
							$("#TaxName").css("background-color", "#99ff99");
						}
						if(validData.country == "" || validData.country == undefined || validData.country == "NA")
						{
							//alert("if");
							//$scope.addQuotation.country = "";
							//$scope.addQuotation.madatory = "1";
							$("#CountryName").css("background-color", "#ffff7f"); 
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.country = validData.billingCountries;
							//$scope.addQuotation.madatory = "0";
							$("#CountryName").css("background-color", "#99ff99");
						}
						if(validData.salesMan == "" || validData.salesMan == undefined || validData.salesMan == "NA")
						{
							//alert("if");
							//$scope.addQuotation.salesMan = "";
							//$scope.addQuotation.madatory = "1";
							$("#SalesMan").css("background-color", "#ffff7f");
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.salesMan = validData.salesPerson;
							//$scope.addQuotation.madatory = "0";
							$("#SalesMan").css("background-color", "#99ff99");
						}
						
						if(validData.taxPercent == "" || validData.taxPercent == undefined || validData.taxPercent == "NA")
						{
							//alert("if");
							//$scope.addQuotation.taxPercent = "";
							//$scope.addQuotation.madatory = "1";
							$("#TaxPercent").css("background-color", "#ffff7f");
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.taxPercent = validData.taxPercent;
							//$scope.addQuotation.madatory = "0";
							$("#TaxPercent").css("background-color", "#99ff99");
						}
						
						if(validData.salesManCode == "" || validData.salesManCode == undefined || validData.salesManCode == "NA")
						{
							//alert("if");
							//$scope.addQuotation.salesManCode = "";
							//$scope.addQuotation.madatory = "1";
							$("#SalesManCode").css("background-color", "#ffff7f");
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.salesManCode = validData.salesPersonCode;
							//$scope.addQuotation.madatory = "0";
							$("#SalesManCode").css("background-color", "#99ff99");
						}
						if(validData.emailAddr == "" || validData.emailAddr == undefined || validData.emailAddr == "NA")
						{
							//alert("if");
							//$scope.addQuotation.emailAddr = "";
							//$scope.addQuotation.madatory = "1";
							$("#Email").css("background-color", "#ffffff");
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.emailAddr = validData.email;
							//$scope.addQuotation.madatory = "0";
							$("#Email").css("background-color", "#99ff99");
						}
						if(validData.paymentTerm == "" || validData.paymentTerm == undefined || validData.paymentTerm == "NA")
						{
							//alert("if");
							//$scope.addQuotation.paymentTerm = "";
							//$scope.addQuotation.madatory = "1";
							$("#PaymentTerm").css("background-color", "#ffff7f");
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.paymentTerm = validData.paymentTerm;
							//$scope.addQuotation.madatory = "0";
							$("#PaymentTerm").css("background-color", "#99ff99");
						}
						/*if(validData.assigned == "" || validData.assigned == undefined || validData.assigned == "NA")
						{
							//alert("if");
							//$scope.addQuotation.assigned = "";
							//$scope.addQuotation.madatory = "1";
							$("#AssignTo").css("background-color", "#ffff7f");
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.assigned = validData.departmentname;
							//$scope.addQuotation.madatory = "0";
							$("#AssignTo").css("background-color", "#99ff99");
						}*/
						if(validData.createdBy == "" || validData.createdBy == undefined || validData.createdBy == "NA")
						{
							//alert("if");
							//$scope.addQuotation.createdBy = "";
							//$scope.addQuotation.madatory = "1";
							$("#CreatedBy").css("background-color", "#ffff7f");
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.createdBy = validData.createdby;
							//$scope.addQuotation.madatory = "0";
							$("#CreatedBy").css("background-color", "#99ff99");
						}
				   
				  
				   var departmentSplit = json['quatationform'][0].assigned;
						 var departmentSales = [];
						 if(departmentSplit == undefined || departmentSplit == "" || departmentSplit == "NA")
						 {
							 //alert("if");
							 $('#picturegallery1').val("['']").trigger('chosen:updated');
							 $("#picturegallery1").css("background-color", "#ffff7f");
						 }
						 else
						 {
							 //alert(departmentSplit.length + " " + " else ");
							 for (var s = 0; s < departmentSplit.length; s++) {
					
										departmentSales.push(departmentSplit[s]);
										//alert("accessoriesSales"+accessoriesSales);
							}
							 $('#picturegallery1').val(departmentSales).trigger('chosen:updated');
											$scope.addQuotation.assigned = departmentSales;
											$("#picturegallery1").css("background-color", "#99ff99");
						 }
				   
				   var getImage = json['quatationform'][0].imagepath;
								  // alert(getImage);
									 if(getImage!=null)
									   {
										   //alert(getImage + " " + 1);
										   var imgPrew = getImage.trim();
										   if(imgPrew==null || imgPrew=="" )
										   {
											   //alert(getImage + " " + 2);
											 
											  $scope.stepsModel = [];
											  $scope.$apply();
											  //$scope.dummyPhoto="";
					                          //$('#dummyPhoto').trigger('blur');
										   }
										   else
										   {
											   //alert(getImage + " " + 3);
											   $scope.stepsModel = getImage.split(',');
											   $scope.$apply();
											   
										   }
									   }
									   else
									   {
										   //alert(getImage + " " + 4);
										    $scope.stepsModel = [];
										    $scope.$apply();
										 
									   }
				     var asd = json['quatationform'][0].qtnNo;
				     asd2 = asd.split("-");
					 $scope.qType = asd2[0];
					 $scope.coun_year_Code = asd2[1];
					 $scope.runNo = asd2[2];
					 $scope.version = asd2[3];
					 $scope.addQuotation.qtnNo = json['quatationform'][0].qtnNo;
				   
				 
				 $scope.$apply();
			});

		
		
		
		
       
    }
    
	$scope.getSparePartItemized = function(QtnType,QtnMaster,form)
    {
		qtnFormData = new FormData();
		$scope.addQuotation = angular.copy($scope.master);
		form.$setPristine(true);
		
        //$scope.serviceplaceholder = "Case Ref.No";
       /* qtnFormData = new FormData();
		$indexSpare=1;
		$scope.sparePartData=[{'id':$indexSpare}];
		$indexTerm=1;
    	$scope.termData=[{'id':$indexTerm}];
		$scope.addQuotation = angular.copy($scope.master);
		$scope.loadQuotationSeqNum(QtnType,form);
		$scope.loadSysDate();
		$scope.getvalidDate();
		$scope.addQuotation = ({'qtnType':'2','qtnProgress':'0','showCost':'0','modifiedstatus':'0','createdBy':Username,'currency':'USD','tax':'VAT','country':'AUSTRALIA','taxPercent':'10','paymentTerm':'2','salesTerm':'CIF','estPercent':'10','assigned':'Sales'});
		form.$setPristine(true);*/ 
		
		
			
			$.post("getSavedQuatationDataOnQuatationNumberFromQuatationTempwithclick.do",{code:QtnType,qtnmaster:QtnMaster},function(json)
			{
				//alert(JSON.stringify(json));
				   $scope.addQuotation = json['quatationform'][0];
				   $scope.sparePartData = json['quatationgrid'];
				   $scope.termData = json['quatationtermsgrid'];
				   
				   var validData = json['quatationform'][0];
				   //alert(JSON.stringify(validData.emailAddr));
				   if(validData.currency == "" || validData.currency == undefined || validData.currency == "NA")
						{
							//alert("if");
							//$scope.addQuotation.currency = "";
							//$scope.addQuotation.madatory = "1";
							$("#Currency").css("background-color", "#ffff7f"); 
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.currency = validData.currency;
							//$scope.addQuotation.madatory = "0";
							$("#Currency").css("background-color", "#99ff99"); 
						}
						if(validData.attention == "" || validData.attention == undefined || validData.attention == "NA")
						{
							//alert("if");
							//$scope.addQuotation.attention = "";
							//$scope.addQuotation.madatory = "1";
							$("#Attention").css("background-color", "#ffff7f"); 
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.attention = validData.contName;
							//$scope.addQuotation.madatory = "0";
							$("#Attention").css("background-color", "#99ff99"); 
						}
						if(validData.custCode == "" || validData.custCode == undefined || validData.custCode == "NA")
						{
							//alert("if");
							//$scope.addQuotation.custCode = "";
							//$scope.addQuotation.madatory = "1";
							$("#CustCode").css("background-color", "#ffff7f"); 
							//$("#CustProsCode").css("background-color", "#ffff7f"); 
							$scope.$apply();
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.custCode = validData.account;
							//$scope.addQuotation.madatory = "0";
							$("#CustCode").css("background-color", "#99ff99"); 
							//$("#CustProsCode").css("background-color", "#99ff99");
							$scope.$apply();
						}
						if(validData.telephone == "" || validData.telephone == undefined || validData.telephone == "NA")
						{
							//alert("if");
							//$scope.addQuotation.telephone = "";
							//$scope.addQuotation.madatory = "1";
							$("#Telephone").css("background-color", "#ffff7f"); 
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.telephone = validData.phnumber;
							//$scope.addQuotation.madatory = "0";
							$("#Telephone").css("background-color", "#99ff99"); 
						}
						if(validData.tax == "" || validData.tax == undefined || validData.tax == "NA")
						{
							//alert("if");
							//$scope.addQuotation.tax = "";
							//$scope.addQuotation.madatory = "1";
							$("#TaxName").css("background-color", "#ffff7f"); 
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.tax = validData.taxName;
							//$scope.addQuotation.madatory = "0";
							$("#TaxName").css("background-color", "#99ff99");
						}
						if(validData.country == "" || validData.country == undefined || validData.country == "NA")
						{
							//alert("if");
							//$scope.addQuotation.country = "";
							//$scope.addQuotation.madatory = "1";
							$("#CountryName").css("background-color", "#ffff7f"); 
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.country = validData.billingCountries;
							//$scope.addQuotation.madatory = "0";
							$("#CountryName").css("background-color", "#99ff99");
						}
						if(validData.salesMan == "" || validData.salesMan == undefined || validData.salesMan == "NA")
						{
							//alert("if");
							//$scope.addQuotation.salesMan = "";
							//$scope.addQuotation.madatory = "1";
							$("#SalesMan").css("background-color", "#ffff7f");
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.salesMan = validData.salesPerson;
							//$scope.addQuotation.madatory = "0";
							$("#SalesMan").css("background-color", "#99ff99");
						}
						
						if(validData.taxPercent == "" || validData.taxPercent == undefined || validData.taxPercent == "NA")
						{
							//alert("if");
							//$scope.addQuotation.taxPercent = "";
							//$scope.addQuotation.madatory = "1";
							$("#TaxPercent").css("background-color", "#ffff7f");
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.taxPercent = validData.taxPercent;
							//$scope.addQuotation.madatory = "0";
							$("#TaxPercent").css("background-color", "#99ff99");
						}
						
						if(validData.salesManCode == "" || validData.salesManCode == undefined || validData.salesManCode == "NA")
						{
							//alert("if");
							//$scope.addQuotation.salesManCode = "";
							//$scope.addQuotation.madatory = "1";
							$("#SalesManCode").css("background-color", "#ffff7f");
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.salesManCode = validData.salesPersonCode;
							//$scope.addQuotation.madatory = "0";
							$("#SalesManCode").css("background-color", "#99ff99");
						}
						if(validData.emailAddr == "" || validData.emailAddr == undefined || validData.emailAddr == "NA")
						{
							//alert("if");
							//$scope.addQuotation.emailAddr = "";
							//$scope.addQuotation.madatory = "1";
							$("#Email").css("background-color", "#ffffff");
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.emailAddr = validData.email;
							//$scope.addQuotation.madatory = "0";
							$("#Email").css("background-color", "#99ff99");
						}
						if(validData.paymentTerm == "" || validData.paymentTerm == undefined || validData.paymentTerm == "NA")
						{
							//alert("if");
							//$scope.addQuotation.paymentTerm = "";
							//$scope.addQuotation.madatory = "1";
							$("#PaymentTerm").css("background-color", "#ffff7f");
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.paymentTerm = validData.paymentTerm;
							//$scope.addQuotation.madatory = "0";
							$("#PaymentTerm").css("background-color", "#99ff99");
						}
						/*if(validData.assigned == "" || validData.assigned == undefined || validData.assigned == "NA")
						{
							//alert("if");
							//$scope.addQuotation.assigned = "";
							//$scope.addQuotation.madatory = "1";
							$("#AssignTo").css("background-color", "#ffff7f");
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.assigned = validData.departmentname;
							//$scope.addQuotation.madatory = "0";
							$("#AssignTo").css("background-color", "#99ff99");
						}*/
						if(validData.createdBy == "" || validData.createdBy == undefined || validData.createdBy == "NA")
						{
							//alert("if");
							//$scope.addQuotation.createdBy = "";
							//$scope.addQuotation.madatory = "1";
							$("#CreatedBy").css("background-color", "#ffff7f");
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.createdBy = validData.createdby;
							//$scope.addQuotation.madatory = "0";
							$("#CreatedBy").css("background-color", "#99ff99");
						}
				   
				   /*if(validData.emailAddr == "" || validData.emailAddr == undefined || validData.emailAddr == "NA")
					{
						//alert("if");
						$scope.addQuotation.emailAddr = "";
						//$scope.addQuotation.madatory = "1";
						$("#Email").css("background-color", "#ffffff");  
					}
					else
					{
						//alert("else");
						$scope.addQuotation.emailAddr = validData.emailAddr;
						//$scope.addQuotation.madatory = "0";
						$("#Email").css("background-color", "#99ff99");
					}*/
					
					/*if(validData.flag == 1)
						{
							//alert("if");
							
							$scope.addQuotation.madatory = "0";
							
						}
						else
						{
							//alert("else");
							
							$scope.addQuotation.madatory = "1";
							
						}*/
						
						if(validData.attention == "" || validData.attention == undefined || validData.attention == "NA")
						{
							//alert("if");
							//$scope.addQuotation.attention = "";
							//$scope.addQuotation.madatory = "1";
							$("#Attention").css("background-color", "#ffff7f"); 
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.attention = validData.attention;
							//$scope.addQuotation.madatory = "0";
							$("#Attention").css("background-color", "#99ff99"); 
						}
				   
				   var departmentSplit = json['quatationform'][0].assigned;
						 var departmentSales = [];
						 if(departmentSplit == undefined || departmentSplit == "" || departmentSplit == "NA")
						 {
							 //alert("if");
							 $('#picturegallery1').val("['']").trigger('chosen:updated');
							 $("#picturegallery1").css("background-color", "#ffff7f");
						 }
						 else
						 {
							 //alert(departmentSplit.length + " " + " else ");
							 for (var s = 0; s < departmentSplit.length; s++) {
					
										departmentSales.push(departmentSplit[s]);
										//alert("accessoriesSales"+accessoriesSales);
							}
							 $('#picturegallery1').val(departmentSales).trigger('chosen:updated');
											$scope.addQuotation.assigned = departmentSales;
											$("#picturegallery1").css("background-color", "#99ff99");
						 }
				   
				     var asd = json['quatationform'][0].qtnNo;
				     asd2 = asd.split("-");
					 $scope.qType = asd2[0];
					 $scope.coun_year_Code = asd2[1];
					 $scope.runNo = asd2[2];
					 $scope.version = asd2[3];
					 $scope.addQuotation.qtnNo = json['quatationform'][0].qtnNo;
				   
				
				 $scope.$apply();
			});

		
		
		
		
       
    };
	$scope.getServiceItemized = function(QtnType,QtnMaster,form)
    {
        qtnFormData = new FormData();
		$scope.addQuotation = angular.copy($scope.master);
		form.$setPristine(true);
		
	    //$scope.serviceplaceholder = "Service Enquiry No.";
        /*qtnFormData = new FormData();
		$indexService=1;
		$scope.servicPartData=[{'id':$indexService}];
		$indexTerm=1;
    	$scope.termData=[{'id':$indexTerm}];
		$scope.addQuotation = angular.copy($scope.master);
		$scope.loadQuotationSeqNum(QtnType,form);
		$scope.loadSysDate();
		$scope.getvalidDate();
		$scope.addQuotation = ({'qtnType':'3','qtnProgress':'0','showCost':'0','modifiedstatus':'0','createdBy':Username,'currency':'USD','tax':'VAT','country':'AUSTRALIA','taxPercent':'10','paymentTerm':'2','salesTerm':'CIF','estPercent':'10','assigned':'Sales'});
		form.$setPristine(true); */
		
		
			
			$.post("getSavedQuatationDataOnQuatationNumberFromQuatationTempwithclick.do",{code:QtnType,qtnmaster:QtnMaster},function(json)
			{
				//alert(JSON.stringify(json));
				   $scope.addQuotation = json['quatationform'][0];
				   $scope.servicPartData = json['quatationgrid'];
				   $scope.termData = json['quatationtermsgrid'];
				   
				   var validData = json['quatationform'][0];
				   //alert(JSON.stringify(validData.emailAddr));
				   
				   if(validData.currency == "" || validData.currency == undefined || validData.currency == "NA")
						{
							//alert("if");
							//$scope.addQuotation.currency = "";
							//$scope.addQuotation.madatory = "1";
							$("#Currency").css("background-color", "#ffff7f"); 
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.currency = validData.currency;
							//$scope.addQuotation.madatory = "0";
							$("#Currency").css("background-color", "#99ff99"); 
						}
						if(validData.attention == "" || validData.attention == undefined || validData.attention == "NA")
						{
							//alert("if");
							//$scope.addQuotation.attention = "";
							//$scope.addQuotation.madatory = "1";
							$("#Attention").css("background-color", "#ffff7f"); 
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.attention = validData.contName;
							//$scope.addQuotation.madatory = "0";
							$("#Attention").css("background-color", "#99ff99"); 
						}
						if(validData.custCode == "" || validData.custCode == undefined || validData.custCode == "NA")
						{
							//alert("if");
							//$scope.addQuotation.custCode = "";
							//$scope.addQuotation.madatory = "1";
							$("#CustCode").css("background-color", "#ffff7f"); 
							//$("#CustProsCode").css("background-color", "#ffff7f"); 
							$scope.$apply();
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.custCode = validData.account;
							//$scope.addQuotation.madatory = "0";
							$("#CustCode").css("background-color", "#99ff99"); 
							//$("#CustProsCode").css("background-color", "#99ff99"); 
							$scope.$apply();
						}
						if(validData.telephone == "" || validData.telephone == undefined || validData.telephone == "NA")
						{
							//alert("if");
							//$scope.addQuotation.telephone = "";
							//$scope.addQuotation.madatory = "1";
							$("#Telephone").css("background-color", "#ffff7f"); 
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.telephone = validData.phnumber;
							//$scope.addQuotation.madatory = "0";
							$("#Telephone").css("background-color", "#99ff99"); 
						}
						if(validData.tax == "" || validData.tax == undefined || validData.tax == "NA")
						{
							//alert("if");
							//$scope.addQuotation.tax = "";
							//$scope.addQuotation.madatory = "1";
							$("#TaxName").css("background-color", "#ffff7f"); 
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.tax = validData.taxName;
							//$scope.addQuotation.madatory = "0";
							$("#TaxName").css("background-color", "#99ff99");
						}
						if(validData.country == "" || validData.country == undefined || validData.country == "NA")
						{
							//alert("if");
							//$scope.addQuotation.country = "";
							//$scope.addQuotation.madatory = "1";
							$("#CountryName").css("background-color", "#ffff7f"); 
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.country = validData.billingCountries;
							//$scope.addQuotation.madatory = "0";
							$("#CountryName").css("background-color", "#99ff99");
						}
						if(validData.salesMan == "" || validData.salesMan == undefined || validData.salesMan == "NA")
						{
							//alert("if");
							//$scope.addQuotation.salesMan = "";
							//$scope.addQuotation.madatory = "1";
							$("#SalesMan").css("background-color", "#ffff7f");
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.salesMan = validData.salesPerson;
							//$scope.addQuotation.madatory = "0";
							$("#SalesMan").css("background-color", "#99ff99");
						}
						
						if(validData.taxPercent == "" || validData.taxPercent == undefined || validData.taxPercent == "NA")
						{
							//alert("if");
							//$scope.addQuotation.taxPercent = "";
							//$scope.addQuotation.madatory = "1";
							$("#TaxPercent").css("background-color", "#ffff7f");
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.taxPercent = validData.taxPercent;
							//$scope.addQuotation.madatory = "0";
							$("#TaxPercent").css("background-color", "#99ff99");
						}
						
						if(validData.salesManCode == "" || validData.salesManCode == undefined || validData.salesManCode == "NA")
						{
							//alert("if");
							//$scope.addQuotation.salesManCode = "";
							//$scope.addQuotation.madatory = "1";
							$("#SalesManCode").css("background-color", "#ffff7f");
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.salesManCode = validData.salesPersonCode;
							//$scope.addQuotation.madatory = "0";
							$("#SalesManCode").css("background-color", "#99ff99");
						}
						if(validData.emailAddr == "" || validData.emailAddr == undefined || validData.emailAddr == "NA")
						{
							//alert("if");
							//$scope.addQuotation.emailAddr = "";
							//$scope.addQuotation.madatory = "1";
							$("#Email").css("background-color", "#ffffff");
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.emailAddr = validData.email;
							//$scope.addQuotation.madatory = "0";
							$("#Email").css("background-color", "#99ff99");
						}
						if(validData.paymentTerm == "" || validData.paymentTerm == undefined || validData.paymentTerm == "NA")
						{
							//alert("if");
							//$scope.addQuotation.paymentTerm = "";
							//$scope.addQuotation.madatory = "1";
							$("#PaymentTerm").css("background-color", "#ffff7f");
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.paymentTerm = validData.paymentTerm;
							//$scope.addQuotation.madatory = "0";
							$("#PaymentTerm").css("background-color", "#99ff99");
						}
						/*if(validData.assigned == "" || validData.assigned == undefined || validData.assigned == "NA")
						{
							//alert("if");
							//$scope.addQuotation.assigned = "";
							//$scope.addQuotation.madatory = "1";
							$("#AssignTo").css("background-color", "#ffff7f");
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.assigned = validData.departmentname;
							//$scope.addQuotation.madatory = "0";
							$("#AssignTo").css("background-color", "#99ff99");
						}*/
						if(validData.createdBy == "" || validData.createdBy == undefined || validData.createdBy == "NA")
						{
							//alert("if");
							//$scope.addQuotation.createdBy = "";
							//$scope.addQuotation.madatory = "1";
							$("#CreatedBy").css("background-color", "#ffff7f");
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.createdBy = validData.createdby;
							//$scope.addQuotation.madatory = "0";
							$("#CreatedBy").css("background-color", "#99ff99");
						}
				   
				   /*if(validData.emailAddr == "" || validData.emailAddr == undefined || validData.emailAddr == "NA")
					{
						//alert("if");
						$scope.addQuotation.emailAddr = "";
						//$scope.addQuotation.madatory = "1";
						$("#Email").css("background-color", "#ffffff");
					}
					else
					{
						//alert("else");
						$scope.addQuotation.emailAddr = validData.emailAddr;
						//$scope.addQuotation.madatory = "0";
						$("#Email").css("background-color", "#99ff99");
					}*/
					
					/*if(validData.flag == 1)
						{
							//alert("if");
							
							$scope.addQuotation.madatory = "0";
							
						}
						else
						{
							//alert("else");
							
							$scope.addQuotation.madatory = "1";
							
						}*/
						
						/*if(validData.attention == "" || validData.attention == undefined || validData.attention == "NA")
						{
							//alert("if");
							$scope.addQuotation.attention = "";
							//$scope.addQuotation.madatory = "1";
							$("#Attention").css("background-color", "#ffff7f"); 
						}
						else
						{
							//alert("else");
							$scope.addQuotation.attention = validData.attention;
							//$scope.addQuotation.madatory = "0";
							$("#Attention").css("background-color", "#99ff99"); 
						}*/
				   
				   var departmentSplit = json['quatationform'][0].assigned;
						 var departmentSales = [];
						 if(departmentSplit == undefined || departmentSplit == "" || departmentSplit == "NA")
						 {
							 //alert("if");
							 $('#picturegallery1').val("['']").trigger('chosen:updated');
							 $("#picturegallery1").css("background-color", "#ffff7f");
						 }
						 else
						 {
							 //alert(departmentSplit.length + " " + " else ");
							 for (var s = 0; s < departmentSplit.length; s++) {
					
										departmentSales.push(departmentSplit[s]);
										//alert("accessoriesSales"+accessoriesSales);
							}
							 $('#picturegallery1').val(departmentSales).trigger('chosen:updated');
											$scope.addQuotation.assigned = departmentSales;
											$("#picturegallery1").css("background-color", "#99ff99");
						 }
				   
				     var asd = json['quatationform'][0].qtnNo;
				     asd2 = asd.split("-");
					 $scope.qType = asd2[0];
					 $scope.coun_year_Code = asd2[1];
					 $scope.runNo = asd2[2];
					 $scope.version = asd2[3];
					 $scope.addQuotation.qtnNo = json['quatationform'][0].qtnNo;
				  
				 
				 $scope.$apply();
			});

		
		
		
       
    };
	
		$scope.loadCustomerName = function()
		{
			$scope.customerNameData = [];
			//$scope.customerNameData = [{id:'name1',name:'name1'},{id:'name2',name:'name2'},{id:'name3',name:'name3'},{id:'name4',name:'name4'}];
			$.post("getAllAccountNames.do",function(json)
					{
						//alert(JSON.stringify(json));
						$scope.customerNameData = json['data'];
						$scope.$apply();
					});
		};
		
		
	
	$scope.onSelectCustomerNamePart = function(customer)
	{
		
			//alert(customer);
			//$.post("getCustmerNamequatation.do",{custmername:customer},function(json)
//				{
				$.post("getAllCustmerDetailsSavedOnId.do",{account:customer},function(json)
				{
					//alert(JSON.stringify(json['custmer'][0].createdby));
					var validData = json['custmer'][0];
					
					
					if(validData.currency == "" || validData.currency == undefined || validData.currency == "NA")
					{
						//alert("if");
						$scope.addQuotation.currency = "";
						//$scope.addQuotation.madatory = "1";
						$("#Currency").css("background-color", "#ffff7f"); 
					}
					else
					{
						//alert("else");
						$scope.addQuotation.currency = validData.currency;
						//$scope.addQuotation.madatory = "0";
						$("#Currency").css("background-color", "#99ff99"); 
					}
					if(validData.contName == "" || validData.contName == undefined || validData.contName == "NA")
					{
						//alert("if");
						$scope.addQuotation.attention = "";
						//$scope.addQuotation.madatory = "1";
						$("#Attention").css("background-color", "#ffff7f"); 
					}
					else
					{
						//alert("else");
						$scope.addQuotation.attention = validData.contName;
						//$scope.addQuotation.madatory = "0";
						$("#Attention").css("background-color", "#99ff99"); 
					}
					if(validData.account == "" || validData.account == undefined || validData.account == "NA")
					{
						//alert("if");
						$scope.addQuotation.custCode = "";
						//$scope.addQuotation.madatory = "1";
						$("#CustCode").css("background-color", "#ffff7f"); 
						//$("#CustProsCode").css("background-color", "#ffff7f");
					}
					else
					{
						//alert("else");
						$scope.addQuotation.custCode = validData.account;
						//$scope.addQuotation.madatory = "0";
						$("#CustCode").css("background-color", "#99ff99"); 
						//$("#CustProsCode").css("background-color", "#99ff99"); 
					}
					if(validData.phnumber == "" || validData.phnumber == undefined || validData.phnumber == "NA")
					{
						//alert("if");
						$scope.addQuotation.telephone = "";
						//$scope.addQuotation.madatory = "1";
						$("#Telephone").css("background-color", "#ffff7f"); 
					}
					else
					{
						//alert("else");
						$scope.addQuotation.telephone = validData.phnumber;
						//$scope.addQuotation.madatory = "0";
						$("#Telephone").css("background-color", "#99ff99"); 
					}
					if(validData.taxName == "" || validData.taxName == undefined || validData.taxName == "NA")
					{
						//alert("if");
						$scope.addQuotation.tax = "";
						//$scope.addQuotation.madatory = "1";
						$("#TaxName").css("background-color", "#ffff7f"); 
					}
					else
					{
						//alert("else");
						$scope.addQuotation.tax = validData.taxName;
						//$scope.addQuotation.madatory = "0";
						$("#TaxName").css("background-color", "#99ff99");
					}
					if(validData.billingCountries == "" || validData.billingCountries == undefined || validData.billingCountries == "NA")
					{
						//alert("if");
						$scope.addQuotation.country = "";
						//$scope.addQuotation.madatory = "1";
						$("#CountryName").css("background-color", "#ffff7f"); 
					}
					else
					{
						//alert("else");
						$scope.addQuotation.country = validData.billingCountries;
						//$scope.addQuotation.madatory = "0";
						$("#CountryName").css("background-color", "#99ff99");
					}
					if(validData.salesPerson == "" || validData.salesPerson == undefined || validData.salesPerson == "NA")
					{
						//alert("if");
						$scope.addQuotation.salesMan = "";
						//$scope.addQuotation.madatory = "1";
						$("#SalesMan").css("background-color", "#ffff7f");
					}
					else
					{
						//alert("else");
						$scope.addQuotation.salesMan = validData.salesPerson;
						//$scope.addQuotation.madatory = "0";
						$("#SalesMan").css("background-color", "#99ff99");
					}
					
					if(validData.taxPercent == "" || validData.taxPercent == undefined || validData.taxPercent == "NA")
					{
						//alert("if");
						$scope.addQuotation.taxPercent = "";
						//$scope.addQuotation.madatory = "1";
						$("#TaxPercent").css("background-color", "#ffff7f");
					}
					else
					{
						//alert("else");
						$scope.addQuotation.taxPercent = validData.taxPercent;
						//$scope.addQuotation.madatory = "0";
						$("#TaxPercent").css("background-color", "#99ff99");
					}
					/*if(validData.phnumber == "" || validData.phnumber == undefined || validData.phnumber == "NA")
					{
						//alert("if");
						$scope.addQuotation.telephone = "";
						//$scope.addQuotation.madatory = "1";
						$("#Telephone").css("background-color", "#ffff7f");
					}
					else
					{
						//alert("else");
						$scope.addQuotation.telephone = validData.phnumber;
						//$scope.addQuotation.madatory = "0";
						$("#Telephone").css("background-color", "#99ff99");
					}*/
					if(validData.salesPersonCode == "" || validData.salesPersonCode == undefined || validData.salesPersonCode == "NA")
					{
						//alert("if");
						$scope.addQuotation.salesManCode = "";
						//$scope.addQuotation.madatory = "1";
						$("#SalesManCode").css("background-color", "#ffff7f");
					}
					else
					{
						//alert("else");
						$scope.addQuotation.salesManCode = validData.salesPersonCode;
						//$scope.addQuotation.madatory = "0";
						$("#SalesManCode").css("background-color", "#99ff99");
					}
					if(validData.email == "" || validData.email == undefined || validData.email == "NA")
					{
						//alert("if");
						$scope.addQuotation.emailAddr = "";
						//$scope.addQuotation.madatory = "1";
						$("#Email").css("background-color", "#ffffff");
					}
					else
					{
						//alert("else");
						$scope.addQuotation.emailAddr = validData.email;
						//$scope.addQuotation.madatory = "0";
						$("#Email").css("background-color", "#99ff99");
					}
					if(validData.paymentTerm == "" || validData.paymentTerm == undefined || validData.paymentTerm == "NA")
					{
						//alert("if");
						$scope.addQuotation.paymentTerm = "";
						//$scope.addQuotation.madatory = "1";
						$("#PaymentTerm").css("background-color", "#ffff7f");
					}
					else
					{
						//alert("else");
						$scope.addQuotation.paymentTerm = validData.paymentTerm;
						//$scope.addQuotation.madatory = "0";
						$("#PaymentTerm").css("background-color", "#99ff99");
					}
					/*if(validData.departmentname == "" || validData.departmentname == undefined || validData.departmentname == "NA")
					{
						//alert("if");
						$scope.addQuotation.assigned = "";
						//$scope.addQuotation.madatory = "1";
						$("#AssignTo").css("background-color", "#ffff7f");
					}
					else
					{
						//alert("else");
						$scope.addQuotation.assigned = validData.departmentname;
						//$scope.addQuotation.madatory = "0";
						$("#AssignTo").css("background-color", "#99ff99");
					}*/
					if(validData.createdby == "" || validData.createdby == undefined || validData.createdby == "NA")
					{
						//alert("if");
						$scope.addQuotation.createdBy = "";
						//$scope.addQuotation.madatory = "1";
						$("#CreatedBy").css("background-color", "#ffff7f");
					}
					else
					{
						//alert("else");
						$scope.addQuotation.createdBy = validData.createdby;
						//$scope.addQuotation.madatory = "0";
						$("#CreatedBy").css("background-color", "#99ff99");
					}
					
					if(validData.exchangerate == "" || validData.exchangerate == undefined || validData.exchangerate == "NA")
					{
						
						$scope.addQuotation.exchangerate = "";
						$("#CurrencyExg").css("background-color", "#ffff7f"); 
					}
					else
					{
						
						$scope.addQuotation.exchangerate = validData.exchangerate;
						$("#CurrencyExg").css("background-color", "#99ff99");
					}
					/*if(validData.exchangerate == "" || validData.exchangerate == undefined || validData.exchangerate == "NA")
					{
						alert("if");
							$("#CurrencyExg").css("background-color", "#ffff7f"); 
							$scope.addQuotation.exchangerate = "";
					}
					else
					{
						alert(validData.exchangerate);
							$("#CurrencyExg").css("background-color", "#99ff99");
							$scope.addQuotation.exchangerate = validData.exchangerate;
					}*/
					
					
					var departmentSplit = json['custmer'][0].departmentname;
						 var departmentSales = [];
						 if(departmentSplit == undefined || departmentSplit == "" || departmentSplit == "NA")
						 {
							 //alert("if");
							 $('#picturegallery1').val("['']").trigger('chosen:updated');
							 $("#picturegallery1").css("background-color", "#ffff7f");
						 }
						 else
						 {
							 //alert(departmentSplit.length + " " + " else ");
							 for (var s = 0; s < departmentSplit.length; s++) {
					
										departmentSales.push(departmentSplit[s]);
										//alert("accessoriesSales"+accessoriesSales);
							}
							 $('#picturegallery1').val(departmentSales).trigger('chosen:updated');
											$scope.addQuotation.assigned = departmentSales;
											$("#picturegallery1").css("background-color", "#99ff99");
						 }
					
					$scope.$apply();
				});
				
		
	};
	
	
	
	$scope.loadCustomerCode = function()
	{
		$scope.custCodeData = [];
		$.post("getAllCustmerCopdes.do",function(json)
				{
					//alert(JSON.stringify(json));
					$scope.custCodeData = json['data'];
					$scope.$apply();
				});
	}
	$scope.onSelectCustCode = function(accountname)
	{
		
		$.post("getAllCustmerDetailsSavedOnId.do",{account:accountname},function(json)
		{
			//alert(JSON.stringify(json['custmer'][0].phnumber));
			var validData = json['custmer'][0];
					
					
					if(validData.currency == "" || validData.currency == undefined || validData.currency == "NA")
					{
						//alert("if");
						$scope.addQuotation.currency = "";
						//$scope.addQuotation.madatory = "1";
						$("#Currency").css("background-color", "#ffff7f"); 
					}
					else
					{
						//alert("else");
						$scope.addQuotation.currency = validData.currency;
						//$scope.addQuotation.madatory = "0";
						$("#Currency").css("background-color", "#99ff99"); 
					}
					if(validData.contName == "" || validData.contName == undefined || validData.contName == "NA")
					{
						//alert("if");
						$scope.addQuotation.attention = "";
						//$scope.addQuotation.madatory = "1";
						$("#Attention").css("background-color", "#ffff7f"); 
					}
					else
					{
						//alert("else");
						$scope.addQuotation.attention = validData.contName;
						//$scope.addQuotation.madatory = "0";
						$("#Attention").css("background-color", "#99ff99"); 
					}
					if(validData.accountid == "" || validData.accountid == undefined || validData.accountid == "NA")
					{
						//alert("if");
						$scope.addQuotation.custName = "";
						//$scope.addQuotation.madatory = "1";
						$("#CustomerName").css("background-color", "#ffff7f"); 
					}
					else
					{
						//alert("else");
						$scope.addQuotation.custName = validData.accountid;
						//$scope.addQuotation.madatory = "0";
						$("#CustomerName").css("background-color", "#FFC0CB"); 
					}
					if(validData.phnumber == "" || validData.phnumber == undefined || validData.phnumber == "NA")
					{
						//alert("if");
						$$scope.addQuotation.telephone = "";
						//$scope.addQuotation.madatory = "1";
						$("#Telephone").css("background-color", "#ffff7f"); 
					}
					else
					{
						//alert("else");
						$scope.addQuotation.telephone = validData.phnumber;
						//$scope.addQuotation.madatory = "0";
						$("#Telephone").css("background-color", "#99ff99"); 
					}
					if(validData.taxName == "" || validData.taxName == undefined || validData.taxName == "NA")
					{
						//alert("if");
						$scope.addQuotation.tax = "";
						//$scope.addQuotation.madatory = "1";
						$("#TaxName").css("background-color", "#ffff7f"); 
					}
					else
					{
						//alert("else");
						$scope.addQuotation.tax = validData.taxName;
						//$scope.addQuotation.madatory = "0";
						$("#TaxName").css("background-color", "#99ff99");
					}
					if(validData.billingCountries == "" || validData.billingCountries == undefined || validData.billingCountries == "NA")
					{
						//alert("if");
						$scope.addQuotation.country = "";
						//$scope.addQuotation.madatory = "1";
						$("#CountryName").css("background-color", "#ffff7f"); 
					}
					else
					{
						//alert("else");
						$scope.addQuotation.country = validData.billingCountries;
						//$scope.addQuotation.madatory = "0";
						$("#CountryName").css("background-color", "#99ff99");
					}
					if(validData.salesPerson == "" || validData.salesPerson == undefined || validData.salesPerson == "NA")
					{
						//alert("if");
						$scope.addQuotation.salesMan = "";
						//$scope.addQuotation.madatory = "1";
						$("#SalesMan").css("background-color", "#ffff7f");
					}
					else
					{
						//alert("else");
						$scope.addQuotation.salesMan = validData.salesPerson;
						//$scope.addQuotation.madatory = "0";
						$("#SalesMan").css("background-color", "#99ff99");
					}
					
					if(validData.taxPercent == "" || validData.taxPercent == undefined || validData.taxPercent == "NA")
					{
						//alert("if");
						$scope.addQuotation.taxPercent = "";
						//$scope.addQuotation.madatory = "1";
						$("#TaxPercent").css("background-color", "#ffff7f");
					}
					else
					{
						//alert("else");
						$scope.addQuotation.taxPercent = validData.taxPercent;
						//$scope.addQuotation.madatory = "0";
						$("#TaxPercent").css("background-color", "#99ff99");
					}
					/*if(validData.phnumber == "" || validData.phnumber == undefined || validData.phnumber == "NA")
					{
						//alert("if");
						$scope.addQuotation.telephone = "";
						//$scope.addQuotation.madatory = "1";
						$("#Telephone").css("background-color", "#ffff7f");
					}
					else
					{
						//alert("else");
						$scope.addQuotation.telephone = validData.phnumber;
						//$scope.addQuotation.madatory = "0";
						$("#Telephone").css("background-color", "#99ff99");
					}*/
					if(validData.salesPersonCode == "" || validData.salesPersonCode == undefined || validData.salesPersonCode == "NA")
					{
						//alert("if");
						$scope.addQuotation.salesManCode = "";
						//$scope.addQuotation.madatory = "1";
						$("#SalesManCode").css("background-color", "#ffff7f");
					}
					else
					{
						//alert("else");
						$scope.addQuotation.salesManCode = validData.salesPersonCode;
						//$scope.addQuotation.madatory = "0";
						$("#SalesManCode").css("background-color", "#99ff99");
					}
					if(validData.email == "" || validData.email == undefined || validData.email == "NA")
					{
						//alert("if");
						$scope.addQuotation.emailAddr = "";
						//$scope.addQuotation.madatory = "1";
						$("#Email").css("background-color", "#ffffff");
					}
					else
					{
						//alert("else");
						$scope.addQuotation.emailAddr = validData.email;
						//$scope.addQuotation.madatory = "0";
						$("#Email").css("background-color", "#99ff99");
					}
					if(validData.paymentTerm == "" || validData.paymentTerm == undefined || validData.paymentTerm == "NA")
					{
						//alert("if");
						$scope.addQuotation.paymentTerm = "";
						//$scope.addQuotation.madatory = "1";
						$("#PaymentTerm").css("background-color", "#ffff7f");
					}
					else
					{
						//alert("else");
						$scope.addQuotation.paymentTerm = validData.paymentTerm;
						//$scope.addQuotation.madatory = "0";
						$("#PaymentTerm").css("background-color", "#99ff99");
					}
					/*if(validData.departmentname == "" || validData.departmentname == undefined || validData.departmentname == "NA")
					{
						//alert("if");
						$scope.addQuotation.assigned = "";
						//$scope.addQuotation.madatory = "1";
						$("#AssignTo").css("background-color", "#ffff7f");
					}
					else
					{
						//alert("else");
						$scope.addQuotation.assigned = validData.departmentname;
						//$scope.addQuotation.madatory = "0";
						$("#AssignTo").css("background-color", "#99ff99");
					}*/
					if(validData.createdby == "" || validData.createdby == undefined || validData.createdby == "NA")
					{
						//alert("if");
						$scope.addQuotation.createdBy = "";
						//$scope.addQuotation.madatory = "1";
						$("#CreatedBy").css("background-color", "#ffff7f");
					}
					else
					{
						//alert("else");
						$scope.addQuotation.createdBy = validData.createdby;
						//$scope.addQuotation.madatory = "0";
						$("#CreatedBy").css("background-color", "#99ff99");
					}
					if(validData.exchangerate == "" || validData.exchangerate == undefined || validData.exchangerate == "NA")
					{
						
						$scope.addQuotation.exchangerate = "";
						$("#CurrencyExg").css("background-color", "#ffff7f"); 
					}
					else
					{
						
						$scope.addQuotation.exchangerate = validData.exchangerate;
						$("#CurrencyExg").css("background-color", "#99ff99");
					}
					
					var departmentSplit = json['custmer'][0].departmentname;
						 var departmentSales = [];
						 if(departmentSplit == undefined || departmentSplit == "" || departmentSplit == "NA")
						 {
							 //alert("if");
							 $('#picturegallery1').val("['']").trigger('chosen:updated');
							 $("#picturegallery1").css("background-color", "#ffff7f");
						 }
						 else
						 {
							 //alert(departmentSplit.length + " " + " else ");
							 for (var s = 0; s < departmentSplit.length; s++) {
					
										departmentSales.push(departmentSplit[s]);
										//alert("accessoriesSales"+accessoriesSales);
							}
							 $('#picturegallery1').val(departmentSales).trigger('chosen:updated');
											$scope.addQuotation.assigned = departmentSales;
											$("#picturegallery1").css("background-color", "#99ff99");
						 }
			
			
			
			$scope.$apply();
		});
		
	}
	
	// light-green=#80ff00;  light-yellow=#ffff00;
	$scope.loadProspectCustomerName = function()
	{
		$scope.customerNameData = [];
		//$scope.customerNameData = [{id:'name1',name:'name1'},{id:'name2',name:'name2'},{id:'name3',name:'name3'},{id:'name4',name:'name4'}];
		//$.post("getAllProspectCustmerNames.do",function(json)
				//{
			
			$.post("getAllProspectAccountNames.do",function(json)
				{
					//alert(JSON.stringify(json));
					$scope.customerNameProspectData = json['data'];
					$scope.$apply();
				});
	};
	
	$scope.onSelectProspectCustomerName = function(customer)
	{
		
			//alert(customer);
			//$.post("getCustmerNamequatation.do",{custmername:customer},function(json)
				//{
				$.post("getAllprospectCustmerDetailsSavedOnId.do",{account:customer},function(json)
				{
					//alert(JSON.stringify(json));
					var validData = json['custmer'][0];
					
					
					if(validData.currency == "" || validData.currency == undefined || validData.currency == "NA")
					{
						//alert("if");
						$scope.addQuotation.currency = "";
						//$scope.addQuotation.madatory = "1";
						$("#Currency").css("background-color", "#ffff7f"); 
					}
					else
					{
						//alert("else");
						$scope.addQuotation.currency = validData.currency;
						//$scope.addQuotation.madatory = "0";
						$("#Currency").css("background-color", "#99ff99"); 
					}
					if(validData.contName == "" || validData.contName == undefined || validData.contName == "NA")
					{
						//alert("if");
						$scope.addQuotation.attention = "";
						//$scope.addQuotation.madatory = "1";
						$("#Attention").css("background-color", "#ffff7f"); 
					}
					else
					{
						//alert("else");
						$scope.addQuotation.attention = validData.contName;
						//$scope.addQuotation.madatory = "0";
						$("#Attention").css("background-color", "#99ff99"); 
					}
					
					if(validData.account == "" || validData.account == undefined || validData.account == "NA")
					{
						//alert("if");
						$scope.addQuotation.custCode = "";
						//$scope.addQuotation.madatory = "1";
						$("#CustCode").css("background-color", "#ffff7f"); 
						//$("#CustProsCode").css("background-color", "#ffff7f");
					}
					else
					{
						//alert("else");
						$scope.addQuotation.custCode = validData.account;
						//$scope.addQuotation.madatory = "0";
						$("#CustCode").css("background-color", "#99ff99"); 
						//$("#CustProsCode").css("background-color", "#99ff99"); 
					}
					if(validData.phnumber == "" || validData.phnumber == undefined || validData.phnumber == "NA")
					{
						//alert("if");
						$$scope.addQuotation.telephone = "";
						//$scope.addQuotation.madatory = "1";
						$("#Telephone").css("background-color", "#ffff7f"); 
					}
					else
					{
						//alert("else");
						$scope.addQuotation.telephone = validData.phnumber;
						//$scope.addQuotation.madatory = "0";
						$("#Telephone").css("background-color", "#99ff99"); 
					}
					if(validData.taxName == "" || validData.taxName == undefined || validData.taxName == "NA")
					{
						//alert("if");
						$scope.addQuotation.tax = "";
						//$scope.addQuotation.madatory = "1";
						$("#TaxName").css("background-color", "#ffff7f"); 
					}
					else
					{
						//alert("else");
						$scope.addQuotation.tax = validData.taxName;
						//$scope.addQuotation.madatory = "0";
						$("#TaxName").css("background-color", "#99ff99");
					}
					if(validData.billingCountries == "" || validData.billingCountries == undefined || validData.billingCountries == "NA")
					{
						//alert("if");
						$scope.addQuotation.country = "";
						//$scope.addQuotation.madatory = "1";
						$("#CountryName").css("background-color", "#ffff7f"); 
					}
					else
					{
						//alert("else");
						$scope.addQuotation.country = validData.billingCountries;
						//$scope.addQuotation.madatory = "0";
						$("#CountryName").css("background-color", "#99ff99");
					}
					if(validData.salesPerson == "" || validData.salesPerson == undefined || validData.salesPerson == "NA")
					{
						//alert("if");
						$scope.addQuotation.salesMan = "";
						//$scope.addQuotation.madatory = "1";
						$("#SalesMan").css("background-color", "#ffff7f");
					}
					else
					{
						//alert("else");
						$scope.addQuotation.salesMan = validData.salesPerson;
						//$scope.addQuotation.madatory = "0";
						$("#SalesMan").css("background-color", "#99ff99");
					}
					
					if(validData.taxPercent == "" || validData.taxPercent == undefined || validData.taxPercent == "NA")
					{
						//alert("if");
						$scope.addQuotation.taxPercent = "";
						//$scope.addQuotation.madatory = "1";
						$("#TaxPercent").css("background-color", "#ffff7f");
					}
					else
					{
						//alert("else");
						$scope.addQuotation.taxPercent = validData.taxPercent;
						//$scope.addQuotation.madatory = "0";
						$("#TaxPercent").css("background-color", "#99ff99");
					}
					/*if(validData.phnumber == "" || validData.phnumber == undefined || validData.phnumber == "NA")
					{
						//alert("if");
						$scope.addQuotation.telephone = "";
						//$scope.addQuotation.madatory = "1";
						$("#Telephone").css("background-color", "#ffff7f");
					}
					else
					{
						//alert("else");
						$scope.addQuotation.telephone = validData.phnumber;
						//$scope.addQuotation.madatory = "0";
						$("#Telephone").css("background-color", "#99ff99");
					}*/
					if(validData.salesPersonCode == "" || validData.salesPersonCode == undefined || validData.salesPersonCode == "NA")
					{
						//alert("if");
						$scope.addQuotation.salesManCode = "";
						//$scope.addQuotation.madatory = "1";
						$("#SalesManCode").css("background-color", "#ffff7f");
					}
					else
					{
						//alert("else");
						$scope.addQuotation.salesManCode = validData.salesPersonCode;
						//$scope.addQuotation.madatory = "0";
						$("#SalesManCode").css("background-color", "#99ff99");
					}
					if(validData.email == "" || validData.email == undefined || validData.email == "NA")
					{
						//alert("if");
						$scope.addQuotation.emailAddr = "";
						//$scope.addQuotation.madatory = "1";
						$("#Email").css("background-color", "#ffffff");
					}
					else
					{
						//alert("else");
						$scope.addQuotation.emailAddr = validData.email;
						//$scope.addQuotation.madatory = "0";
						$("#Email").css("background-color", "#99ff99");
					}
					if(validData.paymentTerm == "" || validData.paymentTerm == undefined || validData.paymentTerm == "NA")
					{
						//alert("if");
						$scope.addQuotation.paymentTerm = "";
						//$scope.addQuotation.madatory = "1";
						$("#PaymentTerm").css("background-color", "#ffff7f");
					}
					else
					{
						//alert("else");
						$scope.addQuotation.paymentTerm = validData.paymentTerm;
						//$scope.addQuotation.madatory = "0";
						$("#PaymentTerm").css("background-color", "#99ff99");
					}
					/*if(validData.departmentname == "" || validData.departmentname == undefined || validData.departmentname == "NA")
					{
						//alert("if");
						$scope.addQuotation.assigned = "";
						//$scope.addQuotation.madatory = "1";
						$("#AssignTo").css("background-color", "#ffff7f");
					}
					else
					{
						//alert("else");
						$scope.addQuotation.assigned = validData.departmentname;
						//$scope.addQuotation.madatory = "0";
						$("#AssignTo").css("background-color", "#99ff99");
					}*/
					if(validData.createdby == "" || validData.createdby == undefined || validData.createdby == "NA")
					{
						//alert("if");
						$scope.addQuotation.createdBy = "";
						//$scope.addQuotation.madatory = "1";
						$("#CreatedBy").css("background-color", "#ffff7f");
					}
					else
					{
						//alert("else");
						$scope.addQuotation.createdBy = validData.createdby;
						//$scope.addQuotation.madatory = "0";
						$("#CreatedBy").css("background-color", "#99ff99");
					}
					if(validData.exchangerate == "" || validData.exchangerate == undefined || validData.exchangerate == "NA")
					{
						
						$scope.addQuotation.exchangerate = "";
						$("#CurrencyExg").css("background-color", "#ffff7f"); 
					}
					else
					{
						
						$scope.addQuotation.exchangerate = validData.exchangerate;
						$("#CurrencyExg").css("background-color", "#99ff99");
					}
					var departmentSplit = json['custmer'][0].departmentname;
					
						 var departmentSales = [];
						 if(departmentSplit == undefined || departmentSplit == "" || departmentSplit == "NA")
						 {
							 //alert("if");
							 $('#picturegallery1').val("['']").trigger('chosen:updated');
							 $("#picturegallery1").css("background-color", "#ffff7f");
						 }
						 else
						 {
							 //alert(departmentSplit.length + " " + " else ");
							 for (var s = 0; s < departmentSplit.length; s++) {
					
										departmentSales.push(departmentSplit[s]);
										//alert("accessoriesSales"+accessoriesSales);
							}
							 $('#picturegallery1').val(departmentSales).trigger('chosen:updated');
											$scope.addQuotation.assigned = departmentSales;
											$("#picturegallery1").css("background-color", "#99ff99");
						 }
					$scope.$apply();
				});
				
		
	};
	$scope.loadCustomerProspectCode = function()
	{
		$scope.custCodeData = [];
		$.post("getAllProspectCustmerCodes.do",function(json)
				{
					//alert(JSON.stringify(json));
					$scope.custCodeProspectData = json['data'];
					$scope.$apply();
				});
	};
	$scope.onSelectCustProspectCode = function(accountname)
	{
		
		//$.post("getAllCustmerDetailsSavedOnId.do",{account:accountname},function(json)
		//{
		$.post("getAllprospectCustmerDetailsSavedOnId.do",{account:accountname},function(json)
		{
			//alert(JSON.stringify(json));
			var validData = json['custmer'][0];
					
					
					if(validData.currency == "" || validData.currency == undefined || validData.currency == "NA")
					{
						//alert("if");
						$scope.addQuotation.currency = "";
						//$scope.addQuotation.madatory = "1";
						$("#Currency").css("background-color", "#ffff7f"); 
					}
					else
					{
						//alert("else");
						$scope.addQuotation.currency = validData.currency;
						//$scope.addQuotation.madatory = "0";
						$("#Currency").css("background-color", "#99ff99"); 
					}
					if(validData.contName == "" || validData.contName == undefined || validData.contName == "NA")
					{
						//alert("if");
						$scope.addQuotation.attention = "";
						//$scope.addQuotation.madatory = "1";
						$("#Attention").css("background-color", "#ffff7f"); 
					}
					else
					{
						//alert("else");
						$scope.addQuotation.attention = validData.contName;
						//$scope.addQuotation.madatory = "0";
						$("#Attention").css("background-color", "#99ff99"); 
					}
					if(validData.accountid == "" || validData.accountid == undefined || validData.accountid == "NA")
					{
						//alert("if");
						$scope.addQuotation.custName = "";
						//$scope.addQuotation.madatory = "1";
						$("#CustomerName").css("background-color", "#ffff7f"); 
					}
					else
					{
						//alert("else");
						$scope.addQuotation.custName = validData.accountid;
						//$scope.addQuotation.madatory = "0";
						$("#CustomerName").css("background-color", "#FFC0CB"); 
					}
					/*if(validData.phnumber == "" || validData.phnumber == undefined || validData.phnumber == "NA")
					{
						//alert("if");
						$$scope.addQuotation.telephone = "";
						//$scope.addQuotation.madatory = "1";
						$("#Telephone").css("background-color", "#ffff7f"); 
					}
					else
					{
						//alert("else");
						$scope.addQuotation.telephone = validData.phnumber;
						//$scope.addQuotation.madatory = "0";
						$("#Telephone").css("background-color", "#99ff99"); 
					}*/
					if(validData.taxName == "" || validData.taxName == undefined || validData.taxName == "NA")
					{
						//alert("if");
						$scope.addQuotation.tax = "";
						//$scope.addQuotation.madatory = "1";
						$("#TaxName").css("background-color", "#ffff7f"); 
					}
					else
					{
						//alert("else");
						$scope.addQuotation.tax = validData.taxName;
						//$scope.addQuotation.madatory = "0";
						$("#TaxName").css("background-color", "#99ff99");
					}
					if(validData.billingCountries == "" || validData.billingCountries == undefined || validData.billingCountries == "NA")
					{
						//alert("if");
						$scope.addQuotation.country = "";
						//$scope.addQuotation.madatory = "1";
						$("#CountryName").css("background-color", "#ffff7f"); 
					}
					else
					{
						//alert("else");
						$scope.addQuotation.country = validData.billingCountries;
						//$scope.addQuotation.madatory = "0";
						$("#CountryName").css("background-color", "#99ff99");
					}
					if(validData.salesPerson == "" || validData.salesPerson == undefined || validData.salesPerson == "NA")
					{
						//alert("if");
						$scope.addQuotation.salesMan = "";
						//$scope.addQuotation.madatory = "1";
						$("#SalesMan").css("background-color", "#ffff7f");
					}
					else
					{
						//alert("else");
						$scope.addQuotation.salesMan = validData.salesPerson;
						//$scope.addQuotation.madatory = "0";
						$("#SalesMan").css("background-color", "#99ff99");
					}
					
					if(validData.taxPercent == "" || validData.taxPercent == undefined || validData.taxPercent == "NA")
					{
						//alert("if");
						$scope.addQuotation.taxPercent = "";
						//$scope.addQuotation.madatory = "1";
						$("#TaxPercent").css("background-color", "#ffff7f");
					}
					else
					{
						//alert("else");
						$scope.addQuotation.taxPercent = validData.taxPercent;
						//$scope.addQuotation.madatory = "0";
						$("#TaxPercent").css("background-color", "#99ff99");
					}
					if(validData.phnumber == "" || validData.phnumber == undefined || validData.phnumber == "NA")
					{
						//alert("if");
						$scope.addQuotation.telephone = "";
						//$scope.addQuotation.madatory = "1";
						$("#Telephone").css("background-color", "#ffff7f");

					}
					else
					{
						//alert("else");
						$scope.addQuotation.telephone = validData.phnumber;
						//$scope.addQuotation.madatory = "0";
						$("#Telephone").css("background-color", "#99ff99");
					}
					if(validData.salesPersonCode == "" || validData.salesPersonCode == undefined || validData.salesPersonCode == "NA")
					{
						//alert("if");
						$scope.addQuotation.salesManCode = "";
						//$scope.addQuotation.madatory = "1";
						$("#SalesManCode").css("background-color", "#ffff7f");
					}
					else
					{
						//alert("else");
						$scope.addQuotation.salesManCode = validData.salesPersonCode;
						//$scope.addQuotation.madatory = "0";
						$("#SalesManCode").css("background-color", "#99ff99");
					}
					if(validData.email == "" || validData.email == undefined || validData.email == "NA")
					{
						//alert("if");
						$scope.addQuotation.emailAddr = "";
						//$scope.addQuotation.madatory = "1";
						$("#Email").css("background-color", "#ffffff");
					}
					else
					{
						//alert("else");
						$scope.addQuotation.emailAddr = validData.email;
						//$scope.addQuotation.madatory = "0";
						$("#Email").css("background-color", "#99ff99");
					}
					if(validData.paymentTerm == "" || validData.paymentTerm == undefined || validData.paymentTerm == "NA")
					{
						//alert("if");
						$scope.addQuotation.paymentTerm = "";
						//$scope.addQuotation.madatory = "1";
						$("#PaymentTerm").css("background-color", "#ffff7f");
					}
					else
					{
						//alert("else");
						$scope.addQuotation.paymentTerm = validData.paymentTerm;
						//$scope.addQuotation.madatory = "0";
						$("#PaymentTerm").css("background-color", "#99ff99");
					}
					/*if(validData.departmentname == "" || validData.departmentname == undefined || validData.departmentname == "NA")
					{
						//alert("if");
						$scope.addQuotation.assigned = "";
						//$scope.addQuotation.madatory = "1";
						$("#AssignTo").css("background-color", "#ffff7f");
					}
					else
					{
						//alert("else");
						$scope.addQuotation.assigned = validData.departmentname;
						//$scope.addQuotation.madatory = "0";
						$("#AssignTo").css("background-color", "#99ff99");
					}*/
					if(validData.createdby == "" || validData.createdby == undefined || validData.createdby == "NA")
					{
						//alert("if");
						$scope.addQuotation.createdBy = "";
						//$scope.addQuotation.madatory = "1";
						$("#CreatedBy").css("background-color", "#ffff7f");
					}
					else
					{
						//alert("else");
						$scope.addQuotation.createdBy = validData.createdby;
						//$scope.addQuotation.madatory = "0";
						$("#CreatedBy").css("background-color", "#99ff99");
					}
					if(validData.exchangerate == "" || validData.exchangerate == undefined || validData.exchangerate == "NA")
					{
						
						$scope.addQuotation.exchangerate = "";
						$("#CurrencyExg").css("background-color", "#ffff7f"); 
					}
					else
					{
						
						$scope.addQuotation.exchangerate = validData.exchangerate;
						$("#CurrencyExg").css("background-color", "#99ff99");
					}
			var departmentSplit = json['custmer'][0].departmentname;
						 var departmentSales = [];
						 if(departmentSplit == undefined || departmentSplit == "" || departmentSplit == "NA")
						 {
							 //alert("if");
							 $('#picturegallery1').val("['']").trigger('chosen:updated');
							 $("#picturegallery1").css("background-color", "#ffff7f");
						 }
						 else
						 {
							 //alert(departmentSplit.length + " " + " else ");
							 for (var s = 0; s < departmentSplit.length; s++) {
					
										departmentSales.push(departmentSplit[s]);
										//alert("accessoriesSales"+accessoriesSales);
							}
							 $('#picturegallery1').val(departmentSales).trigger('chosen:updated');
											$scope.addQuotation.assigned = departmentSales;
											$("#picturegallery1").css("background-color", "#99ff99");
						 }
			$scope.$apply();
		});
		
	};
	
	
	$scope.startsWith = function(state, viewValue) {
			//alert(state.substr(0, viewValue.length).toLowerCase() == viewValue.toLowerCase());
              return state.substr(0, viewValue.length).toLowerCase() == viewValue.toLowerCase();
            }
	
	
	$scope.resetCustomerMasterData = function(QtnType,QtnMaster,form)
	{
		qtnFormData = new FormData();
		$scope.addQuotation = angular.copy($scope.master);
		form.$setPristine(true);
		$scope.stepsModel = [];
		
		
		
		
			
			$.post("resetcustomermasterdataonclick.do",{code:QtnType,qtnmaster:QtnMaster},function(json)
			{
				//alert(JSON.stringify(json['quatationform'][0].qtnType));
				var QuotationType = json['quatationform'][0].qtnType;
				if(QuotationType == "0")
				{
				   $scope.addQuotation = json['quatationform'][0];
				   $scope.qtnFullUnitData = json['quatationgrid'];
				   $scope.termData = json['quatationtermsgrid'];
				   
				   var validData = json['quatationform'][0];
				   
				   if(validData.currency == "" || validData.currency == undefined || validData.currency == "NA")
						{
							//alert("if");
							//$scope.addQuotation.currency = "";
							//$scope.addQuotation.madatory = "1";
							$("#Currency").css("background-color", "#ffff7f"); 
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.currency = validData.currency;
							//$scope.addQuotation.madatory = "0";
							$("#Currency").css("background-color", "#99ff99"); 
						}
						if(validData.attention == "" || validData.attention == undefined || validData.attention == "NA")
						{
							//alert("if");
							//$scope.addQuotation.attention = "";
							//$scope.addQuotation.madatory = "1";
							$("#Attention").css("background-color", "#ffff7f"); 
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.attention = validData.contName;
							//$scope.addQuotation.madatory = "0";
							$("#Attention").css("background-color", "#99ff99"); 
						}
						
						if(validData.custCode == "" || validData.custCode == undefined || validData.custCode == "NA")
						{
							
							//$scope.addQuotation.custCode = "";
							//$scope.addQuotation.madatory = "1";
							//$("#CustProsCode").css("background-color", "#ffff7f");
							$("#CustCode").css("background-color", "#ffff7f"); 
							$scope.$apply();
							
						}
						else
						{
							
							//$scope.addQuotation.custCode = validData.account;
							//$scope.addQuotation.madatory = "0";
							//$("#CustProsCode").css("background-color", "#99ff99"); 
							$("#CustCode").css("background-color", "#99ff99"); 
							$scope.$apply();
							
						}
						if(validData.telephone == "" || validData.telephone == undefined || validData.telephone == "NA")
						{
							//alert("if");
							//$scope.addQuotation.telephone = "";
							//$scope.addQuotation.madatory = "1";
							$("#Telephone").css("background-color", "#ffff7f"); 
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.telephone = validData.phnumber;
							//$scope.addQuotation.madatory = "0";
							$("#Telephone").css("background-color", "#99ff99"); 
						}
						if(validData.tax == "" || validData.tax == undefined || validData.tax == "NA")
						{
							//alert("if");
							//$scope.addQuotation.tax = "";
							//$scope.addQuotation.madatory = "1";
							$("#TaxName").css("background-color", "#ffff7f"); 
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.tax = validData.taxName;
							//$scope.addQuotation.madatory = "0";
							$("#TaxName").css("background-color", "#99ff99");
						}
						if(validData.country == "" || validData.country == undefined || validData.country == "NA")
						{
							//alert("if");
							//$scope.addQuotation.country = "";
							//$scope.addQuotation.madatory = "1";
							$("#CountryName").css("background-color", "#ffff7f"); 
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.country = validData.billingCountries;
							//$scope.addQuotation.madatory = "0";
							$("#CountryName").css("background-color", "#99ff99");
						}
						if(validData.salesMan == "" || validData.salesMan == undefined || validData.salesMan == "NA")
						{
							//alert("if");
							//$scope.addQuotation.salesMan = "";
							//$scope.addQuotation.madatory = "1";
							$("#SalesMan").css("background-color", "#ffff7f");
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.salesMan = validData.salesPerson;
							//$scope.addQuotation.madatory = "0";
							$("#SalesMan").css("background-color", "#99ff99");
						}
						
						if(validData.taxPercent == "" || validData.taxPercent == undefined || validData.taxPercent == "NA")
						{
							//alert("if");
							//$scope.addQuotation.taxPercent = "";
							//$scope.addQuotation.madatory = "1";
							$("#TaxPercent").css("background-color", "#ffff7f");
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.taxPercent = validData.taxPercent;
							//$scope.addQuotation.madatory = "0";
							$("#TaxPercent").css("background-color", "#99ff99");
						}
						
						if(validData.salesManCode == "" || validData.salesManCode == undefined || validData.salesManCode == "NA")
						{
							//alert("if");
							//$scope.addQuotation.salesManCode = "";
							//$scope.addQuotation.madatory = "1";
							$("#SalesManCode").css("background-color", "#ffff7f");
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.salesManCode = validData.salesPersonCode;
							//$scope.addQuotation.madatory = "0";
							$("#SalesManCode").css("background-color", "#99ff99");
						}
						if(validData.emailAddr == "" || validData.emailAddr == undefined || validData.emailAddr == "NA")
						{
							//alert("if");
							//$scope.addQuotation.emailAddr = "";
							//$scope.addQuotation.madatory = "1";
							$("#Email").css("background-color", "#ffffff");
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.emailAddr = validData.email;
							//$scope.addQuotation.madatory = "0";
							$("#Email").css("background-color", "#99ff99");
						}
						if(validData.paymentTerm == "" || validData.paymentTerm == undefined || validData.paymentTerm == "NA")
						{
							//alert("if");
							//$scope.addQuotation.paymentTerm = "";
							//$scope.addQuotation.madatory = "1";
							$("#PaymentTerm").css("background-color", "#ffff7f");
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.paymentTerm = validData.paymentTerm;
							//$scope.addQuotation.madatory = "0";
							$("#PaymentTerm").css("background-color", "#99ff99");
						}
						/*if(validData.assigned == "" || validData.assigned == undefined || validData.assigned == "NA")
						{
							//alert("if");
							//$scope.addQuotation.assigned = "";
							//$scope.addQuotation.madatory = "1";
							$("#AssignTo").css("background-color", "#ffff7f");
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.assigned = validData.departmentname;
							//$scope.addQuotation.madatory = "0";
							$("#AssignTo").css("background-color", "#99ff99");
						}*/
						if(validData.createdBy == "" || validData.createdBy == undefined || validData.createdBy == "NA")
						{
							//alert("if");
							//$scope.addQuotation.createdBy = "";
							//$scope.addQuotation.madatory = "1";
							$("#CreatedBy").css("background-color", "#ffff7f");
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.createdBy = validData.createdby;
							//$scope.addQuotation.madatory = "0";
							$("#CreatedBy").css("background-color", "#99ff99");
						}
				   /*if(validData.emailAddr == "" || validData.emailAddr == undefined || validData.emailAddr == "NA")
					{
						//alert("if");
						$scope.addQuotation.emailAddr = "";
						//$scope.addQuotation.madatory = "1";
						$("#Email").css("background-color", "#ffffff");
					}
					else
					{
						//alert("else");
						$scope.addQuotation.emailAddr = validData.emailAddr;
						//$scope.addQuotation.madatory = "0";
						$("#Email").css("background-color", "#99ff99");
					}*/
				   
				   var departmentSplit = json['quatationform'][0].assigned;
						 var departmentSales = [];
						 if(departmentSplit == undefined || departmentSplit == "" || departmentSplit == "NA")
						 {
							 //alert("if");
							 $('#picturegallery1').val("['']").trigger('chosen:updated');
							 $("#picturegallery1").css("background-color", "#ffff7f");
						 }
						 else
						 {
							 //alert(departmentSplit.length + " " + " else ");
							 for (var s = 0; s < departmentSplit.length; s++) {
					
										departmentSales.push(departmentSplit[s]);
										//alert("accessoriesSales"+accessoriesSales);
							}
							 $('#picturegallery1').val(departmentSales).trigger('chosen:updated');
											$scope.addQuotation.assigned = departmentSales;
											$("#picturegallery1").css("background-color", "#99ff99");
						 }
						 
						 
				   
				}
				if(QuotationType == "1")
				{
					
				   $scope.addQuotation = json['quatationform'][0];
				   $scope.projectUnitData = json['quatationgrid'];
				   $scope.termData = json['quatationtermsgrid'];
				    
				   var validData = json['quatationform'][0];
				   
				   if(validData.currency == "" || validData.currency == undefined || validData.currency == "NA")
						{
							//alert("if");
							//$scope.addQuotation.currency = "";
							//$scope.addQuotation.madatory = "1";
							$("#Currency").css("background-color", "#ffff7f"); 
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.currency = validData.currency;
							//$scope.addQuotation.madatory = "0";
							$("#Currency").css("background-color", "#99ff99"); 
						}
						if(validData.attention == "" || validData.attention == undefined || validData.attention == "NA")
						{
							//alert("if");
							//$scope.addQuotation.attention = "";
							//$scope.addQuotation.madatory = "1";
							$("#Attention").css("background-color", "#ffff7f"); 
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.attention = validData.contName;
							//$scope.addQuotation.madatory = "0";
							$("#Attention").css("background-color", "#99ff99"); 
						}
						if(validData.custCode == "" || validData.custCode == undefined || validData.custCode == "NA")
						{
							//alert("if");
							//$scope.addQuotation.custCode = "";
							//$scope.addQuotation.madatory = "1";
							//$("#CustProsCode").css("background-color", "#ffff7f");
							$("#CustCode").css("background-color", "#ffff7f"); 
							
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.custCode = validData.account;
							//$scope.addQuotation.madatory = "0";
							//$("#CustProsCode").css("background-color", "#99ff99");
							$("#CustCode").css("background-color", "#99ff99"); 
							
						}
						if(validData.telephone == "" || validData.telephone == undefined || validData.telephone == "NA")
						{
							//alert("if");
							//$scope.addQuotation.telephone = "";
							//$scope.addQuotation.madatory = "1";
							$("#Telephone").css("background-color", "#ffff7f"); 
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.telephone = validData.phnumber;
							//$scope.addQuotation.madatory = "0";
							$("#Telephone").css("background-color", "#99ff99"); 
						}
						if(validData.tax == "" || validData.tax == undefined || validData.tax == "NA")
						{
							//alert("if");
							//$scope.addQuotation.tax = "";
							//$scope.addQuotation.madatory = "1";
							$("#TaxName").css("background-color", "#ffff7f"); 
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.tax = validData.taxName;
							//$scope.addQuotation.madatory = "0";
							$("#TaxName").css("background-color", "#99ff99");
						}
						if(validData.country == "" || validData.country == undefined || validData.country == "NA")
						{
							//alert("if");
							//$scope.addQuotation.country = "";
							//$scope.addQuotation.madatory = "1";
							$("#CountryName").css("background-color", "#ffff7f"); 
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.country = validData.billingCountries;
							//$scope.addQuotation.madatory = "0";
							$("#CountryName").css("background-color", "#99ff99");
						}
						if(validData.salesMan == "" || validData.salesMan == undefined || validData.salesMan == "NA")
						{
							//alert("if");
							//$scope.addQuotation.salesMan = "";
							//$scope.addQuotation.madatory = "1";
							$("#SalesMan").css("background-color", "#ffff7f");
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.salesMan = validData.salesPerson;
							//$scope.addQuotation.madatory = "0";
							$("#SalesMan").css("background-color", "#99ff99");
						}
						
						if(validData.taxPercent == "" || validData.taxPercent == undefined || validData.taxPercent == "NA")
						{
							//alert("if");
							//$scope.addQuotation.taxPercent = "";
							//$scope.addQuotation.madatory = "1";
							$("#TaxPercent").css("background-color", "#ffff7f");
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.taxPercent = validData.taxPercent;
							//$scope.addQuotation.madatory = "0";
							$("#TaxPercent").css("background-color", "#99ff99");
						}
						
						if(validData.salesManCode == "" || validData.salesManCode == undefined || validData.salesManCode == "NA")
						{
							//alert("if");
							//$scope.addQuotation.salesManCode = "";
							//$scope.addQuotation.madatory = "1";
							$("#SalesManCode").css("background-color", "#ffff7f");
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.salesManCode = validData.salesPersonCode;
							//$scope.addQuotation.madatory = "0";
							$("#SalesManCode").css("background-color", "#99ff99");
						}
						if(validData.emailAddr == "" || validData.emailAddr == undefined || validData.emailAddr == "NA")
						{
							//alert("if");
							//$scope.addQuotation.emailAddr = "";
							//$scope.addQuotation.madatory = "1";
							$("#Email").css("background-color", "#ffffff");
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.emailAddr = validData.email;
							//$scope.addQuotation.madatory = "0";
							$("#Email").css("background-color", "#99ff99");
						}
						if(validData.paymentTerm == "" || validData.paymentTerm == undefined || validData.paymentTerm == "NA")
						{
							//alert("if");
							//$scope.addQuotation.paymentTerm = "";
							//$scope.addQuotation.madatory = "1";
							$("#PaymentTerm").css("background-color", "#ffff7f");
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.paymentTerm = validData.paymentTerm;
							//$scope.addQuotation.madatory = "0";
							$("#PaymentTerm").css("background-color", "#99ff99");
						}
						/*if(validData.assigned == "" || validData.assigned == undefined || validData.assigned == "NA")
						{
							//alert("if");
							//$scope.addQuotation.assigned = "";
							//$scope.addQuotation.madatory = "1";
							$("#AssignTo").css("background-color", "#ffff7f");
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.assigned = validData.departmentname;
							//$scope.addQuotation.madatory = "0";
							$("#AssignTo").css("background-color", "#99ff99");
						}*/
						if(validData.createdBy == "" || validData.createdBy == undefined || validData.createdBy == "NA")
						{
							//alert("if");
							//$scope.addQuotation.createdBy = "";
							//$scope.addQuotation.madatory = "1";
							$("#CreatedBy").css("background-color", "#ffff7f");
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.createdBy = validData.createdby;
							//$scope.addQuotation.madatory = "0";
							$("#CreatedBy").css("background-color", "#99ff99");
						}
				   
				   /*if(validData.emailAddr == "" || validData.emailAddr == undefined || validData.emailAddr == "NA")
					{
						//alert("if");
						$scope.addQuotation.emailAddr = "";
						//$scope.addQuotation.madatory = "1";
						$("#Email").css("background-color", "#ffffff");
					}
					else
					{
						//alert("else");
						$scope.addQuotation.emailAddr = validData.emailAddr;
						//$scope.addQuotation.madatory = "0";
						$("#Email").css("background-color", "#99ff99");
					}*/
				   
				   var departmentSplit = json['quatationform'][0].assigned;
						 var departmentSales = [];
						 if(departmentSplit == undefined || departmentSplit == "" || departmentSplit == "NA")
						 {
							 //alert("if");
							 $('#picturegallery1').val("['']").trigger('chosen:updated');
							 $("#picturegallery1").css("background-color", "#ffff7f");
						 }
						 else
						 {
							 //alert(departmentSplit.length + " " + " else ");
							 for (var s = 0; s < departmentSplit.length; s++) {
					
										departmentSales.push(departmentSplit[s]);
										//alert("accessoriesSales"+accessoriesSales);
							}
							 $('#picturegallery1').val(departmentSales).trigger('chosen:updated');
											$scope.addQuotation.assigned = departmentSales;
											$("#picturegallery1").css("background-color", "#99ff99");
						 }
				   
				   var getImage = json['quatationform'][0].imagepath;
								  // alert(getImage);
									 if(getImage!=null)
									   {
										   //alert(getImage + " " + 1);
										   var imgPrew = getImage.trim();
										   if(imgPrew==null || imgPrew=="" )
										   {
											   //alert(getImage + " " + 2);
											 
											  $scope.stepsModel = [];
											  $scope.$apply();
											  //$scope.dummyPhoto="";
					                          //$('#dummyPhoto').trigger('blur');
										   }
										   else
										   {
											   //alert(getImage + " " + 3);
											   $scope.stepsModel = getImage.split(',');
											   $scope.$apply();
											   
										   }
									   }
									   else
									   {
										   //alert(getImage + " " + 4);
										    $scope.stepsModel = [];
										    $scope.$apply();
										 
									   }
							
				}
				if(QuotationType == "2")
				{
				   $scope.addQuotation = json['quatationform'][0];
				   $scope.sparePartData = json['quatationgrid'];
				   $scope.termData = json['quatationtermsgrid'];
				   
				   var validData = json['quatationform'][0];
				   
				   if(validData.currency == "" || validData.currency == undefined || validData.currency == "NA")
						{
							//alert("if");
							//$scope.addQuotation.currency = "";
							//$scope.addQuotation.madatory = "1";
							$("#Currency").css("background-color", "#ffff7f"); 
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.currency = validData.currency;
							//$scope.addQuotation.madatory = "0";
							$("#Currency").css("background-color", "#99ff99"); 
						}
						if(validData.attention == "" || validData.attention == undefined || validData.attention == "NA")
						{
							//alert("if");
							//$scope.addQuotation.attention = "";
							//$scope.addQuotation.madatory = "1";
							$("#Attention").css("background-color", "#ffff7f"); 
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.attention = validData.contName;
							//$scope.addQuotation.madatory = "0";
							$("#Attention").css("background-color", "#99ff99"); 
						}
						if(validData.custCode == "" || validData.custCode == undefined || validData.custCode == "NA")
						{
							//alert("if");
							//$scope.addQuotation.custCode = "";
							//$scope.addQuotation.madatory = "1";
							//$("#CustProsCode").css("background-color", "#ffff7f");
							$("#CustCode").css("background-color", "#ffff7f"); 
							//$("#CustProsCode").css("background-color", "#ffff7f"); 
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.custCode = validData.account;
							//$scope.addQuotation.madatory = "0";
							$("#CustCode").css("background-color", "#99ff99"); 
							//$("#CustProsCode").css("background-color", "#99ff99");
						}
						if(validData.telephone == "" || validData.telephone == undefined || validData.telephone == "NA")
						{
							//alert("if");
							//$scope.addQuotation.telephone = "";
							//$scope.addQuotation.madatory = "1";
							$("#Telephone").css("background-color", "#ffff7f"); 
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.telephone = validData.phnumber;
							//$scope.addQuotation.madatory = "0";
							$("#Telephone").css("background-color", "#99ff99"); 
						}
						if(validData.tax == "" || validData.tax == undefined || validData.tax == "NA")
						{
							//alert("if");
							//$scope.addQuotation.tax = "";
							//$scope.addQuotation.madatory = "1";
							$("#TaxName").css("background-color", "#ffff7f"); 
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.tax = validData.taxName;
							//$scope.addQuotation.madatory = "0";
							$("#TaxName").css("background-color", "#99ff99");
						}
						if(validData.country == "" || validData.country == undefined || validData.country == "NA")
						{
							//alert("if");
							//$scope.addQuotation.country = "";
							//$scope.addQuotation.madatory = "1";
							$("#CountryName").css("background-color", "#ffff7f"); 
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.country = validData.billingCountries;
							//$scope.addQuotation.madatory = "0";
							$("#CountryName").css("background-color", "#99ff99");
						}
						if(validData.salesMan == "" || validData.salesMan == undefined || validData.salesMan == "NA")
						{
							//alert("if");
							//$scope.addQuotation.salesMan = "";
							//$scope.addQuotation.madatory = "1";
							$("#SalesMan").css("background-color", "#ffff7f");
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.salesMan = validData.salesPerson;
							//$scope.addQuotation.madatory = "0";
							$("#SalesMan").css("background-color", "#99ff99");
						}
						
						if(validData.taxPercent == "" || validData.taxPercent == undefined || validData.taxPercent == "NA")
						{
							//alert("if");
							//$scope.addQuotation.taxPercent = "";
							//$scope.addQuotation.madatory = "1";
							$("#TaxPercent").css("background-color", "#ffff7f");
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.taxPercent = validData.taxPercent;
							//$scope.addQuotation.madatory = "0";
							$("#TaxPercent").css("background-color", "#99ff99");
						}
						
						if(validData.salesManCode == "" || validData.salesManCode == undefined || validData.salesManCode == "NA")
						{
							//alert("if");
							//$scope.addQuotation.salesManCode = "";
							//$scope.addQuotation.madatory = "1";
							$("#SalesManCode").css("background-color", "#ffff7f");
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.salesManCode = validData.salesPersonCode;
							//$scope.addQuotation.madatory = "0";
							$("#SalesManCode").css("background-color", "#99ff99");
						}
						if(validData.emailAddr == "" || validData.emailAddr == undefined || validData.emailAddr == "NA")
						{
							//alert("if");
							//$scope.addQuotation.emailAddr = "";
							//$scope.addQuotation.madatory = "1";
							$("#Email").css("background-color", "#ffffff");
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.emailAddr = validData.email;
							//$scope.addQuotation.madatory = "0";
							$("#Email").css("background-color", "#99ff99");
						}
						if(validData.paymentTerm == "" || validData.paymentTerm == undefined || validData.paymentTerm == "NA")
						{
							//alert("if");
							//$scope.addQuotation.paymentTerm = "";
							//$scope.addQuotation.madatory = "1";
							$("#PaymentTerm").css("background-color", "#ffff7f");
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.paymentTerm = validData.paymentTerm;
							//$scope.addQuotation.madatory = "0";
							$("#PaymentTerm").css("background-color", "#99ff99");
						}
						/*if(validData.assigned == "" || validData.assigned == undefined || validData.assigned == "NA")
						{
							//alert("if");
							//$scope.addQuotation.assigned = "";
							//$scope.addQuotation.madatory = "1";
							$("#AssignTo").css("background-color", "#ffff7f");
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.assigned = validData.departmentname;
							//$scope.addQuotation.madatory = "0";
							$("#AssignTo").css("background-color", "#99ff99");
						}*/
						if(validData.createdBy == "" || validData.createdBy == undefined || validData.createdBy == "NA")
						{
							//alert("if");
							//$scope.addQuotation.createdBy = "";
							//$scope.addQuotation.madatory = "1";
							$("#CreatedBy").css("background-color", "#ffff7f");
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.createdBy = validData.createdby;
							//$scope.addQuotation.madatory = "0";
							$("#CreatedBy").css("background-color", "#99ff99");
						}
				   
				   /*if(validData.attention == "" || validData.attention == undefined || validData.attention == "NA")
						{
							alert("if");
							//$scope.addQuotation.attention = "";
							//$scope.addQuotation.madatory = "1";
							$("#Attention").css("background-color", "#ffff7f"); 
						}
						else
						{
							alert("else");
							//$scope.addQuotation.attention = validData.attention;
							//$scope.addQuotation.madatory = "0";
							$("#Attention").css("background-color", "#99ff99"); 
						}
				   if(validData.emailAddr == "" || validData.emailAddr == undefined || validData.emailAddr == "NA")
					{
						//alert("if");
						$scope.addQuotation.emailAddr = "";
						//$scope.addQuotation.madatory = "1";
						$("#Email").css("background-color", "#ffffff");
					}
					else
					{
						//alert("else");
						$scope.addQuotation.emailAddr = validData.emailAddr;
						//$scope.addQuotation.madatory = "0";
						$("#Email").css("background-color", "#99ff99");
					}*/
				   
				   var departmentSplit = json['quatationform'][0].assigned;
						 var departmentSales = [];
						 if(departmentSplit == undefined || departmentSplit == "" || departmentSplit == "NA")
						 {
							 //alert("if");
							 $('#picturegallery1').val("['']").trigger('chosen:updated');
							 $("#picturegallery1").css("background-color", "#ffff7f");
						 }
						 else
						 {
							 //alert(departmentSplit.length + " " + " else ");
							 for (var s = 0; s < departmentSplit.length; s++) {
					
										departmentSales.push(departmentSplit[s]);
										//alert("accessoriesSales"+accessoriesSales);
							}
							 $('#picturegallery1').val(departmentSales).trigger('chosen:updated');
											$scope.addQuotation.assigned = departmentSales;
											$("#picturegallery1").css("background-color", "#99ff99");
						 }
				   
				}
				if(QuotationType == "3")
				{
				   $scope.addQuotation = json['quatationform'][0]; 
				   $scope.servicPartData = json['quatationgrid'];
				   $scope.termData = json['quatationtermsgrid'];
				  
				   var validData = json['quatationform'][0];
				   
				   if(validData.currency == "" || validData.currency == undefined || validData.currency == "NA")
						{
							//alert("if");
							//$scope.addQuotation.currency = "";
							//$scope.addQuotation.madatory = "1";
							$("#Currency").css("background-color", "#ffff7f"); 
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.currency = validData.currency;
							//$scope.addQuotation.madatory = "0";
							$("#Currency").css("background-color", "#99ff99"); 
						}
						if(validData.attention == "" || validData.attention == undefined || validData.attention == "NA")
						{
							//alert("if");
							//$scope.addQuotation.attention = "";
							//$scope.addQuotation.madatory = "1";
							$("#Attention").css("background-color", "#ffff7f"); 
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.attention = validData.contName;
							//$scope.addQuotation.madatory = "0";
							$("#Attention").css("background-color", "#99ff99"); 
						}
						if(validData.custCode == "" || validData.custCode == undefined || validData.custCode == "NA")
						{
							//alert("if");
							//$scope.addQuotation.custCode = "";
							//$scope.addQuotation.madatory = "1";
							$("#CustCode").css("background-color", "#ffff7f"); 
							//$("#CustProsCode").css("background-color", "#ffff7f"); 
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.custCode = validData.account;
							//$scope.addQuotation.madatory = "0";
							$("#CustCode").css("background-color", "#99ff99"); 
							//$("#CustProsCode").css("background-color", "#99ff99"); 
						}
						if(validData.telephone == "" || validData.telephone == undefined || validData.telephone == "NA")
						{
							//alert("if");
							//$scope.addQuotation.telephone = "";
							//$scope.addQuotation.madatory = "1";
							$("#Telephone").css("background-color", "#ffff7f"); 
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.telephone = validData.phnumber;
							//$scope.addQuotation.madatory = "0";
							$("#Telephone").css("background-color", "#99ff99"); 
						}
						if(validData.tax == "" || validData.tax == undefined || validData.tax == "NA")
						{
							//alert("if");
							//$scope.addQuotation.tax = "";
							//$scope.addQuotation.madatory = "1";
							$("#TaxName").css("background-color", "#ffff7f"); 
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.tax = validData.taxName;
							//$scope.addQuotation.madatory = "0";
							$("#TaxName").css("background-color", "#99ff99");
						}
						if(validData.country == "" || validData.country == undefined || validData.country == "NA")
						{
							//alert("if");
							//$scope.addQuotation.country = "";
							//$scope.addQuotation.madatory = "1";
							$("#CountryName").css("background-color", "#ffff7f"); 
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.country = validData.billingCountries;
							//$scope.addQuotation.madatory = "0";
							$("#CountryName").css("background-color", "#99ff99");
						}
						if(validData.salesMan == "" || validData.salesMan == undefined || validData.salesMan == "NA")
						{
							//alert("if");
							//$scope.addQuotation.salesMan = "";
							//$scope.addQuotation.madatory = "1";
							$("#SalesMan").css("background-color", "#ffff7f");
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.salesMan = validData.salesPerson;
							//$scope.addQuotation.madatory = "0";
							$("#SalesMan").css("background-color", "#99ff99");
						}
						
						if(validData.taxPercent == "" || validData.taxPercent == undefined || validData.taxPercent == "NA")
						{
							//alert("if");
							//$scope.addQuotation.taxPercent = "";
							//$scope.addQuotation.madatory = "1";
							$("#TaxPercent").css("background-color", "#ffff7f");
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.taxPercent = validData.taxPercent;
							//$scope.addQuotation.madatory = "0";
							$("#TaxPercent").css("background-color", "#99ff99");
						}
						
						if(validData.salesManCode == "" || validData.salesManCode == undefined || validData.salesManCode == "NA")
						{
							//alert("if");
							//$scope.addQuotation.salesManCode = "";
							//$scope.addQuotation.madatory = "1";
							$("#SalesManCode").css("background-color", "#ffff7f");
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.salesManCode = validData.salesPersonCode;
							//$scope.addQuotation.madatory = "0";
							$("#SalesManCode").css("background-color", "#99ff99");
						}
						if(validData.emailAddr == "" || validData.emailAddr == undefined || validData.emailAddr == "NA")
						{
							//alert("if");
							//$scope.addQuotation.emailAddr = "";
							//$scope.addQuotation.madatory = "1";
							$("#Email").css("background-color", "#ffffff");
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.emailAddr = validData.email;
							//$scope.addQuotation.madatory = "0";
							$("#Email").css("background-color", "#99ff99");
						}
						if(validData.paymentTerm == "" || validData.paymentTerm == undefined || validData.paymentTerm == "NA")
						{
							//alert("if");
							//$scope.addQuotation.paymentTerm = "";
							//$scope.addQuotation.madatory = "1";
							$("#PaymentTerm").css("background-color", "#ffff7f");
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.paymentTerm = validData.paymentTerm;
							//$scope.addQuotation.madatory = "0";
							$("#PaymentTerm").css("background-color", "#99ff99");
						}
						/*if(validData.assigned == "" || validData.assigned == undefined || validData.assigned == "NA")
						{
							//alert("if");
							//$scope.addQuotation.assigned = "";
							//$scope.addQuotation.madatory = "1";
							$("#AssignTo").css("background-color", "#ffff7f");
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.assigned = validData.departmentname;
							//$scope.addQuotation.madatory = "0";
							$("#AssignTo").css("background-color", "#99ff99");
						}*/
						if(validData.createdBy == "" || validData.createdBy == undefined || validData.createdBy == "NA")
						{
							//alert("if");
							//$scope.addQuotation.createdBy = "";
							//$scope.addQuotation.madatory = "1";
							$("#CreatedBy").css("background-color", "#ffff7f");
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.createdBy = validData.createdby;
							//$scope.addQuotation.madatory = "0";
							$("#CreatedBy").css("background-color", "#99ff99");
						}
				   
				   /*if(validData.emailAddr == "" || validData.emailAddr == undefined || validData.emailAddr == "NA")
					{
						//alert("if");
						$scope.addQuotation.emailAddr = "";
						//$scope.addQuotation.madatory = "1";
						$("#Email").css("background-color", "#ffffff");
					}
					else
					{
						//alert("else");
						$scope.addQuotation.emailAddr = validData.emailAddr;
						//$scope.addQuotation.madatory = "0";
						$("#Email").css("background-color", "#99ff99");
					}*/
				   
				  var departmentSplit = json['quatationform'][0].assigned;
						 var departmentSales = [];
						 if(departmentSplit == undefined || departmentSplit == "" || departmentSplit == "NA")
						 {
							 //alert("if");
							 $('#picturegallery1').val("['']").trigger('chosen:updated');
							 $("#picturegallery1").css("background-color", "#ffff7f");
						 }
						 else
						 {
							 //alert(departmentSplit.length + " " + " else ");
							 for (var s = 0; s < departmentSplit.length; s++) {
					
										departmentSales.push(departmentSplit[s]);
										//alert("accessoriesSales"+accessoriesSales);
							}
							 $('#picturegallery1').val(departmentSales).trigger('chosen:updated');
											$scope.addQuotation.assigned = departmentSales;
											$("#picturegallery1").css("background-color", "#99ff99");
						 }
				   
				}
				   
				   
				     var asd = json['quatationform'][0].qtnNo;
				     asd2 = asd.split("-");
					 $scope.qType = asd2[0];
					 $scope.coun_year_Code = asd2[1];
					 $scope.runNo = asd2[2];
					 $scope.version = asd2[3];
					 $scope.addQuotation.qtnNo = json['quatationform'][0].qtnNo;
				   
				 
				 $scope.$apply();
			});

		
		
		
		//alert(QtnType);
		/*if(QtnType == '0')
		{
			//alert("if");
			$scope.addQuotation.custName = "";
			$scope.addQuotation.custCode = "";
		   
		}
		if(QtnType == '1')
		{
			//alert("if");
			$scope.addQuotation.custName = "";
			$scope.addQuotation.custCode = "";
		}
		if(QtnType == '2')
		{
			//alert("if");
			$scope.addQuotation.custName = "";
			$scope.addQuotation.custCode = "";
		}
		if(QtnType == '3')
		{
			//alert("if");
			$scope.addQuotation.custName = "";
			$scope.addQuotation.custCode = "";
		}
		
		$scope.addQuotation.madatory = "0"; 
		$scope.$apply();*/	
		
									
	};
	
	
	
	
	$scope.gotoCaseManagement = function(custname,caseref)
	{
		//alert(caseref);
		$rootScope.caseCustomer = custname;
		$rootScope.caseCustomerRef = caseref;
		$rootScope.tab = "0"
		$rootScope.actionTab = "EDIT";
		$rootScope.action= "1";
		$rootScope.caseid= "0";
		$state.go('app.newCaseManagement');
	};
	
	$scope.toggleblockpannelhide = function(gridId,event)
	{
		//alert(gridId + " gridId ");
		//alert($(this).attr('id'));
		//alert(btnId + " btnId ");
		//alert(event.target.id);
		
		var btnid = event.target.id;
		
		 //$scope.btnvalue = "1";
		 if(gridId == btnid)
		 {
			 $("#toggleblk_"+gridId).slideToggle();
			  $(".curbtnid-minus_"+btnid).hide();
			 $(".curbtnid-plus_"+btnid).show();
			 /*$("#"+btnid).toggle(function(){
				 alert(5555);
				$("#toggleblk_"+gridId).show();
				//$scope.btnvalue = "1";
			 },function(){
			 	alert(88888888);
				 $("#toggleblk_"+gridId).hide();
				// $scope.btnvalue = "0";
			 });*/
			 //alert("if");
			//$("#toggleblk_"+gridId).slideToggle(); 
			//$scope.btnvalue = "0";
			/*$("#"+btnid).toggle(function(){
				   //alert(252252);
				   //$("#btn_1").text("Show");
				   //$("#plus").addClass("glyphicon glyphicon-plus");
				   //$("#plus").removeClass("glyphicon glyphicon-minus");
				   //$("#toggleblk_"+gridId).slideUp();
				   //$scope.btnvalue = "0";
				   $("#toggleblk_"+gridId).slideToggle(); 
				   $scope.btnvalue = "1";
			   },function(){
					alert(999999999999);
				   //$("#btn_1").text("Hide");
				   //$("#plus").removeClass("glyphicon glyphicon-plus");
				  // $("#plus").addClass("glyphicon glyphicon-minus");
				   //$("#toggleblk_"+gridId).slideDown();
				   //$scope.btnvalue = "1";
				   $("#toggleblk_"+gridId).slideToggle(); 
				   $scope.btnvalue = "0";
			   });*/
		 }
		 //$scope.$apply();
		/*$('#btn_1').toggle(function(){
		   alert(252252);
		   $("#btn_1").text("Show");
		   //$("#plus").addClass("glyphicon glyphicon-plus");
		   //$("#plus").removeClass("glyphicon glyphicon-minus");
		   $("#slidingDiv_1").slideUp();
		   
	   },function(){
			//alert(999999999999);
		   $("#btn_1").text("Hide");
		   //$("#plus").removeClass("glyphicon glyphicon-plus");
		  // $("#plus").addClass("glyphicon glyphicon-minus");
		   $("#slidingDiv_1").slideDown();
	   });*/
	};
	$scope.toggleblockpannelshow = function(gridId,event)
	{
		//alert(gridId + " gridId ");
		//alert($(this).attr('id'));
		//alert(btnId + " btnId ");
		//alert(event.target.id);
		
		var btnid = event.target.id;
		
		
		 if(gridId == btnid)
		 {
			 $("#toggleblk_"+gridId).slideToggle();
			 $(".curbtnid-minus_"+btnid).show();
			 $(".curbtnid-plus_"+btnid).hide();
		 }
		 
	};
	$scope.toggleblockpannelhideCust = function(gridId,event)
	{
		//alert(gridId + " gridId ");
		//alert($(this).attr('id'));
		//alert(btnId + " btnId ");
		//alert(event.target.id);
		
		var btnid = event.target.id;
		
		 //$scope.btnvalue = "1";
		 if(gridId == btnid)
		 {
			 $("#toggleblkCust_"+gridId).slideToggle();
			 $(".curbtnidCust-minus_"+btnid).hide();
			 $(".curbtnidCust-plus_"+btnid).show();
			 
		 }
		 
	};
	$scope.toggleblockpannelshowCust = function(gridId,event)
	{
		//alert(gridId + " gridId ");
		//alert($(this).attr('id'));
		//alert(btnId + " btnId ");
		//alert(event.target.id);
		
		var btnid = event.target.id;
		
		
		 if(gridId == btnid)
		 {
			 $("#toggleblkCust_"+gridId).slideToggle();
			 $(".curbtnidCust-minus_"+btnid).show();
			 $(".curbtnidCust-plus_"+btnid).hide();
		 }
		 
	};
	$scope.toggleblockpannelhideSpare = function(gridId,event)
	{
		//alert(gridId + " gridId ");
		//alert($(this).attr('id'));
		//alert(btnId + " btnId ");
		//alert(event.target.id);
		
		var btnid = event.target.id;
		
		 //$scope.btnvalue = "1";
		 if(gridId == btnid)
		 {
			 $("#toggleblkSpare_"+gridId).slideToggle();
			 $(".curbtnidSpare-minus_"+btnid).hide();
			 $(".curbtnidSpare-plus_"+btnid).show();
			 
		 }
		 
	};
	$scope.toggleblockpannelshowSpare = function(gridId,event)
	{
		//alert(gridId + " gridId ");
		//alert($(this).attr('id'));
		//alert(btnId + " btnId ");
		//alert(event.target.id);
		
		var btnid = event.target.id;
		
		
		 if(gridId == btnid)
		 {
			 $("#toggleblkSpare_"+gridId).slideToggle();
			 $(".curbtnidSpare-minus_"+btnid).show();
			 $(".curbtnidSpare-plus_"+btnid).hide();
		 }
		 
	};
	$scope.toggleblockpannelhideService = function(gridId,event)
	{
		//alert(gridId + " gridId ");
		//alert($(this).attr('id'));
		//alert(btnId + " btnId ");
		//alert(event.target.id);
		
		var btnid = event.target.id;
		
		 //$scope.btnvalue = "1";
		 if(gridId == btnid)
		 {
			 $("#toggleblkService_"+gridId).slideToggle();
			 $(".curbtnidService-minus_"+btnid).hide();
			 $(".curbtnidService-plus_"+btnid).show();
			 
		 }
		 
	};
	$scope.toggleblockpannelshowService = function(gridId,event)
	{
		//alert(gridId + " gridId ");
		//alert($(this).attr('id'));
		//alert(btnId + " btnId ");
		//alert(event.target.id);
		
		var btnid = event.target.id;
		
		
		 if(gridId == btnid)
		 {
			 $("#toggleblkService_"+gridId).slideToggle();
			 $(".curbtnidService-minus_"+btnid).show();
			 $(".curbtnidService-plus_"+btnid).hide();
		 }
		 
	};
	$scope.defaultfreq = function(invertid,index)
	{
		var index = this.$index; 
		//alert(index);
		//alert(invertid);
		if(invertid == "0")
		{
			$scope.qtnFullUnitData[index].freq = "60";
		}
		else
		{
			$scope.qtnFullUnitData[index].freq = "50";
		}
		$scope.$apply();
	};
	$scope.defaultfreqCust = function(invertid,index)
	{
		var index = this.$index; 
		//alert(index);
		//alert(invertid);
		if(invertid == "0")
		{
			$scope.projectUnitData[index].freq = "60";
		}
		else
		{
			$scope.projectUnitData[index].freq = "50";
		}
		$scope.$apply();
	};
	$scope.defaultfreqSpare = function(invertid,index)
	{
		var index = this.$index; 
		//alert(index);
		//alert(invertid);
		if(invertid == "0")
		{
			$scope.sparePartData[index].freq = "60";
		}
		else
		{
			$scope.sparePartData[index].freq = "50";
		}
		$scope.$apply();
	};
	$scope.defaultfreqService = function(invertid,index)
	{
		var index = this.$index; 
		//alert(index);
		//alert(invertid);
		if(invertid == "0")
		{
			$scope.servicPartData[index].freq = "60";
		}
		else
		{
			$scope.servicPartData[index].freq = "50";
		}
		$scope.$apply();
	};
	
	 $scope.Accessiories = [];
	$scope.assignToDepartments = function() {
		   $.post("departmentViewForCase.do",function(json)
				{
					//alert(JSON.stringify(json['data']));
					
					//var asd = JSON.stringify(json['data']);
					 $scope.Accessiories = json['data'];
					 
					 //alert(JSON.stringify($scope.Accessiories));
					var data = $scope.Accessiories;
					$scope.assigned = data
		
						//alert(JSON.stringify($scope.Accessiories));		
		
		
					var optionValues = "";
					for (var i = 0; i < data.length; i++) {
						optionValues += "<option value='" + data[i].departmentnameshortcut + "'>" + data[i].assigned + "</option>";
					}
					$('#picturegallery1').empty();
					var newOption = $(optionValues);
		
					$('#picturegallery1').append(newOption);
					$('#picturegallery1').trigger("chosen:updated");
					
					 $scope.$apply();
				});
			
        };
    
	
/*---------------Count Of Days------------------------*/

$scope.loadCountofDays = function(curDate,expDate)
{
	//alert(curDate);
	//alert(expDate);
	var splitQtDate = curDate.split("-");
	var splitQtExpDate = expDate.split("-");
	//alert(splitQtDate);
	var ddQuote = splitQtDate[0];
	var mmQuote = splitQtDate[1];
	var yyQuote = splitQtDate[2];
	
	var ddQuoteExp = splitQtExpDate[0];
	var mmQuoteExp = splitQtExpDate[1];
	var yyQuoteExp = splitQtExpDate[2];
	 
	var oneDay = 24*60*60*1000; // hours*minutes*seconds*milliseconds
	var firstDate = new Date(yyQuote,mmQuote,ddQuote);
	var secondDate = new Date(yyQuoteExp,mmQuoteExp,ddQuoteExp);
	//alert(Math.abs((firstDate.getTime() - secondDate.getTime())/(oneDay)));
	var diffDays = Math.round(Math.abs((firstDate.getTime() - secondDate.getTime())/(oneDay)));
	//alert(diffDays);
	$scope.addQuotation.validityCon = diffDays + " " + "Days";
	$scope.$apply();
};

$scope.chngothersPlzSts = function(MotorType,index)
{
	var index = this.$index;
	
	if(MotorType == 'other - pls specify')
	{
		$scope.qtnFullUnitData[index].motorTypeSts = true;
		$scope.qtnFullUnitData[index].othersPlzSts = true;
		 $("#MotorType_"+parseInt(index+1)).css("background-color", "#ffff7f"); 
		 $("#OthersPlz_"+parseInt(index+1)).css("background-color", "#ffff7f");
	}
	else
	{
		$scope.qtnFullUnitData[index].motorTypeSts = false;
		$scope.qtnFullUnitData[index].othersPlzSts = false;
		$scope.qtnFullUnitData[index].othersPlz = "";
		 $("#MotorType_"+parseInt(index+1)).css("background-color", "#ffffff"); 
		 $("#OthersPlz_"+parseInt(index+1)).css("background-color", "#ffffff");
	}
	
};
$scope.chngothersPlzStsCust = function(MotorType,index)
{
	var index = this.$index;
	
	if(MotorType == 'other - pls specify')
	{
		$scope.projectUnitData[index].motorTypeSts = true;
		$scope.projectUnitData[index].othersPlzSts = true;
		 $("#MotorTypeCust_"+parseInt(index+1)).css("background-color", "#ffff7f"); 
		 $("#OthersPlzCust_"+parseInt(index+1)).css("background-color", "#ffff7f");
	}
	else
	{
		$scope.projectUnitData[index].motorTypeSts = false;
		$scope.projectUnitData[index].othersPlzSts = false;
		$scope.projectUnitData[index].othersPlz = "";
		 $("#MotorTypeCust_"+parseInt(index+1)).css("background-color", "#ffffff"); 
		 $("#OthersPlzCust_"+parseInt(index+1)).css("background-color", "#ffffff");
	}
	
};
$scope.chngothersPlzStsSpare = function(MotorType,index)
{
	var index = this.$index;
	
	if(MotorType == 'other - pls specify')
	{
		$scope.sparePartData[index].motorTypeSts = true;
		$scope.sparePartData[index].othersPlzSts = true;
		 $("#MotorTypeSpare_"+parseInt(index+1)).css("background-color", "#ffff7f"); 
		 $("#OthersPlzSpare_"+parseInt(index+1)).css("background-color", "#ffff7f");
	}
	else
	{
		$scope.sparePartData[index].motorTypeSts = false;
		$scope.sparePartData[index].othersPlzSts = false;
		$scope.sparePartData[index].othersPlz = "";
		 $("#MotorTypeSpare_"+parseInt(index+1)).css("background-color", "#ffffff"); 
		 $("#OthersPlzSpare_"+parseInt(index+1)).css("background-color", "#ffffff");
	}
	
};
$scope.chngothersPlzStsService = function(MotorType,index)
{
	var index = this.$index;
	
	if(MotorType == 'other - pls specify')
	{
		$scope.servicPartData[index].motorTypeSts = true;
		$scope.servicPartData[index].othersPlzSts = true;
		 $("#MotorTypeServ_"+parseInt(index+1)).css("background-color", "#ffff7f"); 
		 $("#OthersPlzServ_"+parseInt(index+1)).css("background-color", "#ffff7f");
	}
	else
	{
		$scope.servicPartData[index].motorTypeSts = false;
		$scope.servicPartData[index].othersPlzSts = false;
		$scope.servicPartData[index].othersPlz = "";
		 $("#MotorTypeServ_"+parseInt(index+1)).css("background-color", "#ffffff"); 
		 $("#OthersPlzServ_"+parseInt(index+1)).css("background-color", "#ffffff");
	}
	
};

$scope.chngMotorKWSts = function(status,index)
{
	 var index = this.$index;
	 
	if(status == 'OTHER')
	{
		
		$scope.qtnFullUnitData[index].reqFUnitMotorKW = true;
		$("#Other_"+parseInt(index+1)).css("background-color", "#ffff7f");
	}
	else
	{
		
		$scope.qtnFullUnitData[index].reqFUnitMotorKW = false;
		$scope.qtnFullUnitData[index].other = "";
		$("#InvalidRange_"+parseInt(index+1)).hide();
		$("#Other_"+parseInt(index+1)).css("background-color", "#ffffff");
	}
};
$scope.rangeValid = function(range,index)
{
	//alert(parseFloat(range));
	var index = this.$index;
	if(parseFloat(range) <= 2000 && parseFloat(range) >= 55){$("#InvalidRange_"+parseInt(index+1)).hide();}else{$("#InvalidRange_"+parseInt(index+1)).show();}
	
};

$scope.chngMotorprojectKWSts = function(status,index)
{
	 var index = this.$index;
	 
	if(status == 'OTHER')
	{
		//$scope.reqProjectMotorKW = true;
		$scope.projectUnitData[index].reqFUnitMotorKW = true;
		$("#OtherCust_"+parseInt(index+1)).css("background-color", "#ffff7f");
	}
	else
	{
		$scope.projectUnitData[index].reqFUnitMotorKW = false;
		//$scope.reqProjectMotorKW = false;
		$scope.projectUnitData[index].other = "";
		//$(".InvalidprojectRange").hide();
		$("#InvalidprojectRange_"+parseInt(index+1)).hide();
		$("#OtherCust_"+parseInt(index+1)).css("background-color", "#ffffff");
	}
};
$scope.rangeprojectValid = function(range,index)
{
	//alert(parseFloat(range));
	var index = this.$index;
	if(parseFloat(range) <= 2000 && parseFloat(range) >= 55){$("#InvalidprojectRange_"+parseInt(index+1)).hide();}else{$("#InvalidprojectRange_"+parseInt(index+1)).show();}
	
};

$scope.chngMotorspareKWSts = function(status,index)
{
	 var index = this.$index;
	 
	if(status == 'OTHER')
	{
		//$scope.reqSpareMotorKW = true;
		$scope.sparePartData[index].reqFUnitMotorKW = true;
		$("#OtherSpare_"+parseInt(index+1)).css("background-color", "#ffff7f");
	}
	else
	{
		//$scope.reqSpareMotorKW = false;
		$scope.sparePartData[index].other = "";
		//$(".InvalidspareRange").hide();
		$("#InvalidspareRange_"+parseInt(index+1)).hide();
		$scope.sparePartData[index].reqFUnitMotorKW = false;
		$("#OtherSpare_"+parseInt(index+1)).css("background-color", "#ffffff");
	}
};
$scope.rangespareValid = function(range,index)
{
	//alert(parseFloat(range));
	var index = this.$index;
	if(parseFloat(range) <= 2000 && parseFloat(range) >= 55){$("#InvalidspareRange_"+parseInt(index+1)).hide();}else{$("#InvalidspareRange_"+parseInt(index+1)).show();}
	
};

$scope.chngMotorserviceKWSts = function(status,index)
{
	 var index = this.$index;
	 
	if(status == 'OTHER')
	{
		//$scope.reqServiceMotorKW = true;
		$scope.servicPartData[index].reqFUnitMotorKW = true;
		$("#OtherServ_"+parseInt(index+1)).css("background-color", "#ffff7f");
	}
	else
	{
		
		//$scope.reqServiceMotorKW = false;
		$scope.servicPartData[index].other = "";
		$("#InvalidserviceRange_"+parseInt(index+1)).hide();
		$scope.servicPartData[index].reqFUnitMotorKW = false;
		$("#OtherServ_"+parseInt(index+1)).css("background-color", "#ffffff");
	}
};
$scope.rangeserviceValid = function(range,index)
{
	var index = this.$index;
	
	//alert(parseFloat(range));
	if(parseFloat(range) <= 2000 && parseFloat(range) >= 55){$("#InvalidserviceRange_"+parseInt(index+1)).hide();}else{$("#InvalidserviceRange_"+parseInt(index+1)).show();}
	//$(".InvalidserviceRange").show();
};
		
		 $scope.loadCountrytaxnames = function()
		 {
			 $.post("getTaxNamesForCustmerMaster.do",function(json)
						 {
							 //alert(JSON.stringify(json));
							 $scope.taxNameBycountry = json['tname'];
							 $scope.$apply();
						 });
		 };
		 $scope.getTaxNameByCountryQtn = function(countryCode)
		 {
			
				 $.post("getTaxNamesForCustmerMaster.do",{countrycode:countryCode},function(json)
						  {
							  //alert(JSON.stringify(json['tname'][0].taxName));
							  $scope.addQuotation.tax = json['tname'][0].taxName;
							  $scope.addQuotation.taxPercent = json['tarpercent'][0].taxpercent;
							  $scope.addQuotation.exchangerate = json['exchangerate'];
							  $scope.$apply();
						  }); 
			 
			  
		 };
		 $scope.getTaxPercentByCountry = function(countryCode,countryTax,subTt,taxPer,fright,grdTotal)
		 {
			
			 $.post("getTaxPercentageFromCountryTax.do",{countrycode:countryCode,countrytax:countryTax},function(json)
				{
							 // alert(JSON.stringify(json['taxpercentdata']));
							  var taxper = json['taxpercentdata'];
							  if(taxper == "" || taxper == undefined)
							  {
								 // alert("if");
								  $scope.addQuotation.taxPercent = "";
								  var taxPer2 = $scope.addQuotation.taxPercent;
								  $timeout(function(){
													
													$scope.getGrandTotal(subTt,taxPer2);

													$scope.getFreightandCourierTotal(fright,grdTotal);
													
													},1000);
								   $scope.$apply();
							  }
							  else
							  {
								   //alert("else");
								 $scope.addQuotation.taxPercent = json['taxpercentdata'][0].taxpercent; 
								  var taxPer3 = $scope.addQuotation.taxPercent;
								  $timeout(function(){
													
													$scope.getGrandTotal(subTt,taxPer3);

													$scope.getFreightandCourierTotal(fright,grdTotal);
													
													},1000);
								   $scope.$apply();
							  }
							  //$scope.addQuotation.tax = json['tname'][0].taxName;
							    
							  $scope.$apply();
				}); 
				
		 };
		//=============Quotation Sequence Number========================//

    $scope.loadQuotationSeqNum = function(QtnType,form)
	{
		//form.$setPristine(true);
		//alert($rootScope.qtnAction + " qtnAction ");
		//var getCaseRefNo = $rootScope.loadQuotation;
		
		

         if($rootScope.quotationSeqNo===undefined || $rootScope.quotationSeqNo==="" && $rootScope.quotationAction===undefined || $rootScope.quotationAction==="" && $rootScope.qtnType===undefined || $rootScope.qtnType==="")
	{	
		if($rootScope.loadQuotation===undefined || $rootScope.loadQuotation==="" && $rootScope.loadQtnType===undefined || $rootScope.loadQtnType==="")
		{
			//alert("Visit again");
			 //alert(QtnType + "QtnType");
			/*$.post("quatationsequencenumber.do",{code:QtnType},function(json)
			{
				//alert(JSON.stringify(json['data']));
				var asd = json['data'][0].qot;
				//var counName = json['data'][0].billingCountries;
				//var assignDep = json['data'][0].assigned;
				 asd2 = asd.split("-");
				 $scope.qType = asd2[0];
				 $scope.coun_year_Code = asd2[1];
				 $scope.runNo = asd2[2];
				 $scope.version = asd2[3];
				 $scope.addQuotation.qtnNo = json['data'][0].qot;
				// $scope.addQuotation.billingCountries = json['data'][0].billingCountries;
				 //$scope.addQuotation.assigned = json['data'][0].assigned;
				 //$scope.addQuotation.country = counName;
				 //$scope.addQuotation.assigned = assignDep;
				 $scope.$apply();
			});*/
			
           
                
			$.post("getSavedQuatationDataOnQuatationNumberFromQuatationTemp.do",{code:QtnType},function(json)
			{
				
				 
                
				 var QuotationType = json['quatationform'][0].qtnType;
				 
				  //alert("color");
				   
				   if(QuotationType == '0')
				   {
					 // alert(QuotationType +  "0");
					   $scope.addQuotation = json['quatationform'][0];
				       $scope.termData = json['quatationtermsgrid'];
					   $scope.qtnFullUnitData = json['quatationgrid'];
					   var validData = json['quatationform'][0];
					   var gridData = json['quatationgrid'];
                       
					   if(validData.currency == "" || validData.currency == undefined || validData.currency == "NA")
						{
							//alert("if");
							//$scope.addQuotation.currency = "";
							//$scope.addQuotation.madatory = "1";
							$("#Currency").css("background-color", "#ffff7f"); 
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.currency = validData.currency;
							//$scope.addQuotation.madatory = "0";
							$("#Currency").css("background-color", "#99ff99"); 
						}
						if(validData.attention == "" || validData.attention == undefined || validData.attention == "NA")
						{
							//alert("if");
							//$scope.addQuotation.attention = "";
							//$scope.addQuotation.madatory = "1";
							$("#Attention").css("background-color", "#ffff7f"); 
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.attention = validData.contName;
							//$scope.addQuotation.madatory = "0";
							$("#Attention").css("background-color", "#99ff99"); 
						}
						if(validData.custCode == "" || validData.custCode == undefined || validData.custCode == "NA")
						{
							//alert("if");
							//$scope.addQuotation.custCode = "";
							//$scope.addQuotation.madatory = "1";
							$("#CustCode").css("background-color", "#ffff7f"); 
							//$("#CustProsCode").css("background-color", "#ffff7f");
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.custCode = validData.account;
							//$scope.addQuotation.madatory = "0";
							$("#CustCode").css("background-color", "#99ff99"); 
							//$("#CustProsCode").css("background-color", "#99ff99");
						}
						if(validData.telephone == "" || validData.telephone == undefined || validData.telephone == "NA")
						{
							//alert("if");
							//$scope.addQuotation.telephone = "";
							//$scope.addQuotation.madatory = "1";
							$("#Telephone").css("background-color", "#ffff7f"); 
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.telephone = validData.phnumber;
							//$scope.addQuotation.madatory = "0";
							$("#Telephone").css("background-color", "#99ff99"); 
						}
						if(validData.tax == "" || validData.tax == undefined || validData.tax == "NA")
						{
							//alert("if");
							//$scope.addQuotation.tax = "";
							//$scope.addQuotation.madatory = "1";
							$("#TaxName").css("background-color", "#ffff7f"); 
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.tax = validData.taxName;
							//$scope.addQuotation.madatory = "0";
							$("#TaxName").css("background-color", "#99ff99");
						}
						if(validData.country == "" || validData.country == undefined || validData.country == "NA")
						{
							//alert("if");
							//$scope.addQuotation.country = "";
							//$scope.addQuotation.madatory = "1";
							$("#CountryName").css("background-color", "#ffff7f"); 
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.country = validData.billingCountries;
							//$scope.addQuotation.madatory = "0";
							$("#CountryName").css("background-color", "#99ff99");
						}
						if(validData.salesMan == "" || validData.salesMan == undefined || validData.salesMan == "NA")
						{
							//alert("if");
							//$scope.addQuotation.salesMan = "";
							//$scope.addQuotation.madatory = "1";
							$("#SalesMan").css("background-color", "#ffff7f");
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.salesMan = validData.salesPerson;
							//$scope.addQuotation.madatory = "0";
							$("#SalesMan").css("background-color", "#99ff99");
						}
						
						if(validData.taxPercent == "" || validData.taxPercent == undefined || validData.taxPercent == "NA")
						{
							//alert("if");
							//$scope.addQuotation.taxPercent = "";
							//$scope.addQuotation.madatory = "1";
							$("#TaxPercent").css("background-color", "#ffff7f");
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.taxPercent = validData.taxPercent;
							//$scope.addQuotation.madatory = "0";
							$("#TaxPercent").css("background-color", "#99ff99");
						}
						
						if(validData.salesManCode == "" || validData.salesManCode == undefined || validData.salesManCode == "NA")
						{
							//alert("if");
							//$scope.addQuotation.salesManCode = "";
							//$scope.addQuotation.madatory = "1";
							$("#SalesManCode").css("background-color", "#ffff7f");
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.salesManCode = validData.salesPersonCode;
							//$scope.addQuotation.madatory = "0";
							$("#SalesManCode").css("background-color", "#99ff99");
						}
						if(validData.emailAddr == "" || validData.emailAddr == undefined || validData.emailAddr == "NA")
						{
							//alert("if");
							//$scope.addQuotation.emailAddr = "";
							//$scope.addQuotation.madatory = "1";
							$("#Email").css("background-color", "#ffffff");
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.emailAddr = validData.email;
							//$scope.addQuotation.madatory = "0";
							$("#Email").css("background-color", "#99ff99");
						}
						if(validData.paymentTerm == "" || validData.paymentTerm == undefined || validData.paymentTerm == "NA")
						{
							//alert("if");
							//$scope.addQuotation.paymentTerm = "";
							//$scope.addQuotation.madatory = "1";
							$("#PaymentTerm").css("background-color", "#ffff7f");
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.paymentTerm = validData.paymentTerm;
							//$scope.addQuotation.madatory = "0";
							$("#PaymentTerm").css("background-color", "#99ff99");
						}
						/*if(validData.assigned == "" || validData.assigned == undefined || validData.assigned == "NA")
						{
							//alert("if");
							//$scope.addQuotation.assigned = "";
							//$scope.addQuotation.madatory = "1";
							$("#AssignTo").css("background-color", "#ffff7f");
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.assigned = validData.departmentname;
							//$scope.addQuotation.madatory = "0";
							$("#AssignTo").css("background-color", "#99ff99");
						}*/
						if(validData.createdBy == "" || validData.createdBy == undefined || validData.createdBy == "NA")
						{
							//alert("if");
							//$scope.addQuotation.createdBy = "";
							//$scope.addQuotation.madatory = "1";
							$("#CreatedBy").css("background-color", "#ffff7f");
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.createdBy = validData.createdby;
							//$scope.addQuotation.madatory = "0";
							$("#CreatedBy").css("background-color", "#99ff99");
						}
					   
					   /*if(validData.attention == "" || validData.attention == undefined || validData.attention == "NA")
						{
							//alert("if");
							//$scope.addQuotation.attention = "";
							//$scope.addQuotation.madatory = "1";
							$("#Attention").css("background-color", "#ffff7f"); 
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.attention = validData.contName;
							//$scope.addQuotation.madatory = "0";
							$("#Attention").css("background-color", "#99ff99"); 
						}
					   
					   if(validData.emailAddr == "" || validData.emailAddr == undefined || validData.emailAddr == "NA")
						{
							//alert("if");
							//$scope.addQuotation.emailAddr = "";
							//$scope.addQuotation.madatory = "1";
							$("#Email").css("background-color", "#ffffff");
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.emailAddr = validData.emailAddr;
							//$scope.addQuotation.madatory = "0";
							$("#Email").css("background-color", "#99ff99");
						}*/
					   
					   var departmentSplit = json['quatationform'][0].assigned;
						 var departmentSales = [];
						 if(departmentSplit == undefined || departmentSplit == "" || departmentSplit == "NA")
						 {
							 //alert("if");
							 $('#picturegallery1').val("['']").trigger('chosen:updated');
							 $("#picturegallery1").css("background-color", "#ffff7f");
						 }
						 else
						 {
							 //alert(departmentSplit.length + " " + " else ");
							 for (var s = 0; s < departmentSplit.length; s++) {
					
										departmentSales.push(departmentSplit[s]);
										//alert("accessoriesSales"+accessoriesSales);
							}
							 $('#picturegallery1').val(departmentSales).trigger('chosen:updated');
											$scope.addQuotation.assigned = departmentSales;
											$("#picturegallery1").css("background-color", "#99ff99");
						 }
                       
						 
                       
						for(var i = 0; i<gridData.length; i++)
						 {
                            //$timeout(function(){ 
							 //customerPrice
							// $("#OtherCust_"+parseInt(i+1)).css("background-color", "#000000");
                                if(gridData[0].motorType == 'other - pls specify')
                                  {
                                      //alert(gridData[0].motorType);

                                      $("#MotorType_"+parseInt(1)).css("background-color", "#ffff7f");
                                      $("#OthersPlz_"+parseInt(1)).css("background-color", "#ffff7f");
                                      $scope.qtnFullUnitData[i].motorTypeSts = true;
                                      $scope.qtnFullUnitData[i].othersPlzSts = true;  


                                      //  $scope.qtnFullUnitData[i].changecolor = yellowcolor;

                                  }
                                  else
                                  {
                                      $scope.qtnFullUnitData[i].motorTypeSts = false;
                                      $scope.qtnFullUnitData[i].othersPlzSts = false;
                                      $scope.qtnFullUnitData[i].othersPlz = "";
                                      $("#MotorType_"+parseInt(1)).css("background-color", "#ffffff");
                                      $("#OthersPlz_"+parseInt(1)).css("background-color", "#ffffff");
                                  }
                             //alert(585525);
                              if(gridData[i].motorType == 'other - pls specify')
							  {
								
                                 // alert("--------"+"#MotorType_"+parseInt(i+1));
                                  $("#MotorType_"+parseInt(i+1)).css("background-color", "#ffff7f");
								  $("#OthersPlz_"+parseInt(i+1)).css("background-color", "#ffff7f");
								  $scope.qtnFullUnitData[i].motorTypeSts = true;
								  $scope.qtnFullUnitData[i].othersPlzSts = true;  
                                    
                               
                                  //  $scope.qtnFullUnitData[i].changecolor = yellowcolor;
								  
							  }
							  else
							  {
								  $scope.qtnFullUnitData[i].motorTypeSts = false;
								  $scope.qtnFullUnitData[i].othersPlzSts = false;
								  $scope.qtnFullUnitData[i].othersPlz = "";
								  $("#MotorType_"+parseInt(i+1)).css("background-color", "#ffffff");
								  $("#OthersPlz_"+parseInt(i+1)).css("background-color", "#ffffff");
							  }
                                 
                             if(gridData[0].motorPower == 'OTHER')
							  {
								
								  //$scope.projectUnitData[i].reqFUnitMotorKW = true;
								  $scope.qtnFullUnitData[i].reqFUnitMotorKW = true;
								  $("#Other_"+parseInt(1)).css("background-color", "#ffff7f");
								  //$("#OthersPlzCust_"+parseInt(i+1)).css("background-color", "#ffff7f");
							  }
							  else
							  {
								  //$scope.projectUnitData[i].reqFUnitMotorKW = true;
								  $scope.qtnFullUnitData[i].reqFUnitMotorKW = false;
								  $scope.qtnFullUnitData[i].other = "";
								  $("#Other_"+parseInt(1)).css("background-color", "#ffffff");
								 // $("#OthersPlzCust_"+parseInt(i+1)).css("background-color", "#ffffff");
							  }
							 if(gridData[i].motorPower == 'OTHER')
							  {
								
								  //$scope.projectUnitData[i].reqFUnitMotorKW = true;
								  $scope.qtnFullUnitData[i].reqFUnitMotorKW = true;
								  $("#Other_"+parseInt(i+1)).css("background-color", "#ffff7f");
								  //$("#OthersPlzCust_"+parseInt(i+1)).css("background-color", "#ffff7f");
							  }
							  else
							  {
								  //$scope.projectUnitData[i].reqFUnitMotorKW = true;
								  $scope.qtnFullUnitData[i].reqFUnitMotorKW = false;
								  $scope.qtnFullUnitData[i].other = "";
								  $("#Other_"+parseInt(i+1)).css("background-color", "#ffffff");
								 // $("#OthersPlzCust_"+parseInt(i+1)).css("background-color", "#ffffff");
							  }
							 if(gridData[i].customerPrice == "0")
							  {
                                 
								  $scope.qtnFullUnitData[i].tpricereq = true;
								  $scope.qtnFullUnitData[i].markUpreq = true;
								  $scope.qtnFullUnitData[i].qntyreq = true;
								  $scope.qtnFullUnitData[i].lpricereq = false;
								  $scope.qtnFullUnitData[i].disreq = false;
								  $scope.qtnFullUnitData[i].quantyreq = false;
								  $("#TransferPrice_"+parseInt(i+1)).css("background-color", "#ffff7f");
								  $("#MarkUp_"+parseInt(i+1)).css("background-color", "#ffff7f");
								  $("#Qnty_"+parseInt(i+1)).css("background-color", "#ffff7f");
								  $("#ListPrice_"+parseInt(i+1)).css("background-color", "#ffffff");
								  $("#DiscountMultiplierlp_"+parseInt(i+1)).css("background-color", "#ffffff");
								  $("#Quantity_"+parseInt(i+1)).css("background-color", "#ffffff");
							  }
							  else
							  {
                                  
								 $scope.qtnFullUnitData[i].lpricereq = true;
								 $scope.qtnFullUnitData[i].disreq = true;
								 $scope.qtnFullUnitData[i].quantyreq = true;
								 $scope.qtnFullUnitData[i].tpricereq = false;
								 $scope.qtnFullUnitData[i].markUpreq = false;
								 $scope.qtnFullUnitData[i].qntyreq = false;
								  $("#ListPrice_"+parseInt(i+1)).css("background-color", "#ffff7f");
								  $("#DiscountMultiplierlp_"+parseInt(i+1)).css("background-color", "#ffff7f");
								  $("#Quantity_"+parseInt(i+1)).css("background-color", "#ffff7f");
								  $("#TransferPrice_"+parseInt(i+1)).css("background-color", "#ffffff");
								  $("#MarkUp_"+parseInt(i+1)).css("background-color", "#ffffff");
								  $("#Qnty_"+parseInt(i+1)).css("background-color", "#ffffff");
							  }
                                
                                // },8000); //add timeout
                                 $scope.$apply();
                                 
                             
							  
						 }
                       
						 
						 
						
					 
					   
					   $scope.$apply();
				   }
				   if(QuotationType == '1')
				   {
					 //alert(QuotationType +  "1");
						$scope.addQuotation = json['quatationform'][0];
				        $scope.termData = json['quatationtermsgrid'];
					    $scope.projectUnitData = json['quatationgrid'];
						
						var validData = json['quatationform'][0];
						var gridData = json['quatationgrid'];
						
						if(validData.currency == "" || validData.currency == undefined || validData.currency == "NA")
						{
							//alert("if");
							//$scope.addQuotation.currency = "";
							//$scope.addQuotation.madatory = "1";
							$("#Currency").css("background-color", "#ffff7f"); 
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.currency = validData.currency;
							//$scope.addQuotation.madatory = "0";
							$("#Currency").css("background-color", "#99ff99"); 
						}
						if(validData.attention == "" || validData.attention == undefined || validData.attention == "NA")
						{
							//alert("if");
							//$scope.addQuotation.attention = "";
							//$scope.addQuotation.madatory = "1";
							$("#Attention").css("background-color", "#ffff7f"); 
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.attention = validData.contName;
							//$scope.addQuotation.madatory = "0";
							$("#Attention").css("background-color", "#99ff99"); 
						}
						if(validData.custCode == "" || validData.custCode == undefined || validData.custCode == "NA")
						{
							//alert("if");
							//$scope.addQuotation.custCode = "";
							//$scope.addQuotation.madatory = "1";
							$("#CustCode").css("background-color", "#ffff7f"); 
							//$("#CustProsCode").css("background-color", "#ffff7f");
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.custCode = validData.account;
							//$scope.addQuotation.madatory = "0";
							$("#CustCode").css("background-color", "#99ff99"); 
							//$("#CustProsCode").css("background-color", "#99ff99"); 
						}
						if(validData.telephone == "" || validData.telephone == undefined || validData.telephone == "NA")
						{
							//alert("if");
							//$scope.addQuotation.telephone = "";
							//$scope.addQuotation.madatory = "1";
							$("#Telephone").css("background-color", "#ffff7f"); 
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.telephone = validData.phnumber;
							//$scope.addQuotation.madatory = "0";
							$("#Telephone").css("background-color", "#99ff99"); 
						}
						if(validData.tax == "" || validData.tax == undefined || validData.tax == "NA")
						{
							//alert("if");
							//$scope.addQuotation.tax = "";
							//$scope.addQuotation.madatory = "1";
							$("#TaxName").css("background-color", "#ffff7f"); 
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.tax = validData.taxName;
							//$scope.addQuotation.madatory = "0";
							$("#TaxName").css("background-color", "#99ff99");
						}
						if(validData.country == "" || validData.country == undefined || validData.country == "NA")
						{
							//alert("if");
							//$scope.addQuotation.country = "";
							//$scope.addQuotation.madatory = "1";
							$("#CountryName").css("background-color", "#ffff7f"); 
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.country = validData.billingCountries;
							//$scope.addQuotation.madatory = "0";
							$("#CountryName").css("background-color", "#99ff99");
						}
						if(validData.salesMan == "" || validData.salesMan == undefined || validData.salesMan == "NA")
						{
							//alert("if");
							//$scope.addQuotation.salesMan = "";
							//$scope.addQuotation.madatory = "1";
							$("#SalesMan").css("background-color", "#ffff7f");
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.salesMan = validData.salesPerson;
							//$scope.addQuotation.madatory = "0";
							$("#SalesMan").css("background-color", "#99ff99");
						}
						
						if(validData.taxPercent == "" || validData.taxPercent == undefined || validData.taxPercent == "NA")
						{
							//alert("if");
							//$scope.addQuotation.taxPercent = "";
							//$scope.addQuotation.madatory = "1";
							$("#TaxPercent").css("background-color", "#ffff7f");
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.taxPercent = validData.taxPercent;
							//$scope.addQuotation.madatory = "0";
							$("#TaxPercent").css("background-color", "#99ff99");
						}
						
						if(validData.salesManCode == "" || validData.salesManCode == undefined || validData.salesManCode == "NA")
						{
							//alert("if");
							//$scope.addQuotation.salesManCode = "";
							//$scope.addQuotation.madatory = "1";
							$("#SalesManCode").css("background-color", "#ffff7f");
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.salesManCode = validData.salesPersonCode;
							//$scope.addQuotation.madatory = "0";
							$("#SalesManCode").css("background-color", "#99ff99");
						}
						if(validData.emailAddr == "" || validData.emailAddr == undefined || validData.emailAddr == "NA")
						{
							//alert("if");
							//$scope.addQuotation.emailAddr = "";
							//$scope.addQuotation.madatory = "1";
							$("#Email").css("background-color", "#ffffff");
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.emailAddr = validData.email;
							//$scope.addQuotation.madatory = "0";
							$("#Email").css("background-color", "#99ff99");
						}
						if(validData.paymentTerm == "" || validData.paymentTerm == undefined || validData.paymentTerm == "NA")
						{
							//alert("if");
							//$scope.addQuotation.paymentTerm = "";
							//$scope.addQuotation.madatory = "1";
							$("#PaymentTerm").css("background-color", "#ffff7f");
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.paymentTerm = validData.paymentTerm;
							//$scope.addQuotation.madatory = "0";
							$("#PaymentTerm").css("background-color", "#99ff99");
						}
						/*if(validData.assigned == "" || validData.assigned == undefined || validData.assigned == "NA")
						{
							//alert("if");
							//$scope.addQuotation.assigned = "";
							//$scope.addQuotation.madatory = "1";
							$("#AssignTo").css("background-color", "#ffff7f");
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.assigned = validData.departmentname;
							//$scope.addQuotation.madatory = "0";
							$("#AssignTo").css("background-color", "#99ff99");
						}*/
						if(validData.createdBy == "" || validData.createdBy == undefined || validData.createdBy == "NA")
						{
							//alert("if");
							//$scope.addQuotation.createdBy = "";
							//$scope.addQuotation.madatory = "1";
							$("#CreatedBy").css("background-color", "#ffff7f");
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.createdBy = validData.createdby;
							//$scope.addQuotation.madatory = "0";
							$("#CreatedBy").css("background-color", "#99ff99");
						}
						
					   /*if(validData.emailAddr == "" || validData.emailAddr == undefined || validData.emailAddr == "NA")
						{
							//alert("if");
							$scope.addQuotation.emailAddr = "";
							//$scope.addQuotation.madatory = "1";
							$("#Email").css("background-color", "#ffffff");
						}
						else
						{
							//alert("else");
							$scope.addQuotation.emailAddr = validData.emailAddr;
							//$scope.addQuotation.madatory = "0";
							$("#Email").css("background-color", "#99ff99");
						}*/
						
						var departmentSplit = json['quatationform'][0].assigned;
						 var departmentSales = [];
						 if(departmentSplit == undefined || departmentSplit == "" || departmentSplit == "NA")
						 {
							 //alert("if");
							 $('#picturegallery1').val("['']").trigger('chosen:updated');
							 $("#picturegallery1").css("background-color", "#ffff7f");
						 }
						 else
						 {
							 //alert(departmentSplit.length + " " + " else ");
							 for (var s = 0; s < departmentSplit.length; s++) {
					
										departmentSales.push(departmentSplit[s]);
										//alert("accessoriesSales"+accessoriesSales);
							}
							 $('#picturegallery1').val(departmentSales).trigger('chosen:updated');
											$scope.addQuotation.assigned = departmentSales;
											$("#picturegallery1").css("background-color", "#99ff99");
						 }
						 
						 for(var i = 0; i<$scope.projectUnitData.length; i++)
						 {
							 //alert(gridData[i].motorType);
							 //customerPrice
							 //$("#OtherCust_"+parseInt(i+1)).css("background-color", "#000000");
							  if(gridData[i].motorType == "other - pls specify")
							  {
								 
								  $scope.projectUnitData[i].motorTypeSts = true;
								  $scope.projectUnitData[i].othersPlzSts = true;
								  $("#MotorTypeCust_"+parseInt(i+1)).css("background-color", "#ffff7f");
								  $("#OthersPlzCust_"+parseInt(i+1)).css("background-color", "#ffff7f");
							  }
							  else
							  {
								  $scope.projectUnitData[i].motorTypeSts = false;
								  $scope.projectUnitData[i].othersPlzSts = false;
								  $scope.projectUnitData[i].othersPlz = "";
								  $("#MotorTypeCust_"+parseInt(i+1)).css("background-color", "#ffffff");
								  $("#OthersPlzCust_"+parseInt(i+1)).css("background-color", "#ffffff");
							  }
							  if(gridData[i].motorPower == "OTHER")
							  {
								
								  //$scope.projectUnitData[i].reqFUnitMotorKW = true;
								  $scope.projectUnitData[i].reqFUnitMotorKW = true;
								  $("#OtherCust_"+parseInt(i+1)).css("background-color", "#ffff7f");
								  //$("#OthersPlzCust_"+parseInt(i+1)).css("background-color", "#ffff7f");
							  }
							  else
							  {
								  //$scope.projectUnitData[i].reqFUnitMotorKW = true;
								  $scope.projectUnitData[i].reqFUnitMotorKW = false;
								  $scope.projectUnitData[i].other = "";
								  $("#OtherCust_"+parseInt(i+1)).css("background-color", "#ffffff");
								 // $("#OthersPlzCust_"+parseInt(i+1)).css("background-color", "#ffffff");
							  }
							  if(gridData[i].customerPrice == "0")
							  {
								  $scope.projectUnitData[i].tpricereq = true;
								  $scope.projectUnitData[i].markUpreq = true;
								  $scope.projectUnitData[i].qntyreq = true;
								  $scope.projectUnitData[i].lpricereq = false;
								  $scope.projectUnitData[i].disreq = false;
								  $scope.projectUnitData[i].quantyreq = false;
								  $("#TransferPriceProj_"+parseInt(i+1)).css("background-color", "#ffff7f");
								  $("#MarkUpProj_"+parseInt(i+1)).css("background-color", "#ffff7f");
								  $("#QntyProj_"+parseInt(i+1)).css("background-color", "#ffff7f");
								  $("#ListPriceProj_"+parseInt(i+1)).css("background-color", "#ffffff");
								  $("#DiscountMultiplierProj_"+parseInt(i+1)).css("background-color", "#ffffff");
								  $("#QuantityProj_"+parseInt(i+1)).css("background-color", "#ffffff");
							  }
							  else
							  {
								 $scope.projectUnitData[i].lpricereq = true;
								 $scope.projectUnitData[i].disreq = true;
								 $scope.projectUnitData[i].quantyreq = true;
								 $scope.projectUnitData[i].tpricereq = false;
								 $scope.projectUnitData[i].markUpreq = false;
								 $scope.projectUnitData[i].qntyreq = false;
								  $("#ListPriceProj_"+parseInt(i+1)).css("background-color", "#ffff7f");
								  $("#DiscountMultiplierProj_"+parseInt(i+1)).css("background-color", "#ffff7f");
								  $("#QuantityProj_"+parseInt(i+1)).css("background-color", "#ffff7f");
								  $("#TransferPriceProj_"+parseInt(i+1)).css("background-color", "#ffffff");
								  $("#MarkUpProj_"+parseInt(i+1)).css("background-color", "#ffffff");
								  $("#MotorSerial_"+parseInt(i+1)).css("background-color", "#ffffff");
							  }
						 }
						 
						/* for(var i = 0; i<gridData.length; i++;)
						 {
							 alert(gridData[i].customerPrice);
							 //customerPrice
							  if(gridData[i].customerPrice == "0")
							  {
								  $scope.projectUnitData[i].tpricereq = true;
								  $scope.projectUnitData[i].markUpreq = true;
								  $scope.projectUnitData[i].qntyreq = true;
								  $scope.projectUnitData[i].lpricereq = false;
								  $scope.projectUnitData[i].disreq = false;
								  $scope.projectUnitData[i].quantyreq = false;
								  $("#TransferPriceProj_"+parseInt(i+1)).css("background-color", "#ffff7f");
								  $("#MarkUpProj_"+parseInt(i+1)).css("background-color", "#ffff7f");
								  $("#QntyProj_"+parseInt(i+1)).css("background-color", "#ffff7f");
								  $("#ListPriceProj_"+parseInt(i+1)).css("background-color", "#ffffff");
								  $("#DiscountMultiplierProj_"+parseInt(i+1)).css("background-color", "#ffffff");
								  $("#QuantityProj_"+parseInt(i+1)).css("background-color", "#ffffff");
							  }
							  else
							  {
								 $scope.projectUnitData[i].lpricereq = true;
								 $scope.projectUnitData[i].disreq = true;
								 $scope.projectUnitData[i].quantyreq = true;
								 $scope.projectUnitData[i].tpricereq = false;
								 $scope.projectUnitData[i].markUpreq = false;
								 $scope.projectUnitData[i].qntyreq = false;
								  $("#ListPriceProj_"+parseInt(i+1)).css("background-color", "#ffff7f");
								  $("#DiscountMultiplierProj_"+parseInt(i+1)).css("background-color", "#ffff7f");
								  $("#QuantityProj_"+parseInt(i+1)).css("background-color", "#ffff7f");
								  $("#TransferPriceProj_"+parseInt(i+1)).css("background-color", "#ffffff");
								  $("#MarkUpProj_"+parseInt(i+1)).css("background-color", "#ffffff");
								  $("#MotorSerial_"+parseInt(i+1)).css("background-color", "#ffffff");
							  }
						 }*/
						 
						 
						 /*for(var i = 0; i<validgriddata.length; i++)
									   {
										   if(validgriddata[i].gm == "0")
										   {
											    $scope.dataSparePart[i].requiredStatus = false;
											    $scope.dataSparePart[i].shiMfgsts = false;
											   // $scope.dataSparePart[i].expSts = false;
											   // $scope.dataSparePart[i].mtrSprSts = false;
												$scope.dataSparePart[i].poleSprSts = false;
												$scope.dataSparePart[i].phSprSts = false;
												$scope.dataSparePart[i].voltSprSts = false;
												$scope.dataSparePart[i].hzSprSts = false;
												$scope.dataSparePart[i].rpmSprSts = false;
												$scope.dataSparePart[i].gearsts = false;
												$scope.dataSparePart[i].mtrsnosts = true;
										       $("#spareGearMotor_"+parseInt(i+1)).css("background-color", "#ffffff");
											   $("#SHImfg_"+parseInt(i+1)).css("background-color", "#ffffff");
											   //$("#MotorType_"+parseInt(i+1)).css("background-color", "#ffffff");
											   //$("#MotorKW_"+parseInt(i+1)).css("background-color", "#ffffff");
											   $("#Pole_"+parseInt(i+1)).css("background-color", "#ffffff");
											   $("#Phase_"+parseInt(i+1)).css("background-color", "#ffffff");
											   $("#Voltage_"+parseInt(i+1)).css("background-color", "#ffffff");
											   $("#Hertz_"+parseInt(i+1)).css("background-color", "#ffffff");
											   $("#RPM_"+parseInt(i+1)).css("background-color", "#ffffff");
											   $("#gearHead_"+parseInt(i+1)).css("background-color", "#ffffff");
											   $("#MotorSerial_"+parseInt(i+1)).css("background-color", "#ffff7f");
											   if(validgriddata[i].motorKW == 'OTHER')
											   {
												   $scope.dataSparePart[i].mtrSprSts = true;
												   $scope.dataSparePart[i].reqMotorKW = true;
												   $("#MotorKW_"+parseInt(i+1)).css("background-color", "#ffff7f");
												   $("#OtherSpare_"+parseInt(i+1)).css("background-color", "#ffff7f");
											   }
											   else
											   {
												   $scope.dataSparePart[i].mtrSprSts = false;
												   $scope.dataSparePart[i].reqMotorKW = false;
												   $("#MotorKW_"+parseInt(i+1)).css("background-color", "#ffffff");
												   $("#OtherSpare_"+parseInt(i+1)).css("background-color", "#ffffff");
											   }
											   if(validgriddata[i].motorType == 'other - pls specify')
											   {
												  
												   $scope.dataSparePart[i].expSts = true;
												   $scope.dataSparePart[i].reqOtherSts = true;
												   $("#MotorType_"+parseInt(i+1)).css("background-color", "#ffff7f");
												   $("#OthersPlzSpare_"+parseInt(i+1)).css("background-color", "#ffff7f");
											   }
											   else
											   {
												   $scope.dataSparePart[i].expSts = false;
												   $scope.dataSparePart[i].reqOtherSts = false;
												   $("#MotorType_"+parseInt(i+1)).css("background-color", "#ffffff");
												   $("#OthersPlzSpare_"+parseInt(i+1)).css("background-color", "#ffffff");
											   }
										   }
										   else if(validgriddata[i].gm == "1")
										   {
											    $scope.dataSparePart[i].requiredStatus = false;
											    $scope.dataSparePart[i].shiMfgsts = false;
											   // $scope.dataSparePart[i].expSts = false;
											    //$scope.dataSparePart[i].mtrSprSts = false;
												$scope.dataSparePart[i].poleSprSts = false;
												$scope.dataSparePart[i].phSprSts = false;
												$scope.dataSparePart[i].voltSprSts = false;
												$scope.dataSparePart[i].hzSprSts = false;
												$scope.dataSparePart[i].rpmSprSts = false;
												$scope.dataSparePart[i].gearsts = true;
												$scope.dataSparePart[i].mtrsnosts = false;
										       $("#spareGearMotor_"+parseInt(i+1)).css("background-color", "#ffffff");
											   $("#SHImfg_"+parseInt(i+1)).css("background-color", "#ffffff");
											  // $("#MotorType_"+parseInt(i+1)).css("background-color", "#ffffff");
											   //$("#MotorKW_"+parseInt(i+1)).css("background-color", "#ffffff");
											   $("#Pole_"+parseInt(i+1)).css("background-color", "#ffffff");
											   $("#Phase_"+parseInt(i+1)).css("background-color", "#ffffff");
											   $("#Voltage_"+parseInt(i+1)).css("background-color", "#ffffff");
											   $("#Hertz_"+parseInt(i+1)).css("background-color", "#ffffff");
											   $("#RPM_"+parseInt(i+1)).css("background-color", "#ffffff");
											   $("#gearHead_"+parseInt(i+1)).css("background-color", "#ffff7f");
											   $("#MotorSerial_"+parseInt(i+1)).css("background-color", "#ffffff");
											   
											   if(validgriddata[i].motorKW == 'OTHER')
											   {
												   $scope.dataSparePart[i].mtrSprSts = true;
												   $scope.dataSparePart[i].reqMotorKW = true;
												   $("#MotorKW_"+parseInt(i+1)).css("background-color", "#ffff7f");
												   $("#OtherSpare_"+parseInt(i+1)).css("background-color", "#ffff7f");
											   }
											   else
											   {
												   $scope.dataSparePart[i].mtrSprSts = false;
												   $scope.dataSparePart[i].reqMotorKW = false;
												   $("#MotorKW_"+parseInt(i+1)).css("background-color", "#ffffff");
												   $("#OtherSpare_"+parseInt(i+1)).css("background-color", "#ffffff");
											   }
											   if(validgriddata[i].motorType == 'other - pls specify')
											   {
												  
												   $scope.dataSparePart[i].expSts = true;
												   $scope.dataSparePart[i].reqOtherSts = true;
												   $("#MotorType_"+parseInt(i+1)).css("background-color", "#ffff7f");
												   $("#OthersPlzSpare_"+parseInt(i+1)).css("background-color", "#ffff7f");
											   }
											   else
											   {
												   $scope.dataSparePart[i].expSts = false;
												   $scope.dataSparePart[i].reqOtherSts = false;
												   $("#MotorType_"+parseInt(i+1)).css("background-color", "#ffffff");
												   $("#OthersPlzSpare_"+parseInt(i+1)).css("background-color", "#ffffff");
											   }
										   }
										   else
										   {
											    $scope.dataSparePart[i].requiredStatus = true;
											    $scope.dataSparePart[i].shiMfgsts = true;
											    //$scope.dataSparePart[i].expSts = true;
											    //$scope.dataSparePart[i].mtrSprSts = true;
												$scope.dataSparePart[i].poleSprSts = true;
												$scope.dataSparePart[i].phSprSts = true;
												$scope.dataSparePart[i].voltSprSts = true;
												$scope.dataSparePart[i].hzSprSts = true;
												$scope.dataSparePart[i].rpmSprSts = true;
												$scope.dataSparePart[i].gearsts = false;
												$scope.dataSparePart[i].mtrsnosts = false;
										       $("#spareGearMotor_"+parseInt(i+1)).css("background-color", "#ffff7f");
											   $("#SHImfg_"+parseInt(i+1)).css("background-color", "#ffff7f");
											   //$("#MotorType_"+parseInt(i+1)).css("background-color", "#ffff7f");
											  // $("#MotorKW_"+parseInt(i+1)).css("background-color", "#ffff7f");
											   $("#Pole_"+parseInt(i+1)).css("background-color", "#ffff7f");
											   $("#Phase_"+parseInt(i+1)).css("background-color", "#ffff7f");
											   $("#Voltage_"+parseInt(i+1)).css("background-color", "#ffff7f");
											   $("#Hertz_"+parseInt(i+1)).css("background-color", "#ffff7f");
											   $("#RPM_"+parseInt(i+1)).css("background-color", "#ffff7f");
											   $("#gearHead_"+parseInt(i+1)).css("background-color", "#ffffff");
											   $("#MotorSerial_"+parseInt(i+1)).css("background-color", "#ffffff");
											   
											   if(validgriddata[i].motorKW == 'OTHER')
											   {
												   $scope.dataSparePart[i].mtrSprSts = true;
												   $scope.dataSparePart[i].reqMotorKW = true;
												   $("#MotorKW_"+parseInt(i+1)).css("background-color", "#ffff7f");
												   $("#OtherSpare_"+parseInt(i+1)).css("background-color", "#ffff7f");
											   }
											   else
											   {
												   $scope.dataSparePart[i].mtrSprSts = true;
												   $scope.dataSparePart[i].reqMotorKW = false;
												   $("#MotorKW_"+parseInt(i+1)).css("background-color", "#ffff7f");
												   $("#OtherSpare_"+parseInt(i+1)).css("background-color", "#ffffff");
											   }
											   if(validgriddata[i].motorType == 'other - pls specify')
											   {
												  
												   $scope.dataSparePart[i].expSts = true;
												   $scope.dataSparePart[i].reqOtherSts = true;
												   $("#MotorType_"+parseInt(i+1)).css("background-color", "#ffff7f");
												   $("#OthersPlzSpare_"+parseInt(i+1)).css("background-color", "#ffff7f");
											   }
											   else
											   {
												   $scope.dataSparePart[i].expSts = true;
												   $scope.dataSparePart[i].reqOtherSts = false;
												   $("#MotorType_"+parseInt(i+1)).css("background-color", "#ffff7f");
												   $("#OthersPlzSpare_"+parseInt(i+1)).css("background-color", "#ffffff");
											   }
										   }
									   }*/
						
						/*if(validData.flag == 1)
						{
							//alert("if");
							
							$scope.addQuotation.madatory = "0";
							
						}
						else
						{
							//alert("else");
							
							$scope.addQuotation.madatory = "1";
							
						}*/
						
						/*var departmentSplit = json['quatationform'][0].assigned;
						//alert(JSON.stringify(departmentSplit));
					   var departmentSales = [];
						for (var s = 0; s < departmentSplit.length; s++) {
					
										departmentSales.push(departmentSplit[s]);
										//alert("accessoriesSales"+accessoriesSales);
						}
						 $('#picturegallery1').val(departmentSales).trigger('chosen:updated');
										$scope.addQuotation.assigned = departmentSales;*/
						//$scope.colorCode = "1";
						 var getImage = json['quatationform'][0].imagepath;
								  // alert(getImage);
									 if(getImage!=null)
									   {
										   //alert(getImage + " " + 1);
										   var imgPrew = getImage.trim();
										   if(imgPrew==null || imgPrew=="" )
										   {
											   //alert(getImage + " " + 2);
											 
											  $scope.stepsModel = [];
											  $scope.$apply();
											  //$scope.dummyPhoto="";
					                          //$('#dummyPhoto').trigger('blur');
										   }
										   else
										   {
											   //alert(getImage + " " + 3);
											   $scope.stepsModel = getImage.split(',');
											   $scope.$apply();
											   
										   }
									   }
									   else
									   {
										   //alert(getImage + " " + 4);
										    $scope.stepsModel = [];
										    $scope.$apply();
										 
									   }
							
									   
						$scope.$apply();
				   }
				   if(QuotationType == '2')
				   {
					    //alert(QuotationType +  "2");
						$scope.addQuotation = json['quatationform'][0];
				        $scope.termData = json['quatationtermsgrid'];
					    $scope.sparePartData = json['quatationgrid'];
						
						var validData = json['quatationform'][0];
						var gridData = json['quatationgrid'];
						if(validData.currency == "" || validData.currency == undefined || validData.currency == "NA")
						{
							//alert("if");
							//$scope.addQuotation.currency = "";
							//$scope.addQuotation.madatory = "1";
							$("#Currency").css("background-color", "#ffff7f"); 
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.currency = validData.currency;
							//$scope.addQuotation.madatory = "0";
							$("#Currency").css("background-color", "#99ff99"); 
						}
						if(validData.attention == "" || validData.attention == undefined || validData.attention == "NA")
						{
							//alert("if");
							//$scope.addQuotation.attention = "";
							//$scope.addQuotation.madatory = "1";
							$("#Attention").css("background-color", "#ffff7f"); 
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.attention = validData.contName;
							//$scope.addQuotation.madatory = "0";
							$("#Attention").css("background-color", "#99ff99"); 
						}
						if(validData.custCode == "" || validData.custCode == undefined || validData.custCode == "NA")
						{
							//alert("if");
							//$scope.addQuotation.custCode = "";
							//$scope.addQuotation.madatory = "1";
							$("#CustCode").css("background-color", "#ffff7f"); 
							//$("#CustProsCode").css("background-color", "#ffff7f");
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.custCode = validData.account;
							//$scope.addQuotation.madatory = "0";
							$("#CustCode").css("background-color", "#99ff99"); 
							//$("#CustProsCode").css("background-color", "#99ff99"); 
						}
						if(validData.telephone == "" || validData.telephone == undefined || validData.telephone == "NA")
						{
							//alert("if");
							//$scope.addQuotation.telephone = "";
							//$scope.addQuotation.madatory = "1";
							$("#Telephone").css("background-color", "#ffff7f"); 
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.telephone = validData.phnumber;
							//$scope.addQuotation.madatory = "0";
							$("#Telephone").css("background-color", "#99ff99"); 
						}
						if(validData.tax == "" || validData.tax == undefined || validData.tax == "NA")
						{
							//alert("if");
							//$scope.addQuotation.tax = "";
							//$scope.addQuotation.madatory = "1";
							$("#TaxName").css("background-color", "#ffff7f"); 
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.tax = validData.taxName;
							//$scope.addQuotation.madatory = "0";
							$("#TaxName").css("background-color", "#99ff99");
						}
						if(validData.country == "" || validData.country == undefined || validData.country == "NA")
						{
							//alert("if");
							//$scope.addQuotation.country = "";
							//$scope.addQuotation.madatory = "1";
							$("#CountryName").css("background-color", "#ffff7f"); 
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.country = validData.billingCountries;
							//$scope.addQuotation.madatory = "0";
							$("#CountryName").css("background-color", "#99ff99");
						}
						if(validData.salesMan == "" || validData.salesMan == undefined || validData.salesMan == "NA")
						{
							//alert("if");
							//$scope.addQuotation.salesMan = "";
							//$scope.addQuotation.madatory = "1";
							$("#SalesMan").css("background-color", "#ffff7f");
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.salesMan = validData.salesPerson;
							//$scope.addQuotation.madatory = "0";
							$("#SalesMan").css("background-color", "#99ff99");
						}
						
						if(validData.taxPercent == "" || validData.taxPercent == undefined || validData.taxPercent == "NA")
						{
							//alert("if");
							//$scope.addQuotation.taxPercent = "";
							//$scope.addQuotation.madatory = "1";
							$("#TaxPercent").css("background-color", "#ffff7f");
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.taxPercent = validData.taxPercent;
							//$scope.addQuotation.madatory = "0";
							$("#TaxPercent").css("background-color", "#99ff99");
						}
						
						if(validData.salesManCode == "" || validData.salesManCode == undefined || validData.salesManCode == "NA")
						{
							//alert("if");
							//$scope.addQuotation.salesManCode = "";
							//$scope.addQuotation.madatory = "1";
							$("#SalesManCode").css("background-color", "#ffff7f");
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.salesManCode = validData.salesPersonCode;
							//$scope.addQuotation.madatory = "0";
							$("#SalesManCode").css("background-color", "#99ff99");
						}
						if(validData.emailAddr == "" || validData.emailAddr == undefined || validData.emailAddr == "NA")
						{
							//alert("if");
							//$scope.addQuotation.emailAddr = "";
							//$scope.addQuotation.madatory = "1";
							$("#Email").css("background-color", "#ffffff");
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.emailAddr = validData.email;
							//$scope.addQuotation.madatory = "0";
							$("#Email").css("background-color", "#99ff99");
						}
						if(validData.paymentTerm == "" || validData.paymentTerm == undefined || validData.paymentTerm == "NA")
						{
							//alert("if");
							//$scope.addQuotation.paymentTerm = "";
							//$scope.addQuotation.madatory = "1";
							$("#PaymentTerm").css("background-color", "#ffff7f");
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.paymentTerm = validData.paymentTerm;
							//$scope.addQuotation.madatory = "0";
							$("#PaymentTerm").css("background-color", "#99ff99");
						}
						/*if(validData.assigned == "" || validData.assigned == undefined || validData.assigned == "NA")
						{
							//alert("if");
							//$scope.addQuotation.assigned = "";
							//$scope.addQuotation.madatory = "1";
							$("#AssignTo").css("background-color", "#ffff7f");
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.assigned = validData.departmentname;
							//$scope.addQuotation.madatory = "0";
							$("#AssignTo").css("background-color", "#99ff99");
						}*/
						if(validData.createdBy == "" || validData.createdBy == undefined || validData.createdBy == "NA")
						{
							//alert("if");
							//$scope.addQuotation.createdBy = "";
							//$scope.addQuotation.madatory = "1";
							$("#CreatedBy").css("background-color", "#ffff7f");
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.createdBy = validData.createdby;
							//$scope.addQuotation.madatory = "0";
							$("#CreatedBy").css("background-color", "#99ff99");
						}
						
						/*if(validData.attention == "" || validData.attention == undefined || validData.attention == "NA")
						{
							alert("if");
							//$scope.addQuotation.attention = "";
							//$scope.addQuotation.madatory = "1";
							$("#Attention").css("background-color", "#ffff7f"); 
						}
						else
						{
							alert("else");
							//$scope.addQuotation.attention = validData.contName;
							//$scope.addQuotation.madatory = "0";
							$("#Attention").css("background-color", "#99ff99"); 
						}
						
					   if(validData.emailAddr == "" || validData.emailAddr == undefined || validData.emailAddr == "NA")
						{
							//alert("if");
							$scope.addQuotation.emailAddr = "";
							//$scope.addQuotation.madatory = "1";
							$("#Email").css("background-color", "#ffffff");
						}
						else
						{
							//alert("else");
							$scope.addQuotation.emailAddr = validData.emailAddr;
							//$scope.addQuotation.madatory = "0";
							$("#Email").css("background-color", "#99ff99");
						}*/
						
						var departmentSplit = json['quatationform'][0].assigned;
						 var departmentSales = [];
						 if(departmentSplit == undefined || departmentSplit == "" || departmentSplit == "NA")
						 {
							 //alert("if");
							 $('#picturegallery1').val("['']").trigger('chosen:updated');
							 $("#picturegallery1").css("background-color", "#ffff7f");
						 }
						 else
						 {
							 //alert(departmentSplit.length + " " + " else ");
							 for (var s = 0; s < departmentSplit.length; s++) {
					
										departmentSales.push(departmentSplit[s]);
										//alert("accessoriesSales"+accessoriesSales);
							}
							 $('#picturegallery1').val(departmentSales).trigger('chosen:updated');
											$scope.addQuotation.assigned = departmentSales;
											$("#picturegallery1").css("background-color", "#99ff99");
						 }
						 
						 for(var i = 0; i<$scope.sparePartData.length; i++)
						 {
							 //alert(gridData[i].motorType);
							 //customerPrice
							 //$("#OtherCust_"+parseInt(i+1)).css("background-color", "#000000");
							  if(gridData[i].motorType == "other - pls specify")
							  {
								 
								  $scope.sparePartData[i].motorTypeSts = true;
								  $scope.sparePartData[i].othersPlzSts = true;
								  $("#MotorTypeSpare_"+parseInt(i+1)).css("background-color", "#ffff7f");
								  $("#OthersPlzSpare_"+parseInt(i+1)).css("background-color", "#ffff7f");
							  }
							  else
							  {
								  $scope.sparePartData[i].motorTypeSts = false;
								  $scope.sparePartData[i].othersPlzSts = false;
								  $scope.sparePartData[i].othersPlz = "";
								  $("#MotorTypeSpare_"+parseInt(i+1)).css("background-color", "#ffffff");
								  $("#OthersPlzSpare_"+parseInt(i+1)).css("background-color", "#ffffff");
							  }
							  if(gridData[i].motorPower == "OTHER")
							  {
								
								  //$scope.projectUnitData[i].reqFUnitMotorKW = true;
								  $scope.sparePartData[i].reqFUnitMotorKW = true;
								  $("#OtherSpare_"+parseInt(i+1)).css("background-color", "#ffff7f");
								  //$("#OthersPlzCust_"+parseInt(i+1)).css("background-color", "#ffff7f");
							  }
							  else
							  {
								  //$scope.projectUnitData[i].reqFUnitMotorKW = true;
								  $scope.sparePartData[i].reqFUnitMotorKW = false;
								  $scope.sparePartData[i].other = "";
								  $("#OtherSpare_"+parseInt(i+1)).css("background-color", "#ffffff");
								 // $("#OthersPlzCust_"+parseInt(i+1)).css("background-color", "#ffffff");
							  }
							  if(gridData[i].customerPrice == "0")
							  {
								  $scope.sparePartData[i].tpricereq = true;
								  $scope.sparePartData[i].markUpreq = true;
								  $scope.sparePartData[i].qntyreq = true;
								  $scope.sparePartData[i].lpricereq = false;
								  $scope.sparePartData[i].disreq = false;
								  $scope.sparePartData[i].quantyreq = false;
								  $("#TransferPriceSpare_"+parseInt(i+1)).css("background-color", "#ffff7f");
								  $("#MarkUpSpare_"+parseInt(i+1)).css("background-color", "#ffff7f");
								  $("#QntySpare_"+parseInt(i+1)).css("background-color", "#ffff7f");
								  $("#ListPriceSpare_"+parseInt(i+1)).css("background-color", "#ffffff");
								  $("#DiscountMultiplierSpare_"+parseInt(i+1)).css("background-color", "#ffffff");
								  $("#QuantitySpare_"+parseInt(i+1)).css("background-color", "#ffffff");
							  }
							  else
							  {
								 $scope.sparePartData[i].lpricereq = true;
								 $scope.sparePartData[i].disreq = true;
								 $scope.sparePartData[i].quantyreq = true;
								 $scope.sparePartData[i].tpricereq = false;
								 $scope.sparePartData[i].markUpreq = false;
								 $scope.sparePartData[i].qntyreq = false;
								  $("#ListPriceSpare_"+parseInt(i+1)).css("background-color", "#ffff7f");
								  $("#DiscountMultiplierSpare_"+parseInt(i+1)).css("background-color", "#ffff7f");
								  $("#QuantitySpare_"+parseInt(i+1)).css("background-color", "#ffff7f");
								  $("#TransferPriceSpare_"+parseInt(i+1)).css("background-color", "#ffffff");
								  $("#MarkUpSpare_"+parseInt(i+1)).css("background-color", "#ffffff");
								  $("#QntySpare_"+parseInt(i+1)).css("background-color", "#ffffff");
							  }
						 }
						 
						/*if(validData.flag == 1)
						{
							//alert("if");
							
							$scope.addQuotation.madatory = "0";
							
						}
						else
						{
							//alert("else");
							
							$scope.addQuotation.madatory = "1";
							
						}*/
						/*var departmentSplit = json['quatationform'][0].assigned;
						//alert(JSON.stringify(departmentSplit));
					   var departmentSales = [];
						for (var s = 0; s < departmentSplit.length; s++) {
					
										departmentSales.push(departmentSplit[s]);
										//alert("accessoriesSales"+accessoriesSales);
						}
						 $('#picturegallery1').val(departmentSales).trigger('chosen:updated');
										$scope.addQuotation.assigned = departmentSales;*/
						//$scope.colorCode = "1";
						
						
						
						$scope.$apply(); 
				   }
				   if(QuotationType == '3')
				   {
					    //alert(QuotationType +  "3");
						$scope.addQuotation = json['quatationform'][0];
				        $scope.termData = json['quatationtermsgrid'];
					    $scope.servicPartData = json['quatationgrid'];
						
						var validData = json['quatationform'][0];
						var gridData = json['quatationgrid'];
						if(validData.currency == "" || validData.currency == undefined || validData.currency == "NA")
						{
							//alert("if");
							//$scope.addQuotation.currency = "";
							//$scope.addQuotation.madatory = "1";
							$("#Currency").css("background-color", "#ffff7f"); 
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.currency = validData.currency;
							//$scope.addQuotation.madatory = "0";
							$("#Currency").css("background-color", "#99ff99"); 
						}
						if(validData.attention == "" || validData.attention == undefined || validData.attention == "NA")
						{
							//alert("if");
							//$scope.addQuotation.attention = "";
							//$scope.addQuotation.madatory = "1";
							$("#Attention").css("background-color", "#ffff7f"); 
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.attention = validData.contName;
							//$scope.addQuotation.madatory = "0";
							$("#Attention").css("background-color", "#99ff99"); 
						}
						if(validData.custCode == "" || validData.custCode == undefined || validData.custCode == "NA")
						{
							//alert("if");
							//$scope.addQuotation.custCode = "";
							//$scope.addQuotation.madatory = "1";
							$("#CustCode").css("background-color", "#ffff7f"); 
							//$("#CustProsCode").css("background-color", "#ffff7f");
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.custCode = validData.account;
							//$scope.addQuotation.madatory = "0";
							$("#CustCode").css("background-color", "#99ff99"); 
							//$("#CustProsCode").css("background-color", "#99ff99"); 
						}
						if(validData.telephone == "" || validData.telephone == undefined || validData.telephone == "NA")
						{
							//alert("if");
							//$scope.addQuotation.telephone = "";
							//$scope.addQuotation.madatory = "1";
							$("#Telephone").css("background-color", "#ffff7f"); 
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.telephone = validData.phnumber;
							//$scope.addQuotation.madatory = "0";
							$("#Telephone").css("background-color", "#99ff99"); 
						}
						if(validData.tax == "" || validData.tax == undefined || validData.tax == "NA")
						{
							//alert("if");
							//$scope.addQuotation.tax = "";
							//$scope.addQuotation.madatory = "1";
							$("#TaxName").css("background-color", "#ffff7f"); 
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.tax = validData.taxName;
							//$scope.addQuotation.madatory = "0";
							$("#TaxName").css("background-color", "#99ff99");
						}
						if(validData.country == "" || validData.country == undefined || validData.country == "NA")
						{
							//alert("if");
							//$scope.addQuotation.country = "";
							//$scope.addQuotation.madatory = "1";
							$("#CountryName").css("background-color", "#ffff7f"); 
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.country = validData.billingCountries;
							//$scope.addQuotation.madatory = "0";
							$("#CountryName").css("background-color", "#99ff99");
						}
						if(validData.salesMan == "" || validData.salesMan == undefined || validData.salesMan == "NA")
						{
							//alert("if");
							//$scope.addQuotation.salesMan = "";
							//$scope.addQuotation.madatory = "1";
							$("#SalesMan").css("background-color", "#ffff7f");
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.salesMan = validData.salesPerson;
							//$scope.addQuotation.madatory = "0";
							$("#SalesMan").css("background-color", "#99ff99");
						}
						
						if(validData.taxPercent == "" || validData.taxPercent == undefined || validData.taxPercent == "NA")
						{
							//alert("if");
							//$scope.addQuotation.taxPercent = "";
							//$scope.addQuotation.madatory = "1";
							$("#TaxPercent").css("background-color", "#ffff7f");
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.taxPercent = validData.taxPercent;
							//$scope.addQuotation.madatory = "0";
							$("#TaxPercent").css("background-color", "#99ff99");
						}
						
						if(validData.salesManCode == "" || validData.salesManCode == undefined || validData.salesManCode == "NA")
						{
							//alert("if");
							//$scope.addQuotation.salesManCode = "";
							//$scope.addQuotation.madatory = "1";
							$("#SalesManCode").css("background-color", "#ffff7f");
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.salesManCode = validData.salesPersonCode;
							//$scope.addQuotation.madatory = "0";
							$("#SalesManCode").css("background-color", "#99ff99");
						}
						if(validData.emailAddr == "" || validData.emailAddr == undefined || validData.emailAddr == "NA")
						{
							//alert("if");
							//$scope.addQuotation.emailAddr = "";
							//$scope.addQuotation.madatory = "1";
							$("#Email").css("background-color", "#ffffff");
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.emailAddr = validData.email;
							//$scope.addQuotation.madatory = "0";
							$("#Email").css("background-color", "#99ff99");
						}
						if(validData.paymentTerm == "" || validData.paymentTerm == undefined || validData.paymentTerm == "NA")
						{
							//alert("if");
							//$scope.addQuotation.paymentTerm = "";
							//$scope.addQuotation.madatory = "1";
							$("#PaymentTerm").css("background-color", "#ffff7f");
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.paymentTerm = validData.paymentTerm;
							//$scope.addQuotation.madatory = "0";
							$("#PaymentTerm").css("background-color", "#99ff99");
						}
						/*if(validData.assigned == "" || validData.assigned == undefined || validData.assigned == "NA")
						{
							//alert("if");
							//$scope.addQuotation.assigned = "";
							//$scope.addQuotation.madatory = "1";
							$("#AssignTo").css("background-color", "#ffff7f");
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.assigned = validData.departmentname;
							//$scope.addQuotation.madatory = "0";
							$("#AssignTo").css("background-color", "#99ff99");
						}*/
						if(validData.createdBy == "" || validData.createdBy == undefined || validData.createdBy == "NA")
						{
							//alert("if");
							//$scope.addQuotation.createdBy = "";
							//$scope.addQuotation.madatory = "1";
							$("#CreatedBy").css("background-color", "#ffff7f");
						}
						else
						{
							//alert("else");
							//$scope.addQuotation.createdBy = validData.createdby;
							//$scope.addQuotation.madatory = "0";
							$("#CreatedBy").css("background-color", "#99ff99");
						}
						
					   /*if(validData.emailAddr == "" || validData.emailAddr == undefined || validData.emailAddr == "NA")
						{
							//alert("if");
							$scope.addQuotation.emailAddr = "";
							//$scope.addQuotation.madatory = "1";
							$("#Email").css("background-color", "#ffffff");
						}
						else
						{
							//alert("else");
							$scope.addQuotation.emailAddr = validData.emailAddr;
							//$scope.addQuotation.madatory = "0";
							$("#Email").css("background-color", "#99ff99");
						}*/
						
						/*if(validData.flag == 1)
						{
							//alert("if");
							
							$scope.addQuotation.madatory = "0";
							
						}
						else
						{
							//alert("else");
							
							$scope.addQuotation.madatory = "1";
							
						}
						*/
						/*var departmentSplit = json['quatationform'][0].assigned;
						//alert(JSON.stringify(departmentSplit));
					   var departmentSales = [];
						for (var s = 0; s < departmentSplit.length; s++) {
					
										departmentSales.push(departmentSplit[s]);
										//alert("accessoriesSales"+accessoriesSales);
						}
						 $('#picturegallery1').val(departmentSales).trigger('chosen:updated');
										$scope.addQuotation.assigned = departmentSales;*/
						 var departmentSplit = json['quatationform'][0].assigned;
						 var departmentSales = [];
						 if(departmentSplit == undefined || departmentSplit == "" || departmentSplit == "NA")
						 {
							 //alert("if");
							 $('#picturegallery1').val("['']").trigger('chosen:updated');
							 $("#picturegallery1").css("background-color", "#ffff7f");
						 }
						 else
						 {
							 //alert(departmentSplit.length + " " + " else ");
							 for (var s = 0; s < departmentSplit.length; s++) {
					
										departmentSales.push(departmentSplit[s]);
										//alert("accessoriesSales"+accessoriesSales);
							}
							 $('#picturegallery1').val(departmentSales).trigger('chosen:updated');
											$scope.addQuotation.assigned = departmentSales;
											$("#picturegallery1").css("background-color", "#99ff99");
						 }
						 
						 
						 for(var i = 0; i<$scope.servicPartData.length; i++)
						 {
							 //alert(gridData[i].motorType);
							 //customerPrice
							 //$("#OtherCust_"+parseInt(i+1)).css("background-color", "#000000");
							  if(gridData[i].motorType == "other - pls specify")
							  {
								 
								  $scope.servicPartData[i].motorTypeSts = true;
								  $scope.servicPartData[i].othersPlzSts = true;
								  $("#MotorTypeServ_"+parseInt(i+1)).css("background-color", "#ffff7f");
								  $("#OthersPlzServ_"+parseInt(i+1)).css("background-color", "#ffff7f");
							  }
							  else
							  {
								  $scope.servicPartData[i].motorTypeSts = false;
								  $scope.servicPartData[i].othersPlzSts = false;
								  $scope.servicPartData[i].othersPlz = "";
								  $("#MotorTypeServ_"+parseInt(i+1)).css("background-color", "#ffffff");
								  $("#OthersPlzServ_"+parseInt(i+1)).css("background-color", "#ffffff");
							  }
							  if(gridData[i].motorPower == "OTHER")
							  {
								
								  //$scope.projectUnitData[i].reqFUnitMotorKW = true;
								  $scope.servicPartData[i].reqFUnitMotorKW = true;
								  $("#OtherServ_"+parseInt(i+1)).css("background-color", "#ffff7f");
								  //$("#OthersPlzCust_"+parseInt(i+1)).css("background-color", "#ffff7f");
							  }
							  else
							  {
								  //$scope.projectUnitData[i].reqFUnitMotorKW = true;
								  $scope.servicPartData[i].reqFUnitMotorKW = false;
								  $scope.servicPartData[i].other = "";
								  $("#OtherServ_"+parseInt(i+1)).css("background-color", "#ffffff");
								 // $("#OthersPlzCust_"+parseInt(i+1)).css("background-color", "#ffffff");
							  }
							  if(gridData[i].customerPrice == "0")
							  {
								  $scope.servicPartData[i].tpricereq = true;
								  $scope.servicPartData[i].markUpreq = true;
								  $scope.servicPartData[i].qntyreq = true;
								  $scope.servicPartData[i].lpricereq = false;
								  $scope.servicPartData[i].disreq = false;
								  $scope.servicPartData[i].quantyreq = false;
								  $("#TransferPriceService_"+parseInt(i+1)).css("background-color", "#ffff7f");
								  $("#MarkUpService_"+parseInt(i+1)).css("background-color", "#ffff7f");
								  $("#QntyService_"+parseInt(i+1)).css("background-color", "#ffff7f");
								  $("#ListPriceService_"+parseInt(i+1)).css("background-color", "#ffffff");
								  $("#DiscountMultiplierService_"+parseInt(i+1)).css("background-color", "#ffffff");
								  $("#QuantityService_"+parseInt(i+1)).css("background-color", "#ffffff");
							  }
							  else
							  {
								 $scope.servicPartData[i].lpricereq = true;
								 $scope.servicPartData[i].disreq = true;
								 $scope.servicPartData[i].quantyreq = true;
								 $scope.servicPartData[i].tpricereq = false;
								 $scope.servicPartData[i].markUpreq = false;
								 $scope.servicPartData[i].qntyreq = false;
								  $("#ListPriceService_"+parseInt(i+1)).css("background-color", "#ffff7f");
								  $("#DiscountMultiplierService_"+parseInt(i+1)).css("background-color", "#ffff7f");
								  $("#QuantityService_"+parseInt(i+1)).css("background-color", "#ffff7f");
								  $("#TransferPriceService_"+parseInt(i+1)).css("background-color", "#ffffff");
								  $("#MarkUpService_"+parseInt(i+1)).css("background-color", "#ffffff");
								  $("#QntyService_"+parseInt(i+1)).css("background-color", "#ffffff");
							  }
						 }
						//$scope.colorCode = "1";
						
						
						$scope.$apply();
				   }
				   
				    var asd = json['quatationform'][0].qtnNo;
				    var asd2 = asd.split("-");
					
					if(asd2.length == 5)
					{
						$scope.qType = asd2[0];
						$scope.coun_year_Code = asd2[1];
						$scope.runNo = asd2[2];
						var codesplit = asd2[3].split("/");
						//alert(asd2[3]);
						$scope.custD_N = codesplit[0];
						$scope.custD_S = codesplit[1];
						$scope.version = asd2[4];
					}
					
					if(asd2.length == 4)
					{
						$scope.qType = asd2[0];
						$scope.coun_year_Code = asd2[1];
						$scope.runNo = asd2[2];
						//var codesplit = asd2[3].split("/");
						//$scope.custD_N = asd2[3];
						//$scope.custD_S = "";
						$scope.version = asd2[3];
					}
				 
				 $scope.$apply();
				 $("#loading").hide();
			});
                
               
			
		}
		else
		{
			
			$.post("getQuatationDataFromCase.do",{qtnType:$rootScope.loadQtnType},function(json)
			{
				
				 var QuoteCaseType = json['quatationform'][0].qtnType;
				 var qtnFormData = json['quatationform'][0];
				 var gridData = json['quatationgrid'];
				 
				 //if(QuoteCaseType == '0')
				  // {
					   //alert(JSON.stringify(json['quatationform'][0].taxName) + "------------if");
					   //alert(QuoteCaseType +  "===============0");
					   $scope.addQuotation.qtnType = qtnFormData.qtnType;
					   $scope.addQuotation.qtnProgress = qtnFormData.qtnProgress;
					   $scope.addQuotation.showCost = qtnFormData.showCost;
					   $scope.addQuotation.qtnMaster = qtnFormData.qtnMaster;
					   $scope.addQuotation.validityCon = qtnFormData.validityCon;
					   $scope.addQuotation.tempid = qtnFormData.tempid;
					   $scope.addQuotation.modifiedstatus = qtnFormData.modifiedstatus;
					   $scope.addQuotation.tempdata = qtnFormData.tempdata;
					   
					   $scope.addQuotation.qtnNo = qtnFormData.qtnNo;
					   $scope.addQuotation.custName = qtnFormData.accountid;
					   $scope.addQuotation.dateQuote = qtnFormData.dateQuote;
					  // $scope.addQuotation.currency = qtnFormData.currency;
					   
				       //$scope.addQuotation.attention = qtnFormData.contName;
					  // $scope.addQuotation.custCode = qtnFormData.account;
					   $scope.addQuotation.dateValid = qtnFormData.dateValid;
					   //$scope.addQuotation.tax = qtnFormData.taxName;
					   
					   $scope.addQuotation.copy = qtnFormData.copy;
					   //$scope.addQuotation.country = qtnFormData.billingCountries;
					   //$scope.addQuotation.salesMan = qtnFormData.salesPerson;
					   //$scope.addQuotation.taxPercent = qtnFormData.taxPercent;
					   
					   //$scope.addQuotation.telephone = qtnFormData.phnumber;
					   //$scope.addQuotation.custRef = qtnFormData.custRef;
					   //$scope.addQuotation.salesManCode = qtnFormData.salesPersonCode;
					  // $scope.addQuotation.discount = qtnFormData.discount;
					   
					   //$scope.addQuotation.emailAddr = qtnFormData.email;
					   //$scope.addQuotation.paymentTerm = qtnFormData.paymentTerm;
					   $scope.addQuotation.salesTerm = qtnFormData.salesTerm;
					   $scope.addQuotation.estPercent = qtnFormData.estPercent;
					   
					   //$scope.addQuotation.assigned = qtnFormData.assigned;
					   $scope.addQuotation.caseRef = qtnFormData.caseRef;
					  // $scope.addQuotation.salesmanPhNo = qtnFormData.salesmanPhNo;
					   //$scope.addQuotation.createdBy = qtnFormData.createdBy;
					   
					   //$scope.addQuotation.madatory = "0";
					   
					   var validData = json['quatationform'][0];
					   if(validData.currency == "" || validData.currency == undefined || validData.currency == "NA")
						{
							//alert("if");
							$scope.addQuotation.currency = "";
							//$scope.addQuotation.madatory = "1";
							$("#Currency").css("background-color", "#ffff7f"); 
						}
						else
						{
							//alert("else");
							$scope.addQuotation.currency = validData.currency;
							//$scope.addQuotation.madatory = "0";
							$("#Currency").css("background-color", "#99ff99"); 
						}
						if(validData.contName == "" || validData.contName == undefined || validData.contName == "NA")
						{
							//alert("if");
							$scope.addQuotation.attention = "";
							//$scope.addQuotation.madatory = "1";
							$("#Attention").css("background-color", "#ffff7f"); 
						}
						else
						{
							//alert("else");
							$scope.addQuotation.attention = validData.contName;
							//$scope.addQuotation.madatory = "0";
							$("#Attention").css("background-color", "#99ff99"); 
						}
						if(validData.account == "" || validData.account == undefined || validData.account == "NA")
						{
							//alert("if");
							$scope.addQuotation.custCode = "";
							//$scope.addQuotation.madatory = "1";
							$("#CustCode").css("background-color", "#ffff7f"); 
							//$("#CustProsCode").css("background-color", "#ffff7f"); 
						}
						else
						{
							//alert("else");
							$scope.addQuotation.custCode = validData.account;
							//$scope.addQuotation.madatory = "0";
							$("#CustCode").css("background-color", "#99ff99"); 
							//$("#CustProsCode").css("background-color", "#99ff99"); 
						}
						if(validData.phnumber == "" || validData.phnumber == undefined || validData.phnumber == "NA")
						{
							//alert("if");
							$scope.addQuotation.telephone = "";
							//$scope.addQuotation.madatory = "1";
							$("#Telephone").css("background-color", "#ffff7f"); 
						}
						else
						{
							//alert("else");
							$scope.addQuotation.telephone = validData.phnumber;
							//$scope.addQuotation.madatory = "0";
							$("#Telephone").css("background-color", "#99ff99"); 
						}
						if(validData.taxName == "" || validData.taxName == undefined || validData.taxName == "NA")
						{
							//alert("if");
							$scope.addQuotation.tax = "";
							//$scope.addQuotation.madatory = "1";
							$("#TaxName").css("background-color", "#ffff7f"); 
						}
						else
						{
							//alert("else");
							$scope.addQuotation.tax = validData.taxName;
							//$scope.addQuotation.madatory = "0";
							$("#TaxName").css("background-color", "#99ff99");
						}
						if(validData.billingCountries == "" || validData.billingCountries == undefined || validData.billingCountries == "NA")
						{
							//alert("if");
							$scope.addQuotation.country = "";
							//$scope.addQuotation.madatory = "1";
							$("#CountryName").css("background-color", "#ffff7f"); 
						}
						else
						{
							//alert("else");
							$scope.addQuotation.country = validData.billingCountries;
							//$scope.addQuotation.madatory = "0";
							$("#CountryName").css("background-color", "#99ff99");
						}
						if(validData.salesPerson == "" || validData.salesPerson == undefined || validData.salesPerson == "NA")
						{
							//alert("if");
							$scope.addQuotation.salesMan = "";
							//$scope.addQuotation.madatory = "1";
							$("#SalesMan").css("background-color", "#ffff7f");
						}
						else
						{
							//alert("else");
							$scope.addQuotation.salesMan = validData.salesPerson;
							//$scope.addQuotation.madatory = "0";
							$("#SalesMan").css("background-color", "#99ff99");
						}
						
						if(validData.taxPercent == "" || validData.taxPercent == undefined || validData.taxPercent == "NA")
						{
							//alert("if");
							$scope.addQuotation.taxPercent = "";
							//$scope.addQuotation.madatory = "1";
							$("#TaxPercent").css("background-color", "#ffff7f");
						}
						else
						{
							//alert("else");
							$scope.addQuotation.taxPercent = validData.taxPercent;
							//$scope.addQuotation.madatory = "0";
							$("#TaxPercent").css("background-color", "#99ff99");
						}
						
						if(validData.salesPersonCode == "" || validData.salesPersonCode == undefined || validData.salesPersonCode == "NA")
						{
							//alert("if");
							$scope.addQuotation.salesManCode = "";
							//$scope.addQuotation.madatory = "1";
							$("#SalesManCode").css("background-color", "#ffff7f");
						}
						else
						{
							//alert("else");
							$scope.addQuotation.salesManCode = validData.salesPersonCode;
							//$scope.addQuotation.madatory = "0";
							$("#SalesManCode").css("background-color", "#99ff99");
						}
						if(validData.email == "" || validData.email == undefined || validData.email == "NA")
						{
							//alert("if");
							$scope.addQuotation.emailAddr = "";
							//$scope.addQuotation.madatory = "1";
							$("#Email").css("background-color", "#ffffff");
						}
						else
						{
							//alert("else");
							$scope.addQuotation.emailAddr = validData.email;
							//$scope.addQuotation.madatory = "0";
							$("#Email").css("background-color", "#99ff99");
						}
						if(validData.paymentTerm == "" || validData.paymentTerm == undefined || validData.paymentTerm == "NA")
						{
							//alert("if");
							$scope.addQuotation.paymentTerm = "";
							//$scope.addQuotation.madatory = "1";
							$("#PaymentTerm").css("background-color", "#ffff7f");
						}
						else
						{
							//alert("else");
							$scope.addQuotation.paymentTerm = validData.paymentTerm;
							//$scope.addQuotation.madatory = "0";
							$("#PaymentTerm").css("background-color", "#99ff99");
						}
						/*if(validData.departmentname == "" || validData.departmentname == undefined || validData.departmentname == "NA")
						{
							//alert("if");
							$scope.addQuotation.assigned = "";
							//$scope.addQuotation.madatory = "1";
							$("#AssignTo").css("background-color", "#ffff7f");
						}
						else
						{
							//alert("else");
							$scope.addQuotation.assigned = validData.departmentname;
							//$scope.addQuotation.madatory = "0";
							$("#AssignTo").css("background-color", "#99ff99");
						}*/
						if(validData.createdBy == "" || validData.createdBy == undefined || validData.createdBy == "NA")
						{
							//alert("if");
							$scope.addQuotation.createdBy = "";
							//$scope.addQuotation.madatory = "1";
							$("#CreatedBy").css("background-color", "#ffff7f");
						}
						else
						{
							//alert("else");
							$scope.addQuotation.createdBy = validData.createdBy;
							//$scope.addQuotation.madatory = "0";
							$("#CreatedBy").css("background-color", "#99ff99");
						}
						if(validData.exchangerate == "" || validData.exchangerate == undefined || validData.exchangerate == "NA")
						{
							//alert("if");
							$scope.addQuotation.exchangerate = "";
							//$scope.addQuotation.madatory = "1";
							$("#CurrencyExg").css("background-color", "#ffff7f");
						}
						else
						{
							//alert("else");
							$scope.addQuotation.exchangerate = validData.exchangerate;
							//$scope.addQuotation.madatory = "0";
							$("#CurrencyExg").css("background-color", "#99ff99");
						}
					   /*if(validData.email == "" || validData.email == undefined || validData.email == "NA")
						{
							//alert("if");
							$scope.addQuotation.emailAddr = "";
							//$scope.addQuotation.madatory = "1";
							$("#Email").css("background-color", "#ffffff");
						}
						else
						{
							//alert("else");
							$scope.addQuotation.emailAddr = validData.email;
							//$scope.addQuotation.madatory = "0";
							$("#Email").css("background-color", "#99ff99");
						}*/
						
						/*if(validData.flag == 1)
						{
							//alert("if");
							
							$scope.addQuotation.madatory = "0";
							
						}
						else
						{
							//alert("else");
							
							$scope.addQuotation.madatory = "1";
							
						}*/
					   
					   
					   var departmentSplit = json['quatationform'][0].departmentname;
						 var departmentSales = [];
						 if(departmentSplit == undefined || departmentSplit == "" || departmentSplit == "NA")
						 {
							 //alert("if");
							 $('#picturegallery1').val("['']").trigger('chosen:updated');
							 $("#picturegallery1").css("background-color", "#ffff7f");
						 }
						 else
						 {
							 //alert(departmentSplit.length + " " + " else ");
							 for (var s = 0; s < departmentSplit.length; s++) {
					
										departmentSales.push(departmentSplit[s]);
										//alert("accessoriesSales"+accessoriesSales);
							}
							 $('#picturegallery1').val(departmentSales).trigger('chosen:updated');
							$scope.addQuotation.assigned = departmentSales;
							$("#picturegallery1").css("background-color", "#99ff99");
						 }
					   
				       $scope.termData = json['quatationtermsgrid'];
					   if(QuoteCaseType == '0')
					   {
						   $scope.qtnFullUnitData = json['quatationgrid'];
					   }
					   if(QuoteCaseType == '1')
					   {
						   $scope.projectUnitData = json['quatationgrid'];
					   }
					   if(QuoteCaseType == '2')
					   {
						   $scope.sparePartData = json['quatationgrid'];
					   }
					   if(QuoteCaseType == '3')
					   {
						   $scope.servicPartData = json['quatationgrid'];
					   }
					   
					   
					   
				  // }
				
				//alert(JSON.stringify(json['quatationform'][0].qtnNo));qtnType billingCountries
				//alert(JSON.stringify($scope.qtnFullUnitData));
				
				//var gridindexId = json['custgrid']['griddata'][0].id;
				//alert(JSON.stringify($scope.qtnFullUnitData).length);
				//alert(JSON.stringify(qtnFormData.qtnNo)+ "--------------");
				//alert(JSON.stringify($scope.addQuotation));
				  
				   
				   
				   //alert($scope.qtnFullUnitData.motorPower);
				  /* for(var i=0;i<gridData.length;i++)
				   {
					      $scope.qtnFullUnitData[i].motorPower = gridData[i].motorKW;
					      $scope.qtnFullUnitData[i].pole = gridData[i].pole;
						  $scope.qtnFullUnitData[i].phase = gridData[i].phase;
						  $scope.qtnFullUnitData[i].voltage = gridData[i].voltage;
						  $scope.qtnFullUnitData[i].freq = gridData[i].hertz;
						  $scope.qtnFullUnitData[i].outPutRPM = gridData[i].rpm;
						  $scope.qtnFullUnitData[i].appcode = gridData[i].application;
						  $scope.qtnFullUnitData[i].specialFeaturs = gridData[i].motorType;
					   $scope.$apply();
				   }*/
				   
				 
				 $rootScope.loadQuotation = "";
				 $rootScope.loadQtnType = "";
				  
				  //alert($rootScope.loadQuotation + " loadQuotationseqno frm case");
				    var asd = qtnFormData.qtnNo;
					var asd2 = asd.split("-");
					 $scope.qType = asd2[0];
					 $scope.coun_year_Code = asd2[1];
					 $scope.runNo = asd2[2];
					 $scope.version = asd2[3];
				   //$scope.addQuotation.qtnNo = json['sequencenumber'];
				$scope.$apply();
				$("#loading").hide();
				$("#backtocasebtn").show();
			});
			
		}
	}
	else
	{
		
		//alert($rootScope.quotationAction + " quotationAction ");
		var modetype = $rootScope.qtnTypeMode;
		if(modetype === 'Edit')
		{
			//alert(555);
			
			$.post("getSavedQuatationDataOnQuatationNumber.do",{quationnumber:$rootScope.quotationSeqNo,action:$rootScope.quotationAction,quotationType:$rootScope.qtnType},function(json)
		{
			//alert(JSON.stringify(json));
			
			var Quote = json['quatationform'][0].qtnType;
			var asd = json['quatationform'][0].qtnNo;
			var asd2 = asd.split("-");
			var action = json['quatationform'][0].action;
				if(action == '0')
				{
					
						if(Quote=='0')
						{
							
							$scope.isDisabled = true;
							
							 $scope.addQuotation = json['quatationform'][0];
							 $scope.qtnFullUnitData = json['quatationgrid'];
							 $scope.termData = json['quatationtermsgrid'];
							
							
							 $rootScope.quotationSeqNo = "";
							 $rootScope.quotationAction = "";
							 $rootScope.qtnType = "";
							 
							
							  var validData = json['quatationform'][0];
							  
							 /* if(validData.currency == "" || validData.currency == undefined || validData.currency == "NA")
								{
									//alert("if");
									//$scope.addQuotation.currency = "";
									//$scope.addQuotation.madatory = "1";
									$("#Currency").css("background-color", "#ffff7f"); 
								}
								else
								{
									//alert("else");
									//$scope.addQuotation.currency = validData.currency;
									//$scope.addQuotation.madatory = "0";
									$("#Currency").css("background-color", "#99ff99"); 
								}
								if(validData.attention == "" || validData.attention == undefined || validData.attention == "NA")
								{
									//alert("if");
									//$scope.addQuotation.attention = "";
									//$scope.addQuotation.madatory = "1";
									$("#Attention").css("background-color", "#ffff7f"); 
								}
								else
								{
									//alert("else");
									//$scope.addQuotation.attention = validData.contName;
									//$scope.addQuotation.madatory = "0";
									$("#Attention").css("background-color", "#99ff99"); 
								}
								if(validData.custCode == "" || validData.custCode == undefined || validData.custCode == "NA")
								{
									//alert("if");
									//$scope.addQuotation.custCode = "";
									//$scope.addQuotation.madatory = "1";
									$("#CustCode").css("background-color", "#ffff7f"); 
								}
								else
								{
									//alert("else");
									//$scope.addQuotation.custCode = validData.account;
									//$scope.addQuotation.madatory = "0";
									$("#CustCode").css("background-color", "#99ff99"); 
								}
								if(validData.telephone == "" || validData.telephone == undefined || validData.telephone == "NA")
								{
									//alert("if");
									//$scope.addQuotation.telephone = "";
									//$scope.addQuotation.madatory = "1";
									$("#Telephone").css("background-color", "#ffff7f"); 
								}
								else
								{
									//alert("else");
									//$scope.addQuotation.telephone = validData.phnumber;
									//$scope.addQuotation.madatory = "0";
									$("#Telephone").css("background-color", "#99ff99"); 
								}
								if(validData.tax == "" || validData.tax == undefined || validData.tax == "NA")
								{
									//alert("if");
									//$scope.addQuotation.tax = "";
									//$scope.addQuotation.madatory = "1";
									$("#TaxName").css("background-color", "#ffff7f"); 
								}
								else
								{
									//alert("else");
									//$scope.addQuotation.tax = validData.taxName;
									//$scope.addQuotation.madatory = "0";
									$("#TaxName").css("background-color", "#99ff99");
								}
								if(validData.country == "" || validData.country == undefined || validData.country == "NA")
								{
									//alert("if");
									//$scope.addQuotation.country = "";
									//$scope.addQuotation.madatory = "1";
									$("#CountryName").css("background-color", "#ffff7f"); 
								}
								else
								{
									//alert("else");
									//$scope.addQuotation.country = validData.billingCountries;
									//$scope.addQuotation.madatory = "0";
									$("#CountryName").css("background-color", "#99ff99");
								}
								if(validData.salesMan == "" || validData.salesMan == undefined || validData.salesMan == "NA")
								{
									//alert("if");
									//$scope.addQuotation.salesMan = "";
									//$scope.addQuotation.madatory = "1";
									$("#SalesMan").css("background-color", "#ffff7f");
								}
								else
								{
									//alert("else");
									//$scope.addQuotation.salesMan = validData.salesPerson;
									//$scope.addQuotation.madatory = "0";
									$("#SalesMan").css("background-color", "#99ff99");
								}
								
								if(validData.taxPercent == "" || validData.taxPercent == undefined || validData.taxPercent == "NA")
								{
									//alert("if");
									//$scope.addQuotation.taxPercent = "";
									//$scope.addQuotation.madatory = "1";
									$("#TaxPercent").css("background-color", "#ffff7f");
								}
								else
								{
									//alert("else");
									//$scope.addQuotation.taxPercent = validData.taxPercent;
									//$scope.addQuotation.madatory = "0";
									$("#TaxPercent").css("background-color", "#99ff99");
								}
								
								if(validData.salesManCode == "" || validData.salesManCode == undefined || validData.salesManCode == "NA")
								{
									//alert("if");
									//$scope.addQuotation.salesManCode = "";
									//$scope.addQuotation.madatory = "1";
									$("#SalesManCode").css("background-color", "#ffff7f");
								}
								else
								{
									//alert("else");
									//$scope.addQuotation.salesManCode = validData.salesPersonCode;
									//$scope.addQuotation.madatory = "0";
									$("#SalesManCode").css("background-color", "#99ff99");
								}
								if(validData.emailAddr == "" || validData.emailAddr == undefined || validData.emailAddr == "NA")
								{
									//alert("if");
									//$scope.addQuotation.emailAddr = "";
									//$scope.addQuotation.madatory = "1";
									$("#Email").css("background-color", "#ffffff");
								}
								else
								{
									//alert("else");
									//$scope.addQuotation.emailAddr = validData.email;
									//$scope.addQuotation.madatory = "0";
									$("#Email").css("background-color", "#99ff99");
								}
								if(validData.paymentTerm == "" || validData.paymentTerm == undefined || validData.paymentTerm == "NA")
								{
									//alert("if");
									//$scope.addQuotation.paymentTerm = "";
									//$scope.addQuotation.madatory = "1";
									$("#PaymentTerm").css("background-color", "#ffff7f");
								}
								else
								{
									//alert("else");
									//$scope.addQuotation.paymentTerm = validData.paymentTerm;
									//$scope.addQuotation.madatory = "0";
									$("#PaymentTerm").css("background-color", "#99ff99");
								}
								if(validData.assigned == "" || validData.assigned == undefined || validData.assigned == "NA")
								{
									//alert("if");
									//$scope.addQuotation.assigned = "";
									//$scope.addQuotation.madatory = "1";
									$("#AssignTo").css("background-color", "#ffff7f");
								}
								else
								{
									//alert("else");
									//$scope.addQuotation.assigned = validData.departmentname;
									//$scope.addQuotation.madatory = "0";
									$("#AssignTo").css("background-color", "#99ff99");
								}
								if(validData.createdBy == "" || validData.createdBy == undefined || validData.createdBy == "NA")
								{
									//alert("if");
									//$scope.addQuotation.createdBy = "";
									//$scope.addQuotation.madatory = "1";
									$("#CreatedBy").css("background-color", "#ffff7f");
								}
								else
								{
									//alert("else");
									//$scope.addQuotation.createdBy = validData.createdby;
									//$scope.addQuotation.madatory = "0";
									$("#CreatedBy").css("background-color", "#99ff99");
								}*/
							  
						   if(validData.emailAddr == "" || validData.emailAddr == undefined || validData.emailAddr == "NA")
							{
								//alert("if");
								$scope.addQuotation.emailAddr = "";
								//$scope.addQuotation.madatory = "1";
								$("#Email").css("background-color", "#ffffff");
							}
							else
							{
								//alert("else");
								$scope.addQuotation.emailAddr = validData.emailAddr;
								//$scope.addQuotation.madatory = "0";
								$("#Email").css("background-color", "#99ff99");
							}
							if(validData.caseRef == "" || validData.caseRef == undefined || validData.caseRef == "NA")
							{
								//alert("if" + 0);
								$scope.addQuotation.caseRef = "";
								//$scope.addQuotation.madatory = "1";
								//$("#Email").css("background-color", "#ffffff");
								$("#backtocasebtn").hide();
							}
							else
							{
								//alert("else" + 0);
								$scope.addQuotation.caseRef = validData.caseRef;
								//$scope.addQuotation.madatory = "0";
								//$("#Email").css("background-color", "#99ff99");
								
								$("#backtocasebtn").show();
							}
							
							$(".resetBgColr").css("background-color", "#99ff99"); 
							//$("#Email").css("background-color", "#99ff99");
							 
							 var departmentSplit = json['quatationform'][0].assigned;
							 var departmentSales = [];
							 if(departmentSplit == undefined || departmentSplit == "" || departmentSplit == "NA")
							 {
								 //alert("if");
								 $('#picturegallery1').val("['']").trigger('chosen:updated');
								 $("#picturegallery1").css("background-color", "#ffff7f");
							 }
							 else
							 {
								 //alert(departmentSplit.length + " " + " else ");
								 for (var s = 0; s < departmentSplit.length; s++) {
						
											departmentSales.push(departmentSplit[s]);
											//alert("accessoriesSales"+accessoriesSales);
								}
								 $('#picturegallery1').val(departmentSales).trigger('chosen:updated');
												$scope.addQuotation.assigned = departmentSales;
												$("#picturegallery1").css("background-color", "#99ff99");
							 }
							 
							 $scope.$apply();
								//alert("if");
								if(asd2.length == 5)
								{
									$scope.qType = asd2[0];
									$scope.coun_year_Code = asd2[1];
									$scope.runNo = asd2[2];
									var codesplit = asd2[3].split("/");
									$scope.custD_N = codesplit[0];
									$scope.custD_S = codesplit[1];
									$scope.version = asd2[4];
								}
								if(asd2.length == 4)
								{
									$scope.qType = asd2[0];
									$scope.coun_year_Code = asd2[1];
									$scope.runNo = asd2[2];
									$scope.version = asd2[3];
								}
							 
							 $("#draftbtn").addClass("active2");
							 $("#btn-discard").addClass("active2");
							 $("#btn-refresh").addClass("active2");
							 $("#btn-send").addClass("active2");
						}
							
				}
				if(action == '1')
				{
					
					if(Quote=='0')
					{
						
						
						
						 $scope.addQuotation = json['quatationform'][0];
						 $scope.qtnFullUnitData = json['quatationgrid'];
						 $scope.termData = json['quatationtermsgrid'];
						
						
						 $rootScope.quotationSeqNo = "";
						 $rootScope.quotationAction = "";
						 $rootScope.qtnType = "";
						 var validData = json['quatationform'][0];
						 
						 if(validData.caseRef == "" || validData.caseRef == undefined || validData.caseRef == "NA")
							{
								//alert("if" + 1);
								$scope.addQuotation.caseRef = "";
								//$scope.addQuotation.madatory = "1";
								//$("#Email").css("background-color", "#ffffff");
								$("#backtocasebtn").hide();
							}
							else
							{
								//alert("else" + 1);
								$scope.addQuotation.caseRef = validData.caseRef;
								//$scope.addQuotation.madatory = "0";
								//$("#Email").css("background-color", "#99ff99");
								
								$("#backtocasebtn").show();
							}
						 
						 $(".resetBgColr").css("background-color", "#99ff99"); 
						 //$("#Email").css("background-color", "#99ff99");
						 
						  
						   if(validData.emailAddr == "" || validData.emailAddr == undefined || validData.emailAddr == "NA")
							{
								//alert("if");
								$scope.addQuotation.emailAddr = "";
								//$scope.addQuotation.madatory = "1";
								$("#Email").css("background-color", "#ffffff");
							}
							else
							{
								//alert("else");
								$scope.addQuotation.emailAddr = validData.emailAddr;
								//$scope.addQuotation.madatory = "0";
								$("#Email").css("background-color", "#99ff99");
							}
						 
						 var departmentSplit = json['quatationform'][0].assigned;
						 var departmentSales = [];
						 if(departmentSplit == undefined || departmentSplit == "" || departmentSplit == "NA")
						 {
							 //alert("if");
							 $('#picturegallery1').val("['']").trigger('chosen:updated');
							 $("#picturegallery1").css("background-color", "#ffff7f");
						 }
						 else
						 {
							 //alert(departmentSplit.length + " " + " else ");
							 for (var s = 0; s < departmentSplit.length; s++) {
					
										departmentSales.push(departmentSplit[s]);
										//alert("accessoriesSales"+accessoriesSales);
							}
							 $('#picturegallery1').val(departmentSales).trigger('chosen:updated');
											$scope.addQuotation.assigned = departmentSales;
											$("#picturegallery1").css("background-color", "#99ff99");
						 }
						 
						 $scope.$apply();
							//alert("if");
							if(asd2.length == 5)
							{
								$scope.qType = asd2[0];
								$scope.coun_year_Code = asd2[1];
								$scope.runNo = asd2[2];
								var codesplit = asd2[3].split("/");
								$scope.custD_N = codesplit[0];
								$scope.custD_S = codesplit[1];
								$scope.version = asd2[4];
							}
							if(asd2.length == 4)
							{
								$scope.qType = asd2[0];
								$scope.coun_year_Code = asd2[1];
								$scope.runNo = asd2[2];
								$scope.version = asd2[3];
							}
						 
						     $("#draftbtn").addClass("active2");
							 $("#btn-discard").addClass("active2");
							 $("#btn-refresh").addClass("active2");
							 $("#btn-send").removeClass("active2");
					}	
				}
				if(action == '100')
				{
					
					if(Quote=='0')
					{
						
						
						
						 $scope.addQuotation = json['quatationform'][0];
						 $scope.qtnFullUnitData = json['quatationgrid'];
						 $scope.termData = json['quatationtermsgrid'];
						
						
						 $rootScope.quotationSeqNo = "";
						 $rootScope.quotationAction = "";
						 $rootScope.qtnType = "";
						 
						  var validData = json['quatationform'][0];
						 
						 if(validData.caseRef == "" || validData.caseRef == undefined || validData.caseRef == "NA")
							{
								//alert("if" + 100);
								$scope.addQuotation.caseRef = "";
								//$scope.addQuotation.madatory = "1";
								//$("#Email").css("background-color", "#ffffff");
								
								$("#backtocasebtn").hide();
							}
							else
							{
								//alert("else" + 100);
								$scope.addQuotation.caseRef = validData.caseRef;
								//$scope.addQuotation.madatory = "0";
								//$("#Email").css("background-color", "#99ff99");
								$("#backtocasebtn").show();
							}
						 
						$(".resetBgColr").css("background-color", "#99ff99"); 
						//$("#Email").css("background-color", "#99ff99");
						 
						  
						   if(validData.emailAddr == "" || validData.emailAddr == undefined || validData.emailAddr == "NA")
							{
								//alert("if");
								$scope.addQuotation.emailAddr = "";
								//$scope.addQuotation.madatory = "1";
								$("#Email").css("background-color", "#ffffff");
							}
							else
							{
								//alert("else");
								$scope.addQuotation.emailAddr = validData.emailAddr;
								//$scope.addQuotation.madatory = "0";
								$("#Email").css("background-color", "#99ff99");
							}
						 
						 var departmentSplit = json['quatationform'][0].assigned;
						 var departmentSales = [];
						 if(departmentSplit == undefined || departmentSplit == "" || departmentSplit == "NA")
						 {
							 //alert("if");
							 $('#picturegallery1').val("['']").trigger('chosen:updated');
							 $("#picturegallery1").css("background-color", "#ffff7f");
						 }
						 else
						 {
							 //alert(departmentSplit.length + " " + " else ");
							 for (var s = 0; s < departmentSplit.length; s++) {
					
										departmentSales.push(departmentSplit[s]);
										//alert("accessoriesSales"+accessoriesSales);
							}
							 $('#picturegallery1').val(departmentSales).trigger('chosen:updated');
											$scope.addQuotation.assigned = departmentSales;
											$("#picturegallery1").css("background-color", "#99ff99");
						 }
						 
						 $scope.$apply();
							//alert("if");
							if(asd2.length == 5)
							{
								$scope.qType = asd2[0];
								$scope.coun_year_Code = asd2[1];
								$scope.runNo = asd2[2];
								var codesplit = asd2[3].split("/");
								$scope.custD_N = codesplit[0];
								$scope.custD_S = codesplit[1];
								$scope.version = asd2[4];
							}
							if(asd2.length == 4)
							{
								$scope.qType = asd2[0];
								$scope.coun_year_Code = asd2[1];
								$scope.runNo = asd2[2];
								$scope.version = asd2[3];
							}
						 
						     $("#draftbtn").removeClass("active2");
							 $("#btn-discard").removeClass("active2");
							 $("#btn-refresh").removeClass("active2");
							 $("#btn-send").removeClass("active2");
					}	
				}

				if(action == '0')
				{
					
					
						//	$("#loading").hide(); 
							/*$("#btn-send").addClass("active2");
							$("#btn-savePro").addClass("active2");
							$("#btn-saveSpare").addClass("active2");
							$("#btn-saveServ").addClass("active2");*/
							if(Quote=='1')
							{
								//alert("0");
								$scope.isDisabled = true;
								 $scope.addQuotation = json['quatationform'][0];
								 $scope.projectUnitData = json['quatationgrid'];
								 $scope.termData = json['quatationtermsgrid'];
								 
								$(".resetBgColr").css("background-color", "#99ff99"); 
								//$("#Email").css("background-color", "#99ff99");
								 
								   var validData = json['quatationform'][0];
								   if(validData.emailAddr == "" || validData.emailAddr == undefined || validData.emailAddr == "NA")
									{
										//alert("if");
										$scope.addQuotation.emailAddr = "";
										//$scope.addQuotation.madatory = "1";
										$("#Email").css("background-color", "#ffffff");
									}
									else
									{
										//alert("else");
										$scope.addQuotation.emailAddr = validData.emailAddr;
										//$scope.addQuotation.madatory = "0";
										$("#Email").css("background-color", "#99ff99");
									}
									if(validData.caseRef == "" || validData.caseRef == undefined || validData.caseRef == "NA")
									{
										//alert("if" + 0);
										$scope.addQuotation.caseRef = "";
										//$scope.addQuotation.madatory = "1";
										//$("#Email").css("background-color", "#ffffff");
										$("#backtocasebtn").hide();
									}
									else
									{
										//alert("else" + 0);
										$scope.addQuotation.caseRef = validData.caseRef;
										//$scope.addQuotation.madatory = "0";
										//$("#Email").css("background-color", "#99ff99");
										
										$("#backtocasebtn").show();
									}
								 
								var departmentSplit = json['quatationform'][0].assigned;
								 var departmentSales = [];
								 if(departmentSplit == undefined || departmentSplit == "" || departmentSplit == "NA")
								 {
									 //alert("if");
									 $('#picturegallery1').val("['']").trigger('chosen:updated');
									 $("#picturegallery1").css("background-color", "#ffff7f");
								 }
								 else
								 {
									 //alert(departmentSplit.length + " " + " else ");
									 for (var s = 0; s < departmentSplit.length; s++) {
							
												departmentSales.push(departmentSplit[s]);
												//alert("accessoriesSales"+accessoriesSales);
									}
									 $('#picturegallery1').val(departmentSales).trigger('chosen:updated');
													$scope.addQuotation.assigned = departmentSales;
													$("#picturegallery1").css("background-color", "#99ff99");
								 }
								 if(asd2.length == 5)
									{
										$scope.qType = asd2[0];
										$scope.coun_year_Code = asd2[1];
										$scope.runNo = asd2[2];
										var codesplit = asd2[3].split("/");
										$scope.custD_N = codesplit[0];
										$scope.custD_S = codesplit[1];
										$scope.version = asd2[4];
									}
									if(asd2.length == 4)
									{
										$scope.qType = asd2[0];
										$scope.coun_year_Code = asd2[1];
										$scope.runNo = asd2[2];
										$scope.version = asd2[3];
									}
									var getImage = json['quatationform'][0].imagepath;
								  // alert(getImage);
									 if(getImage!=null)
									   {
										   //alert(getImage + " " + 1);
										   var imgPrew = getImage.trim();
										   if(imgPrew==null || imgPrew=="" )
										   {
											   //alert(getImage + " " + 2);
											 
											  $scope.stepsModel = [];
											  $scope.$apply();
											  //$scope.dummyPhoto="";
					                          //$('#dummyPhoto').trigger('blur');
										   }
										   else
										   {
											   //alert(getImage + " " + 3);
											   $scope.stepsModel = getImage.split(',');
											   $scope.$apply();
											   
										   }
									   }
									   else
									   {
										   //alert(getImage + " " + 4);
										    $scope.stepsModel = [];
										    $scope.$apply();
										 
									   }
								 $rootScope.quotationSeqNo = "";
								 $rootScope.quotationAction = "";
								 $rootScope.qtnType = "";
								 
								  $scope.$apply();
								
									
									 $("#btn-draftPro").addClass("active2");
									 $("#btn-discardPro").addClass("active2");
									 $("#btn-refreshPro").addClass("active2");
									 $("#btn-savePro").addClass("active2");
									 
							}
							
				}
				if(action =='1')
				{
					
					if(Quote=='1')
							{
								//alert("100");
								//$scope.isDisabled = true;
								 $scope.addQuotation = json['quatationform'][0];
								 $scope.projectUnitData = json['quatationgrid'];
								 $scope.termData = json['quatationtermsgrid'];
								 
								$(".resetBgColr").css("background-color", "#99ff99"); 
								//$("#Email").css("background-color", "#99ff99");
								 
								   var validData = json['quatationform'][0];
								   if(validData.emailAddr == "" || validData.emailAddr == undefined || validData.emailAddr == "NA")
									{
										//alert("if");
										$scope.addQuotation.emailAddr = "";
										//$scope.addQuotation.madatory = "1";
										$("#Email").css("background-color", "#ffffff");
									}
									else
									{
										//alert("else");
										$scope.addQuotation.emailAddr = validData.emailAddr;
										//$scope.addQuotation.madatory = "0";
										$("#Email").css("background-color", "#99ff99");
									}
									if(validData.caseRef == "" || validData.caseRef == undefined || validData.caseRef == "NA")
									{
										//alert("if" + 0);
										$scope.addQuotation.caseRef = "";
										//$scope.addQuotation.madatory = "1";
										//$("#Email").css("background-color", "#ffffff");
										$("#backtocasebtn").hide();
									}
									else
									{
										//alert("else" + 0);
										$scope.addQuotation.caseRef = validData.caseRef;
										//$scope.addQuotation.madatory = "0";
										//$("#Email").css("background-color", "#99ff99");
										
										$("#backtocasebtn").show();
									}
								 
								 var departmentSplit = json['quatationform'][0].assigned;
								 var departmentSales = [];
								 if(departmentSplit == undefined || departmentSplit == "" || departmentSplit == "NA")
								 {
									 //alert("if");
									 $('#picturegallery1').val("['']").trigger('chosen:updated');
									 $("#picturegallery1").css("background-color", "#ffff7f");
								 }
								 else
								 {
									 //alert(departmentSplit.length + " " + " else ");
									 for (var s = 0; s < departmentSplit.length; s++) {
							
												departmentSales.push(departmentSplit[s]);
												//alert("accessoriesSales"+accessoriesSales);
									}
									 $('#picturegallery1').val(departmentSales).trigger('chosen:updated');
													$scope.addQuotation.assigned = departmentSales;
													$("#picturegallery1").css("background-color", "#99ff99");
								 }
									 if(asd2.length == 5)
									{
										$scope.qType = asd2[0];
										$scope.coun_year_Code = asd2[1];
										$scope.runNo = asd2[2];
										var codesplit = asd2[3].split("/");
										$scope.custD_N = codesplit[0];
										$scope.custD_S = codesplit[1];
										$scope.version = asd2[4];
									}
									if(asd2.length == 4)
									{
										$scope.qType = asd2[0];
										$scope.coun_year_Code = asd2[1];
										$scope.runNo = asd2[2];
										$scope.version = asd2[3];
									}
									var getImage = json['quatationform'][0].imagepath;
								  // alert(getImage);
									 if(getImage!=null)
									   {
										   //alert(getImage + " " + 1);
										   var imgPrew = getImage.trim();
										   if(imgPrew==null || imgPrew=="" )
										   {
											   //alert(getImage + " " + 2);
											 
											  $scope.stepsModel = [];
											  $scope.$apply();
											  //$scope.dummyPhoto="";
					                          //$('#dummyPhoto').trigger('blur');
										   }
										   else
										   {
											   //alert(getImage + " " + 3);
											   $scope.stepsModel = getImage.split(',');
											   $scope.$apply();
											   
										   }
									   }
									   else
									   {
										   //alert(getImage + " " + 4);
										    $scope.stepsModel = [];
										    $scope.$apply();
										 
									   }
								 $rootScope.quotationSeqNo = "";
								 $rootScope.quotationAction = "";
								 $rootScope.qtnType = "";
								 
								  $scope.$apply();
								
									
									 $("#btn-draftPro").addClass("active2");
									 $("#btn-discardPro").addClass("active2");
									 $("#btn-refreshPro").addClass("active2");
									 $("#btn-savePro").removeClass("active2");
									 
							}	
				}
				if(action == '100')
				{
					
					if(Quote=='1')
							{
								//alert("1");
								//$scope.isDisabled = true;
								 $scope.addQuotation = json['quatationform'][0];
								 $scope.projectUnitData = json['quatationgrid'];
								 $scope.termData = json['quatationtermsgrid'];
								 
								$(".resetBgColr").css("background-color", "#99ff99"); 
								//$("#Email").css("background-color", "#99ff99");
								 
								   var validData = json['quatationform'][0];
								   if(validData.emailAddr == "" || validData.emailAddr == undefined || validData.emailAddr == "NA")
									{
										//alert("if");
										$scope.addQuotation.emailAddr = "";
										//$scope.addQuotation.madatory = "1";
										$("#Email").css("background-color", "#ffffff");
									}
									else
									{
										//alert("else");
										$scope.addQuotation.emailAddr = validData.emailAddr;
										//$scope.addQuotation.madatory = "0";
										$("#Email").css("background-color", "#99ff99");
									}
									if(validData.caseRef == "" || validData.caseRef == undefined || validData.caseRef == "NA")
									{
										//alert("if" + 0);
										$scope.addQuotation.caseRef = "";
										//$scope.addQuotation.madatory = "1";
										//$("#Email").css("background-color", "#ffffff");
										$("#backtocasebtn").hide();
									}
									else
									{
										//alert("else" + 0);
										$scope.addQuotation.caseRef = validData.caseRef;
										//$scope.addQuotation.madatory = "0";
										//$("#Email").css("background-color", "#99ff99");
										
										$("#backtocasebtn").show();
									}
								 
								 var departmentSplit = json['quatationform'][0].assigned;
								 var departmentSales = [];
								 if(departmentSplit == undefined || departmentSplit == "" || departmentSplit == "NA")
								 {
									 //alert("if");
									 $('#picturegallery1').val("['']").trigger('chosen:updated');
									 $("#picturegallery1").css("background-color", "#ffff7f");
								 }
								 else
								 {
									 //alert(departmentSplit.length + " " + " else ");
									 for (var s = 0; s < departmentSplit.length; s++) {
							
												departmentSales.push(departmentSplit[s]);
												//alert("accessoriesSales"+accessoriesSales);
									}
									 $('#picturegallery1').val(departmentSales).trigger('chosen:updated');
													$scope.addQuotation.assigned = departmentSales;
													$("#picturegallery1").css("background-color", "#99ff99");
								 }
									
									var getImage = json['quatationform'][0].imagepath;
								  // alert(getImage);
									 if(getImage!=null)
									   {
										   //alert(getImage + " " + 1);
										   var imgPrew = getImage.trim();
										   if(imgPrew==null || imgPrew=="" )
										   {
											   //alert(getImage + " " + 2);
											 
											  $scope.stepsModel = [];
											  $scope.$apply();
											  //$scope.dummyPhoto="";
					                          //$('#dummyPhoto').trigger('blur');
										   }
										   else
										   {
											   //alert(getImage + " " + 3);
											   $scope.stepsModel = getImage.split(',');
											   $scope.$apply();
											   
										   }
									   }
									   else
									   {
										   //alert(getImage + " " + 4);
										    $scope.stepsModel = [];
										    $scope.$apply();
										 
									   }
								 $rootScope.quotationSeqNo = "";
								 $rootScope.quotationAction = "";
								 $rootScope.qtnType = "";
								 
								  $scope.$apply();
								 if(asd2.length == 5)
									{
										$scope.qType = asd2[0];
										$scope.coun_year_Code = asd2[1];
										$scope.runNo = asd2[2];
										var codesplit = asd2[3].split("/");
										$scope.custD_N = codesplit[0];
										$scope.custD_S = codesplit[1];
										$scope.version = asd2[4];
									}
									if(asd2.length == 4)
									{
										$scope.qType = asd2[0];
										$scope.coun_year_Code = asd2[1];
										$scope.runNo = asd2[2];
										$scope.version = asd2[3];
									}
									
									 $("#btn-draftPro").removeClass("active2");
									 $("#btn-discardPro").removeClass("active2");
									 $("#btn-refreshPro").removeClass("active2");
									 $("#btn-savePro").removeClass("active2");
									 
							}	
				}
				
				if(action == '0')
				{
					
					if(Quote=='2')
					{
						//alert(2); 
						//alert(JSON.stringify(json['quatationgrid']));
						$scope.isDisabled = true;
						 $scope.addQuotation = json['quatationform'][0];
						 $scope.sparePartData = json['quatationgrid'];
						 $scope.termData = json['quatationtermsgrid'];
						 
						$(".resetBgColr").css("background-color", "#99ff99"); 
						//$("#Email").css("background-color", "#99ff99");
						 
						   var validData = json['quatationform'][0];
						   if(validData.emailAddr == "" || validData.emailAddr == undefined || validData.emailAddr == "NA")
							{
								//alert("if");
								$scope.addQuotation.emailAddr = "";
								//$scope.addQuotation.madatory = "1";
								$("#Email").css("background-color", "#ffffff");
							}
							else
							{
								//alert("else");
								$scope.addQuotation.emailAddr = validData.emailAddr;
								//$scope.addQuotation.madatory = "0";
								$("#Email").css("background-color", "#99ff99");
							}
							if(validData.caseRef == "" || validData.caseRef == undefined || validData.caseRef == "NA")
							{
								//alert("if" + 0);
								$scope.addQuotation.caseRef = "";
								//$scope.addQuotation.madatory = "1";
								//$("#Email").css("background-color", "#ffffff");
								$("#backtocasebtn").hide();
							}
							else
							{
								//alert("else" + 0);
								$scope.addQuotation.caseRef = validData.caseRef;
								//$scope.addQuotation.madatory = "0";
								//$("#Email").css("background-color", "#99ff99");
								
								$("#backtocasebtn").show();
							}
						
						 $rootScope.quotationSeqNo = "";
						 $rootScope.quotationAction = "";
						 $rootScope.qtnType = "";
						 
						 var departmentSplit = json['quatationform'][0].assigned;
						 var departmentSales = [];
						 if(departmentSplit == undefined || departmentSplit == "" || departmentSplit == "NA")
						 {
							 //alert("if");
							 $('#picturegallery1').val("['']").trigger('chosen:updated');
							 $("#picturegallery1").css("background-color", "#ffff7f");
						 }
						 else
						 {
							 //alert(departmentSplit.length + " " + " else ");
							 for (var s = 0; s < departmentSplit.length; s++) {
					
										departmentSales.push(departmentSplit[s]);
										//alert("accessoriesSales"+accessoriesSales);
							}
							 $('#picturegallery1').val(departmentSales).trigger('chosen:updated');
											$scope.addQuotation.assigned = departmentSales;
											$("#picturegallery1").css("background-color", "#99ff99");
						 }
						 
						  $scope.$apply();
						 if(asd2.length == 5)
							{
								$scope.qType = asd2[0];
								$scope.coun_year_Code = asd2[1];
								$scope.runNo = asd2[2];
								var codesplit = asd2[3].split("/");
								$scope.custD_N = codesplit[0];
								$scope.custD_S = codesplit[1];
								$scope.version = asd2[4];
							}
							if(asd2.length == 4)
							{
								$scope.qType = asd2[0];
								$scope.coun_year_Code = asd2[1];
								$scope.runNo = asd2[2];
								$scope.version = asd2[3];
							}
							
							 $("#btn-draftSpare").addClass("active2");
							 $("#btn-discardSpare").addClass("active2");
							 $("#btn-refreshSpare").addClass("active2");
							 $("#btn-saveSpare").addClass("active2");
					}
							
				}
				if(action == '1')
				{
					
					if(Quote=='2')
					{
						//alert(2); 
						//alert(JSON.stringify(json['quatationgrid']));
						
						 $scope.addQuotation = json['quatationform'][0];
						 $scope.sparePartData = json['quatationgrid'];
						 $scope.termData = json['quatationtermsgrid'];
						
						 $rootScope.quotationSeqNo = "";
						 $rootScope.quotationAction = "";
						 $rootScope.qtnType = "";
						 
						$(".resetBgColr").css("background-color", "#99ff99"); 
						//$("#Email").css("background-color", "#99ff99");
						 
						   var validData = json['quatationform'][0];
						   if(validData.emailAddr == "" || validData.emailAddr == undefined || validData.emailAddr == "NA")
							{
								//alert("if");
								$scope.addQuotation.emailAddr = "";
								//$scope.addQuotation.madatory = "1";
								$("#Email").css("background-color", "#ffffff");
							}
							else
							{
								//alert("else");
								$scope.addQuotation.emailAddr = validData.emailAddr;
								//$scope.addQuotation.madatory = "0";
								$("#Email").css("background-color", "#99ff99");
							}
							if(validData.caseRef == "" || validData.caseRef == undefined || validData.caseRef == "NA")
							{
								//alert("if" + 0);
								$scope.addQuotation.caseRef = "";
								//$scope.addQuotation.madatory = "1";
								//$("#Email").css("background-color", "#ffffff");
								$("#backtocasebtn").hide();
							}
							else
							{
								//alert("else" + 0);
								$scope.addQuotation.caseRef = validData.caseRef;
								//$scope.addQuotation.madatory = "0";
								//$("#Email").css("background-color", "#99ff99");
								
								$("#backtocasebtn").show();
							}
						 
						 var departmentSplit = json['quatationform'][0].assigned;
						 var departmentSales = [];
						 if(departmentSplit == undefined || departmentSplit == "" || departmentSplit == "NA")
						 {
							 //alert("if");
							 $('#picturegallery1').val("['']").trigger('chosen:updated');
							 $("#picturegallery1").css("background-color", "#ffff7f");
						 }
						 else
						 {
							 //alert(departmentSplit.length + " " + " else ");
							 for (var s = 0; s < departmentSplit.length; s++) {
					
										departmentSales.push(departmentSplit[s]);
										//alert("accessoriesSales"+accessoriesSales);
							}
							 $('#picturegallery1').val(departmentSales).trigger('chosen:updated');
											$scope.addQuotation.assigned = departmentSales;
											$("#picturegallery1").css("background-color", "#99ff99");
						 }
						 
						  $scope.$apply();
						 if(asd2.length == 5)
							{
								$scope.qType = asd2[0];
								$scope.coun_year_Code = asd2[1];
								$scope.runNo = asd2[2];
								var codesplit = asd2[3].split("/");
								$scope.custD_N = codesplit[0];
								$scope.custD_S = codesplit[1];
								$scope.version = asd2[4];
							}
							if(asd2.length == 4)
							{
								$scope.qType = asd2[0];
								$scope.coun_year_Code = asd2[1];
								$scope.runNo = asd2[2];
								$scope.version = asd2[3];
							}
							
							 $("#btn-draftSpare").addClass("active2");
							 $("#btn-discardSpare").addClass("active2");
							 $("#btn-refreshSpare").addClass("active2");
							 $("#btn-saveSpare").removeClass("active2");
					}	
				}
				if(action == '100')
				{
					
					if(Quote=='2')
					{
						//alert(2); 
						//alert(JSON.stringify(json['quatationgrid']));
						
						 $scope.addQuotation = json['quatationform'][0];
						 $scope.sparePartData = json['quatationgrid'];
						 $scope.termData = json['quatationtermsgrid'];
						
						 $rootScope.quotationSeqNo = "";
						 $rootScope.quotationAction = "";
						 $rootScope.qtnType = "";
						 
						 $(".resetBgColr").css("background-color", "#99ff99"); 
						 //$("#Email").css("background-color", "#99ff99");
						 
						   var validData = json['quatationform'][0];
						   if(validData.emailAddr == "" || validData.emailAddr == undefined || validData.emailAddr == "NA")
							{
								//alert("if");
								$scope.addQuotation.emailAddr = "";
								//$scope.addQuotation.madatory = "1";
								$("#Email").css("background-color", "#ffffff");
							}
							else
							{
								//alert("else");
								$scope.addQuotation.emailAddr = validData.emailAddr;
								//$scope.addQuotation.madatory = "0";
								$("#Email").css("background-color", "#99ff99");
							}
							if(validData.caseRef == "" || validData.caseRef == undefined || validData.caseRef == "NA")
							{
								//alert("if" + 0);
								$scope.addQuotation.caseRef = "";
								//$scope.addQuotation.madatory = "1";
								//$("#Email").css("background-color", "#ffffff");
								$("#backtocasebtn").hide();
							}
							else
							{
								//alert("else" + 0);
								$scope.addQuotation.caseRef = validData.caseRef;
								//$scope.addQuotation.madatory = "0";
								//$("#Email").css("background-color", "#99ff99");
								
								$("#backtocasebtn").show();
							}
						 
						 var departmentSplit = json['quatationform'][0].assigned;
						 var departmentSales = [];
						 if(departmentSplit == undefined || departmentSplit == "" || departmentSplit == "NA")
						 {
							 //alert("if");
							 $('#picturegallery1').val("['']").trigger('chosen:updated');
							 $("#picturegallery1").css("background-color", "#ffff7f");
						 }
						 else
						 {
							 //alert(departmentSplit.length + " " + " else ");
							 for (var s = 0; s < departmentSplit.length; s++) {
					
										departmentSales.push(departmentSplit[s]);
										//alert("accessoriesSales"+accessoriesSales);
							}
							 $('#picturegallery1').val(departmentSales).trigger('chosen:updated');
											$scope.addQuotation.assigned = departmentSales;
											$("#picturegallery1").css("background-color", "#99ff99");
						 }
						  $scope.$apply();
						 if(asd2.length == 5)
							{
								$scope.qType = asd2[0];
								$scope.coun_year_Code = asd2[1];
								$scope.runNo = asd2[2];
								var codesplit = asd2[3].split("/");
								$scope.custD_N = codesplit[0];
								$scope.custD_S = codesplit[1];
								$scope.version = asd2[4];
							}
							if(asd2.length == 4)
							{
								$scope.qType = asd2[0];
								$scope.coun_year_Code = asd2[1];
								$scope.runNo = asd2[2];
								$scope.version = asd2[3];
							}
							
							 $("#btn-draftSpare").removeClass("active2");
							 $("#btn-discardSpare").removeClass("active2");
							 $("#btn-refreshSpare").removeClass("active2");
							 $("#btn-saveSpare").removeClass("active2");
					}	
				}
				if(action == '0')
				{
					
					if(Quote=='3')
					{
						//alert(3);
						$scope.isDisabled = true;
						 $scope.addQuotation = json['quatationform'][0];
						 $scope.servicPartData = json['quatationgrid'];
						 $scope.termData = json['quatationtermsgrid'];
						
						 $rootScope.quotationSeqNo = "";
						 $rootScope.quotationAction = "";
						 $rootScope.qtnType = "";
						 
						$(".resetBgColr").css("background-color", "#99ff99"); 
						//$("#Email").css("background-color", "#99ff99");
						 
						   var validData = json['quatationform'][0];
						   if(validData.emailAddr == "" || validData.emailAddr == undefined || validData.emailAddr == "NA")
							{
								//alert("if");
								$scope.addQuotation.emailAddr = "";
								//$scope.addQuotation.madatory = "1";
								$("#Email").css("background-color", "#ffffff");
							}
							else
							{
								//alert("else");
								$scope.addQuotation.emailAddr = validData.emailAddr;
								//$scope.addQuotation.madatory = "0";
								$("#Email").css("background-color", "#99ff99");
							}
							//$("#backtocasebtn").hide();
							if(validData.caseRef == "" || validData.caseRef == undefined || validData.caseRef == "NA")
							{
								//alert("if" + 0);
								$scope.addQuotation.caseRef = "";
								//$scope.addQuotation.madatory = "1";
								//$("#Email").css("background-color", "#ffffff");
								$("#backtocasebtn").hide();
							}
							else
							{
								//alert("else" + 0);
								$scope.addQuotation.caseRef = validData.caseRef;
								//$scope.addQuotation.madatory = "0";
								//$("#Email").css("background-color", "#99ff99");
								
								$("#backtocasebtn").show();
							}
						 
						 var departmentSplit = json['quatationform'][0].assigned;
						 var departmentSales = [];
						 if(departmentSplit == undefined || departmentSplit == "" || departmentSplit == "NA")
						 {
							 $('#picturegallery1').val("['']").trigger('chosen:updated');
							 $("#picturegallery1").css("background-color", "#ffff7f");
						 }
						 else
						 {
							 for (var s = 0; s < departmentSplit.length; s++) {
					
										departmentSales.push(departmentSplit[s]);
										//alert("accessoriesSales"+accessoriesSales);
							}
							 $('#picturegallery1').val(departmentSales).trigger('chosen:updated');
											$scope.addQuotation.assigned = departmentSales;
											$("#picturegallery1").css("background-color", "#99ff99");
						 }
						 
						  $scope.$apply();
						 if(asd2.length == 5)
							{
								$scope.qType = asd2[0];
								$scope.coun_year_Code = asd2[1];
								$scope.runNo = asd2[2];
								var codesplit = asd2[3].split("/");
								$scope.custD_N = codesplit[0];
								$scope.custD_S = codesplit[1];
								$scope.version = asd2[4];
							}
							if(asd2.length == 4)
							{
								$scope.qType = asd2[0];
								$scope.coun_year_Code = asd2[1];
								$scope.runNo = asd2[2];
								$scope.version = asd2[3];
							}
							
							 $("#btn-draftServ").addClass("active2");
							 $("#btn-discardServ").addClass("active2");
							 $("#btn-refreshServ").addClass("active2");
							 $("#btn-saveServ").addClass("active2");
					}
							
				}
				if(action == '1')
				{
					
					if(Quote=='3')
					{
						//alert(3);
						
						 $scope.addQuotation = json['quatationform'][0];
						 $scope.servicPartData = json['quatationgrid'];
						 $scope.termData = json['quatationtermsgrid'];
						
						 $rootScope.quotationSeqNo = "";
						 $rootScope.quotationAction = "";
						 $rootScope.qtnType = "";
						 
						$(".resetBgColr").css("background-color", "#99ff99"); 
						//$("#Email").css("background-color", "#99ff99");
						 
						   var validData = json['quatationform'][0];
						   if(validData.emailAddr == "" || validData.emailAddr == undefined || validData.emailAddr == "NA")
							{
								//alert("if");
								$scope.addQuotation.emailAddr = "";
								//$scope.addQuotation.madatory = "1";
								$("#Email").css("background-color", "#ffffff");
							}
							else
							{
								//alert("else");
								$scope.addQuotation.emailAddr = validData.emailAddr;
								//$scope.addQuotation.madatory = "0";
								$("#Email").css("background-color", "#99ff99");
							}
							//$("#backtocasebtn").hide();
							if(validData.caseRef == "" || validData.caseRef == undefined || validData.caseRef == "NA")
							{
								//alert("if" + 0);
								$scope.addQuotation.caseRef = "";
								//$scope.addQuotation.madatory = "1";
								//$("#Email").css("background-color", "#ffffff");
								$("#backtocasebtn").hide();
							}
							else
							{
								//alert("else" + 0);
								$scope.addQuotation.caseRef = validData.caseRef;
								//$scope.addQuotation.madatory = "0";
								//$("#Email").css("background-color", "#99ff99");
								
								$("#backtocasebtn").show();
							}
						 
						var departmentSplit = json['quatationform'][0].assigned;
						 var departmentSales = [];
						 if(departmentSplit == undefined || departmentSplit == "" || departmentSplit == "NA")
						 {
							 $('#picturegallery1').val("['']").trigger('chosen:updated');
							 $("#picturegallery1").css("background-color", "#ffff7f");
						 }
						 else
						 {
							 for (var s = 0; s < departmentSplit.length; s++) {
					
										departmentSales.push(departmentSplit[s]);
										//alert("accessoriesSales"+accessoriesSales);
							}
							 $('#picturegallery1').val(departmentSales).trigger('chosen:updated');
											$scope.addQuotation.assigned = departmentSales;
											$("#picturegallery1").css("background-color", "#99ff99");
						 }
					   
					  
						
						 
						  $scope.$apply();
						 if(asd2.length == 5)
							{
								$scope.qType = asd2[0];
								$scope.coun_year_Code = asd2[1];
								$scope.runNo = asd2[2];
								var codesplit = asd2[3].split("/");
								$scope.custD_N = codesplit[0];
								$scope.custD_S = codesplit[1];
								$scope.version = asd2[4];
							}
							if(asd2.length == 4)
							{
								$scope.qType = asd2[0];
								$scope.coun_year_Code = asd2[1];
								$scope.runNo = asd2[2];
								$scope.version = asd2[3];
							}
							
							 $("#btn-draftServ").addClass("active2");
							 $("#btn-discardServ").addClass("active2");
							 $("#btn-refreshServ").addClass("active2");
							 $("#btn-saveServ").removeClass("active2");
					}	
				}
				if(action == '100')
				{
					
					if(Quote=='3')
					{
						//alert(3);
						
						 $scope.addQuotation = json['quatationform'][0];
						 $scope.servicPartData = json['quatationgrid'];
						 $scope.termData = json['quatationtermsgrid'];
						
						 $rootScope.quotationSeqNo = "";
						 $rootScope.quotationAction = "";
						 $rootScope.qtnType = "";
						 
						$(".resetBgColr").css("background-color", "#99ff99"); 
						//$("#Email").css("background-color", "#99ff99");
						 
						   var validData = json['quatationform'][0];
						   if(validData.emailAddr == "" || validData.emailAddr == undefined || validData.emailAddr == "NA")
							{
								//alert("if");
								$scope.addQuotation.emailAddr = "";
								//$scope.addQuotation.madatory = "1";
								$("#Email").css("background-color", "#ffffff");
							}
							else
							{
								//alert("else");
								$scope.addQuotation.emailAddr = validData.emailAddr;
								//$scope.addQuotation.madatory = "0";
								$("#Email").css("background-color", "#99ff99");
							}
							//$("#backtocasebtn").hide();
							if(validData.caseRef == "" || validData.caseRef == undefined || validData.caseRef == "NA")
							{
								//alert("if" + 0);
								$scope.addQuotation.caseRef = "";
								//$scope.addQuotation.madatory = "1";
								//$("#Email").css("background-color", "#ffffff");
								$("#backtocasebtn").hide();
							}
							else
							{
								//alert("else" + 0);
								$scope.addQuotation.caseRef = validData.caseRef;
								//$scope.addQuotation.madatory = "0";
								//$("#Email").css("background-color", "#99ff99");
								
								$("#backtocasebtn").show();
							}
						 
						 var departmentSplit = json['quatationform'][0].assigned;
						 var departmentSales = [];
						 if(departmentSplit == undefined || departmentSplit == "" || departmentSplit == "NA")
						 {
							 $('#picturegallery1').val("['']").trigger('chosen:updated');
							 $("#picturegallery1").css("background-color", "#ffff7f");
						 }
						 else
						 {
							 for (var s = 0; s < departmentSplit.length; s++) {
					
										departmentSales.push(departmentSplit[s]);
										//alert("accessoriesSales"+accessoriesSales);
							}
							 $('#picturegallery1').val(departmentSales).trigger('chosen:updated');
											$scope.addQuotation.assigned = departmentSales;
											$("#picturegallery1").css("background-color", "#99ff99");
						 }
						 
						  $scope.$apply();
						 if(asd2.length == 5)
							{
								$scope.qType = asd2[0];
								$scope.coun_year_Code = asd2[1];
								$scope.runNo = asd2[2];
								var codesplit = asd2[3].split("/");
								$scope.custD_N = codesplit[0];
								$scope.custD_S = codesplit[1];
								$scope.version = asd2[4];
							}
							if(asd2.length == 4)
							{
								$scope.qType = asd2[0];
								$scope.coun_year_Code = asd2[1];
								$scope.runNo = asd2[2];
								$scope.version = asd2[3];
							}
							
							$("#btn-draftServ").removeClass("active2");
							 $("#btn-discardServ").removeClass("active2");
							 $("#btn-refreshServ").removeClass("active2");
							 $("#btn-saveServ").removeClass("active2");
					}	
				}
				
				
				
				
				  $("#loading").hide(); 
			});
		}
		else //if(modetype === 'Copy')
		{
			//alert("else");
			$.post("getSavedQuatationDataOnQuatationNumberCopy.do",{quationnumber:$rootScope.quotationSeqNo,action:$rootScope.quotationAction,quotationType:$rootScope.qtnType},function(json)
		{
			//alert($rootScope.quotationAction);
			
						
			
			    
			//$rootScope.qtnType = qtnType;
			var Quote = $rootScope.qtnType;
			var asd = json['quatationform'][0].qtnNo;
			var asd2 = asd.split("-");
				
				if(Quote=='0')
				{
					//alert(0);
					
					 
					 $scope.addQuotation = json['quatationform'][0];
					 $scope.qtnFullUnitData = json['quatationgrid'];
					 $scope.termData = json['quatationtermsgrid'];
					
					 $rootScope.quotationSeqNo = "";
					 $rootScope.quotationAction = "";
					 $rootScope.qtnType = "";
					 
					 $(".resetBgColr").css("background-color", "#99ff99"); 
					 //$("#Email").css("background-color", "#99ff99");
					 
					   var validData = json['quatationform'][0];
						   if(validData.emailAddr == "" || validData.emailAddr == undefined || validData.emailAddr == "NA")
							{
								//alert("if");
								$scope.addQuotation.emailAddr = "";
								//$scope.addQuotation.madatory = "1";
								$("#Email").css("background-color", "#ffffff");
							}
							else
							{
								//alert("else");
								$scope.addQuotation.emailAddr = validData.emailAddr;
								//$scope.addQuotation.madatory = "0";
								$("#Email").css("background-color", "#99ff99");
							}
							if(validData.caseRef == "" || validData.caseRef == undefined || validData.caseRef == "NA")
							{
								//alert("if" + 0);
								$scope.addQuotation.caseRef = "";
								//$scope.addQuotation.madatory = "1";
								//$("#Email").css("background-color", "#ffffff");
								$("#backtocasebtn").hide();
							}
							else
							{
								//alert("else" + 0);
								$scope.addQuotation.caseRef = validData.caseRef;
								//$scope.addQuotation.madatory = "0";
								//$("#Email").css("background-color", "#99ff99");
								
								$("#backtocasebtn").show();
							}
					 
					 var departmentSplit = json['quatationform'][0].assigned;
						 var departmentSales = [];
						 if(departmentSplit == undefined || departmentSplit == "" || departmentSplit == "NA")
						 {
							 //alert("if");
							 $('#picturegallery1').val("['']").trigger('chosen:updated');
							 $("#picturegallery1").css("background-color", "#ffff7f");
						 }
						 else
						 {
							 //alert(departmentSplit.length + " " + " else ");
							 for (var s = 0; s < departmentSplit.length; s++) {
					
										departmentSales.push(departmentSplit[s]);
										//alert("accessoriesSales"+accessoriesSales);
							}
							 $('#picturegallery1').val(departmentSales).trigger('chosen:updated');
											$scope.addQuotation.assigned = departmentSales;
											$("#picturegallery1").css("background-color", "#99ff99");
						 }
					 
					  $scope.$apply();
					 if(asd2.length == 5)
						{
							$scope.qType = asd2[0];
							$scope.coun_year_Code = asd2[1];
							$scope.runNo = asd2[2];
							var codesplit = asd2[3].split("/");
							$scope.custD_N = codesplit[0];
							$scope.custD_S = codesplit[1];
							$scope.version = asd2[4];
						}
						if(asd2.length == 4)
						{
							$scope.qType = asd2[0];
							$scope.coun_year_Code = asd2[1];
							$scope.runNo = asd2[2];
							$scope.version = asd2[3];
						}
						
				}
				if(Quote=='1')
				{
					//alert(1);
					
					 $scope.addQuotation = json['quatationform'][0];
					 $scope.projectUnitData = json['quatationgrid'];
					 $scope.termData = json['quatationtermsgrid'];
					 
					 $(".resetBgColr").css("background-color", "#99ff99"); 
					 //$("#Email").css("background-color", "#99ff99");
					 
					   var validData = json['quatationform'][0];
						   if(validData.emailAddr == "" || validData.emailAddr == undefined || validData.emailAddr == "NA")
							{
								//alert("if");
								$scope.addQuotation.emailAddr = "";
								//$scope.addQuotation.madatory = "1";
								$("#Email").css("background-color", "#ffffff");
							}
							else
							{
								//alert("else");
								$scope.addQuotation.emailAddr = validData.emailAddr;
								//$scope.addQuotation.madatory = "0";
								$("#Email").css("background-color", "#99ff99");
							}
							if(validData.caseRef == "" || validData.caseRef == undefined || validData.caseRef == "NA")
							{
								//alert("if" + 0);
								$scope.addQuotation.caseRef = "";
								//$scope.addQuotation.madatory = "1";
								//$("#Email").css("background-color", "#ffffff");
								$("#backtocasebtn").hide();
							}
							else
							{
								//alert("else" + 0);
								$scope.addQuotation.caseRef = validData.caseRef;
								//$scope.addQuotation.madatory = "0";
								//$("#Email").css("background-color", "#99ff99");
								
								$("#backtocasebtn").show();
							}
					 
					 var departmentSplit = json['quatationform'][0].assigned;
						 var departmentSales = [];
						 if(departmentSplit == undefined || departmentSplit == "" || departmentSplit == "NA")
						 {
							 //alert("if");
							 $('#picturegallery1').val("['']").trigger('chosen:updated');
							 $("#picturegallery1").css("background-color", "#ffff7f");
						 }
						 else
						 {
							 //alert(departmentSplit.length + " " + " else ");
							 for (var s = 0; s < departmentSplit.length; s++) {
					
										departmentSales.push(departmentSplit[s]);
										//alert("accessoriesSales"+accessoriesSales);
							}
							 $('#picturegallery1').val(departmentSales).trigger('chosen:updated');
											$scope.addQuotation.assigned = departmentSales;
											$("#picturegallery1").css("background-color", "#99ff99");
						 }
					 
					if(asd2.length == 5)
						{
							$scope.qType = asd2[0];
							$scope.coun_year_Code = asd2[1];
							$scope.runNo = asd2[2];
							var codesplit = asd2[3].split("/");
							$scope.custD_N = codesplit[0];
							$scope.custD_S = codesplit[1];
							$scope.version = asd2[4];
						}
						if(asd2.length == 4)
						{
							$scope.qType = asd2[0];
							$scope.coun_year_Code = asd2[1];
							$scope.runNo = asd2[2];
							$scope.version = asd2[3];
						}
						 var getImage = json['quatationform'][0].imagepath;
								  // alert(getImage);
									 if(getImage!=null)
									   {
										   //alert(getImage + " " + 1);
										   var imgPrew = getImage.trim();
										   if(imgPrew==null || imgPrew=="" )
										   {
											   //alert(getImage + " " + 2);
											 
											  $scope.stepsModel = [];
											  $scope.$apply();
											  //$scope.dummyPhoto="";
					                          //$('#dummyPhoto').trigger('blur');
										   }
										   else
										   {
											   //alert(getImage + " " + 3);
											   $scope.stepsModel = getImage.split(',');
											   $scope.$apply();
											   
										   }
									   }
									   else
									   {
										   //alert(getImage + " " + 4);
										    $scope.stepsModel = [];
										    $scope.$apply();
										 
									   }
					 $rootScope.quotationSeqNo = "";
					 $rootScope.quotationAction = "";
					 $rootScope.qtnType = "";
					
					  $scope.$apply();
					 
				}
				if(Quote=='2')
				{
					//alert(2); 
					//alert(JSON.stringify(json['quatationgrid']));
					
					 $scope.addQuotation = json['quatationform'][0];
					 $scope.sparePartData = json['quatationgrid'];
					 $scope.termData = json['quatationtermsgrid'];
					
					 $rootScope.quotationSeqNo = "";
					 $rootScope.quotationAction = "";
					 $rootScope.qtnType = "";
					 
					$(".resetBgColr").css("background-color", "#99ff99"); 
					//$("#Email").css("background-color", "#99ff99");
					 
					   var validData = json['quatationform'][0];
						   if(validData.emailAddr == "" || validData.emailAddr == undefined || validData.emailAddr == "NA")
							{
								//alert("if");
								$scope.addQuotation.emailAddr = "";
								//$scope.addQuotation.madatory = "1";
								$("#Email").css("background-color", "#ffffff");
							}
							else
							{
								//alert("else");
								$scope.addQuotation.emailAddr = validData.emailAddr;
								//$scope.addQuotation.madatory = "0";
								$("#Email").css("background-color", "#99ff99");
							}
							if(validData.caseRef == "" || validData.caseRef == undefined || validData.caseRef == "NA")
							{
								//alert("if" + 0);
								$scope.addQuotation.caseRef = "";
								//$scope.addQuotation.madatory = "1";
								//$("#Email").css("background-color", "#ffffff");
								$("#backtocasebtn").hide();
							}
							else
							{
								//alert("else" + 0);
								$scope.addQuotation.caseRef = validData.caseRef;
								//$scope.addQuotation.madatory = "0";
								//$("#Email").css("background-color", "#99ff99");
								
								$("#backtocasebtn").show();
							}
					 
					 var departmentSplit = json['quatationform'][0].assigned;
						 var departmentSales = [];
						 if(departmentSplit == undefined || departmentSplit == "" || departmentSplit == "NA")
						 {
							 //alert("if");
							 $('#picturegallery1').val("['']").trigger('chosen:updated');
							 $("#picturegallery1").css("background-color", "#ffff7f");
						 }
						 else
						 {
							 //alert(departmentSplit.length + " " + " else ");
							 for (var s = 0; s < departmentSplit.length; s++) {
					
										departmentSales.push(departmentSplit[s]);
										//alert("accessoriesSales"+accessoriesSales);
							}
							 $('#picturegallery1').val(departmentSales).trigger('chosen:updated');
											$scope.addQuotation.assigned = departmentSales;
											$("#picturegallery1").css("background-color", "#99ff99");
						 }
					 
					  $scope.$apply();
					 if(asd2.length == 5)
						{
							$scope.qType = asd2[0];
							$scope.coun_year_Code = asd2[1];
							$scope.runNo = asd2[2];
							var codesplit = asd2[3].split("/");
							$scope.custD_N = codesplit[0];
							$scope.custD_S = codesplit[1];
							$scope.version = asd2[4];
						}
						if(asd2.length == 4)
						{
							$scope.qType = asd2[0];
							$scope.coun_year_Code = asd2[1];
							$scope.runNo = asd2[2];
							$scope.version = asd2[3];
						}
				}
				if(Quote=='3')
				{
					//alert(3);
					
					 $scope.addQuotation = json['quatationform'][0];
					 $scope.servicPartData = json['quatationgrid'];
					 $scope.termData = json['quatationtermsgrid'];
					
					 $rootScope.quotationSeqNo = "";
					 $rootScope.quotationAction = "";
					 $rootScope.qtnType = "";
					 
					$(".resetBgColr").css("background-color", "#99ff99"); 
					//$("#Email").css("background-color", "#99ff99");
					 
					   var validData = json['quatationform'][0];
						   if(validData.emailAddr == "" || validData.emailAddr == undefined || validData.emailAddr == "NA")
							{
								//alert("if");
								$scope.addQuotation.emailAddr = "";
								//$scope.addQuotation.madatory = "1";
								$("#Email").css("background-color", "#ffffff");
							}
							else
							{
								//alert("else");
								$scope.addQuotation.emailAddr = validData.emailAddr;
								//$scope.addQuotation.madatory = "0";
								$("#Email").css("background-color", "#99ff99");
							}
							//$("#backtocasebtn").hide();
							if(validData.caseRef == "" || validData.caseRef == undefined || validData.caseRef == "NA")
							{
								//alert("if" + 0);
								$scope.addQuotation.caseRef = "";
								//$scope.addQuotation.madatory = "1";
								//$("#Email").css("background-color", "#ffffff");
								$("#backtocasebtn").hide();
							}
							else
							{
								//alert("else" + 0);
								$scope.addQuotation.caseRef = validData.caseRef;
								//$scope.addQuotation.madatory = "0";
								//$("#Email").css("background-color", "#99ff99");
								
								$("#backtocasebtn").show();
							}
							/*if(validData.caseRef == "" || validData.caseRef == undefined || validData.caseRef == "NA")
							{
								//alert("if" + 0);
								$scope.addQuotation.caseRef = "";
								//$scope.addQuotation.madatory = "1";
								//$("#Email").css("background-color", "#ffffff");
								$("#backtocasebtn").hide();
							}
							else
							{
								//alert("else" + 0);
								$scope.addQuotation.caseRef = validData.caseRef;
								//$scope.addQuotation.madatory = "0";
								//$("#Email").css("background-color", "#99ff99");
								
								$("#backtocasebtn").show();
							}*/
					 
					 var departmentSplit = json['quatationform'][0].assigned;
						 var departmentSales = [];
						 if(departmentSplit == undefined || departmentSplit == "" || departmentSplit == "NA")
						 {
							 //alert("if");
							 $('#picturegallery1').val("['']").trigger('chosen:updated');
							 $("#picturegallery1").css("background-color", "#ffff7f");
						 }
						 else
						 {
							 //alert(departmentSplit.length + " " + " else ");
							 for (var s = 0; s < departmentSplit.length; s++) {
					
										departmentSales.push(departmentSplit[s]);
										//alert("accessoriesSales"+accessoriesSales);
							}
							 $('#picturegallery1').val(departmentSales).trigger('chosen:updated');
											$scope.addQuotation.assigned = departmentSales;
											$("#picturegallery1").css("background-color", "#99ff99");
						 }
					 
					  $scope.$apply();
					 if(asd2.length == 5)
						{
							$scope.qType = asd2[0];
							$scope.coun_year_Code = asd2[1];
							$scope.runNo = asd2[2];
							var codesplit = asd2[3].split("/");
							$scope.custD_N = codesplit[0];
							$scope.custD_S = codesplit[1];
							$scope.version = asd2[4];
						}
						if(asd2.length == 4)
						{
							$scope.qType = asd2[0];
							$scope.coun_year_Code = asd2[1];
							$scope.runNo = asd2[2];
							$scope.version = asd2[3];
						}
				}
				
				$("#loading").hide();   
			});
			$scope.$apply();
		}
	}
			
       
		
	};
	

/*$scope.loadDefaultConValues = function()
{
	
	$.getJSON("quatationDefaultCountry.do",function(json)
			{
				//alert(JSON.stringify(json['data']));
				$scope.addQuotation.billingCountries = json['data'][0].billingCountries;
				 
				 $scope.$apply();
			});
}
$scope.loadDefaultDepValues = function()
{
	$.getJSON("quatationDefaultStatus.do",function(json)
			{
				//alert(JSON.stringify(json['data'][0].assigned));
				$scope.addQuotation.assigned = json['data'][0].assigned;
				 
				 $scope.$apply();
			});
}*/

	$scope.applyTaxpercent = function(taax,taxPer)
	{
		
		if(taax == '1')
		{
			$scope.addQuotation.taxPercent = 0;
		}
		else
		{
			$scope.addQuotation.taxPercent = "";
			/*$.post("getTaxPercentageFromCountryTax.do",{countrycode:countryCode,countrytax:countryTax},function(json)
				{
							 // alert(JSON.stringify(json['taxpercentdata']));
							  var taxper = json['taxpercentdata'];
							  if(taxper == "" || taxper == undefined)
							  {
								 // alert("if");
								  $scope.addQuotation.taxPercent = "";
								  var taxPer2 = $scope.addQuotation.taxPercent;
								  $timeout(function(){
													
													$scope.getGrandTotal(subTt,taxPer2);

													$scope.getFreightandCourierTotal(fright,grdTotal);
													
													},1000);
								   $scope.$apply();
							  }
							  else
							  {
								   //alert("else");
								 $scope.addQuotation.taxPercent = json['taxpercentdata'][0].taxpercent; 
								  var taxPer3 = $scope.addQuotation.taxPercent;
								  $timeout(function(){
													
													$scope.getGrandTotal(subTt,taxPer3);

													$scope.getFreightandCourierTotal(fright,grdTotal);
													
													},1000);
								   $scope.$apply();
							  }
							  //$scope.addQuotation.tax = json['tname'][0].taxName;
							    
							  $scope.$apply();
				}); */
		}
				
		 $scope.$apply();
	};
	  
    /*$scope.assignToDepartments = function()
		{
			
			$.post("departmentViewForCase.do",function(json)
			{
				//alert(JSON.stringify(json['data']));
				$scope.assignDepartData = json['data'];
				
			    $scope.$apply();
			});		
		};*/
    $scope.getSalesMan = function()
	   {
		   $scope.salesManData = [];
		    $.post("getAllSalesMan.do",function(json)
			{
				//alert(JSON.stringify(json['data']));
				 $scope.salesManData = json['data'];
				 $scope.$apply();
			});
	   }
	  $scope.onSelectSalesman = function(salesman)
	  {
		  $.post("getSalesManCode.do",{salesman:salesman},function(json)
						{
					
					       $scope.addQuotation.salesManCode=json['data'];
                             $scope.$apply();
					       
						});
	  };
	  $scope.getSalesManCodeData = function()
	   {
		   $scope.salesManCodeData = [];
		    $.post("getingSalesmanCode.do",function(json)
			{
				//alert(JSON.stringify(json['data']));
				 $scope.salesManCodeData = json['data'];
				 $scope.$apply();
			});
	   };
	  $scope.onSelectSalesmanCode = function(salesmancode)
	  {
		  //alert(salesmancode);
		  $.post("getingSalesman.do",{salesmancode:salesmancode},function(json)
						{
					          //alert(JSON.stringify(json['salesManCode']));
					       $scope.addQuotation.salesMan = json['salesManCode'];
                             $scope.$apply();
					       
						}); 
	  };
	  $scope.loadTaxPercentage = function()
	  {
		  $.post("getingTaxPercentages.do",function(json)
		  {
					 //alert(JSON.stringify(json['data']));     
					      $scope.taxPercentData=json['data'];
                             $scope.$apply();
					       
		 }); 
	  };
 $scope.getPaymentTerm = function()
	   {
		  // alert(getAllPayments.do);
		  $scope.paymentTermsArray = [];
		   $.post("getAllPaymentsAppcode.do",function(json)
			{
				//alert(JSON.stringify(json['data']));
				 $scope.paymentTermsArray = json['data'];
				 
				 // $("#getFullUnit").trigger("click");
				 $scope.$apply();
			});
	   };
	   $scope.getSalesTerm = function()
	   {
		   $scope.salesTermData = [{'id':'1','salesTerm':'CIF'},{'id':'2','salesTerm':'FOB'},{'id':'3','salesTerm':'Ex-Work'},{'id':'4','salesTerm':'FCA'}];
	   };
	   $scope.getestPercentage = function()
	   {
		   $scope.estPercentData = [{id:'1',estPercent:'10'},{id:'2',estPercent:'20'},{id:'3',estPercent:'30'},{id:'4',estPercent:'40'},{id:'5',estPercent:'50'},{id:'6',estPercent:'60'},{id:'7',estPercent:'70'},{id:'8',estPercent:'80'},{id:'9',estPercent:'90'},{id:'10',estPercent:'100'}];
	   };
	   
	  
	   
	   $scope.loaddefaultTermsConditions = function()
	   {
		   $.post("getAllTermsAndCondtionsdata.do",function(json)
		   {
			  //alert(JSON.stringify(json['locationdata']));
			 
			 $scope.deliverytimeArray = json['deliverytimedata'];
			 $scope.deliveryTermsData = json['salestermdata'];
			 $scope.paymentTermsData = json['paymenttermdata'];
			 $scope.currencyArrya = json['currenceydata'];
			 $scope.locationDataArr = json['locationdata'];
			 //alert(JSON.stringify($scope.locationDataArr));
			 
			 $scope.$apply();
			  
		   });
	   };
	   
	   $scope.getApplicationCode =function()//application,applicationshortcutnamename
	   {
           
		   $scope.appCodeData = [];
		  $.post("getAllApplications.do",function(json)
			{
					
							//alert(JSON.stringify(json['data']));
							 $scope.appCodeData= json['data'];
							 $scope.$apply();
					
			});
			
	   };
	   
	  

	   
	
	$scope.loadDefaultTermCon = function()
	{
		
		//$scope.termConditionData = [{id:'1',modelTerm:'Delivery',modelCon:'14 weeks Ex-Singapore, Subject to prior sales.'},{id:'2',modelTerm:'Price',modelCon:'Ex-Works Singapore.'},{id:'3',modelTerm:'Payment Term',modelCon:'30 Days or L/C at sight for value greater than $25,000 dollar.'},{id:'4',modelTerm:'Currency',modelCon:'Singapore Dollars'},{id:'5',modelTerm:'Validity',modelCon:'30 Days'}];
		/*$.getJSON("getingTerms.do",function(json)
			{
                          //alert(JSON.stringify(json['data']));
						   $scope.termConditionData = json['data'];
						    $scope.$apply();
			});*/
			
			$.post("getterms.do",function(json)
			{
                        //alert(JSON.stringify(json));
						    $scope.termsArray = json['terms'];
						   
						    $scope.$apply();
			});
	};
	
	$scope.getConditionData = function()
	{
		
			$.post("getconditions.do",function(json)
			{
                          //alert(JSON.stringify(json));
						   $scope.conditionData = json['conditions'];
						    $scope.$apply();
			});
	};
	$scope.getQuoteNo  = function(qtype,coun_yerCode,runNo,custN,custS,version)
	{
		
		var  Qtype,Cou_YerCode,runningNo,Cust_N,Cust_S,Ver;
		 Qtype = qtype;
		 Cou_YerCode = coun_yerCode;
		 runningNo = runNo;
		 Cust_N = custN;
		 Cust_S = custS;
		 Ver = version;
		//if(custN==undefined){Cust_N=""}else{Cust_N=custN}
		//if(custS==undefined){Cust_S=""}else{Cust_S=custS}
		
		if((Cust_N==null || Cust_N=="") && (Cust_S==null || Cust_S==""))
		{
			//alert("null");
			$scope.addQuotation.qtnNo = Qtype+"-"+Cou_YerCode+"-"+runningNo+"-"+Ver;
		}
		else if(Cust_N!=""  && (Cust_S==null || Cust_S==""))
		{
			/*alert("N not null");
			alert(custN + " N ");
		    alert(custS + " S ");*/
			$scope.addQuotation.qtnNo = Qtype+"-"+Cou_YerCode+"-"+runningNo+"-"+Cust_N+"-"+Ver;
		}
		else if((Cust_N==null || Cust_N=="")  && Cust_S!=null)
		{
			/*alert("S not null");
			alert(custN + " N ");
		    alert(custS + " S ");*/
			$scope.addQuotation.qtnNo = Qtype+"-"+Cou_YerCode+"-"+runningNo+"-"+Cust_S+"-"+Ver;
		}
		else if(Cust_N!=null  && Cust_S!=null)
		{
			/*alert("NS not null");
			alert(custN + " N ");
		    alert(custS + " S ");*/
			$scope.addQuotation.qtnNo = Qtype+"-"+Cou_YerCode+"-"+runningNo+"-"+Cust_N+"/"+Cust_S+"-"+Ver;
		}
		
		
	};
	
	
	   
var qtnTypeGridData = [];
var termCondition = [];


//================Full Unit Temp Form Submit========================//
      $scope.fullUnitTempFormSubmit = function(addQuotation,form)
	   {
		   //alert("Item No");
		   //alert(JSON.stringify(addQuotation));
		    var QtnType = $scope.addQuotation.qtnType;
		 if($scope.quotationForm.$valid)
		 {
			  qtnTypeGridData = [];
		   $scope.qtnFullUnitData.forEach(function(fullUnit)
			{ 
								//alert(JSON.stringify(fullUnit)); 
				qtnTypeGridData.push(angular.toJson(fullUnit));	 
			});
			termCondition = [];
		   $scope.termData.forEach(function(addedTerms)
			{ 
								//alert(JSON.stringify(fullUnitItems)); 
				termCondition.push(angular.toJson(addedTerms));	 
			});
			
		  
		  qtnFormData.append("formData",angular.toJson(addQuotation));
		  qtnFormData.append("gridData",angular.toJson(qtnTypeGridData));
		  qtnFormData.append("termConData",angular.toJson(termCondition));
		  
		  //alert(JSON.stringify(qtnFormData));
		  $("#draftbtn").addClass("active2");
		  $("#btn-discard").addClass("active2");
		  $("#btn-refresh").addClass("active2");
		  $("#btn-send").addClass("active2");
		  swal({
					  title: "Are you sure?",
					  text: "Your File Will Be Save As Draft!",
					  type: "warning",
					  showCancelButton: true,
					  confirmButtonClass: "btn-danger",
					  confirmButtonText: "Yes, Save it!",
					  closeOnConfirm: false
					},
					
					function(){
						
					 
					   $.ajax({
						       url         : "/SCA-360/quatationformsubmitforTemp.do",
						       data        : qtnFormData,
						       contentType : false,
						       processData : false,
						       type        : 'POST'
						   }).success(function(data, status){
							   
								if(data==true)
									{
									
										 swal("", "Draft Saved Successfully!", "success");
										//swal("", 'Saved Successfully!' , "success");
										qtnFormData = new FormData();
										$scope.addQuotation = angular.copy($scope.master);
										$scope.addQuotation = ({'qtnType':'0','qtnProgress':'0','showCost':'1','modifiedstatus':'0','qtnMaster':'1'});
										$indexFullUnit=1;
							            $scope.qtnFullUnitData=[{'id':$indexFullUnit,'motorType':'NO','protectionGrade':'IP55','internationalStd':'JIS','motorPower':'0.1','pole':'4','phase':'3','voltage':'400','freq':'50','mtrEfficncyClass':'0','inverter':'1','motorBrake':'1','motorBrakeVolt':'1','customerPrice':'0','tpricereq':true,'markUpreq':true,'qntyreq':true,'costreqsts':true,'tpfactorsts':true,'lpfactor':true}];
										$indexTerm=1;
    									$scope.termData=[{'id':$indexTerm}];
 									    $scope.loadQuotationSeqNum(QtnType,form);
										//$scope.loadSysDate();
										
										//$scope.addQuotation = ({'qtnType':'0','qtnProgress':'0','showCost':'0','modifiedstatus':'0','createdBy':Username,'currency':'AUD','tax':'VAT','country':'AUSTRALIA','taxPercent':'10','paymentTerm':'2','salesTerm':'CIF','estPercent':'10','assigned':'Sales'});
										form.$setPristine(true); 
										$rootScope.loadQuotation = "";
				 						$rootScope.loadQtnType = "";
										$rootScope.quotationSeqNo = "";
										$rootScope.quotationAction = "";
										$rootScope.qtnType = "";
										
										$scope.$apply();
										 $("#draftbtn").removeClass("active2");
										 $("#btn-discard").removeClass("active2");
										 $("#btn-refresh").removeClass("active2");
										 $("#btn-send").removeClass("active2");
										 
										 
									}
								else
									{
									   swal("Oops sorry...", "Something went wrong!", "error");
									   $scope.$apply();
									     $("#draftbtn").addClass("active2");
										 $("#btn-discard").addClass("active2");
										 $("#btn-refresh").addClass("active2");
										 $("#btn-send").addClass("active2");
									}
							    
							   
				        	   
				           }); 
					});
					 $("#draftbtn").removeClass("active2");
					 $("#btn-discard").removeClass("active2");
					 $("#btn-refresh").removeClass("active2");
					 $("#btn-send").removeClass("active2");
		  
		              
		 }
		 else
		 {
			 var field = null, firstError = null;
						for (field in form) 
						{
							if (field[0] != '$') 
							{
								if (firstError === null && !form[field].$valid) 
								{
									firstError = form[field].$name;
								}
								if (form[field].$pristine) 
								{
									form[field].$dirty = true;
								}
							}	
						}
		 } 
		   
	   };
	   
//================Full Unit Form Submit ========================//
$scope.fullUnitFormSubmit = function(addQuotation,form)
	   {
		    //alert("Item Yes");
		   //alert(JSON.stringify(addQuotation));
		    var QtnType = $scope.addQuotation.qtnType;
		 if($scope.quotationForm.$valid)
		 {
			  qtnTypeGridData = [];
		   $scope.qtnFullUnitData.forEach(function(fullUnit)
			{ 
								//alert(JSON.stringify(fullUnit)); 
				qtnTypeGridData.push(angular.toJson(fullUnit));	 
			});
			termCondition = [];
		   $scope.termData.forEach(function(addedTerms)
			{ 
								//alert(JSON.stringify(fullUnitItems)); 
				termCondition.push(angular.toJson(addedTerms));	 
			});
			
		   //alert(JSON.stringify(qtnTypeGridData)); 
		  qtnFormData.append("formData",angular.toJson(addQuotation));
		  qtnFormData.append("gridData",angular.toJson(qtnTypeGridData));
		  qtnFormData.append("termConData",angular.toJson(termCondition));
		  //alert(JSON.stringify(qtnFormData));
		  $("#draftbtn").addClass("active2");
		  $("#btn-discard").addClass("active2");
		  $("#btn-refresh").addClass("active2");
		  $("#btn-send").addClass("active2");
		  
		  $.ajax({
						       url         : "/SCA-360/quatationformsubmitforFullunit.do",
						       data        : qtnFormData,
						       contentType : false,
						       processData : false,
						       type        : 'POST'
						   }).success(function(data, status){
							   
								if(data==true)
									{
									
										
										swal("", 'Saved Successfully!' , "success");
										qtnFormData = new FormData();
										$scope.addQuotation = angular.copy($scope.master);
										$scope.addQuotation = ({'qtnType':'0','qtnProgress':'0','showCost':'1','modifiedstatus':'0','qtnMaster':'1'});
										$indexFullUnit=1;
							            $scope.qtnFullUnitData=[{'id':$indexFullUnit,'motorType':'NO','protectionGrade':'IP55','internationalStd':'JIS','motorPower':'0.1','pole':'4','phase':'3','voltage':'200','freq':'50','mtrEfficncyClass':'0','inverter':'1','motorBrake':'1','motorBrakeVolt':'1','customerPrice':'0','tpricereq':true,'markUpreq':true,'qntyreq':true,'costreqsts':true,'tpfactorsts':true,'lpfactor':true}];
										$indexTerm=1;
    									$scope.termData=[{'id':$indexTerm}];
 									    $scope.loadQuotationSeqNum(QtnType,form);
										//$scope.loadSysDate();
										
										//$scope.addQuotation = ({'qtnType':'0','qtnProgress':'0','showCost':'0','modifiedstatus':'0','createdBy':Username,'currency':'AUD','tax':'VAT','country':'AUSTRALIA','taxPercent':'10','paymentTerm':'2','salesTerm':'CIF','estPercent':'10','assigned':'Sales'});
										form.$setPristine(true); 
										$rootScope.loadQuotation = "";
				 						$rootScope.loadQtnType = "";
										$rootScope.quotationSeqNo = "";
										$rootScope.quotationAction = "";
										$rootScope.qtnType = "";
										$scope.$apply();
										 $("#draftbtn").removeClass("active2");
										 $("#btn-discard").removeClass("active2");
										 $("#btn-refresh").removeClass("active2");
										 $("#btn-send").removeClass("active2");
										 $("#backtocasebtn").hide();
										 $(".resetBgColr").css("background-color", "#ffff7f"); 
										 $("#Email").css("background-color", "#ffffff"); 
									}
								else
									{
									   swal("Oops sorry...", "Something went wrong!", "error");
									   $scope.$apply();
									      $("#draftbtn").addClass("active2");
										  $("#btn-discard").addClass("active2");
										  $("#btn-refresh").addClass("active2");
										  $("#btn-send").addClass("active2");
									}
							    
							   
				        	   
				           });
					
		  
		                
		 }
		 else
		 {
			 var field = null, firstError = null;
						for (field in form) 
						{
							if (field[0] != '$') 
							{
								if (firstError === null && !form[field].$valid) 
								{
									firstError = form[field].$name;
								}
								if (form[field].$pristine) 
								{
									form[field].$dirty = true;
								}
							}	
						}
		 }
		  
		   
	   };
	//================Discard Draft Full Unit========================//   
	
	

	   $scope.discardDraftFullUnit = function(addQuotation,form)
	   {
		   var QtnType = $scope.addQuotation.qtnType;
		   qtnTypeGridData = [];
		   $scope.qtnFullUnitData.forEach(function(fullUnit)
			{ 
								//alert(JSON.stringify(fullUnit)); 
				qtnTypeGridData.push(angular.toJson(fullUnit));	 
			});
			termCondition = [];
		   $scope.termData.forEach(function(addedTerms)
			{ 
								//alert(JSON.stringify(fullUnitItems)); 
				termCondition.push(angular.toJson(addedTerms));	 
			});
			
		   qtnFormData.append("formData",angular.toJson(addQuotation));
		   qtnFormData.append("gridData",angular.toJson(qtnTypeGridData));
		   qtnFormData.append("termConData",angular.toJson(termCondition));
		   
		 //alert(JSON.stringify(addQuotation) + "addQuotation");
		  // alert(JSON.stringify(qtnTypeGridData) + "qtnTypeGridData");
		  // alert(JSON.stringify(termCondition) + "termCondition");
		    $("#draftbtn").addClass("active2");
			$("#btn-discard").addClass("active2");
			$("#btn-refresh").addClass("active2");
			$("#btn-send").addClass("active2");
			
		  swal({
					  title: "Are you sure?",
					  text: "Your will not be able to recover this Draft file!",
					  type: "warning",
					  showCancelButton: true,
					  confirmButtonClass: "btn-danger",
					  confirmButtonText: "Yes, delete it!",
					  closeOnConfirm: false
					},
					
					function(){
						
					 
							$.ajax({
						       url         : "/SCA-360/discardingQuatation.do",
						       data        : qtnFormData,
						       contentType : false,
						       processData : false,
						       type        : 'POST'
						   }).success(function(data, status){
							   
								//if(data==true)
//									{
									
										 swal("Deleted!", "Draft Discarded Successfully.", "success");
										//swal( 'Draft Discarded Successfully');
										qtnFormData = new FormData();
										$scope.addQuotation = angular.copy($scope.master);
										form.$setPristine(true); 
										 $('#picturegallery1').val("['']").trigger('chosen:updated');
										$scope.addQuotation = data['quatationform'][0];
										$scope.termData = data['quatationtermsgrid'];
										$scope.qtnFullUnitData = data['quatationgrid'];
										/*$scope.addQuotation = ({'qtnType':'0','qtnProgress':'0','showCost':'1','modifiedstatus':'0','qtnMaster':'1'});
										$indexFullUnit=1;
							            $scope.qtnFullUnitData=[{'id':$indexFullUnit,'motorType':'NO','protectionGrade':'IP55','internationalStd':'JIS','motorPower':'0.1','pole':'4','phase':'3','voltage':'400','freq':'50','mtrEfficncyClass':'0','inverter':'1','motorBrake':'1','motorBrakeVolt':'1','customerPrice':'0','tpricereq':true,'markUpreq':true,'qntyreq':true,'costreqsts':true,'tpfactorsts':true,'lpfactor':true}];
										$indexTerm=1;
    									$scope.termData=[{'id':$indexTerm}];
 									    $scope.loadQuotationSeqNum(QtnType,form);*/
										//$scope.loadSysDate();
										
										//$scope.addQuotation = ({'qtnType':'0','qtnProgress':'0','showCost':'0','modifiedstatus':'0','createdBy':Username,'currency':'AUD','tax':'VAT','country':'AUSTRALIA','taxPercent':'10','paymentTerm':'2','salesTerm':'CIF','estPercent':'10','assigned':'Sales'});
										
										$rootScope.loadQuotation = "";
				 						$rootScope.loadQtnType = "";
										$rootScope.quotationSeqNo = "";
										$rootScope.quotationAction = "";
										$rootScope.qtnType = "";
										$scope.$apply();
										 $("#draftbtn").removeClass("active2");
										 $("#btn-discard").removeClass("active2");
										 $("#btn-refresh").removeClass("active2");
										 $("#btn-send").removeClass("active2");
										 $("#backtocasebtn").hide();
										 $(".resetBgColr").css("background-color", "#ffff7f"); 
										 $("#Email").css("background-color", "#ffffff"); 
										 
										 var asd = data['quatationform'][0].qtnNo;
					 
										var asd2 = asd.split("-");
										//alert(asd2.length);
										if(asd2.length == 5)
										{
											$scope.qType = asd2[0];
											$scope.coun_year_Code = asd2[1];
											$scope.runNo = asd2[2];
											var codesplit = asd2[3].split("/");
											//alert(asd2[3]);
											$scope.custD_N = codesplit[0];
											$scope.custD_S = codesplit[1];
											$scope.version = asd2[4];
										}
										/*if(asd2.length == 4)
										{
											$scope.qType = asd2[0];
											$scope.coun_year_Code = asd2[1];
											$scope.runNo = asd2[2];
											//var codesplit = asd2[3].split("/");
											$scope.custD_N = asd2[3];
											$scope.custD_S = "";
											$scope.version = asd2[4];
										}*/
										if(asd2.length == 4)
										{
											$scope.qType = asd2[0];
											$scope.coun_year_Code = asd2[1];
											$scope.runNo = asd2[2];
											//var codesplit = asd2[3].split("/");
											//$scope.custD_N = asd2[3];
											//$scope.custD_S = "";
											$scope.version = asd2[3];
										}
										 //$scope.qType = asd2[0];
										 //$scope.coun_year_Code = asd2[1];
										// $scope.runNo = asd2[2];
										 //alert(asd2[3]);
										
										 //$scope.custD_N = asd2[3];
										 //$scope.custD_S = asd2[4];
										 //$scope.version = asd2[5];
										 $scope.addQuotation.qtnNo = data['quatationform'][0].qtnNo;
									/*}
								else
									{
									   swal("Oops sorry...", "Something went wrong!", "error");
									   $scope.$apply();
									    $("#draftbtn").addClass("active2");
										$("#btn-discard").addClass("active2");
										$("#btn-refresh").addClass("active2");
										$("#btn-send").addClass("active2");
									}*/
							    
							   $scope.$apply();
				        	   
				           });
						   
					});
					$("#draftbtn").removeClass("active2");
					$("#btn-discard").removeClass("active2");
					$("#btn-refresh").removeClass("active2");
					$("#btn-send").removeClass("active2");
					
		 
	   };
	   
	   $scope.resetFullUnit = function(form)
	   {
		   var QtnType = $scope.addQuotation.qtnType;
		  
		   qtnFormData = new FormData();
		   $scope.addQuotation = angular.copy($scope.master);
		   $scope.addQuotation = ({'qtnType':'0','qtnProgress':'0','showCost':'1','modifiedstatus':'0','qtnMaster':'1'});
		   $indexFullUnit=1;
		   $scope.qtnFullUnitData=[{'id':$indexFullUnit,'motorType':'NO','protectionGrade':'IP55','internationalStd':'JIS','motorPower':'0.1','pole':'4','phase':'3','voltage':'200','freq':'50','mtrEfficncyClass':'0','inverter':'1','motorBrake':'1','motorBrakeVolt':'1','customerPrice':'0','tpricereq':true,'markUpreq':true,'qntyreq':true,'costreqsts':true,'tpfactorsts':true,'lpfactor':true}];
		   $indexTerm=1;
    	   $scope.termData=[{'id':$indexTerm}];
		   
		    $('#picturegallery1').val("['']").trigger('chosen:updated');
 		  // $scope.loadQuotationSeqNum(QtnType,form);
		   //$scope.loadSysDate();
		   
		   
		  // $scope.addQuotation = ({'qtnType':'0','qtnProgress':'0','showCost':'0','modifiedstatus':'0','createdBy':Username,'currency':'AUD','tax':'VAT','country':'AUSTRALIA','taxPercent':'10','paymentTerm':'2','salesTerm':'CIF','estPercent':'10','assigned':'Sales'});
		   form.$setPristine(true); 
		   $rootScope.loadQuotation = "";
			$rootScope.loadQtnType = "";
			$rootScope.quotationSeqNo = "";
			$rootScope.quotationAction = "";
			$rootScope.qtnType = "";
		   $.post("getSavedQuatationDataOnQuatationNumberFromQuatationTempwithclickforMultipleDrafts.do",{code:QtnType},function(json)
			{
										
					$scope.addQuotation = json['quatationform'][0];
				    $scope.termData = json['quatationtermsgrid'];
					$scope.qtnFullUnitData = json['quatationgrid'];
					
					
					/*if(validData.flag == 1)
						{
							//alert("if");
							
							$scope.addQuotation.madatory = "0";
							
						}
						else
						{
							//alert("else");
							
							$scope.addQuotation.madatory = "1";
							
						}*/
                        
                        
                        //var validData = json['quatationform'][0];
				   //alert(JSON.stringify(validData.emailAddr));
				   /*if(validData.emailAddr == "" || validData.emailAddr == undefined || validData.emailAddr == "NA")
					{
						//alert("if");
						$scope.addQuotation.emailAddr = "";
						//$scope.addQuotation.madatory = "1";
						$("#Email").css("background-color", "#ffffff");
					}
					else
					{
						//alert("else");
						$scope.addQuotation.emailAddr = validData.emailAddr;
						//$scope.addQuotation.madatory = "0";
						$("#Email").css("background-color", "#99ff99");
					}*/
					
					$(".resetBgColr").css("background-color", "#ffff7f"); 
					$("#Email").css("background-color", "#ffffff"); 
			   
				    var asd = json['quatationform'][0].qtnNo;
					 
				    var asd2 = asd.split("-");
					//alert(asd2.length);
					if(asd2.length == 5)
					{
						$scope.qType = asd2[0];
						$scope.coun_year_Code = asd2[1];
						$scope.runNo = asd2[2];
						var codesplit = asd2[3].split("/");
						//alert(asd2[3]);
						$scope.custD_N = codesplit[0];
						$scope.custD_S = codesplit[1];
						$scope.version = asd2[4];
					}
					/*if(asd2.length == 4)
					{
						$scope.qType = asd2[0];
						$scope.coun_year_Code = asd2[1];
						$scope.runNo = asd2[2];
						//var codesplit = asd2[3].split("/");
						$scope.custD_N = asd2[3];
						$scope.custD_S = "";
						$scope.version = asd2[4];
					}*/
					if(asd2.length == 4)
					{
						$scope.qType = asd2[0];
						$scope.coun_year_Code = asd2[1];
						$scope.runNo = asd2[2];
						//var codesplit = asd2[3].split("/");
						//$scope.custD_N = asd2[3];
						//$scope.custD_S = "";
						$scope.version = asd2[3];
					}
					 //$scope.qType = asd2[0];
					 //$scope.coun_year_Code = asd2[1];
					// $scope.runNo = asd2[2];
					 //alert(asd2[3]);
					
					 //$scope.custD_N = asd2[3];
					 //$scope.custD_S = asd2[4];
					 //$scope.version = asd2[5];
					 $scope.addQuotation.qtnNo = json['quatationform'][0].qtnNo;
				   
				 $("#backtocasebtn").hide();
				 $scope.$apply();
				//$scope.addCase=json['maincaseform'][0];
               // $scope.addDesp=json['description'][0];
			
				
			});
		   
	   };
	
	var customizeImg = [];   
//================Project Form Temp Submit========================//
       $scope.projectTempFormSubmit = function(addQuotation,form)
	   {
		   //alert("No");
		   var QtnType = $scope.addQuotation.qtnType;
		  if($scope.quotationForm.$valid)
		  {
			   qtnTypeGridData = [];
			   $scope.projectUnitData.forEach(function(projectUnit)
				{ 
								//alert(JSON.stringify(projectUnit)); 
					qtnTypeGridData.push(angular.toJson(projectUnit));	 
				});
			   termCondition = [];
			   $scope.termData.forEach(function(term)
				{ 
									//alert(JSON.stringify(fullUnitItems)); 
					termCondition.push(angular.toJson(term));	 
				});
				
				customizeImg = [];
			    	    $scope.stepsModel.forEach(function(step)
								{ 
									 
									//alert($scope.docFile);
								   customizeImg.push(angular.toJson(step));	 
								});
                               
			  qtnFormData.append("formData",angular.toJson(addQuotation));
			  qtnFormData.append("gridData",angular.toJson(qtnTypeGridData));
			  qtnFormData.append("termConData",angular.toJson(termCondition));
			  qtnFormData.append("motorFile",customizeImg);
			  //alert(JSON.stringify(qtnFormData));
			  
			  $("#btn-draftPro").addClass("active2");
			  $("#btn-discardPro").addClass("active2");
			  $("#btn-refreshPro").addClass("active2");
			  $("#btn-savePro").removeClass("active2");
			  swal({
					  title: "Are you sure?",
					  text: "Your File Will Be Save As Draft!",
					  type: "warning",
					  showCancelButton: true,
					  confirmButtonClass: "btn-danger",
					  confirmButtonText: "Yes, Save it!",
					  closeOnConfirm: false
					},
					
					function(){
						
					  
					   $.ajax({
								   url         : "/SCA-360/quatationformsubmitforTemp.do",
								   data        : qtnFormData,
								   contentType : false,
								   processData : false,
								   type        : 'POST'
							   }).success(function(data, status){
								   //alert(data);
									if(data==true)
										{
											swal("", "Draft Saved Successfully!", "success");
											qtnFormData = new FormData();
											$scope.addQuotation = ({'qtnType':'1','qtnProgress':'0','showCost':'1','modifiedstatus':'0','qtnMaster':'1'});
											$indexProject=1;
											$scope.projectUnitData=[{'id':$indexProject,'motorType':'NO','protectionGrade':'IP55','internationalStd':'JIS','motorPower':'0.1','pole':'4','phase':'3','voltage':'200','freq':'50','mtrEfficncyClass':'0','inverter':'1','motorBrake':'1','motorBrakeVolt':'1','customerPrice':'0','tpricereq':true,'markUpreq':true,'qntyreq':true,'costreqsts':true,'tpfactorsts':true,'lpfactor':true}];
											$indexTerm=1;
											$scope.termData=[{'id':$indexTerm}];
											$scope.addQuotation = angular.copy($scope.master);
											$scope.loadQuotationSeqNum(QtnType,form);
											//$scope.loadSysDate();
											
											
											//$scope.addQuotation = ({'qtnType':'1','qtnProgress':'0','showCost':'0','modifiedstatus':'0','currency':'USD','tax':'VAT','country':'AUSTRALIA','taxPercent':'10','paymentTerm':'2','salesTerm':'CIF','estPercent':'10','assigned':'Sales'});
											$scope.stepsModel = [];
											form.$setPristine(true); 
											$rootScope.loadQuotation = "";
											$rootScope.loadQtnType = "";
											$rootScope.quotationSeqNo = "";
											$rootScope.quotationAction = "";
											$rootScope.qtnType = "";
											$scope.$apply();
											 $("#btn-draftPro").removeClass("active2");
											 $("#btn-discardPro").removeClass("active2");
											 $("#btn-refreshPro").removeClass("active2");
											 $("#btn-savePro").removeClass("active2");
											 
											
											
											
										}
									else
										{
										   swal("Oops sorry...", "Something went wrong!", "error");
										   $scope.$apply();
										    $("#btn-draftPro").addClass("active2");
											 $("#btn-discardPro").addClass("active2");
											 $("#btn-refreshPro").addClass("active2");
											 $("#btn-savePro").removeClass("active2");
										}
									
								   
								   
							   });
					});
					 $("#btn-draftPro").removeClass("active2");
					 $("#btn-discardPro").removeClass("active2");
					 $("#btn-refreshPro").removeClass("active2");
					 $("#btn-savePro").removeClass("active2");
						  
		 }
		 else
		 {
			 var field = null, firstError = null;
						for (field in form) 
						{
							if (field[0] != '$') 
							{
								if (firstError === null && !form[field].$valid) 
								{
									firstError = form[field].$name;
								}
								if (form[field].$pristine) 
								{
									form[field].$dirty = true;
								}
							}	
						}
		 }
	   };
	   
//================Project Form Submit========================//
       $scope.projectFormSubmit = function(addQuotation,form)
	   {
		   //alert("Yes");
		    var QtnType = $scope.addQuotation.qtnType;
		  if($scope.quotationForm.$valid)
		  {
			   qtnTypeGridData = [];
			   $scope.projectUnitData.forEach(function(projectUnit)
				{ 
								//alert(JSON.stringify(projectUnit)); 
					qtnTypeGridData.push(angular.toJson(projectUnit));	 
				});
			   termCondition = [];
			   $scope.termData.forEach(function(term)
				{ 
									//alert(JSON.stringify(fullUnitItems)); 
					termCondition.push(angular.toJson(term));	 
				});
				customizeImg = [];
			    	    $scope.stepsModel.forEach(function(step)
								{ 
									 
									//alert($scope.docFile);
								   customizeImg.push(angular.toJson(step));	 
								});
			  qtnFormData.append("formData",angular.toJson(addQuotation));
			  qtnFormData.append("gridData",angular.toJson(qtnTypeGridData));
			  qtnFormData.append("termConData",angular.toJson(termCondition));
			  qtnFormData.append("motorFile",customizeImg);
			  //alert(JSON.stringify(qtnFormData));
			  $("#btn-draftPro").addClass("active2");
			  $("#btn-discardPro").addClass("active2");
			  $("#btn-refreshPro").addClass("active2");
			  $("#btn-savePro").addClass("active2");
						  $.ajax({
								   url         : "/SCA-360/quatationformsubmitforFullunit.do",
								   data        : qtnFormData,
								   contentType : false,
								   processData : false,
								   type        : 'POST'
							   }).success(function(data, status){
								   //alert(data);
									if(data==true)
										{
											swal("", 'Saved Successfully!' , "success");
											qtnFormData = new FormData();
											$scope.addQuotation = ({'qtnType':'1','qtnProgress':'0','showCost':'1','modifiedstatus':'0','qtnMaster':'1'});
											$indexProject=1;
											$scope.projectUnitData=[{'id':$indexProject,'motorType':'NO','protectionGrade':'IP55','internationalStd':'JIS','motorPower':'0.1','pole':'4','phase':'3','voltage':'200','freq':'50','mtrEfficncyClass':'0','inverter':'1','motorBrake':'1','motorBrakeVolt':'1','customerPrice':'0','tpricereq':true,'markUpreq':true,'qntyreq':true,'costreqsts':true,'tpfactorsts':true,'lpfactor':true}];
											$indexTerm=1;
											$scope.termData=[{'id':$indexTerm}];
											$scope.addQuotation = angular.copy($scope.master);
											$scope.loadQuotationSeqNum(QtnType,form);
											//$scope.loadSysDate();
											
											
											//$scope.addQuotation = ({'qtnType':'1','qtnProgress':'0','showCost':'0','modifiedstatus':'0','currency':'USD','tax':'VAT','country':'AUSTRALIA','taxPercent':'10','paymentTerm':'2','salesTerm':'CIF','estPercent':'10','assigned':'Sales'});
											form.$setPristine(true);
											$scope.stepsModel = []; 
											$rootScope.loadQuotation = "";
											$rootScope.loadQtnType = "";
											$rootScope.quotationSeqNo = "";
											$rootScope.quotationAction = "";
											$rootScope.qtnType = "";
											$scope.$apply();
											 $("#btn-draftPro").removeClass("active2");
											 $("#btn-discardPro").removeClass("active2");
											 $("#btn-refreshPro").removeClass("active2");
											 $("#btn-savePro").removeClass("active2");
											$("#backtocasebtn").hide();
											
											$(".resetBgColr").css("background-color", "#ffff7f"); 
										    $("#Email").css("background-color", "#ffffff");
											
										}
									else
										{
										   swal("Oops sorry...", "Something went wrong!", "error");
										   $scope.$apply();
										   $("#btn-draftPro").addClass("active2");
										  $("#btn-discardPro").addClass("active2");
										  $("#btn-refreshPro").addClass("active2");
										  $("#btn-savePro").addClass("active2");
										}
									
								   
								   
							   });
		 }
		 else
		 {
			 var field = null, firstError = null;
						for (field in form) 
						{
							if (field[0] != '$') 
							{
								if (firstError === null && !form[field].$valid) 
								{
									firstError = form[field].$name;
								}
								if (form[field].$pristine) 
								{
									form[field].$dirty = true;
								}
							}	
						}
		 }
	   };
	   
	   	//================Discard Draft Project========================//   
	   $scope.discardDraftProject = function(addQuotation,form)
	   {
		   var QtnType = $scope.addQuotation.qtnType;
		   qtnTypeGridData = [];
			   $scope.projectUnitData.forEach(function(projectUnit)
				{ 
								//alert(JSON.stringify(projectUnit)); 
					qtnTypeGridData.push(angular.toJson(projectUnit));	 
				});
			   termCondition = [];
			   $scope.termData.forEach(function(term)
				{ 
									//alert(JSON.stringify(fullUnitItems)); 
					termCondition.push(angular.toJson(term));	 
				});
				customizeImg = [];
			    	    $scope.stepsModel.forEach(function(step)
								{ 
									 
									//alert($scope.docFile);
								   customizeImg.push(angular.toJson(step));	 
								});
			
		   qtnFormData.append("formData",angular.toJson(addQuotation));
		   qtnFormData.append("gridData",angular.toJson(qtnTypeGridData));
		   qtnFormData.append("termConData",angular.toJson(termCondition));
		   qtnFormData.append("motorFile",customizeImg);
		  // alert(JSON.stringify(addQuotation) + "addQuotation");
		  // alert(JSON.stringify(qtnTypeGridData) + "qtnTypeGridData");
		  // alert(JSON.stringify(termCondition) + "termCondition");
		    $("#btn-draftPro").addClass("active2");
			$("#btn-discardPro").addClass("active2");
			$("#btn-refreshPro").addClass("active2");
			$("#btn-savePro").addClass("active2");
		  swal({
					  title: "Are you sure?",
					  text: "Your will not be able to recover this Draft file!",
					  type: "warning",
					  showCancelButton: true,
					  confirmButtonClass: "btn-danger",
					  confirmButtonText: "Yes, delete it!",
					  closeOnConfirm: false
					},
					function(){
					 
							$.ajax({
						       url         : "/SCA-360/discardingQuatation.do",
						       data        : qtnFormData,
						       contentType : false,
						       processData : false,
						       type        : 'POST'
						   }).success(function(data, status){
							   
								//if(data==true)
//									{
									
										
										 swal("Deleted!", "Draft Discarded Successfully.", "success");
										qtnFormData = new FormData();
										$scope.addQuotation = angular.copy($scope.master);
										form.$setPristine(true); 
										 $('#picturegallery1').val("['']").trigger('chosen:updated');
										$scope.addQuotation = data['quatationform'][0];
										$scope.termData = data['quatationtermsgrid'];
										$scope.projectUnitData = data['quatationgrid'];
										/*$scope.addQuotation = ({'qtnType':'1','qtnProgress':'0','showCost':'1','modifiedstatus':'0','qtnMaster':'1'});
										$indexProject=1;
										$scope.projectUnitData=[{'id':$indexProject,'motorType':'NO','protectionGrade':'IP55','internationalStd':'JIS','motorPower':'0.1','pole':'4','phase':'3','voltage':'400','freq':'50','mtrEfficncyClass':'0','inverter':'1','motorBrake':'1','motorBrakeVolt':'1','customerPrice':'0','tpricereq':true,'markUpreq':true,'qntyreq':true,'costreqsts':true,'tpfactorsts':true,'lpfactor':true}];
										$indexTerm=1;
										$scope.termData=[{'id':$indexTerm}];
 									    $scope.loadQuotationSeqNum(QtnType,form);*/
										//$scope.loadSysDate();
										
										//$scope.addQuotation = ({'qtnType':'0','qtnProgress':'0','showCost':'0','modifiedstatus':'0','createdBy':Username,'currency':'AUD','tax':'VAT','country':'AUSTRALIA','taxPercent':'10','paymentTerm':'2','salesTerm':'CIF','estPercent':'10','assigned':'Sales'});
										
										$rootScope.loadQuotation = "";
				 						$rootScope.loadQtnType = "";
										$rootScope.quotationSeqNo = "";
										$rootScope.quotationAction = "";
										$rootScope.qtnType = "";
										$scope.stepsModel = [];
										$scope.$apply();
										 $("#btn-draftPro").removeClass("active2");
										 $("#btn-discardPro").removeClass("active2");
										 $("#btn-refreshPro").removeClass("active2");
										 $("#btn-savePro").removeClass("active2");
										 $("#backtocasebtn").hide();
										 
										 $(".resetBgColr").css("background-color", "#ffff7f"); 
										 $("#Email").css("background-color", "#ffffff");
										 
										  var getImage = data['quatationform'][0].imagepath;
								  // alert(getImage);
									 if(getImage!=null)
									   {
										   //alert(getImage + " " + 1);
										   var imgPrew = getImage.trim();
										   if(imgPrew==null || imgPrew=="" )
										   {
											   //alert(getImage + " " + 2);
											 
											  $scope.stepsModel = [];
											  $scope.$apply();
											  //$scope.dummyPhoto="";
					                          //$('#dummyPhoto').trigger('blur');
										   }
										   else
										   {
											   //alert(getImage + " " + 3);
											   $scope.stepsModel = getImage.split(',');
											   $scope.$apply();
											   
										   }
									   }
									   else
									   {
										   //alert(getImage + " " + 4);
										    $scope.stepsModel = [];
										    $scope.$apply();
										 
									   }
			   
									var asd = data['quatationform'][0].qtnNo;
									 
									var asd2 = asd.split("-");
									//alert(asd2.length);
									if(asd2.length == 5)
									{
										$scope.qType = asd2[0];
										$scope.coun_year_Code = asd2[1];
										$scope.runNo = asd2[2];
										var codesplit = asd2[3].split("/");
										//alert(asd2[3]);
										$scope.custD_N = codesplit[0];
										$scope.custD_S = codesplit[1];
										$scope.version = asd2[4];
									}
									/*if(asd2.length == 4)
									{
										$scope.qType = asd2[0];
										$scope.coun_year_Code = asd2[1];
										$scope.runNo = asd2[2];
										//var codesplit = asd2[3].split("/");
										$scope.custD_N = asd2[3];
										$scope.custD_S = "";
										$scope.version = asd2[4];
									}*/
									if(asd2.length == 4)
									{
										$scope.qType = asd2[0];
										$scope.coun_year_Code = asd2[1];
										$scope.runNo = asd2[2];
										//var codesplit = asd2[3].split("/");
										//$scope.custD_N = asd2[3];
										//$scope.custD_S = "";
										$scope.version = asd2[3];
									}
									 //$scope.qType = asd2[0];
									 //$scope.coun_year_Code = asd2[1];
									// $scope.runNo = asd2[2];
									 //alert(asd2[3]);
									
									 //$scope.custD_N = asd2[3];
									 //$scope.custD_S = asd2[4];
									 //$scope.version = asd2[5];
									 $scope.addQuotation.qtnNo = data['quatationform'][0].qtnNo;
									/*}
								else
									{
									   swal("Oops sorry...", "Something went wrong!", "error");
									   $scope.$apply();
									     $("#btn-draftPro").addClass("active2");
										  $("#btn-discardPro").addClass("active2");
										  $("#btn-refreshPro").addClass("active2");
										  $("#btn-savePro").addClass("active2");
									}*/
							    
							    $scope.$apply();
				        	   
				           });
					});
					$("#btn-draftPro").removeClass("active2");
					$("#btn-discardPro").removeClass("active2");
					$("#btn-refreshPro").removeClass("active2");
					$("#btn-savePro").removeClass("active2");
		  
	   };	   
	   
	   $scope.resetProject = function(form)
	   {
		    var QtnType = $scope.addQuotation.qtnType;
		   qtnFormData = new FormData();
		   $scope.addQuotation = ({'qtnType':'1','qtnProgress':'0','showCost':'1','modifiedstatus':'0','qtnMaster':'1'});
		   $indexProject=1;
		   $scope.projectUnitData=[{'id':$indexProject,'motorType':'NO','protectionGrade':'IP55','internationalStd':'JIS','motorPower':'0.1','pole':'4','phase':'3','voltage':'200','freq':'50','mtrEfficncyClass':'0','inverter':'1','motorBrake':'1','motorBrakeVolt':'1','customerPrice':'0','tpricereq':true,'markUpreq':true,'qntyreq':true,'costreqsts':true,'tpfactorsts':true,'lpfactor':true}];
		   $indexTerm=1;
		   $scope.termData=[{'id':$indexTerm}];
		   $scope.addQuotation = angular.copy($scope.master);
		   $scope.stepsModel = [];
		  // $scope.loadQuotationSeqNum(QtnType,form);
		  // $scope.loadSysDate();
		    $('#picturegallery1').val("['']").trigger('chosen:updated');
		   
		  // $scope.addQuotation = ({'qtnType':'1','qtnProgress':'0','showCost':'0','modifiedstatus':'0','currency':'USD','tax':'VAT','country':'AUSTRALIA','taxPercent':'10','paymentTerm':'2','salesTerm':'CIF','estPercent':'10','assigned':'Sales'});
		   form.$setPristine(true); 
		   $rootScope.loadQuotation = "";
			$rootScope.loadQtnType = "";
			$rootScope.quotationSeqNo = "";
			$rootScope.quotationAction = "";
			$rootScope.qtnType = "";
		   $.post("getSavedQuatationDataOnQuatationNumberFromQuatationTempwithclickforMultipleDrafts.do",{code:QtnType},function(json)
			{
										
					$scope.addQuotation = json['quatationform'][0];
				    $scope.termData = json['quatationtermsgrid'];
					$scope.projectUnitData = json['quatationgrid'];
					
					/*if(validData.flag != "1")
						{
							//alert("if");
							
							$scope.addQuotation.madatory = "0";
							
						}
						else
						{
							//alert("else");
							
							$scope.addQuotation.madatory = "1";
							
						}*/
                        
                        
                        //var validData = json['quatationform'][0];
				   //alert(JSON.stringify(validData.emailAddr));
				   /*if(validData.emailAddr == "" || validData.emailAddr == undefined || validData.emailAddr == "NA")
					{
						//alert("if");
						$scope.addQuotation.emailAddr = "";
						//$scope.addQuotation.madatory = "1";
						$("#Email").css("background-color", "#ffffff");
					}
					else
					{
						//alert("else");
						$scope.addQuotation.emailAddr = validData.emailAddr;
						//$scope.addQuotation.madatory = "0";
						$("#Email").css("background-color", "#99ff99");
					}*/
					$(".resetBgColr").css("background-color", "#ffff7f"); 
					$("#Email").css("background-color", "#ffffff");
					
					 var getImage = json['quatationform'][0].imagepath;
								  // alert(getImage);
									 if(getImage!=null)
									   {
										   //alert(getImage + " " + 1);
										   var imgPrew = getImage.trim();
										   if(imgPrew==null || imgPrew=="" )
										   {
											   //alert(getImage + " " + 2);
											 
											  $scope.stepsModel = [];
											  $scope.$apply();
											  //$scope.dummyPhoto="";
					                          //$('#dummyPhoto').trigger('blur');
										   }
										   else
										   {
											   //alert(getImage + " " + 3);
											   $scope.stepsModel = getImage.split(',');
											   $scope.$apply();
											   
										   }
									   }
									   else
									   {
										   //alert(getImage + " " + 4);
										    $scope.stepsModel = [];
										    $scope.$apply();
										 
									   }
			   
				    var asd = json['quatationform'][0].qtnNo;
					 
				    var asd2 = asd.split("-");
					//alert(asd2.length);
					if(asd2.length == 5)
					{
						$scope.qType = asd2[0];
						$scope.coun_year_Code = asd2[1];
						$scope.runNo = asd2[2];
						var codesplit = asd2[3].split("/");
						//alert(asd2[3]);
						$scope.custD_N = codesplit[0];
						$scope.custD_S = codesplit[1];
						$scope.version = asd2[4];
					}
					/*if(asd2.length == 4)
					{
						$scope.qType = asd2[0];
						$scope.coun_year_Code = asd2[1];
						$scope.runNo = asd2[2];
						//var codesplit = asd2[3].split("/");
						$scope.custD_N = asd2[3];
						$scope.custD_S = "";
						$scope.version = asd2[4];
					}*/
					if(asd2.length == 4)
					{
						$scope.qType = asd2[0];
						$scope.coun_year_Code = asd2[1];
						$scope.runNo = asd2[2];
						//var codesplit = asd2[3].split("/");
						//$scope.custD_N = asd2[3];
						//$scope.custD_S = "";
						$scope.version = asd2[3];
					}
					 //$scope.qType = asd2[0];
					 //$scope.coun_year_Code = asd2[1];
					// $scope.runNo = asd2[2];
					 //alert(asd2[3]);
					
					 //$scope.custD_N = asd2[3];
					 //$scope.custD_S = asd2[4];
					 //$scope.version = asd2[5];
					 $scope.addQuotation.qtnNo = json['quatationform'][0].qtnNo;
				   
				 $("#backtocasebtn").hide();
				 $scope.$apply();
				//$scope.addCase=json['maincaseform'][0];
               // $scope.addDesp=json['description'][0];
			
				

			});
		   
	   };
//================Spare Part Temp Form Submit========================//
       $scope.sparePartTempFormSubmit = function(addQuotation,form)
	   {
		   //alert("No");
		    var QtnType = $scope.addQuotation.qtnType;
		   if($scope.quotationForm.$valid)
		   { 
			   qtnTypeGridData = [];
			   $scope.sparePartData.forEach(function(sparePart)
				{ 
									//alert(JSON.stringify(sparePart)); 
					qtnTypeGridData.push(angular.toJson(sparePart));	 
				});
			   termCondition = [];
			   $scope.termData.forEach(function(term)
				{ 
									//alert(JSON.stringify(fullUnitItems)); 
					termCondition.push(angular.toJson(term));	 
				});
			  qtnFormData.append("formData",angular.toJson(addQuotation));
			  qtnFormData.append("gridData",angular.toJson(qtnTypeGridData));
			  qtnFormData.append("termConData",angular.toJson(termCondition));
			  //alert(JSON.stringify(qtnFormData));
			$("#btn-draftSpare").addClass("active2");
			$("#btn-discardSpare").addClass("active2");
			$("#btn-refreshSpare").addClass("active2");
			$("#btn-saveSpare").addClass("active2");
			swal({
					  title: "Are you sure?",
					  text: "Your File Will Be Save As Draft!",
					  type: "warning",
					  showCancelButton: true,
					  confirmButtonClass: "btn-danger",
					  confirmButtonText: "Yes, Save it!",
					  closeOnConfirm: false
					},
					
					function(){
						
					 
					   $.ajax({
								   url         : "/SCA-360/quatationformsubmitforTemp.do",
								   data        : qtnFormData,
								   contentType : false,
								   processData : false,
								   type        : 'POST'
							   }).success(function(data, status){
								   //alert(data);
									if(data==true)
										{
											
											 swal("", "Draft Saved Successfully!", "success");
											qtnFormData = new FormData();
											$scope.addQuotation = ({'qtnType':'2','qtnProgress':'0','showCost':'1','modifiedstatus':'0','qtnMaster':'1'});
											$indexSpare=1;
											$scope.sparePartData=[{'id':$indexSpare,'gm':'0','motorType':'NO','protectionGrade':'IP55','internationalStd':'JIS','motorPower':'0.1','pole':'4','phase':'3','voltage':'200','freq':'50','mtrEfficncyClass':'0','inverter':'1','motorBrake':'1','motorBrakeVolt':'1','customerPrice':'0','tpricereq':true,'markUpreq':true,'qntyreq':true,'costreqsts':true,'tpfactorsts':true,'lpfactor':true}];
											$indexTerm=1;
											$scope.termData=[{'id':$indexTerm}];
											$scope.addQuotation = angular.copy($scope.master);
											$scope.loadQuotationSeqNum(QtnType,form);
											//$scope.loadSysDate();
											
											
											//$scope.addQuotation = ({'qtnType':'2','qtnProgress':'0','showCost':'0','modifiedstatus':'0','currency':'USD','tax':'VAT','country':'AUSTRALIA','taxPercent':'10','paymentTerm':'2','salesTerm':'CIF','estPercent':'10','assigned':'Sales'});
											form.$setPristine(true);
											$rootScope.loadQuotation = "";
											$rootScope.loadQtnType = "";
											$rootScope.quotationSeqNo = "";
											$rootScope.quotationAction = "";
											$rootScope.qtnType = "";
											$scope.$apply();
											$("#btn-draftSpare").removeClass("active2");
											 $("#btn-discardSpare").removeClass("active2");
											 $("#btn-refreshSpare").removeClass("active2");
											 $("#btn-saveSpare").removeClass("active2");
											
											
											
										}
									else
										{
										   swal("Oops sorry...", "Something went wrong!", "error");
										   $scope.$apply();
										   $("#btn-draftSpare").addClass("active2");
											$("#btn-discardSpare").addClass("active2");
											$("#btn-refreshSpare").addClass("active2");
											$("#btn-saveSpare").addClass("active2");
										}
									
								   
								   
							   });
					});
					 $("#btn-draftSpare").removeClass("active2");
					 $("#btn-discardSpare").removeClass("active2");
					 $("#btn-refreshSpare").removeClass("active2");
					 $("#btn-saveSpare").removeClass("active2");				 
							
		 }
		 else
		 {
			 var field = null, firstError = null;
						for (field in form) 
						{
							if (field[0] != '$') 
							{
								if (firstError === null && !form[field].$valid) 
								{
									firstError = form[field].$name;
								}
								if (form[field].$pristine) 
								{
									form[field].$dirty = true;
								}
							}	
						}
		 }
	   };

//================Spare Part Form Submit========================//
       $scope.sparePartFormSubmit = function(addQuotation,form)
	   {
		   //alert("Yes");
		    var QtnType = $scope.addQuotation.qtnType;
		   if($scope.quotationForm.$valid)
		   { 
			   qtnTypeGridData = [];
			   $scope.sparePartData.forEach(function(sparePart)
				{ 
									//alert(JSON.stringify(sparePart)); 
					qtnTypeGridData.push(angular.toJson(sparePart));	 
				});
			   termCondition = [];
			   $scope.termData.forEach(function(term)
				{ 
									//alert(JSON.stringify(fullUnitItems)); 
					termCondition.push(angular.toJson(term));	 
				});
			  qtnFormData.append("formData",angular.toJson(addQuotation));
			  qtnFormData.append("gridData",angular.toJson(qtnTypeGridData));
			  qtnFormData.append("termConData",angular.toJson(termCondition));
			  //alert(JSON.stringify(qtnFormData));
			    $("#btn-draftSpare").addClass("active2");
				$("#btn-discardSpare").addClass("active2");
				$("#btn-refreshSpare").addClass("active2");
				$("#btn-saveSpare").addClass("active2");
			  
							 $.ajax({
								   url         : "/SCA-360/quatationformsubmitforFullunit.do",
								   data        : qtnFormData,
								   contentType : false,
								   processData : false,
								   type        : 'POST'
							   }).success(function(data, status){
								   //alert(data);
									if(data==true)
										{
											
											swal("", 'Saved Successfully!' , "success");
											qtnFormData = new FormData();
											$scope.addQuotation = ({'qtnType':'2','qtnProgress':'0','showCost':'1','modifiedstatus':'0','qtnMaster':'1'});
											$indexSpare=1;
											$scope.sparePartData=[{'id':$indexSpare,'gm':'0','motorType':'NO','protectionGrade':'IP55','internationalStd':'JIS','motorPower':'0.1','pole':'4','phase':'3','voltage':'200','freq':'50','mtrEfficncyClass':'0','inverter':'1','motorBrake':'1','motorBrakeVolt':'1','customerPrice':'0','tpricereq':true,'markUpreq':true,'qntyreq':true,'costreqsts':true,'tpfactorsts':true,'lpfactor':true}];
											$indexTerm=1;
											$scope.termData=[{'id':$indexTerm}];
											$scope.addQuotation = angular.copy($scope.master);
											$scope.loadQuotationSeqNum(QtnType,form);
											//$scope.loadSysDate();
											
											
											//$scope.addQuotation = ({'qtnType':'2','qtnProgress':'0','showCost':'0','modifiedstatus':'0','currency':'USD','tax':'VAT','country':'AUSTRALIA','taxPercent':'10','paymentTerm':'2','salesTerm':'CIF','estPercent':'10','assigned':'Sales'});
											form.$setPristine(true);
											$rootScope.loadQuotation = "";
											$rootScope.loadQtnType = "";
											$rootScope.quotationSeqNo = "";
											$rootScope.quotationAction = "";
											$rootScope.qtnType = "";
											$scope.$apply();
											$("#btn-draftSpare").removeClass("active2");
											 $("#btn-discardSpare").removeClass("active2");
											 $("#btn-refreshSpare").removeClass("active2");
											 $("#btn-saveSpare").removeClass("active2");
											$("#backtocasebtn").hide();
											
											$(".resetBgColr").css("background-color", "#ffff7f"); 
										 	$("#Email").css("background-color", "#ffffff");
											
										}
									else
										{
										   swal("Oops sorry...", "Something went wrong!", "error");
										   $scope.$apply();
										   $("#btn-draftSpare").addClass("active2");
											$("#btn-discardSpare").addClass("active2");
											$("#btn-refreshSpare").addClass("active2");
											$("#btn-saveSpare").addClass("active2");
										}
									
								   
								   
							   });
		 }
		 else
		 {
			 var field = null, firstError = null;
						for (field in form) 
						{
							if (field[0] != '$') 
							{
								if (firstError === null && !form[field].$valid) 
								{
									firstError = form[field].$name;
								}
								if (form[field].$pristine) 
								{
									form[field].$dirty = true;
								}
							}	
						}
		 }
	   };
	   
	   	   	//================Discard Draft SparePart========================//   
	   $scope.discardDraftSparePart = function(addQuotation,form)
	   {
		   var QtnType = $scope.addQuotation.qtnType;
		   qtnTypeGridData = [];
			   $scope.sparePartData.forEach(function(sparePart)
				{ 
									//alert(JSON.stringify(sparePart)); 
					qtnTypeGridData.push(angular.toJson(sparePart));	 
				});
			   termCondition = [];
			   $scope.termData.forEach(function(term)
				{ 
									//alert(JSON.stringify(fullUnitItems)); 
					termCondition.push(angular.toJson(term));	 
				});
			
		   qtnFormData.append("formData",angular.toJson(addQuotation));
		   qtnFormData.append("gridData",angular.toJson(qtnTypeGridData));
		   qtnFormData.append("termConData",angular.toJson(termCondition));
		   
		  // alert(JSON.stringify(addQuotation) + "addQuotation");
		  // alert(JSON.stringify(qtnTypeGridData) + "qtnTypeGridData");
		  // alert(JSON.stringify(termCondition) + "termCondition");
		$("#btn-draftSpare").addClass("active2");
		$("#btn-discardSpare").addClass("active2");
		$("#btn-refreshSpare").addClass("active2");
		$("#btn-saveSpare").addClass("active2");
											
		  swal({
					  title: "Are you sure?",
					  text: "Your will not be able to recover this Draft file!",
					  type: "warning",
					  showCancelButton: true,
					  confirmButtonClass: "btn-danger",
					  confirmButtonText: "Yes, delete it!",
					  closeOnConfirm: false
					},
					function(){
					 
							$.ajax({
						       url         : "/SCA-360/discardingQuatation.do",
						       data        : qtnFormData,
						       contentType : false,
						       processData : false,
						       type        : 'POST'
						   }).success(function(data, status){
							   
							   //alert(JSON.stringify(data));
								//if(data==true)
//									{
									
										
										 swal("Deleted!", "Draft Discarded Successfully.", "success");
										qtnFormData = new FormData();
										$scope.addQuotation = angular.copy($scope.master);
										form.$setPristine(true); 
										 $('#picturegallery1').val("['']").trigger('chosen:updated');
										$scope.addQuotation = data['quatationform'][0];
										$scope.termData = data['quatationtermsgrid'];
										$scope.sparePartData = data['quatationgrid'];
										/*$scope.addQuotation = angular.copy($scope.master);
										$scope.addQuotation = ({'qtnType':'2','qtnProgress':'0','showCost':'1','modifiedstatus':'0','qtnMaster':'1'});
										$indexSpare=1;
										$scope.sparePartData=[{'id':$indexSpare,'gm':'0','motorType':'NO','protectionGrade':'IP55','internationalStd':'JIS','motorPower':'0.1','pole':'4','phase':'3','voltage':'400','freq':'50','mtrEfficncyClass':'0','inverter':'1','motorBrake':'1','motorBrakeVolt':'1','customerPrice':'0','tpricereq':true,'markUpreq':true,'qntyreq':true,'costreqsts':true,'tpfactorsts':true,'lpfactor':true}];
										$indexTerm=1;
										$scope.termData=[{'id':$indexTerm}];
 									    $scope.loadQuotationSeqNum(QtnType,form);*/
										//$scope.loadSysDate();
										
										//$scope.addQuotation = ({'qtnType':'0','qtnProgress':'0','showCost':'0','modifiedstatus':'0','createdBy':Username,'currency':'AUD','tax':'VAT','country':'AUSTRALIA','taxPercent':'10','paymentTerm':'2','salesTerm':'CIF','estPercent':'10','assigned':'Sales'});
										//form.$setPristine(true); 
										$rootScope.loadQuotation = "";
				 						$rootScope.loadQtnType = "";
										$rootScope.quotationSeqNo = "";
										$rootScope.quotationAction = "";
										$rootScope.qtnType = "";
										$scope.$apply();
										$("#btn-draftSpare").removeClass("active2");
										 $("#btn-discardSpare").removeClass("active2");
										 $("#btn-refreshSpare").removeClass("active2");
										 $("#btn-saveSpare").removeClass("active2");
										 $("#backtocasebtn").hide();
										 
										 $(".resetBgColr").css("background-color", "#ffff7f"); 
										 $("#Email").css("background-color", "#ffffff");
										 
										 var validData = data['quatationform'][0];
										var asd = data['quatationform'][0].qtnNo;
										 
										var asd2 = asd.split("-");
										//alert(asd2.length);
										if(asd2.length == 5)
										{
											$scope.qType = asd2[0];
											$scope.coun_year_Code = asd2[1];
											$scope.runNo = asd2[2];
											var codesplit = asd2[3].split("/");
											//alert(asd2[3]);
											$scope.custD_N = codesplit[0];
											$scope.custD_S = codesplit[1];
											$scope.version = asd2[4];
										}
										/*if(asd2.length == 4)
										{
											$scope.qType = asd2[0];
											$scope.coun_year_Code = asd2[1];
											$scope.runNo = asd2[2];
											//var codesplit = asd2[3].split("/");
											$scope.custD_N = asd2[3];
											$scope.custD_S = "";
											$scope.version = asd2[4];
										}*/
										if(asd2.length == 4)
										{
											$scope.qType = asd2[0];
											$scope.coun_year_Code = asd2[1];
											$scope.runNo = asd2[2];
											//var codesplit = asd2[3].split("/");
											//$scope.custD_N = asd2[3];
											//$scope.custD_S = "";
											$scope.version = asd2[3];
										}
										 //$scope.qType = asd2[0];
										 //$scope.coun_year_Code = asd2[1];
										// $scope.runNo = asd2[2];
										 //alert(asd2[3]);
										
										 //$scope.custD_N = asd2[3];
										 //$scope.custD_S = asd2[4];
										 //$scope.version = asd2[5];
										 $scope.addQuotation.qtnNo = data['quatationform'][0].qtnNo;
									   
									
								/*	}
								else
									{
									   swal("Oops sorry...", "Something went wrong!", "error");
									   $scope.$apply();
									   $("#btn-draftSpare").addClass("active2");
										$("#btn-discardSpare").addClass("active2");
										$("#btn-refreshSpare").addClass("active2");
										$("#btn-saveSpare").addClass("active2");
									}*/
							     $scope.$apply();
							   
				        	   
				           });
					});
					$("#btn-draftSpare").removeClass("active2");
					$("#btn-discardSpare").removeClass("active2");
					$("#btn-refreshSpare").removeClass("active2");
					$("#btn-saveSpare").removeClass("active2");
		   
	   };	
	   
	   $scope.resetSparePart = function(form)
	   {
		     var QtnType = $scope.addQuotation.qtnType;
			qtnFormData = new FormData();
			$scope.addQuotation = ({'qtnType':'2','qtnProgress':'0','showCost':'1','modifiedstatus':'0','qtnMaster':'1'});
			$indexSpare=1;
			$scope.sparePartData=[{'id':$indexSpare,'gm':'0','motorType':'NO','protectionGrade':'IP55','internationalStd':'JIS','motorPower':'0.1','pole':'4','phase':'3','voltage':'200','freq':'50','mtrEfficncyClass':'0','inverter':'1','motorBrake':'1','motorBrakeVolt':'1','customerPrice':'0','tpricereq':true,'markUpreq':true,'qntyreq':true,'costreqsts':true,'tpfactorsts':true,'lpfactor':true}];
			$indexTerm=1;
			$scope.termData=[{'id':$indexTerm}];
			$scope.addQuotation = angular.copy($scope.master);
			//$scope.loadQuotationSeqNum(QtnType,form);
			//$scope.loadSysDate();
			 $('#picturegallery1').val("['']").trigger('chosen:updated');
			
			//$scope.addQuotation = ({'qtnType':'2','qtnProgress':'0','showCost':'0','modifiedstatus':'0','currency':'USD','tax':'VAT','country':'AUSTRALIA','taxPercent':'10','paymentTerm':'2','salesTerm':'CIF','estPercent':'10','assigned':'Sales'});
			form.$setPristine(true); 
			$rootScope.loadQuotation = "";
			$rootScope.loadQtnType = "";
			$rootScope.quotationSeqNo = "";
			$rootScope.quotationAction = "";
			$rootScope.qtnType = "";
			$.post("getSavedQuatationDataOnQuatationNumberFromQuatationTempwithclickforMultipleDrafts.do",{code:QtnType},function(json)
			{
										
				 	$scope.addQuotation = json['quatationform'][0];
				    $scope.termData = json['quatationtermsgrid'];
					$scope.sparePartData = json['quatationgrid'];
					
					/*if(validData.flag == 1)
						{
							//alert("if");
							
							$scope.addQuotation.madatory = "0";
							
						}
						else
						{
							//alert("else");
							
							$scope.addQuotation.madatory = "1";
							
						}
                        */
                        $(".resetBgColr").css("background-color", "#ffff7f"); 
						$("#Email").css("background-color", "#ffffff");
						
                       // var validData = json['quatationform'][0];
				   //alert(JSON.stringify(validData.emailAddr));
				  /* if(validData.emailAddr == "" || validData.emailAddr == undefined || validData.emailAddr == "NA")
					{
						//alert("if");
						$scope.addQuotation.emailAddr = "";
						//$scope.addQuotation.madatory = "1";
						$("#Email").css("background-color", "#ffffff");
					}
					else
					{
						//alert("else");
						$scope.addQuotation.emailAddr = validData.emailAddr;
						//$scope.addQuotation.madatory = "0";
						$("#Email").css("background-color", "#99ff99");
					}*/
			   		var validData = json['quatationform'][0];
				    var asd = json['quatationform'][0].qtnNo;
					 
				    var asd2 = asd.split("-");
					//alert(asd2.length);
					if(asd2.length == 5)
					{
						$scope.qType = asd2[0];
						$scope.coun_year_Code = asd2[1];
						$scope.runNo = asd2[2];
						var codesplit = asd2[3].split("/");
						//alert(asd2[3]);
						$scope.custD_N = codesplit[0];
						$scope.custD_S = codesplit[1];
						$scope.version = asd2[4];
					}
					/*if(asd2.length == 4)
					{
						$scope.qType = asd2[0];
						$scope.coun_year_Code = asd2[1];
						$scope.runNo = asd2[2];
						//var codesplit = asd2[3].split("/");
						$scope.custD_N = asd2[3];
						$scope.custD_S = "";
						$scope.version = asd2[4];
					}*/
					if(asd2.length == 4)
					{
						$scope.qType = asd2[0];
						$scope.coun_year_Code = asd2[1];
						$scope.runNo = asd2[2];
						//var codesplit = asd2[3].split("/");
						//$scope.custD_N = asd2[3];
						//$scope.custD_S = "";
						$scope.version = asd2[3];
					}
					 //$scope.qType = asd2[0];
					 //$scope.coun_year_Code = asd2[1];
					// $scope.runNo = asd2[2];
					 //alert(asd2[3]);
					
					 //$scope.custD_N = asd2[3];
					 //$scope.custD_S = asd2[4];
					 //$scope.version = asd2[5];
					 $scope.addQuotation.qtnNo = json['quatationform'][0].qtnNo;
				   
				 $("#backtocasebtn").hide();
				 $scope.$apply();
				//$scope.addCase=json['maincaseform'][0];
               // $scope.addDesp=json['description'][0];
			
				
			});
			
	   };
//================Service Part Temp Form Submit========================//
       $scope.servicePartTempFormSubmit = function(addQuotation,form)
	   {
		   //alert("No");
		     var QtnType = $scope.addQuotation.qtnType;
		  if($scope.quotationForm.$valid)
		  { 
			   qtnTypeGridData = [];
			   $scope.servicPartData.forEach(function(servicePart)
				{ 
									//alert(JSON.stringify(servicePart)); 
					qtnTypeGridData.push(angular.toJson(servicePart));	 
				});
			   termCondition = [];
			   $scope.termData.forEach(function(term)
				{ 
									//alert(JSON.stringify(fullUnitItems)); 
					termCondition.push(angular.toJson(term));	 
				});
			  qtnFormData.append("formData",angular.toJson(addQuotation));
			  qtnFormData.append("gridData",angular.toJson(qtnTypeGridData));
			  qtnFormData.append("termConData",angular.toJson(termCondition));
			  //alert(JSON.stringify(qtnFormData));
			    $("#btn-draftServ").addClass("active2");
				$("#btn-discardServ").addClass("active2");
				$("#btn-refreshServ").addClass("active2");
			    $("#btn-saveServ").addClass("active2");
				
				swal({
					  title: "Are you sure?",
					  text: "Your File Will Be Save As Draft!",
					  type: "warning",
					  showCancelButton: true,
					  confirmButtonClass: "btn-danger",
					  confirmButtonText: "Yes, Save it!",
					  closeOnConfirm: false
					},
					
					function(){
						
					 
					  $.ajax({
								   url         : "/SCA-360/quatationformsubmitforTemp.do",
								   data        : qtnFormData,
								   contentType : false,
								   processData : false,
								   type        : 'POST'
							   }).success(function(data, status){
								   //alert(data);
									if(data==true)
										{
											
											 swal("", "Draft Saved Successfully!", "success");
											qtnFormData = new FormData();
											$scope.addQuotation = ({'qtnType':'3','qtnProgress':'0','showCost':'1','modifiedstatus':'0','qtnMaster':'1'});
											$indexService=1;
											$scope.servicPartData=[{'id':$indexService,'motorType':'NO','protectionGrade':'IP55','internationalStd':'JIS','motorPower':'0.1','pole':'4','phase':'3','voltage':'200','freq':'50','mtrEfficncyClass':'0','inverter':'1','motorBrake':'1','motorBrakeVolt':'1','customerPrice':'0','tpricereq':true,'markUpreq':true,'qntyreq':true,'costreqsts':true,'tpfactorsts':true,'lpfactor':true}];
											$indexTerm=1;
											$scope.termData=[{'id':$indexTerm}];
											$scope.addQuotation = angular.copy($scope.master);
											$scope.loadQuotationSeqNum(QtnType,form);
											//$scope.loadSysDate();
											
											
											//$scope.addQuotation = ({'qtnType':'3','qtnProgress':'0','showCost':'0','modifiedstatus':'0','currency':'USD','tax':'VAT','country':'AUSTRALIA','taxPercent':'10','paymentTerm':'2','salesTerm':'CIF','estPercent':'10','assigned':'Sales'});
											form.$setPristine(true); 
											$rootScope.loadQuotation = "";
											$rootScope.loadQtnType = "";
											$rootScope.quotationSeqNo = "";
											$rootScope.quotationAction = "";
											$rootScope.qtnType = "";
											$scope.$apply();
											
										 $("#btn-draftServ").removeClass("active2");
										 $("#btn-discardServ").removeClass("active2");
										 $("#btn-refreshServ").removeClass("active2");
										 $("#btn-saveServ").removeClass("active2"); 
										 
										
											
											
										}
									else
										{
										   swal("Oops sorry...", "Something went wrong!", "error");
										   $scope.$apply();
										   $("#btn-draftServ").addClass("active2");
											$("#btn-discardServ").addClass("active2");
											$("#btn-refreshServ").addClass("active2");
											$("#btn-saveServ").addClass("active2");
										}
									
								   
								   
							   });
					});	
					$("#btn-draftServ").removeClass("active2");
					$("#btn-discardServ").removeClass("active2");
					$("#btn-refreshServ").removeClass("active2");
					$("#btn-saveServ").removeClass("active2"); 		 
							 
		 }
		 else
		 {
			 var field = null, firstError = null;
						for (field in form) 
						{
							if (field[0] != '$') 
							{
								if (firstError === null && !form[field].$valid) 
								{
									firstError = form[field].$name;
								}
								if (form[field].$pristine) 
								{
									form[field].$dirty = true;
								}
							}	
						}
		 }
	   };

//================Service Part Form Submit Itemized========================//
       $scope.servicePartFormSubmit = function(addQuotation,form)
	   {
		   //alert("Yes");
		    var QtnType = $scope.addQuotation.qtnType;
		  if($scope.quotationForm.$valid)
		  { 
			   qtnTypeGridData = [];
			   $scope.servicPartData.forEach(function(servicePart)
				{ 
									//alert(JSON.stringify(servicePart)); 
					qtnTypeGridData.push(angular.toJson(servicePart));	 
				});
			   termCondition = [];
			   $scope.termData.forEach(function(term)
				{ 
									//alert(JSON.stringify(fullUnitItems)); 
					termCondition.push(angular.toJson(term));	 
				});
			  qtnFormData.append("formData",angular.toJson(addQuotation));
			  qtnFormData.append("gridData",angular.toJson(qtnTypeGridData));
			  qtnFormData.append("termConData",angular.toJson(termCondition));
			  //alert(JSON.stringify(qtnFormData));
			  
			    $("#btn-draftServ").addClass("active2");
				$("#btn-discardServ").addClass("active2");
				$("#btn-refreshServ").addClass("active2");
				$("#btn-saveServ").addClass("active2");
			  
							 $.ajax({
								   url         : "/SCA-360/quatationformsubmitforFullunit.do",
								   data        : qtnFormData,
								   contentType : false,
								   processData : false,
								   type        : 'POST'
							   }).success(function(data, status){
								   //alert(data);
									if(data==true)
										{
											
											swal("", 'Saved Successfully!' , "success");
											qtnFormData = new FormData();
											$scope.addQuotation = ({'qtnType':'3','qtnProgress':'0','showCost':'1','modifiedstatus':'0','qtnMaster':'1'});
											$indexService=1;
											$scope.servicPartData=[{'id':$indexService,'motorType':'NO','protectionGrade':'IP55','internationalStd':'JIS','motorPower':'0.1','pole':'4','phase':'3','voltage':'200','freq':'50','mtrEfficncyClass':'0','inverter':'1','motorBrake':'1','motorBrakeVolt':'1','customerPrice':'0','tpricereq':true,'markUpreq':true,'qntyreq':true,'costreqsts':true,'tpfactorsts':true,'lpfactor':true}];
											$indexTerm=1;
											$scope.termData=[{'id':$indexTerm}];
											$scope.addQuotation = angular.copy($scope.master);
											$scope.loadQuotationSeqNum(QtnType,form);
											//$scope.loadSysDate();
											
											
											//$scope.addQuotation = ({'qtnType':'3','qtnProgress':'0','showCost':'0','modifiedstatus':'0','currency':'USD','tax':'VAT','country':'AUSTRALIA','taxPercent':'10','paymentTerm':'2','salesTerm':'CIF','estPercent':'10','assigned':'Sales'});
											form.$setPristine(true); 
											$rootScope.loadQuotation = "";
											$rootScope.loadQtnType = "";
											$rootScope.quotationSeqNo = "";
											$rootScope.quotationAction = "";
											$rootScope.qtnType = "";
											$scope.$apply();
											
											 $("#btn-draftServ").removeClass("active2");
											 $("#btn-discardServ").removeClass("active2");
											 $("#btn-refreshServ").removeClass("active2");
											 $("#btn-saveServ").removeClass("active2"); 
											$("#backtocasebtn").hide();
											
											$(".resetBgColr").css("background-color", "#ffff7f"); 
										 	$("#Email").css("background-color", "#ffffff");
											
										}
									else
										{
										   swal("Oops sorry...", "Something went wrong!", "error");
										   $scope.$apply();
										   $("#btn-draftServ").addClass("active2");
											$("#btn-discardServ").addClass("active2");
											$("#btn-refreshServ").addClass("active2");
											$("#btn-saveServ").addClass("active2");
										}
									
								   
								   
							   });
		 }
		 else
		 {
			 var field = null, firstError = null;
						for (field in form) 
						{
							if (field[0] != '$') 
							{
								if (firstError === null && !form[field].$valid) 
								{
									firstError = form[field].$name;
								}
								if (form[field].$pristine) 
								{
									form[field].$dirty = true;
								}
							}	
						}
		 }
	   };
	   
	   	   	   	//================Discard Draft Service========================//   
	   $scope.discardDraftService = function(addQuotation,form)
	   {
		   var QtnType = $scope.addQuotation.qtnType;
		    	qtnTypeGridData = [];
			   $scope.servicPartData.forEach(function(servicePart)
				{ 
									//alert(JSON.stringify(servicePart)); 
					qtnTypeGridData.push(angular.toJson(servicePart));	 
				});
			   termCondition = [];
			   $scope.termData.forEach(function(term)
				{ 
									//alert(JSON.stringify(fullUnitItems)); 
					termCondition.push(angular.toJson(term));	 
				});
			
		   qtnFormData.append("formData",angular.toJson(addQuotation));
		   qtnFormData.append("gridData",angular.toJson(qtnTypeGridData));
		   qtnFormData.append("termConData",angular.toJson(termCondition));
		   
		  // alert(JSON.stringify(addQuotation) + "addQuotation");
		  // alert(JSON.stringify(qtnTypeGridData) + "qtnTypeGridData");
		  // alert(JSON.stringify(termCondition) + "termCondition");
		  	$("#btn-draftServ").addClass("active2");
			$("#btn-discardServ").addClass("active2");
			$("#btn-refreshServ").addClass("active2");
			$("#btn-saveServ").addClass("active2");
		  
		  swal({
					  title: "Are you sure?",
					  text: "Your will not be able to recover this Draft file!",
					  type: "warning",
					  showCancelButton: true,
					  confirmButtonClass: "btn-danger",
					  confirmButtonText: "Yes, delete it!",
					  closeOnConfirm: false
					},
					function(){
					  
							$.ajax({
						       url         : "/SCA-360/discardingQuatation.do",
						       data        : qtnFormData,
						       contentType : false,
						       processData : false,
						       type        : 'POST'
						   }).success(function(data, status){
							   
								//if(data==true)
//									{
									
										
										swal("Deleted!", "Draft Discarded Successfully.", "success");
										qtnFormData = new FormData();
										$scope.addQuotation = angular.copy($scope.master);
										form.$setPristine(true); 
										 $('#picturegallery1').val("['']").trigger('chosen:updated');
										$scope.addQuotation = data['quatationform'][0];
										$scope.termData = data['quatationtermsgrid'];
										$scope.servicPartData = data['quatationgrid'];
										/*$scope.addQuotation = ({'qtnType':'3','qtnProgress':'0','showCost':'1','modifiedstatus':'0','qtnMaster':'1'});
										$indexService=1;
										$scope.servicPartData=[{'id':$indexService,'motorType':'NO','protectionGrade':'IP55','internationalStd':'JIS','motorPower':'0.1','pole':'4','phase':'3','voltage':'400','freq':'50','mtrEfficncyClass':'0','inverter':'1','motorBrake':'1','motorBrakeVolt':'1','customerPrice':'0','tpricereq':true,'markUpreq':true,'qntyreq':true,'costreqsts':true,'tpfactorsts':true,'lpfactor':true}];
										$indexTerm=1;
										$scope.termData=[{'id':$indexTerm}];
 									    $scope.loadQuotationSeqNum(QtnType,form);*/
										//$scope.loadSysDate();
										
										//$scope.addQuotation = ({'qtnType':'0','qtnProgress':'0','showCost':'0','modifiedstatus':'0','createdBy':Username,'currency':'AUD','tax':'VAT','country':'AUSTRALIA','taxPercent':'10','paymentTerm':'2','salesTerm':'CIF','estPercent':'10','assigned':'Sales'});
										
										$rootScope.loadQuotation = "";
				 						$rootScope.loadQtnType = "";
										$rootScope.quotationSeqNo = "";
										$rootScope.quotationAction = "";
										$rootScope.qtnType = "";
										$scope.$apply();
										$("#btn-draftServ").removeClass("active2");
										 $("#btn-discardServ").removeClass("active2");
										 $("#btn-refreshServ").removeClass("active2");
										 $("#btn-saveServ").removeClass("active2");
										 $("#backtocasebtn").hide();
										 
										 $(".resetBgColr").css("background-color", "#ffff7f"); 
										 $("#Email").css("background-color", "#ffffff");
										 
										 var validData = data['quatationform'][0];
										var asd = data['quatationform'][0].qtnNo;
										 
										var asd2 = asd.split("-");
										//alert(asd2.length);
										if(asd2.length == 5)
										{
											$scope.qType = asd2[0];
											$scope.coun_year_Code = asd2[1];
											$scope.runNo = asd2[2];
											var codesplit = asd2[3].split("/");
											//alert(asd2[3]);
											$scope.custD_N = codesplit[0];
											$scope.custD_S = codesplit[1];
											$scope.version = asd2[4];
										}
										/*if(asd2.length == 4)
										{
											$scope.qType = asd2[0];
											$scope.coun_year_Code = asd2[1];
											$scope.runNo = asd2[2];
											//var codesplit = asd2[3].split("/");
											$scope.custD_N = asd2[3];
											$scope.custD_S = "";
											$scope.version = asd2[4];
										}*/
										if(asd2.length == 4)
										{
											$scope.qType = asd2[0];
											$scope.coun_year_Code = asd2[1];
											$scope.runNo = asd2[2];
											//var codesplit = asd2[3].split("/");
											//$scope.custD_N = asd2[3];
											//$scope.custD_S = "";
											$scope.version = asd2[3];
										}
										 //$scope.qType = asd2[0];
										 //$scope.coun_year_Code = asd2[1];
										// $scope.runNo = asd2[2];
										 //alert(asd2[3]);
										
										 //$scope.custD_N = asd2[3];
										 //$scope.custD_S = asd2[4];
										 //$scope.version = asd2[5];
										 $scope.addQuotation.qtnNo = data['quatationform'][0].qtnNo;
								/*	}
								else
									{
									   swal("Oops sorry...", "Something went wrong!", "error");
									   $scope.$apply();
									   $("#btn-draftServ").addClass("active2");
										$("#btn-discardServ").addClass("active2");
										$("#btn-refreshServ").addClass("active2");
										$("#btn-saveServ").addClass("active2");
									}*/
							    
							     $scope.$apply();
				        	   
				           });
					});
					$("#btn-draftServ").removeClass("active2");
					$("#btn-discardServ").removeClass("active2");
					$("#btn-refreshServ").removeClass("active2");
					$("#btn-saveServ").removeClass("active2");
		   
	   };	
	   
	   $scope.resetService = function(form)
	   {
		    var QtnType = $scope.addQuotation.qtnType;
		    qtnFormData = new FormData();
			$scope.addQuotation = ({'qtnType':'3','qtnProgress':'0','showCost':'1','modifiedstatus':'0','qtnMaster':'1'});
			$indexService=1;
			$scope.servicPartData=[{'id':$indexService,'motorType':'NO','protectionGrade':'IP55','internationalStd':'JIS','motorPower':'0.1','pole':'4','phase':'3','voltage':'200','freq':'50','mtrEfficncyClass':'0','inverter':'1','motorBrake':'1','motorBrakeVolt':'1','customerPrice':'0','tpricereq':true,'markUpreq':true,'qntyreq':true,'costreqsts':true,'tpfactorsts':true,'lpfactor':true}];
			$indexTerm=1;
			$scope.termData=[{'id':$indexTerm}];
			$scope.addQuotation = angular.copy($scope.master);
			//$scope.loadQuotationSeqNum(QtnType,form);
			//$scope.loadSysDate();
			 $('#picturegallery1').val("['']").trigger('chosen:updated');
			
			//$scope.addQuotation = ({'qtnType':'3','qtnProgress':'0','showCost':'0','modifiedstatus':'0','currency':'USD','tax':'VAT','country':'AUSTRALIA','taxPercent':'10','paymentTerm':'2','salesTerm':'CIF','estPercent':'10','assigned':'Sales'});
			form.$setPristine(true); 
			$rootScope.loadQuotation = "";
			$rootScope.loadQtnType = "";
			$rootScope.quotationSeqNo = "";
			$rootScope.quotationAction = "";
			$rootScope.qtnType = "";
			$.post("getSavedQuatationDataOnQuatationNumberFromQuatationTempwithclickforMultipleDrafts.do",{code:QtnType},function(json)
			{
										
				 	$scope.addQuotation = json['quatationform'][0];
				    $scope.termData = json['quatationtermsgrid'];
					$scope.servicPartData = json['quatationgrid'];
					
					/*if(validData.flag == 1)
						{
							//alert("if");
							
							$scope.addQuotation.madatory = "0";
							
						}
						else
						{
							//alert("else");
							
							$scope.addQuotation.madatory = "1";
							
						}*/
                        
                        $(".resetBgColr").css("background-color", "#ffff7f"); 
						$("#Email").css("background-color", "#ffffff");
						
                      //  var validData = json['quatationform'][0];
				   //alert(JSON.stringify(validData.emailAddr));
				  /* if(validData.emailAddr == "" || validData.emailAddr == undefined || validData.emailAddr == "NA")
					{
						//alert("if");
						$scope.addQuotation.emailAddr = "";
						//$scope.addQuotation.madatory = "1";
						$("#Email").css("background-color", "#ffffff");
					}
					else
					{
						//alert("else");
						$scope.addQuotation.emailAddr = validData.emailAddr;
						//$scope.addQuotation.madatory = "0";
						$("#Email").css("background-color", "#99ff99");
					}*/
			   		var validData = json['quatationform'][0];
				    var asd = json['quatationform'][0].qtnNo;
					 
				    var asd2 = asd.split("-");
					//alert(asd2.length);
					if(asd2.length == 5)
					{
						$scope.qType = asd2[0];
						$scope.coun_year_Code = asd2[1];
						$scope.runNo = asd2[2];
						var codesplit = asd2[3].split("/");
						//alert(asd2[3]);
						$scope.custD_N = codesplit[0];
						$scope.custD_S = codesplit[1];
						$scope.version = asd2[4];
					}
					/*if(asd2.length == 4)
					{
						$scope.qType = asd2[0];
						$scope.coun_year_Code = asd2[1];
						$scope.runNo = asd2[2];
						//var codesplit = asd2[3].split("/");
						$scope.custD_N = asd2[3];
						$scope.custD_S = "";
						$scope.version = asd2[4];
					}*/
					if(asd2.length == 4)
					{
						$scope.qType = asd2[0];
						$scope.coun_year_Code = asd2[1];
						$scope.runNo = asd2[2];
						//var codesplit = asd2[3].split("/");
						//$scope.custD_N = asd2[3];
						//$scope.custD_S = "";
						$scope.version = asd2[3];
					}
					 //$scope.qType = asd2[0];
					 //$scope.coun_year_Code = asd2[1];
					// $scope.runNo = asd2[2];
					 //alert(asd2[3]);
					
					 //$scope.custD_N = asd2[3];
					 //$scope.custD_S = asd2[4];
					 //$scope.version = asd2[5];
					 $scope.addQuotation.qtnNo = json['quatationform'][0].qtnNo;
				   
				 $("#backtocasebtn").hide();
				 $scope.$apply();
				//$scope.addCase=json['maincaseform'][0];
               // $scope.addDesp=json['description'][0];
			
				
			});
			
	   }
	   
	   /*$scope.loadPrintData = function()
	   {
		   //  alert(5654);
		   //$scope.itemData = [{id:'1',motor:'CVVBM40A-4235-11',snum:'(S/N. C11163367)',data:[{id:'1',partnum:'G31965G',partdesp:'Adapter for 30 C-ID',qty:'1',uprice:'86',tprice:'86'},{id:'2',partnum:'G46729G',partdesp:'Indicator for 30 L-Type',qty:'1',uprice:'50',tprice:'50'}]},{id:'2',motor:'CVVBM15A-4185-11',snum:' (S/N. C1113532)',data:[{id:'1',partnum:'DH0581G',partdesp:'10FV-218 High Speed Shaft',qty:'1',uprice:'86',tprice:'86'},{id:'2',partnum:'DP541WW-02',partdesp:'Fan F-132 High Temp',qty:'1',uprice:'50',tprice:'50'}]}];
            
	   }*/
	   
	   $scope.printGeneratePermit = function()
	   {
		   
		    var prtContent = document.getElementById("qtnPrint");
			var WinPrint = window.open('', '', 'left=0,top=0,width=800,height=500,toolbar=0,scrollbars=0,status=0');
			WinPrint.document.write(prtContent.innerHTML);
			WinPrint.document.close();
			WinPrint.focus();
			WinPrint.print();
			WinPrint.close();
	   }
	   
	   
	  /* $scope.getTotalPrice = function(qty,untPri,index)
	   {
		   //alert(qty);
		   //alert(untPri);
		   var index = this.$index;
		   $scope.fullUnitData[index].totalPrice = qty*untPri;
		   
	   }*/
	   
	   //===================================================//
	   		$scope.reqFields = function(status,index)
			{
				
				 
				//alert(status);
				 
				var index = this.$index;
				//alert($scope.qtnFullUnitData[index]);   
				if(status == 0)
				{
					$scope.qtnFullUnitData[index].tpricereq = true;
					$scope.qtnFullUnitData[index].markUpreq = true;
					$scope.qtnFullUnitData[index].qntyreq = true;
					$scope.qtnFullUnitData[index].lpricereq = false;
					$scope.qtnFullUnitData[index].disreq = false; 
					$scope.qtnFullUnitData[index].quantyreq = false; 
					$(".tpbgcolr").css("background-color", "#ffff7f"); 
					$(".lpbgcolr").css("background-color", "#ffffff"); 
				}
				else
				{
					$scope.qtnFullUnitData[index].tpricereq = false;
					$scope.qtnFullUnitData[index].markUpreq = false;
					$scope.qtnFullUnitData[index].qntyreq = false;
					$scope.qtnFullUnitData[index].lpricereq = true;
					$scope.qtnFullUnitData[index].disreq = true; 
					$scope.qtnFullUnitData[index].quantyreq = true; 
					$(".tpbgcolr").css("background-color", "#ffffff"); 
					$(".lpbgcolr").css("background-color", "#ffff7f"); 
				
				}
				
			};
			
			$scope.reqFieldsproj = function(status,index)
			{
				
				 
				//alert(status);
				 
				var index = this.$index;
				//alert($scope.qtnFullUnitData[index]);   
				if(status == 0)
				{
					$scope.projectUnitData[index].tpricereq = true;
					$scope.projectUnitData[index].markUpreq = true;
					$scope.projectUnitData[index].qntyreq = true;
					$scope.projectUnitData[index].lpricereq = false;
					$scope.projectUnitData[index].disreq = false; 
					$scope.projectUnitData[index].quantyreq = false; 
					$(".tpprojbgcolr").css("background-color", "#ffff7f"); 
					$(".lpprojbgcolr").css("background-color", "#ffffff"); 
				}
				else
				{
					$scope.projectUnitData[index].tpricereq = false;
					$scope.projectUnitData[index].markUpreq = false;
					$scope.projectUnitData[index].qntyreq = false;
					$scope.projectUnitData[index].lpricereq = true;
					$scope.projectUnitData[index].disreq = true; 
					$scope.projectUnitData[index].quantyreq = true; 
					$(".tpprojbgcolr").css("background-color", "#ffffff"); 
					$(".lpprojbgcolr").css("background-color", "#ffff7f"); 
				
				}
				
			};
			
			$scope.reqFieldsspare = function(status,index)
			{
				
				 
				//alert(status);
				 
				var index = this.$index;
				//alert($scope.qtnFullUnitData[index]);   
				if(status == 0)
				{
					$scope.sparePartData[index].tpricereq = true;
					$scope.sparePartData[index].markUpreq = true;
					$scope.sparePartData[index].qntyreq = true;
					$scope.sparePartData[index].lpricereq = false;
					$scope.sparePartData[index].disreq = false; 
					$scope.sparePartData[index].quantyreq = false; 
					$(".tpsparebgcolr").css("background-color", "#ffff7f"); 
					$(".lpsparebgcolr").css("background-color", "#ffffff"); 
				}
				else
				{
					$scope.sparePartData[index].tpricereq = false;
					$scope.sparePartData[index].markUpreq = false;
					$scope.sparePartData[index].qntyreq = false;
					$scope.sparePartData[index].lpricereq = true;
					$scope.sparePartData[index].disreq = true; 
					$scope.sparePartData[index].quantyreq = true; 
					$(".tpsparebgcolr").css("background-color", "#ffffff"); 
					$(".lpsparebgcolr").css("background-color", "#ffff7f"); 
				
				}
				
			};
			$scope.reqFieldsservice = function(status,index)
			{
				
				 
				//alert(status);
				 
				var index = this.$index;
				//alert($scope.qtnFullUnitData[index]);   
				if(status == 0)
				{
					$scope.servicPartData[index].tpricereq = true;
					$scope.servicPartData[index].markUpreq = true;
					$scope.servicPartData[index].qntyreq = true;
					$scope.servicPartData[index].lpricereq = false;
					$scope.servicPartData[index].disreq = false; 
					$scope.servicPartData[index].quantyreq = false; 
					$(".tpservicebgcolr").css("background-color", "#ffff7f"); 
					$(".lpservicebgcolr").css("background-color", "#ffffff"); 
				}
				else
				{
					$scope.servicPartData[index].tpricereq = false;
					$scope.servicPartData[index].markUpreq = false;
					$scope.servicPartData[index].qntyreq = false;
					$scope.servicPartData[index].lpricereq = true;
					$scope.servicPartData[index].disreq = true; 
					$scope.servicPartData[index].quantyreq = true; 
					$(".tpservicebgcolr").css("background-color", "#ffffff"); 
					$(".lpservicebgcolr").css("background-color", "#ffff7f"); 
				
				}
				
			};
			
			//=================Transfer Price Amount For Standard=============================//
			$scope.gettransferPricettAmount = function(transferPrice,markUp,sellingPrice,qnty,index)
			{
				//alert(sellingPrice);
				//alert(qnty);
				//alert(transferPrice + " " + "transferPrice");
				//alert(markUp + " " + "markUp");
				//alert(sellingPrice + " " + "sellingPrice");
				//alert(qnty + " " + "qnty");
				var index = this.$index;
				var tprice,markPrice,untPrice,quannty;
				if(isNaN(transferPrice)){tprice = 0;}else{tprice = transferPrice;}
				
				
		    	if(isNaN(markUp)){markPrice = 0;}else{markPrice = markUp;}
				
				
				if(isNaN(qnty)){quannty = 0;}else{quannty = qnty;}
		  		if(isNaN(sellingPrice)){untPrice = 0;}else{untPrice = sellingPrice;}
				
				//alert(tprice + "tprice");
				//alert(markPrice + "markPrice");
				var markupper = (100 - parseFloat(markPrice))/ 100;
				//alert(markupper + "markupper");
				var getSellingPrice = parseFloat(tprice) / parseFloat(markupper);
				if(isNaN(getSellingPrice) || getSellingPrice == "Infinity"){untPrice = 0;}else{untPrice = getSellingPrice;}
				//alert(getSellingPrice + "sellingPrice");
				
				$scope.qtnFullUnitData[index].sellingPrice = untPrice;//Math.floor(untPrice);
				var cursellingprice = $scope.qtnFullUnitData[index].sellingPrice;
				var tamount = parseFloat(cursellingprice) * parseFloat(quannty);
				if(isNaN(tamount) || tamount == "Infinity"){var ttamount = 0;}else{var ttamount = tamount;}
				//alert(ttamount + "tamount");
				$scope.qtnFullUnitData[index].totalPrice = ttamount;//Math.floor(ttamount);//ttamount.toFixed(0);
				
				$scope.$apply();
			};
			
			//=================Transfer Price Amount For Customize=============================//
			
			$scope.gettransferPricettAmountCust = function(transferPrice,markUp,selingPrice,qnty,index)
			{
				//alert(transferPrice + " " + "transferPrice");
				//alert(markUp + " " + "markUp");
				//alert(selingPrice + " " + "sellingPrice");
				//alert(qnty + " " + "qnty");
				var index = this.$index;
				var tprice,markPrice,untPrice,quannty;
				if(isNaN(transferPrice)){tprice = 0;}else{tprice = transferPrice;}
				
				
		    	if(isNaN(markUp)){markPrice = 0;}else{markPrice = markUp;}
				
				
				if(isNaN(qnty)){quannty = 0;}else{quannty = qnty;}
		  		if(isNaN(selingPrice)){untPrice = 0;}else{untPrice = selingPrice;}
				
				//alert(tprice + "tprice");
				//alert(markPrice + "markPrice");
				var markupper = (100 - parseFloat(markPrice))/ 100;
				//alert(markupper + "markupper");
				var getSellingPrice = parseFloat(tprice) / parseFloat(markupper);
				if(isNaN(getSellingPrice) || getSellingPrice == "Infinity"){untPrice = 0;}else{untPrice = getSellingPrice;}
				//alert(getSellingPrice + "sellingPrice");
				
				$scope.projectUnitData[index].sellingPrice = untPrice;//Math.floor(untPrice);//
				var cursellingprice = $scope.projectUnitData[index].sellingPrice;
				//alert(cursellingprice);
				var tamount = parseFloat(cursellingprice) * parseFloat(quannty);
				if(isNaN(tamount) || tamount == "Infinity"){var ttamount = 0;}else{var ttamount = tamount;}
				//alert(ttamount + "tamount");
				$scope.projectUnitData[index].totalPrice = ttamount;//Math.floor(ttamount);//ttamount.toFixed(2);
				
				$scope.$apply();//Math.floor(ttamount);
			};
			
			//=================Transfer Price Amount For Spare=============================//
			
			$scope.gettransferPricettAmountSpare = function(transferPrice,markUp,sellingPrice,qnty,index)
			{
				//alert(transferPrice + " " + "transferPrice");
				//alert(markUp + " " + "markUp");
				//alert(sellingPrice + " " + "sellingPrice");
				//alert(qnty + " " + "qnty");
				var index = this.$index;
				var tprice,markPrice,untPrice,quannty;
				if(isNaN(transferPrice)){tprice = 0;}else{tprice = transferPrice;}
				
				
		    	if(isNaN(markUp)){markPrice = 0;}else{markPrice = markUp;}
				
				
				if(isNaN(qnty)){quannty = 0;}else{quannty = qnty;}
		  		if(isNaN(sellingPrice)){untPrice = 0;}else{untPrice = sellingPrice;}
				
				//alert(tprice + "tprice");
				//alert(markPrice + "markPrice");
				var markupper = (100 - parseFloat(markPrice))/ 100;
				//alert(markupper + "markupper");
				var getSellingPrice = parseFloat(tprice) / parseFloat(markupper);
				if(isNaN(getSellingPrice) || getSellingPrice == "Infinity"){untPrice = 0;}else{untPrice = getSellingPrice;}
				//alert(getSellingPrice + "sellingPrice");
				
				$scope.sparePartData[index].sellingPrice = untPrice;//Math.floor(untPrice);
				var cursellingprice = $scope.sparePartData[index].sellingPrice;
				var tamount = parseFloat(cursellingprice) * parseFloat(quannty);
				if(isNaN(tamount) || tamount == "Infinity"){var ttamount = 0;}else{var ttamount = tamount;}
				//alert(ttamount + "tamount");
				$scope.sparePartData[index].totalPrice = ttamount;//Math.floor(ttamount);//ttamount.toFixed(0);
				
				$scope.$apply();
			};
			
			//=================Transfer Price Amount For Service=============================//
			
			$scope.gettransferPricettAmountService = function(transferPrice,markUp,sellingPrice,qnty,index)
			{
				//alert(transferPrice + " " + "transferPrice");
				//alert(markUp + " " + "markUp");
				//alert(sellingPrice + " " + "sellingPrice");
				//alert(qnty + " " + "qnty");
				var index = this.$index;
				var tprice,markPrice,untPrice,quannty;
				if(isNaN(transferPrice)){tprice = 0;}else{tprice = transferPrice;}
				
				
		    	if(isNaN(markUp)){markPrice = 0;}else{markPrice = markUp;}
				
				
				if(isNaN(qnty)){quannty = 0;}else{quannty = qnty;}
		  		if(isNaN(sellingPrice)){untPrice = 0;}else{untPrice = sellingPrice;}
				
				//alert(tprice + "tprice");
				//alert(markPrice + "markPrice");
				var markupper = (100 - parseFloat(markPrice))/ 100;
				//alert(markupper + "markupper");
				var getSellingPrice = parseFloat(tprice) / parseFloat(markupper);
				if(isNaN(getSellingPrice) || getSellingPrice == "Infinity"){untPrice = 0;}else{untPrice = getSellingPrice;}
				//alert(getSellingPrice + "sellingPrice");
				
				$scope.servicPartData[index].sellingPrice = untPrice;//Math.floor(untPrice);//
				var cursellingprice = $scope.servicPartData[index].sellingPrice;
				var tamount = parseFloat(cursellingprice) * parseFloat(quannty);
				if(isNaN(tamount) || tamount == "Infinity"){var ttamount = 0;}else{var ttamount = tamount;}
				//alert(ttamount + "tamount");
				$scope.servicPartData[index].totalPrice = ttamount//Math.floor(ttamount);//ttamount.toFixed(0);
				
				$scope.$apply();
			};
			
			//=================List Price Amount For Standard=============================//
			
			$scope.getListPricettAmount = function(listPrice,disMultiplier,unitSellingPrice,qnty,index)
			{
				//alert(transferPrice + " " + "transferPrice");
				//alert(markUp + " " + "markUp");
				//alert(sellingPrice + " " + "sellingPrice");
				//alert(qnty + " " + "qnty");
				var index = this.$index;
				var tprice,markPrice,untPrice,quannty;
				if(isNaN(listPrice)){tprice = 0;}else{tprice = listPrice;}
				
				
		    	if(isNaN(disMultiplier)){markPrice = 0;}else{markPrice = disMultiplier;}
				
				
				if(isNaN(qnty)){quannty = 0;}else{quannty = qnty;}
		  		if(isNaN(unitSellingPrice)){untPrice = 0;}else{untPrice = unitSellingPrice;}
				
				//alert(tprice + "tprice");
				//alert(markPrice + "markPrice");
				
				var getSellingPrice = parseFloat(tprice) * parseFloat(markPrice);
				if(isNaN(getSellingPrice) || getSellingPrice == "Infinity"){untPrice = 0;}else{untPrice = getSellingPrice;}
				//alert(getSellingPrice + "sellingPrice");
				
				$scope.qtnFullUnitData[index].unitSellingPrice = untPrice;//Math.floor(untPrice);
				var curunitsellingprice = $scope.qtnFullUnitData[index].unitSellingPrice;
				var tamount = parseFloat(curunitsellingprice) * parseFloat(quannty);
				if(isNaN(tamount) || tamount == "Infinity"){var ttamount = 0;}else{var ttamount = tamount;}
				//alert(ttamount + "tamount");
				$scope.qtnFullUnitData[index].totalAmount =  ttamount//Math.floor(ttamount);//ttamount.toFixed(0);
				
				$scope.$apply();
			};
			
			//=================List Price Amount For Customize=============================//
			
			$scope.getListPricettAmountCust = function(listPrice,disMultiplier,unitSellingPrice,qnty,index)
			{
				//alert(transferPrice + " " + "transferPrice");
				//alert(markUp + " " + "markUp");
				//alert(sellingPrice + " " + "sellingPrice");
				//alert(qnty + " " + "qnty");
				var index = this.$index;
				var tprice,markPrice,untPrice,quannty;
				if(isNaN(listPrice)){tprice = 0;}else{tprice = listPrice;}
				
				
		    	if(isNaN(disMultiplier)){markPrice = 0;}else{markPrice = disMultiplier;}
				
				
				if(isNaN(qnty)){quannty = 0;}else{quannty = qnty;}
		  		if(isNaN(unitSellingPrice)){untPrice = 0;}else{untPrice = unitSellingPrice;}
				
				//alert(tprice + "tprice");
				//alert(markPrice + "markPrice");
				
				var getSellingPrice = parseFloat(tprice) * parseFloat(markPrice);
				if(isNaN(getSellingPrice) || getSellingPrice == "Infinity"){untPrice = 0;}else{untPrice = getSellingPrice;}
				//alert(untPrice.toFixed(0));
				
				$scope.projectUnitData[index].unitSellingPrice = untPrice;//Math.floor(untPrice);//
				var curunitsellingprice = $scope.projectUnitData[index].unitSellingPrice;
				var tamount = parseFloat(curunitsellingprice) * parseFloat(quannty);
				if(isNaN(tamount) || tamount == "Infinity"){var ttamount = 0;}else{var ttamount = tamount;}
				//alert(ttamount + "tamount");
				$scope.projectUnitData[index].totalAmount = ttamount;//Math.floor(ttamount);//ttamount.toFixed(2);
				
				$scope.$apply();
			};
			
			//=================List Price Amount For Spare=============================//
			
			$scope.getListPricettAmountSpare = function(listPrice,disMultiplier,unitSellingPrice,qnty,index)
			{
				//alert(transferPrice + " " + "transferPrice");
				//alert(markUp + " " + "markUp");
				//alert(sellingPrice + " " + "sellingPrice");
				//alert(qnty + " " + "qnty");
				var index = this.$index;
				var tprice,markPrice,untPrice,quannty;
				if(isNaN(listPrice)){tprice = 0;}else{tprice = listPrice;}
				
				
		    	if(isNaN(disMultiplier)){markPrice = 0;}else{markPrice = disMultiplier;}
				
				
				if(isNaN(qnty)){quannty = 0;}else{quannty = qnty;}
		  		if(isNaN(unitSellingPrice)){untPrice = 0;}else{untPrice = unitSellingPrice;}
				
				//alert(tprice + "tprice");
				//alert(markPrice + "markPrice");
				
				var getSellingPrice = parseFloat(tprice) * parseFloat(markPrice);
				if(isNaN(getSellingPrice) || getSellingPrice == "Infinity"){untPrice = 0;}else{untPrice = getSellingPrice;}
				//alert(untPrice.toFixed(0));
				
				$scope.sparePartData[index].unitSellingPrice = untPrice;//Math.floor(untPrice);//
				var curunitsellingprice = $scope.sparePartData[index].unitSellingPrice;
				var tamount = parseFloat(curunitsellingprice) * parseFloat(quannty);
				if(isNaN(tamount) || tamount == "Infinity"){var ttamount = 0;}else{var ttamount = tamount;}
				//alert(ttamount + "tamount");
				$scope.sparePartData[index].totalAmount = ttamount;//Math.floor(ttamount);//ttamount.toFixed(0);
				
				$scope.$apply();
			};
			
			//=================List Price Amount For Service=============================//
			
			$scope.getListPricettAmountService = function(listPrice,disMultiplier,unitSellingPrice,qnty,index)
			{
				//alert(transferPrice + " " + "transferPrice");
				//alert(markUp + " " + "markUp");
				//alert(sellingPrice + " " + "sellingPrice");
				//alert(qnty + " " + "qnty");
				var index = this.$index;
				var tprice,markPrice,untPrice,quannty;
				if(isNaN(listPrice)){tprice = 0;}else{tprice = listPrice;}
				
				
		    	if(isNaN(disMultiplier)){markPrice = 0;}else{markPrice = disMultiplier;}
				
				
				if(isNaN(qnty)){quannty = 0;}else{quannty = qnty;}
		  		if(isNaN(unitSellingPrice)){untPrice = 0;}else{untPrice = unitSellingPrice;}
				
				//alert(tprice + "tprice");
				//alert(markPrice + "markPrice");
				
				var getSellingPrice = parseFloat(tprice) * parseFloat(markPrice);
				if(isNaN(getSellingPrice) || getSellingPrice == "Infinity"){untPrice = 0;}else{untPrice = getSellingPrice;}
				//alert(untPrice.toFixed(0));
				
				$scope.servicPartData[index].unitSellingPrice = untPrice;//Math.floor(untPrice);
				var curunitsellingprice = $scope.servicPartData[index].unitSellingPrice;
				var tamount = parseFloat(curunitsellingprice) * parseFloat(quannty);
				if(isNaN(tamount) || tamount == "Infinity"){var ttamount = 0;}else{var ttamount = tamount;}
				//alert(ttamount + "tamount");
				$scope.servicPartData[index].totalAmount = ttamount;//Math.floor(ttamount);//ttamount.toFixed(0);
				
				$scope.$apply();
			};
	   
	   	//$scope.getSubsidaryAmount=function(cost,listpriceFactor,listSubsPrice,index){
//			var index = this.$index;
//			if(cost!=undefined || listpriceFactor!=undefined){
//				if(isNaN(cost)){cprice = 0;}else{cprice = cost;}
//			if(isNaN(listpriceFactor)){listprice = 0;}else{listprice = listpriceFactor;}
//				var getSellingPrice = parseFloat(cprice) / parseFloat(listprice);
//					if(isNaN(getSellingPrice) || getSellingPrice == "Infinity"){subprice=0}else{subprice = getSellingPrice;}
//					$scope.qtnFullUnitData[index].listSubsPrice = subprice.toFixed(0);
//					}
//		
//			/*<!--var cprice,listprice,subprice;
//			if(isNaN(cost)){cprice = 0;}else{cprice = cost;}
//			if(isNaN(listpriceFactor)){listprice = 0;}else{listprice = listpriceFactor;}
//				var getSellingPrice = parseFloat(cprice) / parseFloat(listprice);
//					if(isNaN(getSellingPrice) || getSellingPrice == "Infinity"){subprice=0}else{subprice = getSellingPrice;}
//					$scope.qtnFullUnitData[index].listSubsPrice = subprice.toFixed(0);-->*/
//				
//				//$scope.qtnFullUnitData[index].listSubsPrice = 
//					
//			
//			}

			//====================Subsidary Pricett Amount For Standard=========================//
	  		$scope.getSubsidaryPricettAmount = function(costPrice,transferpriceFactor,transferPrice,listpriceFactor,index)
			{
				
				//alert(costPrice + " " + "costPrice");
				//alert(transferpriceFactor + " " + "transferpriceFactor");
				//alert(transferPrice + " " + "transferPrice");
				//alert(listpriceFactor + " " + "listpriceFactor");
				var index = this.$index;
				var cprice,tfpricefactor,tfprice,listprice;
				if(isNaN(costPrice)){cprice = 0;}else{cprice = costPrice;}
				
				
		    	if(isNaN(transferpriceFactor)){tfpricefactor = 0;}else{tfpricefactor = transferpriceFactor;}
				
				
				//if(isNaN(transferPrice)){tfprice = 0;}else{tfprice = transferPrice;}
		  		if(isNaN(listpriceFactor)){listprice = 0;}else{listprice = listpriceFactor;}
				
				//alert(tprice + "tprice");
				//alert(markPrice + "markPrice");
				var markupper = (100 - parseFloat(tfpricefactor))/ 100;
				if(isNaN(markupper) || markupper == "Infinity"){var markupperconvert = 0;}else{var markupperconvert = markupper;}
				
				var getSellingPrice = parseFloat(cprice) / parseFloat(markupperconvert);
				
				if(isNaN(getSellingPrice) || getSellingPrice == "Infinity"){tfprice = 0;}else{tfprice = getSellingPrice;}
				//alert(tfprice + "tfprice");
				//alert(tfprice);
				
				$scope.qtnFullUnitData[index].transferSubsPrice =  tfprice.toFixed(0);//Math.floor(tfprice);
				
				var tamount = parseFloat(costPrice) / parseFloat(listprice);
				if(isNaN(tamount) || tamount == "Infinity"){var ttamount = 0;}else{var ttamount = tamount;}
				//alert(ttamount + "tamount");
				$scope.qtnFullUnitData[index].listSubsPrice = ttamount.toFixed(0);////Math.floor(ttamount);//
				
				$scope.$apply();
			};
			
			//====================Subsidary Pricett Amount For Customize=========================//
	  		$scope.getSubsidaryPricettAmountCust = function(costPrice,transferpriceFactor,transferPrice,listpriceFactor,index)
			{
				//alert(costPrice + " " + "costPrice");
				//alert(transferpriceFactor + " " + "transferpriceFactor");
				//alert(transferPrice + " " + "transferPrice");
				//alert(listpriceFactor + " " + "listpriceFactor");
				var index = this.$index;
				var cprice,tfpricefactor,tfprice,listprice;
				if(isNaN(costPrice)){cprice = 0;}else{cprice = costPrice;}
				
				
		    	if(isNaN(transferpriceFactor)){tfpricefactor = 0;}else{tfpricefactor = transferpriceFactor;}
				
				
				//if(isNaN(transferPrice)){tfprice = 0;}else{tfprice = transferPrice;}
		  		if(isNaN(listpriceFactor)){listprice = 0;}else{listprice = listpriceFactor;}
				
				//alert(tprice + "tprice");
				//alert(markPrice + "markPrice");
				var markupper = (100 - parseFloat(tfpricefactor))/ 100;
				if(isNaN(markupper) || markupper == "Infinity"){var markupperconvert = 0;}else{var markupperconvert = markupper;}
				
				var getSellingPrice = parseFloat(cprice) / parseFloat(markupperconvert);
				if(isNaN(getSellingPrice) || getSellingPrice == "Infinity"){tfprice = 0;}else{tfprice = getSellingPrice;}
				//alert(tfprice + "tfprice");
				//alert(tfprice);
				$scope.projectUnitData[index].transferSubsPrice = tfprice.toFixed(0);//Math.floor(tfprice);
				
				var tamount = parseFloat(costPrice) / parseFloat(listprice);
				if(isNaN(tamount) || tamount == "Infinity"){var ttamount = 0;}else{var ttamount = tamount;}
				//alert(ttamount + "tamount");
				$scope.projectUnitData[index].listSubsPrice = ttamount.toFixed(0);
				
				$scope.$apply();
			};
			
			//====================Subsidary Pricett Amount For Spare=========================//
	  		$scope.getSubsidaryPricettAmountSpare = function(costPrice,transferpriceFactor,transferPrice,listpriceFactor,index)
			{
				//alert(costPrice + " " + "costPrice");
				//alert(transferpriceFactor + " " + "transferpriceFactor");
				//alert(transferPrice + " " + "transferPrice");
				//alert(listpriceFactor + " " + "listpriceFactor");
				var index = this.$index;
				var cprice,tfpricefactor,tfprice,listprice;
				if(isNaN(costPrice)){cprice = 0;}else{cprice = costPrice;}
				
				
		    	if(isNaN(transferpriceFactor)){tfpricefactor = 0;}else{tfpricefactor = transferpriceFactor;}
				
				
				//if(isNaN(transferPrice)){tfprice = 0;}else{tfprice = transferPrice;}
		  		if(isNaN(listpriceFactor)){listprice = 0;}else{listprice = listpriceFactor;}
				
				//alert(tprice + "tprice");
				//alert(markPrice + "markPrice");
				var markupper = (100 - parseFloat(tfpricefactor))/ 100;
				if(isNaN(markupper) || markupper == "Infinity"){var markupperconvert = 0;}else{var markupperconvert = markupper;}
				
				var getSellingPrice = parseFloat(cprice) / parseFloat(markupperconvert);
				if(isNaN(getSellingPrice) || getSellingPrice == "Infinity"){tfprice = 0;}else{tfprice = getSellingPrice;}
				//alert(tfprice + "tfprice");
				//alert(tfprice);
				$scope.sparePartData[index].transferSubsPrice = tfprice.toFixed(0);//Math.floor(tfprice);
				
				var tamount = parseFloat(costPrice) / parseFloat(listprice);
				if(isNaN(tamount) || tamount == "Infinity"){var ttamount = 0;}else{var ttamount = tamount;}
				//alert(ttamount + "tamount");
				$scope.sparePartData[index].listSubsPrice = ttamount.toFixed(0);
				
				$scope.$apply();
			};
			
			//====================Subsidary Pricett Amount For Service=========================//
			$scope.getSubsidaryPricettAmountService = function(costPrice,transferpriceFactor,transferPrice,listpriceFactor,index)
			{
				//alert(costPrice + " " + "costPrice");
				//alert(transferpriceFactor + " " + "transferpriceFactor");
				//alert(transferPrice + " " + "transferPrice");
				//alert(listpriceFactor + " " + "listpriceFactor");
				var index = this.$index;
				var cprice,tfpricefactor,tfprice,listprice;
				if(isNaN(costPrice)){cprice = 0;}else{cprice = costPrice;}
				
				
		    	if(isNaN(transferpriceFactor)){tfpricefactor = 0;}else{tfpricefactor = transferpriceFactor;}
				
				
				//if(isNaN(transferPrice)){tfprice = 0;}else{tfprice = transferPrice;}
		  		if(isNaN(listpriceFactor)){listprice = 0;}else{listprice = listpriceFactor;}
				
				//alert(tprice + "tprice");
				//alert(markPrice + "markPrice");
				var markupper = (100 - parseFloat(tfpricefactor))/ 100;
				if(isNaN(markupper) || markupper == "Infinity"){var markupperconvert = 0;}else{var markupperconvert = markupper;}
				
				var getSellingPrice = parseFloat(cprice) / parseFloat(markupperconvert);
				if(isNaN(getSellingPrice) || getSellingPrice == "Infinity"){tfprice = 0;}else{tfprice = getSellingPrice;}
				//alert(tfprice + "tfprice");
				//alert(tfprice);
				$scope.servicPartData[index].transferSubsPrice = tfprice.toFixed(0);//Math.floor(tfprice);
				
				var tamount = parseFloat(costPrice) / parseFloat(listprice);
				if(isNaN(tamount) || tamount == "Infinity"){var ttamount = 0;}else{var ttamount = tamount;}
				//alert(ttamount + "tamount");
				$scope.servicPartData[index].listSubsPrice = ttamount.toFixed(0);
				
				$scope.$apply();
			};
			
	   //=================================================//
	   
	   
	   $scope.getListAndTransferPriceFromQuoteSubsidary = function(qtntype,curexg)
	   {
		  
		   if(qtntype == "0")
		   {
			   //alert(qtntype + "     qtntype");
			  /*if(qtnmaster == "0")
			   {
				 // alert(qtnmaster + "     qtnmaster");
				  if(isNaN(curexg) || curexg == "Infinity"){var curexng = 0;}else{var curexng = curexg;}
				   for(var i = 0; i < $scope.qtnFullUnitData.length; i++)
				   {
					 //alert($scope.fullUnitItemizedData[i].totalPrice);
					tpricetotal = parseFloat($scope.qtnFullUnitData[i].transferSubsPrice);
					lpricetotal = parseFloat($scope.qtnFullUnitData[i].listSubsPrice);
					
					if(isNaN(tpricetotal)){var tfpricetotal = 0;}else{var tfpricetotal = tpricetotal;}
					if(isNaN(lpricetotal)){var lspricetotal = 0;}else{var lspricetotal = lpricetotal;}
					
					var convrttprice = parseFloat(curexng) * parseFloat(tfpricetotal);
					var convrtlprice = parseFloat(curexng) * parseFloat(lspricetotal);
					//alert(convrttprice + " tprice");
					//alert(convrtlprice + " lprice");
					if(isNaN(convrttprice)){var convrtedtprice = 0;}else{var convrtedtprice = convrttprice;}
					if(isNaN(convrtlprice)){var convrtedlprice = 0;}else{var convrtedlprice = convrtlprice;}
					//alert(tpricetotal);
					//alert(lpricetotal);
					//gndtotal += (tfpricetotal + lspricetotal);
					//alert(gndtotal);
					//$scope.addQuotation.subTotal = gndtotal.toFixed(2);
					 //alert(gndtotal);
					 $scope.qtnFullUnitData[i].transferPrice = Math.floor(convrtedtprice);
					 $scope.qtnFullUnitData[i].listPrice = Math.floor(convrtedlprice);
					
					   $scope.$apply();
				   }
			   }*/
			  // else
			  // {
				  // alert(qtnmaster + "     qtnmaster");
				   if(isNaN(curexg) || curexg == "Infinity"){var curexng = 0;}else{var curexng = curexg;}
				   var tpricetotal;
				   var lpricetotal;
				   var gndtotal = 0;
				   for(var i = 0; i < $scope.qtnFullUnitData.length; i++)
				   {
					 //alert($scope.fullUnitItemizedData[i].totalPrice);
					var tpricetotal = parseFloat($scope.qtnFullUnitData[i].transferSubsPrice);
					var lpricetotal = parseFloat($scope.qtnFullUnitData[i].listSubsPrice);
					
					
					
					
					if(isNaN(tpricetotal)){var tfpricetotal = 0;}else{var tfpricetotal = tpricetotal;}
					if(isNaN(lpricetotal)){var lspricetotal = 0;}else{var lspricetotal = lpricetotal;}
					
					var convrttprice = parseFloat(curexng) * parseFloat(tfpricetotal);
					var convrtlprice = parseFloat(curexng) * parseFloat(lspricetotal);
					//alert(convrttprice + " tprice");
					//alert(convrtlprice + " lprice");
					if(isNaN(convrttprice)){var convrtedtprice = 0;}else{var convrtedtprice = convrttprice;}
					if(isNaN(convrtlprice)){var convrtedlprice = 0;}else{var convrtedlprice = convrtlprice;}
					//alert(tpricetotal);
					//alert(lpricetotal);
					//gndtotal += (tfpricetotal + lspricetotal);
					//alert(gndtotal);
					//$scope.addQuotation.subTotal = gndtotal.toFixed(2);
					 //alert(gndtotal);
					 $scope.qtnFullUnitData[i].transferPrice = convrtedtprice;//Math.floor(convrtedtprice);
					 $scope.qtnFullUnitData[i].listPrice = convrtedlprice;//Math.floor(convrtedlprice);
					
					var tprice = parseFloat($scope.qtnFullUnitData[i].transferPrice);
					var markupprice = parseFloat($scope.qtnFullUnitData[i].markUp);
					var quantity = parseFloat($scope.qtnFullUnitData[i].qnty);
					
					var lprice = parseFloat($scope.qtnFullUnitData[i].listPrice);
					var dismulti = parseFloat($scope.qtnFullUnitData[i].discount);
					var lpqnty = parseFloat($scope.qtnFullUnitData[i].quanty);
					
					//============Transfer Price===============================//
					if(isNaN(tprice)){var tprice2 = 0;}else{var tprice2 = tprice;}
					if(isNaN(markupprice)){var markupprice2 = 0;}else{var markupprice2 = markupprice;}
					if(isNaN(quantity)){var quantity2 = 0;}else{var quantity2 = quantity;}
					
					var markupper = (100 - parseFloat(markupprice2))/ 100;
					 
					 var getSellingPrice = parseFloat(tprice2) / parseFloat(markupper);
					if(isNaN(getSellingPrice) || getSellingPrice == "Infinity"){untPrice = 0;}else{untPrice = getSellingPrice;}
					//alert(getSellingPrice + "sellingPrice");
					
					$scope.qtnFullUnitData[i].sellingPrice = untPrice;//Math.floor(untPrice);//
					var cursellingprice = $scope.qtnFullUnitData[i].sellingPrice;
					
					var tamount = parseFloat(cursellingprice) * parseFloat(quantity2);
					if(isNaN(tamount) || tamount == "Infinity"){var ttamount = 0;}else{var ttamount = tamount;}
					//alert(ttamount + "tamount");
					$scope.qtnFullUnitData[i].totalPrice = ttamount;//Math.floor(ttamount);//ttamount.toFixed(0);
					
					//============List Price===============================//
					if(isNaN(lprice)){var lprice2 = 0;}else{var lprice2 = lprice;}
					if(isNaN(dismulti)){var dismulti2 = 0;}else{var dismulti2 = dismulti;}
					if(isNaN(lpqnty)){var quantity2 = 0;}else{var quantity2 = lpqnty;}
					
					var getSellingPrice = parseFloat(lprice2) * parseFloat(dismulti2);
					if(isNaN(getSellingPrice) || getSellingPrice == "Infinity"){var untPrice = 0;}else{var untPrice = getSellingPrice;}
					//alert(getSellingPrice + "sellingPrice");
					
					$scope.qtnFullUnitData[i].unitSellingPrice = untPrice;//Math.floor(untPrice);//
					var curunitsellingprice = $scope.qtnFullUnitData[i].unitSellingPrice;
					var tamount = parseFloat(curunitsellingprice) * parseFloat(quantity2);
					if(isNaN(tamount) || tamount == "Infinity"){var ttamount = 0;}else{var ttamount = tamount;}
					//alert(ttamount + "tamount");
					$scope.qtnFullUnitData[i].totalAmount =  ttamount;//Math.floor(ttamount);//ttamount.toFixed(0);
					
					//=============Get Standard Total=========================//
					tpricetotal = parseFloat($scope.qtnFullUnitData[i].totalPrice);
					lpricetotal = parseFloat($scope.qtnFullUnitData[i].totalAmount);
					
					if(isNaN(tpricetotal)){var tfpricetotal = 0;}else{var tfpricetotal = tpricetotal;}
					if(isNaN(lpricetotal)){var lspricetotal = 0;}else{var lspricetotal = lpricetotal;}
					//alert(tpricetotal);
					//alert(lpricetotal);
					gndtotal += (tfpricetotal + lspricetotal);
					//alert(gndtotal);
					if(isNaN(gndtotal)){var gndtotal2 = 0;}else{var gndtotal2 = gndtotal;}
					$scope.addQuotation.subTotal = gndtotal2.toFixed(2);
					//$scope.addQuotation.discountmultiplier = 0;
					$scope.addQuotation.subtotalDiscount = gndtotal2.toFixed(2);
					
					   $scope.$apply();
				   }
			   //}
		   }
		  else if(qtntype == "1")
		   {
			  // alert(qtntype + "     qtntype");
			 // if(qtnmaster == "0")
			 //  {
				 // alert(qtnmaster + "     qtnmaster");
				  if(isNaN(curexg) || curexg == "Infinity"){var curexng = 0;}else{var curexng = curexg;}
				   var tpricetotal;
				   var lpricetotal;
				   var gndtotal = 0;
				   for(var i = 0; i < $scope.projectUnitData.length; i++)
				   {
					 //alert($scope.fullUnitItemizedData[i].totalPrice);
					var tpricetotal = parseFloat($scope.projectUnitData[i].transferSubsPrice);
					var lpricetotal = parseFloat($scope.projectUnitData[i].listSubsPrice);
					
					if(isNaN(tpricetotal)){var tfpricetotal = 0;}else{var tfpricetotal = tpricetotal;}
					if(isNaN(lpricetotal)){var lspricetotal = 0;}else{var lspricetotal = lpricetotal;}
					
					var convrttprice = parseFloat(curexng) * parseFloat(tfpricetotal);
					var convrtlprice = parseFloat(curexng) * parseFloat(lspricetotal);
					//alert(convrttprice + " tprice");
					//alert(convrtlprice + " lprice");
					if(isNaN(convrttprice)){var convrtedtprice = 0;}else{var convrtedtprice = convrttprice;}
					if(isNaN(convrtlprice)){var convrtedlprice = 0;}else{var convrtedlprice = convrtlprice;}
					//alert(tpricetotal);
					//alert(lpricetotal);
					//gndtotal += (tfpricetotal + lspricetotal);
					//alert(gndtotal);
					//$scope.addQuotation.subTotal = gndtotal.toFixed(2);
					 //alert(gndtotal);
					 $scope.projectUnitData[i].transferPrice = convrtedtprice;//Math.floor(convrtedtprice);
					 $scope.projectUnitData[i].listPrice = convrtedlprice;//Math.floor(convrtedlprice);
					
					var tprice = parseFloat($scope.projectUnitData[i].transferPrice);
					var markupprice = parseFloat($scope.projectUnitData[i].markUp);
					var quantity = parseFloat($scope.projectUnitData[i].qnty);
					
					var lprice = parseFloat($scope.projectUnitData[i].listPrice);
					var dismulti = parseFloat($scope.projectUnitData[i].discount);
					var lpqnty = parseFloat($scope.projectUnitData[i].quanty);
					
					//============Transfer Price===============================//
					if(isNaN(tprice)){var tprice2 = 0;}else{var tprice2 = tprice;}
					if(isNaN(markupprice)){var markupprice2 = 0;}else{var markupprice2 = markupprice;}
					if(isNaN(quantity)){var quantity2 = 0;}else{var quantity2 = quantity;}
					
					
					
					
					var markupper = (100 - parseFloat(markupprice2))/ 100;
					 
					 var getSellingPrice = parseFloat(tprice2) / parseFloat(markupper);
					if(isNaN(getSellingPrice) || getSellingPrice == "Infinity"){untPrice = 0;}else{untPrice = getSellingPrice;}
					//alert(getSellingPrice + "sellingPrice");
					
					$scope.projectUnitData[i].sellingPrice = untPrice;//Math.floor(untPrice);//
					var cursellingprice = $scope.projectUnitData[i].sellingPrice;
					
					var tamount = parseFloat(cursellingprice) * parseFloat(quantity2);
					if(isNaN(tamount) || tamount == "Infinity"){var ttamount = 0;}else{var ttamount = tamount;}
					//alert(ttamount + "tamount");
					$scope.projectUnitData[i].totalPrice = ttamount;//Math.floor(ttamount);//ttamount.toFixed(0);
					
					//============List Price===============================//
					if(isNaN(lprice)){var lprice2 = 0;}else{var lprice2 = lprice;}
					if(isNaN(dismulti)){var dismulti2 = 0;}else{var dismulti2 = dismulti;}
					if(isNaN(lpqnty)){var quantity2 = 0;}else{var quantity2 = lpqnty;}
					
					var getSellingPrice = parseFloat(lprice2) * parseFloat(dismulti2);
					if(isNaN(getSellingPrice) || getSellingPrice == "Infinity"){var untPrice = 0;}else{var untPrice = getSellingPrice;}
					//alert(getSellingPrice + "sellingPrice");
					
					$scope.projectUnitData[i].unitSellingPrice = untPrice;//Math.floor(untPrice);//
					var curunitsellingprice = $scope.projectUnitData[i].unitSellingPrice;
					var tamount = parseFloat(curunitsellingprice) * parseFloat(quantity2);
					if(isNaN(tamount) || tamount == "Infinity"){var ttamount = 0;}else{var ttamount = tamount;}
					//alert(ttamount + "tamount");
					$scope.projectUnitData[i].totalAmount =  ttamount;//Math.floor(ttamount);//ttamount.toFixed(0);
					
					//=============Get Customize Total=========================//
					tpricetotal = parseFloat($scope.projectUnitData[i].totalPrice);
					lpricetotal = parseFloat($scope.projectUnitData[i].totalAmount);
					
					if(isNaN(tpricetotal)){var tfpricetotal = 0;}else{var tfpricetotal = tpricetotal;}
					if(isNaN(lpricetotal)){var lspricetotal = 0;}else{var lspricetotal = lpricetotal;}
					//alert(tpricetotal);
					//alert(lpricetotal);
					gndtotal += (tfpricetotal + lspricetotal);
					//alert(gndtotal);
					if(isNaN(gndtotal)){var gndtotal2 = 0;}else{var gndtotal2 = gndtotal;}
					$scope.addQuotation.subTotal = gndtotal2.toFixed(2);
					//$scope.addQuotation.discountmultiplier = 0;
					$scope.addQuotation.subtotalDiscount = gndtotal2.toFixed(2);
					   $scope.$apply();
				   }
			   //}
			  /* else
			   {
				   //alert(qtnmaster + "     qtnmaster");
				   if(isNaN(curexg) || curexg == "Infinity"){var curexng = 0;}else{var curexng = curexg;}
				   for(var i = 0; i < $scope.projectUnitData.length; i++)
				   {
					 //alert($scope.fullUnitItemizedData[i].totalPrice);
					tpricetotal = parseFloat($scope.projectUnitData[i].transferSubsPrice);
					lpricetotal = parseFloat($scope.projectUnitData[i].listSubsPrice);
					
					if(isNaN(tpricetotal)){var tfpricetotal = 0;}else{var tfpricetotal = tpricetotal;}
					if(isNaN(lpricetotal)){var lspricetotal = 0;}else{var lspricetotal = lpricetotal;}
					
					var convrttprice = parseFloat(curexng) * parseFloat(tfpricetotal);
					var convrtlprice = parseFloat(curexng) * parseFloat(lspricetotal);
					//alert(convrttprice + " tprice");
					//alert(convrtlprice + " lprice");
					if(isNaN(convrttprice)){var convrtedtprice = 0;}else{var convrtedtprice = convrttprice;}
					if(isNaN(convrtlprice)){var convrtedlprice = 0;}else{var convrtedlprice = convrtlprice;}
					//alert(tpricetotal);
					//alert(lpricetotal);
					//gndtotal += (tfpricetotal + lspricetotal);
					//alert(gndtotal);
					//$scope.addQuotation.subTotal = gndtotal.toFixed(2);
					 //alert(gndtotal);
					 $scope.projectUnitData[i].transferPrice = Math.floor(convrtedtprice);
					 $scope.projectUnitData[i].listPrice = Math.floor(convrtedlprice);
					
					   $scope.$apply();
				   }
			   }*/
		   }
		   else if(qtntype == "2")
		   {
			   //alert(qtntype + "     qtntype");
			 // if(qtnmaster == "0")
			  // {
				 // alert(qtnmaster + "     qtnmaster");
				  if(isNaN(curexg) || curexg == "Infinity"){var curexng = 0;}else{var curexng = curexg;}
				  var tpricetotal;
				   var lpricetotal;
				   var gndtotal = 0;
				   for(var i = 0; i < $scope.sparePartData.length; i++)
				   {
					 //alert($scope.fullUnitItemizedData[i].totalPrice);
					var tpricetotal = parseFloat($scope.sparePartData[i].transferSubsPrice);
					var lpricetotal = parseFloat($scope.sparePartData[i].listSubsPrice);
					
					if(isNaN(tpricetotal)){var tfpricetotal = 0;}else{var tfpricetotal = tpricetotal;}
					if(isNaN(lpricetotal)){var lspricetotal = 0;}else{var lspricetotal = lpricetotal;}
					
					var convrttprice = parseFloat(curexng) * parseFloat(tfpricetotal);
					var convrtlprice = parseFloat(curexng) * parseFloat(lspricetotal);
					//alert(convrttprice + " tprice");
					//alert(convrtlprice + " lprice");
					if(isNaN(convrttprice)){var convrtedtprice = 0;}else{var convrtedtprice = convrttprice;}
					if(isNaN(convrtlprice)){var convrtedlprice = 0;}else{var convrtedlprice = convrtlprice;}
					//alert(tpricetotal);
					//alert(lpricetotal);
					//gndtotal += (tfpricetotal + lspricetotal);
					//alert(gndtotal);
					//$scope.addQuotation.subTotal = gndtotal.toFixed(2);
					 //alert(gndtotal);
					 $scope.sparePartData[i].transferPrice = convrtedtprice;//Math.floor(convrtedtprice);
					 $scope.sparePartData[i].listPrice = convrtedlprice;//Math.floor(convrtedlprice);
					 
					 
					 var tprice = parseFloat($scope.sparePartData[i].transferPrice);
					var markupprice = parseFloat($scope.sparePartData[i].markUp);
					var quantity = parseFloat($scope.sparePartData[i].qnty);
					
					var lprice = parseFloat($scope.sparePartData[i].listPrice);
					var dismulti = parseFloat($scope.sparePartData[i].discount);
					var lpqnty = parseFloat($scope.sparePartData[i].quanty);
					
					//============Transfer Price===============================//
					if(isNaN(tprice)){var tprice2 = 0;}else{var tprice2 = tprice;}
					if(isNaN(markupprice)){var markupprice2 = 0;}else{var markupprice2 = markupprice;}
					if(isNaN(quantity)){var quantity2 = 0;}else{var quantity2 = quantity;}
					
					
					
					
					var markupper = (100 - parseFloat(markupprice2))/ 100;
					 
					 var getSellingPrice = parseFloat(tprice2) / parseFloat(markupper);
					if(isNaN(getSellingPrice) || getSellingPrice == "Infinity"){untPrice = 0;}else{untPrice = getSellingPrice;}
					//alert(getSellingPrice + "sellingPrice");
					
					$scope.sparePartData[i].sellingPrice = untPrice;//Math.floor(untPrice);//
					var cursellingprice = $scope.sparePartData[i].sellingPrice;
					
					var tamount = parseFloat(cursellingprice) * parseFloat(quantity2);
					if(isNaN(tamount) || tamount == "Infinity"){var ttamount = 0;}else{var ttamount = tamount;}
					//alert(ttamount + "tamount");
					$scope.sparePartData[i].totalPrice = ttamount;//Math.floor(ttamount);//ttamount.toFixed(0);
					
					//============List Price===============================//
					if(isNaN(lprice)){var lprice2 = 0;}else{var lprice2 = lprice;}
					if(isNaN(dismulti)){var dismulti2 = 0;}else{var dismulti2 = dismulti;}
					if(isNaN(lpqnty)){var quantity2 = 0;}else{var quantity2 = lpqnty;}
					
					var getSellingPrice = parseFloat(lprice2) * parseFloat(dismulti2);
					if(isNaN(getSellingPrice) || getSellingPrice == "Infinity"){var untPrice = 0;}else{var untPrice = getSellingPrice;}
					//alert(getSellingPrice + "sellingPrice");
					
					$scope.sparePartData[i].unitSellingPrice = untPrice;//Math.floor(untPrice);//
					var curunitsellingprice = $scope.sparePartData[i].unitSellingPrice;
					var tamount = parseFloat(curunitsellingprice) * parseFloat(quantity2);
					if(isNaN(tamount) || tamount == "Infinity"){var ttamount = 0;}else{var ttamount = tamount;}
					//alert(ttamount + "tamount");
					$scope.sparePartData[i].totalAmount =  ttamount;//Math.floor(ttamount);//ttamount.toFixed(0);
					
					//=============Get Spare Total=========================//
					tpricetotal = parseFloat($scope.sparePartData[i].totalPrice);
					lpricetotal = parseFloat($scope.sparePartData[i].totalAmount);
					
					if(isNaN(tpricetotal)){var tfpricetotal = 0;}else{var tfpricetotal = tpricetotal;}
					if(isNaN(lpricetotal)){var lspricetotal = 0;}else{var lspricetotal = lpricetotal;}
					//alert(tpricetotal);
					//alert(lpricetotal);
					gndtotal += (tfpricetotal + lspricetotal);
					//alert(gndtotal);
					if(isNaN(gndtotal)){var gndtotal2 = 0;}else{var gndtotal2 = gndtotal;}
					$scope.addQuotation.subTotal = gndtotal2.toFixed(2);
					//$scope.addQuotation.discountmultiplier = 0;
					$scope.addQuotation.subtotalDiscount = gndtotal2.toFixed(2);
					
					   $scope.$apply();
				   }
			 //  }
			  /* else
			   {
				   //alert(qtnmaster + "     qtnmaster");
				   if(isNaN(curexg) || curexg == "Infinity"){var curexng = 0;}else{var curexng = curexg;}
				   for(var i = 0; i < $scope.sparePartData.length; i++)
				   {
					 //alert($scope.fullUnitItemizedData[i].totalPrice);
					tpricetotal = parseFloat($scope.sparePartData[i].transferSubsPrice);
					lpricetotal = parseFloat($scope.sparePartData[i].listSubsPrice);
					
					if(isNaN(tpricetotal)){var tfpricetotal = 0;}else{var tfpricetotal = tpricetotal;}
					if(isNaN(lpricetotal)){var lspricetotal = 0;}else{var lspricetotal = lpricetotal;}
					
					var convrttprice = parseFloat(curexng) * parseFloat(tfpricetotal);
					var convrtlprice = parseFloat(curexng) * parseFloat(lspricetotal);
					//alert(convrttprice + " tprice");
					//alert(convrtlprice + " lprice");
					if(isNaN(convrttprice)){var convrtedtprice = 0;}else{var convrtedtprice = convrttprice;}
					if(isNaN(convrtlprice)){var convrtedlprice = 0;}else{var convrtedlprice = convrtlprice;}
					//alert(tpricetotal);
					//alert(lpricetotal);
					//gndtotal += (tfpricetotal + lspricetotal);
					//alert(gndtotal);
					//$scope.addQuotation.subTotal = gndtotal.toFixed(2);
					 //alert(gndtotal);
					 $scope.sparePartData[i].transferPrice = Math.floor(convrtedtprice);
					 $scope.sparePartData[i].listPrice = Math.floor(convrtedlprice);
					
					   $scope.$apply();
				   }
			   }*/
		   }
		   else
		   {
			   //alert(qtntype + "     qtntype");
			  //if(qtnmaster == "0")
			  // {
				  //alert(qtnmaster + "     qtnmaster");
				  if(isNaN(curexg) || curexg == "Infinity"){var curexng = 0;}else{var curexng = curexg;}
				  var tpricetotal;
				   var lpricetotal;
				   var gndtotal = 0;
				   for(var i = 0; i < $scope.servicPartData.length; i++)
				   {
					 //alert($scope.fullUnitItemizedData[i].totalPrice);
					var tpricetotal = parseFloat($scope.servicPartData[i].transferSubsPrice);
					var lpricetotal = parseFloat($scope.servicPartData[i].listSubsPrice);
					
					if(isNaN(tpricetotal)){var tfpricetotal = 0;}else{var tfpricetotal = tpricetotal;}
					if(isNaN(lpricetotal)){var lspricetotal = 0;}else{var lspricetotal = lpricetotal;}
					
					var convrttprice = parseFloat(curexng) * parseFloat(tfpricetotal);
					var convrtlprice = parseFloat(curexng) * parseFloat(lspricetotal);
					//alert(convrttprice + " tprice");
					//alert(convrtlprice + " lprice");
					if(isNaN(convrttprice)){var convrtedtprice = 0;}else{var convrtedtprice = convrttprice;}
					if(isNaN(convrtlprice)){var convrtedlprice = 0;}else{var convrtedlprice = convrtlprice;}
					//alert(tpricetotal);
					//alert(lpricetotal);
					//gndtotal += (tfpricetotal + lspricetotal);
					//alert(gndtotal);
					//$scope.addQuotation.subTotal = gndtotal.toFixed(2);
					 //alert(gndtotal);
					 $scope.servicPartData[i].transferPrice = convrtedtprice;//Math.floor(convrtedtprice);
					 $scope.servicPartData[i].listPrice = convrtedlprice;//Math.floor(convrtedlprice);
					 
					var tprice = parseFloat($scope.servicPartData[i].transferPrice);
					var markupprice = parseFloat($scope.servicPartData[i].markUp);
					var quantity = parseFloat($scope.servicPartData[i].qnty);
					
					var lprice = parseFloat($scope.servicPartData[i].listPrice);
					var dismulti = parseFloat($scope.servicPartData[i].discount);
					var lpqnty = parseFloat($scope.servicPartData[i].quanty);
					
					//============Transfer Price===============================//
					if(isNaN(tprice)){var tprice2 = 0;}else{var tprice2 = tprice;}
					if(isNaN(markupprice)){var markupprice2 = 0;}else{var markupprice2 = markupprice;}
					if(isNaN(quantity)){var quantity2 = 0;}else{var quantity2 = quantity;}
					
					
					
					
					var markupper = (100 - parseFloat(markupprice2))/ 100;
					 
					 var getSellingPrice = parseFloat(tprice2) / parseFloat(markupper);
					if(isNaN(getSellingPrice) || getSellingPrice == "Infinity"){untPrice = 0;}else{untPrice = getSellingPrice;}
					//alert(getSellingPrice + "sellingPrice");
					
					$scope.servicPartData[i].sellingPrice = untPrice;//Math.floor(untPrice);//
					var cursellingprice = $scope.servicPartData[i].sellingPrice;
					
					var tamount = parseFloat(cursellingprice) * parseFloat(quantity2);
					if(isNaN(tamount) || tamount == "Infinity"){var ttamount = 0;}else{var ttamount = tamount;}
					//alert(ttamount + "tamount");
					$scope.servicPartData[i].totalPrice = ttamount;//Math.floor(ttamount);//ttamount.toFixed(0);
					
					//============List Price===============================//
					if(isNaN(lprice)){var lprice2 = 0;}else{var lprice2 = lprice;}
					if(isNaN(dismulti)){var dismulti2 = 0;}else{var dismulti2 = dismulti;}
					if(isNaN(lpqnty)){var quantity2 = 0;}else{var quantity2 = lpqnty;}
					
					var getSellingPrice = parseFloat(lprice2) * parseFloat(dismulti2);
					if(isNaN(getSellingPrice) || getSellingPrice == "Infinity"){var untPrice = 0;}else{var untPrice = getSellingPrice;}
					//alert(getSellingPrice + "sellingPrice");
					
					$scope.servicPartData[i].unitSellingPrice = untPrice;//Math.floor(untPrice);//
					var curunitsellingprice = $scope.servicPartData[i].unitSellingPrice;
					var tamount = parseFloat(curunitsellingprice) * parseFloat(quantity2);
					if(isNaN(tamount) || tamount == "Infinity"){var ttamount = 0;}else{var ttamount = tamount;}
					//alert(ttamount + "tamount");
					$scope.servicPartData[i].totalAmount =  ttamount;//Math.floor(ttamount);//ttamount.toFixed(0);
					
					//=============Get Service Total=========================//
					tpricetotal = parseFloat($scope.servicPartData[i].totalPrice);
					lpricetotal = parseFloat($scope.servicPartData[i].totalAmount);
					
					if(isNaN(tpricetotal)){var tfpricetotal = 0;}else{var tfpricetotal = tpricetotal;}
					if(isNaN(lpricetotal)){var lspricetotal = 0;}else{var lspricetotal = lpricetotal;}
					//alert(tpricetotal);
					//alert(lpricetotal);
					gndtotal += (tfpricetotal + lspricetotal);
					//alert(gndtotal);
					if(isNaN(gndtotal)){var gndtotal2 = 0;}else{var gndtotal2 = gndtotal;}
					$scope.addQuotation.subTotal = gndtotal2.toFixed(2);
					//$scope.addQuotation.discountmultiplier = 0;
					$scope.addQuotation.subtotalDiscount = gndtotal2.toFixed(2);
					
					   $scope.$apply();
				   }
			  // }
			   /*else
			   {
				  // alert(qtnmaster + "     qtnmaster");
				   if(isNaN(curexg) || curexg == "Infinity"){var curexng = 0;}else{var curexng = curexg;}
				   for(var i = 0; i < $scope.servicPartData.length; i++)
				   {
					 //alert($scope.fullUnitItemizedData[i].totalPrice);
					tpricetotal = parseFloat($scope.servicPartData[i].transferSubsPrice);
					lpricetotal = parseFloat($scope.servicPartData[i].listSubsPrice);
					
					if(isNaN(tpricetotal)){var tfpricetotal = 0;}else{var tfpricetotal = tpricetotal;}
					if(isNaN(lpricetotal)){var lspricetotal = 0;}else{var lspricetotal = lpricetotal;}
					
					var convrttprice = parseFloat(curexng) * parseFloat(tfpricetotal);
					var convrtlprice = parseFloat(curexng) * parseFloat(lspricetotal);
					//alert(convrttprice + " tprice");
					//alert(convrtlprice + " lprice");
					if(isNaN(convrttprice)){var convrtedtprice = 0;}else{var convrtedtprice = convrttprice;}
					if(isNaN(convrtlprice)){var convrtedlprice = 0;}else{var convrtedlprice = convrtlprice;}
					//alert(tpricetotal);
					//alert(lpricetotal);
					//gndtotal += (tfpricetotal + lspricetotal);
					//alert(gndtotal);
					//$scope.addQuotation.subTotal = gndtotal.toFixed(2);
					 //alert(gndtotal);
					 $scope.servicPartData[i].transferPrice = Math.floor(convrtedtprice);
					 $scope.servicPartData[i].listPrice = Math.floor(convrtedlprice);
					
					   $scope.$apply();
				   }
			   }*/
		   }
		   
	   };
	   
	//===== Total Price Calculations=====//
	   $scope.getTotalPriceItemNo = function(qty,untPri,index)
	   {
		   //alert(qty);
		   //alert(untPri);
		   var index = this.$index;
		   if(isNaN(qty)){var qnty = 0;}else{var qnty = qty;}
		   if(isNaN(untPri)){var untPrice = 0;}else{var untPrice = untPri;}
		   var tPrice = qnty*untPrice;
		   $scope.qtnFullUnitData[index].totalPrice = tPrice.toFixed(2);
		   $scope.$apply();
	   }
	   $scope.projectTotalPriceItemNo = function(qty,untPri,index)
	   {
		   //alert(qty);
		   //alert(untPri);
		   var index = this.$index;
		   if(isNaN(qty)){var qnty = 0;}else{var qnty = qty;}
		   if(isNaN(untPri)){var untPrice = 0;}else{var untPrice = untPri;}
		   var tPrice = qnty*untPrice;
		   $scope.projectUnitData[index].totalPrice = tPrice.toFixed(2);
		   $scope.$apply();
	   }
	   $scope.sparePartTotalPriceItemYes = function(qty,untPri,index)
	   {
		   //alert(qty);
		   //alert(untPri);
		   var index = this.$index;
		   if(isNaN(qty)){var qnty = 0;}else{var qnty = qty;}
		   if(isNaN(untPri)){var untPrice = 0;}else{var untPrice = untPri;}
		   var tPrice = qnty*untPrice;
		   $scope.sparePartData[index].totalPrice = tPrice.toFixed(2);
		   $scope.$apply();
	   }
	   $scope.serviceTotalPriceItemYes = function(qty,untPri,index)
	   {
		   //alert(qty);
		   //alert(untPri);
		   var index = this.$index;
		   if(isNaN(qty)){var qnty = 0;}else{var qnty = qty;}
		   if(isNaN(untPri)){var untPrice = 0;}else{var untPrice = untPri;}
		   var tPrice = qnty*untPrice;
		   $scope.servicPartData[index].totalPrice = tPrice.toFixed(2);
		   $scope.$apply();
	   }
	 //======Sub Total Calculations=====//  
	   $scope.getTotal = function(index)
	   {
		 
		   var index = this.$index;
		   var tpricetotal;
		   var lpricetotal;
		   var gndtotal = 0;
		   for(var i = 0; i < $scope.qtnFullUnitData.length; i++)
		   {
			 //alert($scope.fullUnitItemizedData[i].totalPrice);
			tpricetotal = parseFloat($scope.qtnFullUnitData[i].totalPrice);
			lpricetotal = parseFloat($scope.qtnFullUnitData[i].totalAmount);
			
			if(isNaN(tpricetotal)){var tfpricetotal = 0;}else{var tfpricetotal = tpricetotal;}
			if(isNaN(lpricetotal)){var lspricetotal = 0;}else{var lspricetotal = lpricetotal;}
			//alert(tpricetotal);
			//alert(lpricetotal);
			gndtotal += (tfpricetotal + lspricetotal);
			//alert(gndtotal);
			$scope.addQuotation.subTotal = gndtotal.toFixed(2);
			$scope.addQuotation.discountmultiplier = 0;
			$scope.addQuotation.subtotalDiscount = gndtotal.toFixed(2);
			 //alert(gndtotal);
			   $scope.$apply();
		   }
		   
	   };
	   $scope.getProjectTotal = function(index)
	   {
		 
		   var index = this.$index;
		   var tpricetotal;
		   var lpricetotal;
		   var gndtotal = 0;
		   for(var i = 0; i < $scope.projectUnitData.length; i++)
		   {
			 //alert($scope.fullUnitItemizedData[i].totalPrice);
			tpricetotal = parseFloat($scope.projectUnitData[i].totalPrice);
			lpricetotal = parseFloat($scope.projectUnitData[i].totalAmount);
			
			if(isNaN(tpricetotal)){var tfpricetotal = 0;}else{var tfpricetotal = tpricetotal;}
			if(isNaN(lpricetotal)){var lspricetotal = 0;}else{var lspricetotal = lpricetotal;}
			//alert(tpricetotal);
			//alert(lpricetotal);
			gndtotal += (tfpricetotal + lspricetotal);
			$scope.addQuotation.subTotal = gndtotal.toFixed(2);
			$scope.addQuotation.discountmultiplier = 0;
			$scope.addQuotation.subtotalDiscount = gndtotal.toFixed(2);
			 //alert(gndtotal);
			   $scope.$apply();
		   }
		   
	   };
	   $scope.getSparePartTotal = function(index)
	   {
		 //alert(4145);
		   var index = this.$index;
		   var tpricetotal;
		   var lpricetotal;
		   var gndtotal = 0;
		   for(var i = 0; i < $scope.sparePartData.length; i++)
		   {
			 //alert($scope.fullUnitItemizedData[i].totalPrice);
			tpricetotal = parseFloat($scope.sparePartData[i].totalPrice);
			lpricetotal = parseFloat($scope.sparePartData[i].totalAmount);
			
			if(isNaN(tpricetotal)){var tfpricetotal = 0;}else{var tfpricetotal = tpricetotal;}
			if(isNaN(lpricetotal)){var lspricetotal = 0;}else{var lspricetotal = lpricetotal;}
			gndtotal += (tfpricetotal + lspricetotal);
			$scope.addQuotation.subTotal = gndtotal.toFixed(2);
			$scope.addQuotation.discountmultiplier = 0;
			$scope.addQuotation.subtotalDiscount = gndtotal.toFixed(2);
			 //alert(gndtotal);
			   $scope.$apply();
		   }
		   
	   };
	   $scope.getServicePartTotal = function(index)
	   {
		 
		   var index = this.$index;
		   var tpricetotal;
		   var lpricetotal;
		   var gndtotal = 0;
		   for(var i = 0; i < $scope.servicPartData.length; i++)
		   {
			 //alert($scope.fullUnitItemizedData[i].totalPrice);
			tpricetotal = parseFloat($scope.servicPartData[i].totalPrice);
			lpricetotal = parseFloat($scope.servicPartData[i].totalAmount);
			
			if(isNaN(tpricetotal)){var tfpricetotal = 0;}else{var tfpricetotal = tpricetotal;}
			if(isNaN(lpricetotal)){var lspricetotal = 0;}else{var lspricetotal = lpricetotal;}
			gndtotal += (tfpricetotal + lspricetotal);
			$scope.addQuotation.subTotal = gndtotal.toFixed(2);
			$scope.addQuotation.discountmultiplier = 0;
			$scope.addQuotation.subtotalDiscount = gndtotal.toFixed(2);
			 //alert(gndtotal);
			   $scope.$apply();
		   }
		   
	   };
	 //===Add Tax and Sub Total (Grand Total)=====//
	   $scope.getGrandTotal = function(subTt,taxPer)
	   {
		
		  //alert(subTt);
		 // alert(taxPer);
			if(isNaN(subTt)){var subtt2 = 0;}else{var subtt2 = subTt;}
			if(isNaN(taxPer)){var txper = 0;}else{var txper = taxPer;}
			var gdTotal = (subtt2*txper)/100;
			var gdTotal2 = parseFloat(subtt2) + parseFloat(gdTotal);
			//var tofixgdTotal2 = gdTotal2.toFixed(2);
			$scope.addQuotation.addedTax = parseFloat(gdTotal).toFixed(2);
			$scope.addQuotation.grandTotal = gdTotal2.toFixed(2);
			$scope.$apply();
		    //alert(gdTotal2.toFixed(2));
	   };
	  /* $scope.sparePartGrandTotalItemYes = function(subTt,taxPer)
	   {
		   //alert(subTt);
		    //alert(taxPer);
			if(isNaN(subTt)){var subtt2 = 0;}else{var subtt2 = subTt;}
			if(isNaN(taxPer)){var txper = 0;}else{var txper = taxPer;}
			var gdTotal = (subtt2*txper)/100;
			var gdTotal2 = parseFloat(subtt2) + parseFloat(gdTotal);
			//var tofixgdTotal2 = gdTotal2.toFixed(2);
			$scope.addQuotation.addedTax = parseFloat(gdTotal);
			$scope.addQuotation.grandTotal = gdTotal2.toFixed(2);
			$scope.$apply();
		    //alert(gdTotal2.toFixed(2));
	   }*/
	   
	   //===========Sub total After Discount============================//
	   
	   $scope.getSubtotalAfterDiscount = function(subtotal,discountmulti)
	   {
		   if(isNaN(subtotal)){var subtt = 0;}else{var subtt = subtotal;}
		   if(isNaN(discountmulti)){var discm = 0;}else{var discm = discountmulti;}
		   
		   var SubtotalDisc = (parseFloat(discm)*parseFloat(subtt))/100;
		   if(isNaN(SubtotalDisc)){var SubtotalafterDisc = 0;}else{var SubtotalafterDisc = SubtotalDisc;} 
		  // alert(SubtotalDisc);
		   var finalsubtotal = parseFloat(subtt) - parseFloat(SubtotalafterDisc);
		   
		   if(isNaN(finalsubtotal)){var finalsubdistotal = 0;}else{var finalsubdistotal = finalsubtotal;} 
		  $scope.addQuotation.subtotalDiscount = finalsubdistotal.toFixed(2);
		   $scope.$apply();
	   };
	   
	 //=====Profit=====//
	   $scope.getProfit = function(index)
	   {
		   /*alert(uprice);
		   alert(cprice);*/
		   var index = this.$index;
		   var unittotal,costprice,quantity;
		   var unittotal2 = 0;
		   var costprice2 = 0;
		   var quantity2 = 0;
		   for(var i = 0; i < $scope.qtnFullUnitData.length; i++)
		   {
			 //alert($scope.fullUnitData[i].totalPrice);
			unittotal = parseFloat($scope.qtnFullUnitData[i].totalPrice);
			costprice = parseFloat($scope.qtnFullUnitData[i].costPrice)*parseFloat($scope.qtnFullUnitData[i].qnty);
			//alert(costprice);
			//quantity = parseFloat($scope.qtnFullUnitData[i].qnty);
			unittotal2 += unittotal;
			costprice2 += costprice;
			//quantity2 += quantity;
			//$scope.addQuotation.subTotal = gndtotal.toFixed(2);
			// alert(unittotal2);
			 // alert(costprice2);
			  // alert(quantity2);
			  if(isNaN(costprice2)){var cPrice = 0;}else{var cPrice = costprice2;}
			   var resProfit = ((unittotal2-cPrice)/unittotal2)*100;
			   if(isNaN(resProfit)){var resProfit2 = 0;}else{var resProfit2 = resProfit;}
			   $scope.addQuotation.profit = resProfit2.toFixed(2);
			  // alert(resProfit);
			   $scope.$apply();
		   }
	   };
	    $scope.getProjectProfit = function(index)
	   {
		  
		   /*alert(uprice);
		   alert(cprice);*/
		   var index = this.$index;
		   var unittotal,costprice,quantity;
		   var unittotal2 = 0;
		   var costprice2 = 0;
		   var quantity2 = 0;
		   for(var i = 0; i < $scope.projectUnitData.length; i++)
		   {
			 //alert($scope.fullUnitData[i].totalPrice);
			unittotal = parseFloat($scope.projectUnitData[i].totalPrice);
			costprice = parseFloat($scope.projectUnitData[i].costPrice)*parseFloat($scope.projectUnitData[i].qnty);
			//quantity = parseFloat($scope.projectUnitData[i].qnty);
			unittotal2 += unittotal;
			costprice2 += costprice;
			//quantity2 += quantity;
			//$scope.addQuotation.subTotal = gndtotal.toFixed(2);
			// alert(unittotal2);
			 // alert(costprice2);
			  // alert(quantity2);
			  if(isNaN(costprice2)){var cPrice = 0;}else{var cPrice = costprice2;}
			   var resProfit = ((unittotal2-cPrice)/unittotal2)*100;
			   if(isNaN(resProfit)){var resProfit2 = 0;}else{var resProfit2 = resProfit;}
			   $scope.addQuotation.profit = resProfit2.toFixed(2);
			  // alert(resProfit);
			   $scope.$apply();
		   }
	   };
	   $scope.sparePartProfitItemYes = function(index)
	   {
		  
		   var index = this.$index;
		   var unittotal,costprice,quantity;
		   var unittotal2 = 0;
		   var costprice2 = 0;
		   var quantity2 = 0;
		   for(var j = 0; j < $scope.sparePartData.length; j++)
		   {
			 //alert($scope.fullUnitItemizedData[i].totalPrice);
			unittotal = parseFloat($scope.sparePartData[j].totalPrice);
			costprice = parseFloat($scope.sparePartData[j].costPrice)*parseFloat($scope.sparePartData[j].qnty);
			//quantity = parseFloat($scope.sparePartData[j].qnty);
			unittotal2 += unittotal;
			costprice2 += costprice;
			//quantity2 += quantity;
			//$scope.addQuotation.subTotal = gndtotal.toFixed(2);
			// alert(unittotal2);
			 // alert(costprice2);
			  // alert(quantity2);
			  if(isNaN(costprice2)){var cPrice = 0;}else{var cPrice = costprice2;}
			   var resProfit = ((unittotal2-cPrice)/unittotal2)*100;
			   if(isNaN(resProfit)){var resProfit2 = 0;}else{var resProfit2 = resProfit;}
			   $scope.addQuotation.profit = resProfit2.toFixed(2);
			  // alert(resProfit);
			   $scope.$apply();
		   }
	   };
	   $scope.serviceProfitItemYes = function(index)
	   {
		  
		   var index = this.$index;
		   var unittotal,costprice,quantity;
		   var unittotal2 = 0;
		   var costprice2 = 0;
		  // var quantity2 = 0;
		   for(var j = 0; j < $scope.servicPartData.length; j++)
		   {
			 //alert($scope.fullUnitItemizedData[i].totalPrice);
			unittotal = parseFloat($scope.servicPartData[j].totalPrice);
			costprice = parseFloat($scope.servicPartData[j].costPrice)*parseFloat($scope.servicPartData[j].qnty);
			//quantity = parseFloat($scope.servicPartData[j].qnty);
			unittotal2 += unittotal;
			costprice2 += costprice;
			//quantity2 += quantity;
			//$scope.addQuotation.subTotal = gndtotal.toFixed(2);
			// alert(unittotal2);
			 // alert(costprice2);
			  // alert(quantity2);
			  if(isNaN(costprice2)){var cPrice = 0;}else{var cPrice = costprice2;}
			   var resProfit = ((unittotal2-cPrice)/unittotal2)*100;
			   if(isNaN(resProfit)){var resProfit2 = 0;}else{var resProfit2 = resProfit;}
			   $scope.addQuotation.profit = resProfit2.toFixed(2);
			  // alert(resProfit);
			   $scope.$apply();
		   }
	   };
	   
	   $scope.getFreightandCourierTotal = function(fright,grdTotal)
	   {
		   
		  if(isNaN(fright)){var frt = 0;}else{ var frt = fright;} 
		 // if(isNaN(courier)){var cor = 0;}else{ var cor = courier;}
		  if(isNaN(grdTotal)){var gTotal = 0;}else{ var gTotal = grdTotal;}
		  var addFreightCourier = parseFloat(frt)+parseFloat(gTotal);
		  //alert(addFreightCourier);
		  if(isNaN(addFreightCourier)){var gTotal2 = 0;}else{ var gTotal2 = addFreightCourier;}
		  
		  $scope.addQuotation.courierTotal = gTotal2.toFixed(2);
		   $scope.$apply();
	   };
	   
	   
	   
});

//==================================================//
     //======Added Quotation ==========//
//=================================================//
angular.module('app')
.controller("addNewQuoteCtrl",function($http,$scope,$rootScope,$state,$timeout,$q)
{
	//$rootScope.SalesReportcustomer = "";
	//$rootScope.SalesReportsalesman = "";
	//============================================================//
	//$scope.customerNameData = [];
	/*$scope.loadCustomerName = function()
	{
		$.post("getAllAccountNames.do",function(json)
					{
						//alert(JSON.stringify(json));
						$scope.customerNameData = json['data'];
						$scope.$apply();
					});
	};*/
	
//	this.getMatches = function(searchText) {
//		
//		//alert(345346);
//		//alert(searchText);
//            var deferred = $q.defer();
//			
//            $timeout(function() {
//				
//				/*$scope.customerNameData = [{
//						"name": "Alabama",
//						"abbreviation": "AL"
//					}, {
//						"name": "Alaska",
//						"abbreviation": "AK"
//					}, {
//						"name": "American Samoa",
//						"abbreviation": "AS"
//					}, {
//						"name": "Arizona",
//						"abbreviation": "AZ"
//					}, {
//						"name": "Arkansas",
//						"abbreviation": "AR"
//					}, {
//						"name": "California",
//						"abbreviation": "CA"
//					}, {
//						"name": "Colorado",
//						"abbreviation": "CO"
//					}, {
//						"name": "Connecticut",
//						"abbreviation": "CT"
//					}, {
//						"name": "Delaware",
//						"abbreviation": "DE"
//					}, {
//						"name": "District Of Columbia",
//						"abbreviation": "DC"
//					}, {
//						"name": "Federated States Of Micronesia",
//						"abbreviation": "FM"
//					}, {
//						"name": "Florida",
//						"abbreviation": "FL"
//					}];*/
//					
//					$.post("getAllAccountNames.do",function(json)
//					{
//						//alert(JSON.stringify(json));
//						$scope.customerNameData = json['data'];
//						$scope.$apply();
//						var states = $scope.customerNameData.filter(function(state) {
//								//return (state.name.toUpperCase().indexOf(searchText.toUpperCase()) !== -1 || state.abbreviation.toUpperCase().indexOf(searchText.toUpperCase()) !== -1);
//								return (state.name.toUpperCase().indexOf(searchText.toUpperCase()) !== -1);
//							});
//						//alert(JSON.stringify(states));	
//						deferred.resolve(states);	 
//					});
//				
//                
//               
//            });
//			return deferred.promise;
//            
//        }
//	
	$scope.getMatches = function(searchText) {
		//alert(searchText);
		
            var deferred = $q.defer();

            $timeout(function() {
				
				
				
                var states = getStates().filter(function(state) {
                    //return (state.name.toUpperCase().indexOf(searchText.toUpperCase()) !== -1 || state.abbreviation.toUpperCase().indexOf(searchText.toUpperCase()) !== -1);
					//alert(JSON.stringify(state));
					return (state.name.toUpperCase().indexOf(searchText.toUpperCase()) !== -1);
                });
                deferred.resolve(states);
            });

            return deferred.promise;
        }
		
		
		
		$scope.customerNameData = [];
		function getStates() {
			
			
			/*$.post("getAllAccountNames.do",function(json)
					{
						//alert(JSON.stringify(json));
						//$scope.customerNameData = json['data'];
						//return json['data'];
						$scope.$apply();
					});*/
					$scope.customerNameData = [
							{
								"name": "100 MATERIALS CO LTD -V/Z268"
							},
							{
								"name": "1537 TRADING AND SERVICES LIMITED PARTNERSHIP-Z3830"
							},
							{
								"name": "168 CMK ENGINEERING CO.,LTD. -Z49600"
							},
							{
								"name": "24/7 OILFIELD SERVICES PTE. LTD.-S/1031"
							},
							{
								"name": "25 INDUSTRIAL PRODUCTS -Z2660"
							},
							{
								"name": "2S METAL PUBLIC COMPANY LIMITED-Z25780"
							},
							{
								"name": "2T CORPORATION -V/Z173"
							},
							{
								"name": "3114 ENGINEERING CO., LTD. -Z1890"
							},
							{
								"name": "32 INNOVATE COMPANY LIMITED -Z38341"
							},
							{
								"name": "3E GROUP PTE LTD -S/Z530"
							},
							{
								"name": "3P TECHNO CO.,LTD. -Z46720"
							},
							{
								"name": "3R MARKETING TIN: 119-138-392-000 VAT-P1566"
							},
							{
								"name": "3T - INDUSTRY EQUIPMENT JOINT STOCK COMPANY-V/Z644"
							},
							{
								"name": "3TM PLASTICS CO.,LTD. -Z17260"
							},
							{
								"name": "4G PLUS CO.,LTD. -Z42620"
							},
							{
								"name": "5 SOR SUPHAN -Z49890"
							},
							{
								"name": "5SIBLINGS ROCK MINING CO., LTD #A5-A8, LA SEINE, DIAM OND-CA/005"
							},
							{
								"name": "7D FOOD INTERNATIONAL INC -P/427U"
							},
							{
								"name": "7D FOOD INTERNATIONAL INC -P5427P"
							},
							{
								"name": "7STARS ENGINEERING CO.,LTD. -Z48790"
							},
							{
								"name": "A -V/S198"
							},
							{
								"name": "A & C RICE PHETCHABURI LTD.,PART.-Z35560"
							},
							{
								"name": "A & D MACHINED PRODUCTS -7ADM01"
							},
							{
								"name": "A & D SUPPLY GROUP CO.,LTD. -Z14640"
							},
							{
								"name": "A & F IMAGINATION CO.,LTD. -Z47450"
							},
							{
								"name": "A & K ENGINEERING AUST PTY LTD -7AKE01"
							}];
					return $scope.customerNameData;
					/*return [{
						"name": "Alabama",
						"abbreviation": "AL"
					}, {
						"name": "Alaska",
						"abbreviation": "AK"
					}, {
						"name": "American Samoa",
						"abbreviation": "AS"
					}, {
						"name": "Arizona",
						"abbreviation": "AZ"
					}, {
						"name": "Arkansas",
						"abbreviation": "AR"
					}, {
						"name": "California",
						"abbreviation": "CA"
					}, {
						"name": "Colorado",
						"abbreviation": "CO"
					}, {
						"name": "Connecticut",
						"abbreviation": "CT"
					}, {
						"name": "Delaware",
						"abbreviation": "DE"
					}, {
						"name": "District Of Columbia",
						"abbreviation": "DC"
					}, {
						"name": "Federated States Of Micronesia",
						"abbreviation": "FM"
					}, {
						"name": "Florida",
						"abbreviation": "FL"
					}, {
						"name": "Georgia",
						"abbreviation": "GA"
					}, {
						"name": "Guam",
						"abbreviation": "GU"
					}, {
						"name": "Hawaii",
						"abbreviation": "HI"
					}, {
						"name": "Idaho",
						"abbreviation": "ID"
					}, {
						"name": "Illinois",
						"abbreviation": "IL"
					}, {
						"name": "Indiana",
						"abbreviation": "IN"
					}, {
						"name": "Iowa",
						"abbreviation": "IA"
					}, {
						"name": "Kansas",
						"abbreviation": "KS"
					}, {
						"name": "Kentucky",
						"abbreviation": "KY"
					}, {
						"name": "Louisiana",
						"abbreviation": "LA"
					}, {
						"name": "Maine",
						"abbreviation": "ME"
					}, {
						"name": "Marshall Islands",
						"abbreviation": "MH"
					}, {
						"name": "Maryland",
						"abbreviation": "MD"
					}, {
						"name": "Massachusetts",
						"abbreviation": "MA"
					}, {
						"name": "Michigan",
						"abbreviation": "MI"
					}, {
						"name": "Minnesota",
						"abbreviation": "MN"
					}, {
						"name": "Mississippi",
						"abbreviation": "MS"
					}, {
						"name": "Missouri",
						"abbreviation": "MO"
					}, {
						"name": "Montana",
						"abbreviation": "MT"
					}, {
						"name": "Nebraska",
						"abbreviation": "NE"
					}, {
						"name": "Nevada",
						"abbreviation": "NV"
					}, {
						"name": "New Hampshire",
						"abbreviation": "NH"
					}, {
						"name": "New Jersey",
						"abbreviation": "NJ"
					}, {
						"name": "New Mexico",
						"abbreviation": "NM"
					}, {
						"name": "New York",
						"abbreviation": "NY"
					}, {
						"name": "North Carolina",
						"abbreviation": "NC"
					}, {
						"name": "North Dakota",
						"abbreviation": "ND"
					}, {
						"name": "Northern Mariana Islands",
						"abbreviation": "MP"
					}, {
						"name": "Ohio",
						"abbreviation": "OH"
					}, {
						"name": "Oklahoma",
						"abbreviation": "OK"
					}, {
						"name": "Oregon",
						"abbreviation": "OR"
					}, {
						"name": "Palau",
						"abbreviation": "PW"
					}, {
						"name": "Pennsylvania",
						"abbreviation": "PA"
					}, {
						"name": "Puerto Rico",
						"abbreviation": "PR"
					}, {
						"name": "Rhode Island",
						"abbreviation": "RI"
					}, {
						"name": "South Carolina",
						"abbreviation": "SC"
					}, {
						"name": "South Dakota",
						"abbreviation": "SD"
					}, {
						"name": "Tennessee",
						"abbreviation": "TN"
					}, {
						"name": "Texas",
						"abbreviation": "TX"
					}, {
						"name": "Utah",
						"abbreviation": "UT"
					}, {
						"name": "Vermont",
						"abbreviation": "VT"
					}, {
						"name": "Virgin Islands",
						"abbreviation": "VI"
					}, {
						"name": "Virginia",
						"abbreviation": "VA"
					}, {
						"name": "Washington",
						"abbreviation": "WA"
					}, {
						"name": "West Virginia",
						"abbreviation": "WV"
					}, {
						"name": "Wisconsin",
						"abbreviation": "WI"
					}, {
						"name": "Wyoming",
						"abbreviation": "WY"
					}];*/
				}
	
	
	
	
	
	//==========================================================//
	
	
	//$scope.addedQtns.custName = $rootScope.SalesqtnCustomer;
	$scope.master = {};
	
	//$scope.isDisabled = true;
	
	//$scope.addedQtns = ({'count':false,'manufact':false,'month':false,'salesCode':false,'modelno':false,'ref':false,'salesName':false,'serNo':false,'gear':false,'cName':false,'qtn':false});
	 //getAllCustmerNames
	$scope.loadCustomerQtnName = function()
	{
		$scope.customerNamesQtnData = [];
		//$scope.customerNameData = [{id:'name1',name:'name1'},{id:'name2',name:'name2'},{id:'name3',name:'name3'},{id:'name4',name:'name4'}];
		$.post("getAllCustmerNamesforQuatation.do",function(json)
				{
					//alert(JSON.stringify(json));
					$scope.customerNamesQtnData = json['data'];
					$scope.$apply();
				});
	};
	
	$scope.startsWith = function(state, viewValue) {
			//alert(state.substr(0, viewValue.length).toLowerCase() == viewValue.toLowerCase());
              return state.substr(0, viewValue.length).toLowerCase() == viewValue.toLowerCase();
            }
	
	$scope.loadquotaionDetails = function(customer,form)
	{
		if($rootScope.deliveryUpdateqtncustomer===undefined || $rootScope.deliveryUpdateqtncustomer==="")
		{
			
		}
		else
		{
			//alert($rootScope.deliveryUpdateqtncustomer);
			var customername = $rootScope.deliveryUpdateqtncustomer;
			$scope.addedQtns = ({'cName':true,'custName': customername});
			//$scope.getQtnCustomerName(customer,form);
			
			$timeout(function(){
				
				$("#loadCustQtnDetails").trigger("click"); 
				$rootScope.deliveryUpdateqtncustomer = "";
				}, 1000);
			$scope.$apply();
		}
	};
	
	$scope.loadAddQtnCountrys = function()
	{  
	
	 $scope.countryData = [];
	 
	  var httpRequest = $http({
                method: 'POST',
                url: "/SCA-360/getCoutries.do",
                data: {},
            }).success(function(data, status) {
				
				//alert(JSON.stringify(data['countries']));
				$scope.countryData = data['countries'];
				$scope.$apply();
			});
	 
	
	}
	 $scope.loadAddQtnSalesMan = function()
	   {
		   $scope.salesmanArray = [];
		    $.post("getAllSalesMan.do",function(json)
			{
				//alert(JSON.stringify(json['data']));
				 $scope.salesmanArray = json['data'];
				 $scope.$apply();
			});
	   }
	   
	  $scope.getAddQtnSalesmanCode = function()
	   {
		   $scope.salesManCodeArray = [];
		    $.post("getingSalesmanCode.do",function(json)
			{
				//alert(JSON.stringify(json['data']));
				 $scope.salesManCodeArray = json['data'];
				 $scope.$apply();
			});
	   }
	   
	   $scope.disableCountryName = function(country)
	   {
		   //alert(country);
		   if(country == true)
		   {
			  //alert("if");
			  $scope.isDisabled = false;  
		   }
		   else
		   {
			  //alert("else"); 
			  $scope.isDisabled = true;  
		   }
	   };
	   
	$scope.loadAllQtnTypes = function()
	{
		$scope.qtnTypeData = [{id:'0',qtnType : 'Standard'},{id:'1',qtnType : 'Customize'},{id:'2',qtnType : 'Spare Parts (Only)'},{id:'3',qtnType : 'Spare Parts and Service'}];
	};
	$scope.loadQuoteStatus = function()
	{
		$scope.qtnStsData = [{id:'1',qtnStatus : 'Lost'},{id:'2',qtnStatus : 'Won'}];
	};
	 $scope.loadAddedQuotationDepartments = function()
		{
			$.post("departmentView.do",function(json)
			{
				//alert(JSON.stringify(json['data']));
				$scope.departmentData = json['data'];
				 $scope.$apply();
			});		
		};
	
	
	/*-------------------------------------*/
	/*var numOfPieces = 6 * 6;
				var frag = document.createDocumentFragment();

				function insertInnerPieces($el, innerPieces) 
				{
				  for (var i = 0; i < innerPieces; i++) 
				  {
				    var $inner = document.createElement('div');
			    	$inner.classList.add('popup__piece-inner');
				    $el.appendChild($inner);
				  }
				};
	
				for (var i = 1; i <= numOfPieces; i++) 
				{
				  var $piece = document.createElement('div');
				  $piece.classList.add('popup__piece');
	    
				  insertInnerPieces($piece, 3);
				  frag.appendChild($piece);
				}
	
				document.querySelector('.popup__pieces').appendChild(frag);

				var $popupsCont = document.querySelector('.popups-cont');
				var $popup = document.querySelector('.popup');
				var popupAT = 900;
	
				var overlay = jQuery('<div id="overlay"> </div>');				
				
			
				
				//-----Show Popup--------------
				$scope.showPopup = function(UserData)
				{					 
					//alert(JSON.stringify(UserData));
					  $scope.userData = UserData;
					  overlay.appendTo(document.body);	
					  $popupsCont.classList.add('s--popup-active');
					  $popup.classList.add('s--active');
					  
					    
					  
					 
					 
				};*/
				
				
				
				$scope.showPopup = function(salesman,form) {
					
			
            if (salesman == undefined|| salesman == "") {
				
				     if ($scope.addedQuotationForm.$valid) {
 } else {
                //alert("shw errors");
                var field = null,
                    firstError = null;
                for (field in form) {
                    if (field[0] != '$') {
                        if (firstError === null && !form[field].$valid) {
                            firstError = form[field].$name;
                        }
                        if (form[field].$pristine) {
                            form[field].$dirty = true;
                        }
                    }
                }
            }

				  
				  
				  } else {
               $state.go('app.deliverupdate');
                
				  $("#existValRC1gg").hide();
            }
        }
		
		
		
		
        $scope.showPopupprogress = function(salesman,form) {
            //alert(salesman);
            if (salesman == undefined|| salesman == "") {
				
				     if ($scope.addedQuotationForm.$valid) {
 } else {
                //alert("shw errors");
                var field = null,
                    firstError = null;
                for (field in form) {
                    if (field[0] != '$') {
                        if (firstError === null && !form[field].$valid) {
                            firstError = form[field].$name;
                        }
                        if (form[field].$pristine) {
                            form[field].$dirty = true;
                        }
                    }
                }
            }

				 } else {
                 $state.go('app.updateprogress');
               
            }


        }
		
		$scope.loadupdateprogressvalues = function(customer,salesman,qtnCustomer) {
             	$rootScope.SalesReportcustomer = customer;
			  	$rootScope.SalesReportsalesman = salesman;
				$rootScope.SalesqtnCustomer = qtnCustomer;
				$rootScope.quotationPage = "Quote";

           
        };
  
        $scope.loaddeliveryvalues = function(customer,salesman,qtnCustomer) {
              $rootScope.SalesReportcustomer = customer;
			  $rootScope.SalesReportsalesman = salesman;
			  $rootScope.SalesqtnCustomer = qtnCustomer;
			  $rootScope.quotationPage = "Quote";

           
        };

	
	
	var addedQtnObj  = new FormData();
	
	$scope.getQtnCustomerName = function(addedQtns,form)
	{
		
		
		/*if(!addedQtns.count)
		{
			//alert("if");
			delete addedQtns['count'];
			delete addedQtns['country'];
		}
		
		if(!addedQtns.manufact)
		{
			//alert("if");
			delete addedQtns['manufact'];
			delete addedQtns['manufacturing'];
		}
		
		if(!addedQtns.month)
		{
			//alert("if");
			delete addedQtns['month'];
			delete addedQtns['monthYear'];
		}
		
		if(!addedQtns.salesCode)
		{
			//alert("if");
			delete addedQtns['salesCode'];
			delete addedQtns['salesManCode'];
		}
		
		if(!addedQtns.modelno)
		{
			//alert("if");
			delete addedQtns['modelno'];
			delete addedQtns['modelNumber'];
		}
		
		if(!addedQtns.ref)
		{
			//alert("if");
			delete addedQtns['ref'];
			delete addedQtns['qtnRef'];
		}
		
		if(!addedQtns.salesName)
		{
			//alert("if");
			delete addedQtns['salesName'];
			delete addedQtns['salesMan'];
		}
		
		if(!addedQtns.serNo)
		{
			//alert("if");
			delete addedQtns['serNo'];
			delete addedQtns['serialNo'];
		}
		
		if(!addedQtns.gear)
		{
			//alert("if");
			delete addedQtns['gear'];
			delete addedQtns['gearhead'];
		}
		
		if(!addedQtns.cName)
		{
			//alert("if");
			delete addedQtns['cName'];
			delete addedQtns['custName'];
		}
		
		if(!addedQtns.qtn)
		{
			//alert("if");
			delete addedQtns['qtn'];
			delete addedQtns['qtnType'];
		}
		//alert(JSON.stringify(addedQtns));
		delete addedQtns['count'];
		delete addedQtns['manufact'];
		delete addedQtns['month'];
		delete addedQtns['salesCode'];
		delete addedQtns['modelno'];
		delete addedQtns['ref'];
		delete addedQtns['salesName'];
		delete addedQtns['serNo'];
		delete addedQtns['gear'];
		delete addedQtns['cName'];
		delete addedQtns['qtn'];*/
		
		
		
		addedQtnObj.append("formData",angular.toJson(addedQtns));
		
		
		$.ajax({
						       url         : "/SCA-360/quatationFiltersSearch.do",
						       data        : addedQtnObj,
						       contentType : false,
						       processData : false,
						       type        : 'POST'
						   }).success(function(data, status){
							   //alert(status);
							  // alert(JSON.stringify(data));
							  if(status == "success")
							  {
								  var datalength = data["quatationform"];
								  // alert(datalength);
								   if(datalength != "0")
								   {
									  // alert("if");
									   $scope.addNewQuoteData =  data['quatationform'];
									   $scope.addedQtns = angular.copy($scope.master);
									   addedQtnObj = new FormData();
									   form.$setPristine(true); 
								   
									$scope.$apply();
								   }
								   else
								   {
									   //alert("else");
									   swal("Oops sorry...", "Search Results Not Found!", "error");
									   addedQtnObj = new FormData();
									   $scope.addNewQuoteData = [];
									   $scope.addedQtns = angular.copy($scope.master);
									   addedQtnObj = new FormData();
									   form.$setPristine(true);
									   $scope.$apply();
								   }
							  }
							  else
							  {
								  swal("Oops sorry...", "Something went wrong!", "error");
							  }
							  
							   
						   });
	}
	
	
	$scope.getQtnCustomerName5555 = function(customer,form)
	{
		
		
		$.getJSON("getSavedQuatationDataOnCustmerName.do",{custmernmae:customer},function(json)
				{
					//alert(JSON.stringify(json['quatationform'][0].qtnType));
					//var quoteType = json['quatationform'][0].qtnType;
					$scope.addNewQuoteData =  json['quatationform'];
					//$scope.printType = json['quatationform'][0].qtnType;
					
					//alert(quoteType);
					/*if(quoteType=="0")
					{
						$scope.quotationType = "Full Unit";
					}
					if(quoteType=="1")
					{
						$scope.quotationType = "Project";
					}
					if(quoteType=="2")
					{
						$scope.quotationType = "Spare Parts(Only)";
					}
					if(quoteType=="3")
					{
						$scope.quotationType = "Spare part and service";
					}*/
					
					$scope.$apply();
				});
	};
	/*$scope.selectCustomerQtn = function(customer)
	{
			//alert(customer);
			
				$scope.$apply();
		
	};*/
	$scope.loadQtnDetails = function(qtnSeqNo,qtnAction,qtnType)
	{
		
		$rootScope.quotationSeqNo = qtnSeqNo;
		$rootScope.quotationAction = qtnAction;
		$rootScope.qtnType = qtnType;
		$rootScope.qtnTypeMode = "Edit";
		//alert(qtnType+ " " + "qtnType" );
		$state.go('app.quotation');
		
	};
	$scope.loadQtnCopyDetails = function(qtnSeqNo,qtnAction,qtnType)
	{
		//alert(qtnAction);
		$rootScope.quotationSeqNo = qtnSeqNo;
		$rootScope.quotationAction = qtnAction;
		$rootScope.qtnType = qtnType;
		$rootScope.qtnTypeMode = "Copy";
		//alert(qtnType+ " " + "qtnType" );
		$state.go('app.quotation');
		
	};
	
	/*$scope.loadservicePrintData = function()
	   {
		    
		   $scope.itemData = [{id:'1',euipNo:'MD-511AG',motor:'CVVBM40A-4235-11',snum:'(S/N. C11163367)',data:[{id:'1',partnum:'G31965G',partdesp:'Adapter for 30 C-ID',qty:'1',uprice:'86',tprice:'86'},{id:'2',partnum:'G46729G',partdesp:'Indicator for 30 L-Type',qty:'1',uprice:'50',tprice:'50'}]},{id:'2',euipNo:'MD-660AG',motor:'CVVBM15A-4185-11',snum:' (S/N. C1113532)',data:[{id:'3',partnum:'DH0581G',partdesp:'10FV-218 High Speed Shaft',qty:'1',uprice:'86',tprice:'86'},{id:'4',partnum:'DP541WW-02',partdesp:'Fan F-132 High Temp',qty:'1',uprice:'50',tprice:'50'}]}];
		   
		   
            
	   }
	   $scope.loadDespDta = function()
	   {
		    $scope.itemData3 = [{id:'1',motor:'CVVBM40A-4235-11',snum:'(S/N. C11163367)',proDesp:'Transportation per way',qty:'2',uprice:'50',tprice:'100'}];
	   }*/
	   
	$scope.printGenerateQuotation = function(qtnseqno,qtntype,actionsts)
	   {
		   
		   //alert(qtnseqno);getSavedQuatationPrintData
		   //alert(qtntype);
		   //alert(actionsts);
		   $.post("getSavedQuatationData.do",{quationnumber:qtnseqno},function(json)
			{
				//alert(JSON.stringify(json['quatationform'][0].qtnType));
				var p = json['quatationform'][0].qtnType;
				
				if(p == '0')
				{
					//alert(p);
					$scope.subTotal = json['quatationform'][0].subTotal;
					$scope.grandTotal = json['quatationform'][0].grandTotal;
					$scope.taxPercent = json['quatationform'][0].taxPercent;
					$scope.tax = json['quatationform'][0].tax;
					$scope.addedTax = json['quatationform'][0].addedTax;
					$scope.remarks = json['quatationform'][0].remarks;
					$scope.salesManName = json['quatationform'][0].salesMan;
					$scope.salesmanPhNo = json['quatationform'][0].salesmanPhNo;
					$scope.createdBy = json['quatationform'][0].createdBy;
					$scope.subject = json['quatationform'][0].subject;
					//$scope.addQuotation.remarks = json['quatationform'][0].remarks;
					//alert(JSON.stringify(json['quatationform'][0].remarks));
					$scope.qtnTableFormData = json['quatationform'];
					$scope.qtnFormGridData = json['quatationgrid'];
					$scope.qtnFormTermData = json['quatationtermsgrid'];
					$scope.$apply();
					
					var prtContent = document.getElementById("qtnPrint");
					var WinPrint = window.open('', '', 'left=0,top=0,width=800,height=500,toolbar=0,scrollbars=0,status=0');
					WinPrint.document.write(prtContent.innerHTML);
					WinPrint.document.close();
					WinPrint.focus();
					WinPrint.print();
					WinPrint.close();
				}
				if(p == '1')
				{
					//alert(p);
					$scope.subTotal = json['quatationform'][0].subTotal;
					$scope.grandTotal = json['quatationform'][0].grandTotal;
					$scope.taxPercent = json['quatationform'][0].taxPercent;
					$scope.tax = json['quatationform'][0].tax;
					$scope.addedTax = json['quatationform'][0].addedTax;
					$scope.remarks = json['quatationform'][0].remarks;
					$scope.salesManName = json['quatationform'][0].salesMan;
					$scope.salesmanPhNo = json['quatationform'][0].salesmanPhNo;
					$scope.createdBy = json['quatationform'][0].createdBy;
					$scope.subject = json['quatationform'][0].subject;
					//$scope.addQuotation.remarks = json['quatationform'][0].remarks;
					//alert(JSON.stringify(json['quatationform'][0].remarks));
					$scope.qtnTableFormData = json['quatationform'];
					$scope.qtnFormProjectGridData = json['quatationgrid'];
					$scope.qtnFormTermData = json['quatationtermsgrid'];
					$scope.$apply();
					//alert(JSON.stringify($scope.qtnFormProjectGridData));
					var prtContent = document.getElementById("qtnPrint");
					var WinPrint = window.open('', '', 'left=0,top=0,width=800,height=500,toolbar=0,scrollbars=0,status=0');
					WinPrint.document.write(prtContent.innerHTML);
					WinPrint.document.close();
					WinPrint.focus();
					WinPrint.print();
					WinPrint.close();
				}
				if(p == '2')
				{
					//alert(p);
					$scope.subTotal = json['quatationform'][0].subTotal;
					$scope.grandTotal = json['quatationform'][0].grandTotal;
					$scope.taxPercent = json['quatationform'][0].taxPercent;
					$scope.tax = json['quatationform'][0].tax;
					$scope.addedTax = json['quatationform'][0].addedTax;
					$scope.sparePartremarks = json['quatationform'][0].remarks;
					$scope.salesManName = json['quatationform'][0].salesMan;
					$scope.salesmanPhNo = json['quatationform'][0].salesmanPhNo;
					$scope.createdBy = json['quatationform'][0].createdBy;
					$scope.subject = json['quatationform'][0].subject;
					//$scope.addQuotation.remarks = json['quatationform'][0].remarks;
					//alert(JSON.stringify(json['quatationform'][0].remarks));
					$scope.qtnTableSparePartData = json['quatationform'];
					$scope.qtnFormGridSparePartData = json['quatationgrid'];
					$scope.qtnFormTermSparePartData = json['quatationtermsgrid'];
					$scope.$apply();
					
					var prtContent = document.getElementById("qtnPrint");
					var WinPrint = window.open('', '', 'left=0,top=0,width=800,height=500,toolbar=0,scrollbars=0,status=0');
					WinPrint.document.write(prtContent.innerHTML);
					WinPrint.document.close();
					WinPrint.focus();
					WinPrint.print();
					WinPrint.close();
				}
				if(p == '3')
				{
					
					//alert(p);
					$scope.subTotal = json['quatationform'][0].subTotal;
					$scope.grandTotal = json['quatationform'][0].grandTotal;
					$scope.taxPercent = json['quatationform'][0].taxPercent;
					$scope.tax = json['quatationform'][0].tax;
					$scope.addedTax = json['quatationform'][0].addedTax;
					$scope.serviceremarks = json['quatationform'][0].remarks;
					$scope.salesManName = json['quatationform'][0].salesMan;
					$scope.salesmanPhNo = json['quatationform'][0].salesmanPhNo;
					$scope.createdBy = json['quatationform'][0].createdBy;
					$scope.subject = json['quatationform'][0].subject;
					//$scope.addQuotation.remarks = json['quatationform'][0].remarks;
					//alert(JSON.stringify(json['quatationgrid'].productDesp));
					$scope.qtnTableServiceData = json['quatationform'];
					$scope.qtnFormGridServiceData = json['quatationgrid'];
					$scope.qtnGridServiceDesp = json['quatationgridprd'];
					$scope.qtnFormTermServiceData = json['quatationtermsgrid'];
					$scope.$apply();
					var prtContent = document.getElementById("qtnPrint");
					var WinPrint = window.open('', '', 'left=0,top=0,width=800,height=500,toolbar=0,scrollbars=0,status=0');
					WinPrint.document.write(prtContent.innerHTML);
					WinPrint.document.close();
					WinPrint.focus();
					WinPrint.print();
					WinPrint.close();
				}
					
			});
		    
			
			
			
	   };
	   
	   $scope.removeQtnFromGrid = function(qtnseqno)
	   {
		   //alert(qtnseqno);
		   //alert(qtntype);
		   //alert(actionsts);
		   swal({
					  title: "Are you sure?",
					  text: "Your will not be able to recover this file!",
					  type: "warning",
					  showCancelButton: true,
					  confirmButtonClass: "btn-danger",
					  confirmButtonText: "Yes, delete it!",
					  closeOnConfirm: false
					},
					function(){
					  $.post("quatationstatus.do",{qref:qtnseqno,qtatus:"0"},function(json)
						{
							//alert(JSON.stringify(json));
							swal("", "Deleted Successfully.!", "success");
							$scope.addNewQuoteData =  json['quatationform'];
							$scope.$apply();
						});
					});
		   
			
			
	   };
		   
	
	
});

//==================================================//
     //======Salesman Budget ==========//
//=================================================//
angular.module('app')
.controller("salesmanBudget",function($http,$scope,$rootScope,$state,$timeout)
{
	
	$scope.isDisabled = true;
	$scope.master = {};
		var countryObj = new Object();
        countryObj.dropdownname = "Country";
        countryObj.columnname = "country";
        countryObj.columncode = "countrycode";
        var jsonCountryString = JSON.stringify(countryObj);
	
	//$scope.salemandata = [];
	//$index = 0;
	/*$scope.addCountrySalesmansGrid33 = function() {

            $index++;
            $scope.salemandata.push({'id': $index})
        };
		$scope.removeSalesmanRow = function(name) {
            var Index = -1;
            var comArr = eval($scope.salemandata);
            for (var i = 0; i < comArr.length; i++) {
                if (comArr[i].id === name) {
                    Index = i;
                    break;
                }
            }
            $scope.salemandata.splice(Index, 1);
            $index = comArr.length;
            for (var s = 0; s < $index; s++) {
                $scope.salemandata[s].id = Number(s) + Number(1);
            }

        };*/
		$scope.loadCountryBySales = function() {
            
			/*$scope.countryNames = [];
			 var httpRequest = $http({
                method: 'POST',
                url: "/SCA-360/getCoutries.do",
                data: {},
            }).success(function(data, status) {
				
				//alert(JSON.stringify(data['countries']));
				$scope.countryNames = data['countries'];
				$scope.$apply();
			});*/
			 var httpRequest = $http({
                method: 'POST',
                url: "/SCA-360/loadDropDown.do",
                data: jsonCountryString,
            }).success(function(data, status) {
				//alert(JSON.stringify(data));
                $scope.countryNamesArr = data;
				
                //alert(JSON.stringify($scope.countryNames));


            });
        };
        $scope.loadCurrentYear = function() {
            /*var httpRequest = $http({
                method: 'POST',
                url: "/SCA-360/loadDropDown.do",
                data: jsonYearString,
            }).success(function(data, status) {
                $scope.yearNames = data;
                //alert(JSON.stringify(data));
            });*/
			$scope.yearNames = [{id:'1',year : '2017'}];
        };

        $scope.loadCountryByCurrency = function() {
            /*var httpRequest = $http({
                method: 'POST',
                url: "/SCA-360/loadDropDown.do",//
                data: jsonproductCategoryString,
            }).success(function(data, status) {
                $scope.product = data;
            });*/
			$scope.currencyArrData = [];
			$.post("getingCurrencies.do",function(json)
				{
						  
							   $scope.currencyArrData = json['data'];
								$scope.$apply();
				});
        };
		
		$scope.getcurrencyByCountry = function(countrycode)
		{
			
			$.post("getCurrenceyOnCurrenreyName.do",{country:countrycode},function(json)
				{
						  //alert(JSON.stringify(json['currency']));
							  $scope.AddBudget.currency = json['currency'];
								$scope.$apply();
								$scope.isDisabled = false;
				});
		};
		
		$scope.salesmandata = [];
		//$index = 0;
		$scope.addCountrySalesmansGrid = function(year,countrycode)
		{
			//$index++;
           // $scope.salesmandata.push({'slno': $index})
		  
		   if(countrycode == "" || countrycode == undefined)
		   {
			   //alert(countrycode + "if"); 
			   $scope.isDisabled = true;
		   }
		   else
		   {
			   //alert(countrycode + "if"); 
			   $scope.isDisabled = false;
		   }
		   
			$.post("getSalesmansByCountryFromMaster.do",{year:year,country:countrycode}, function(json) {

              //alert(JSON.stringify(json['salesbudgetdata']));
              

               $scope.salesmandata = json['salesbudgetdata'];
			  
			  
	
           
       
				$scope.totalItems =  $scope.salesmandata.length;
				//alert($scope.totalItems);
				$scope.currentPage =1;
					 $scope.itemsPerPage = 10;
				
				
					  $scope.$watch("currentPage", function() {
				
				  
					   setPagingData($scope.currentPage);
					  });
				
				  function setPagingData(page) {
				 
					  var pagedData =  $scope.salesmandata.slice((page - 1) * $scope.itemsPerPage, page * $scope.itemsPerPage);
				
					  $scope.items = pagedData;
				 
					 }
				
				
				 $scope.pageChanged = function () {
						  $log.log('Page changed to: ' + $scope.currentPage);
					   };

                    $scope.$apply();
            });
			
			
			
		};
		
		$scope.getQuarteroneTotal = function(janBg,febBg,marBg,index)
		{
			var index = this.$index;
			/*alert(janBg + " " + "janBg");
			alert(febBg + " " + "febBg");
			alert(marBg + " " + "marBg");
			alert(index + " " + "index");*/
			if(janBg == null || janBg == ""){var janBG = 0; }else{var janBG = janBg;}
			if(febBg == null || febBg == ""){var febBG = 0; }else{var febBG = febBg;}
			if(marBg == null || marBg == ""){var marBG = 0; }else{var marBG = marBg;}
			var QuarterOne = parseFloat(janBG) + parseFloat(febBG) + parseFloat(marBG);
			//alert(QuarterOne);
			if(isNaN(QuarterOne)){var QtOne = 0; }else{var QtOne = QuarterOne;}
			$scope.items[index].quarterone = QtOne.toFixed(2);
			
			$scope.$apply();
		};
		$scope.getQuartertwoTotal = function(aprBg,mayBg,junBg,index)
		{
			var index = this.$index;
			/*alert(janBg + " " + "janBg");
			alert(febBg + " " + "febBg");
			alert(marBg + " " + "marBg");
			alert(index + " " + "index");*/
			if(aprBg == null || aprBg == ""){var aprBG = 0; }else{var aprBG = aprBg;}
			if(mayBg == null || mayBg == ""){var mayBG = 0; }else{var mayBG = mayBg;}
			if(junBg == null || junBg == ""){var junBG = 0; }else{var junBG = junBg;}
			var QuarterTwo = parseFloat(aprBG) + parseFloat(mayBG) + parseFloat(junBG);
			//alert(QuarterOne);
			if(isNaN(QuarterTwo)){var QtTwo = 0; }else{var QtTwo = QuarterTwo;}
			$scope.items[index].quartertwo = QtTwo.toFixed(2);
			
			$scope.$apply();
		};
		$scope.getQuarterthreeTotal = function(julBg,augBg,sepBg,index)
		{
			var index = this.$index;
			/*alert(janBg + " " + "janBg");
			alert(febBg + " " + "febBg");
			alert(marBg + " " + "marBg");
			alert(index + " " + "index");*/
			if(julBg == null || julBg == ""){var julBG = 0; }else{var julBG = julBg;}
			if(augBg == null || augBg == ""){var augBG = 0; }else{var augBG = augBg;}
			if(sepBg == null || sepBg == ""){var sepBG = 0; }else{var sepBG = sepBg;}
			var QuarterThree = parseFloat(julBG) + parseFloat(augBG) + parseFloat(sepBG);
			//alert(QuarterOne);
			if(isNaN(QuarterThree)){var QtThree = 0; }else{var QtThree = QuarterThree;}
			$scope.items[index].quarterthree = QtThree.toFixed(2);
			
			$scope.$apply();
		};
		$scope.getQuarterfourTotal = function(octBg,novBg,decBg,index)
		{
			var index = this.$index;
			/*alert(janBg + " " + "janBg");
			alert(febBg + " " + "febBg");
			alert(marBg + " " + "marBg");
			alert(index + " " + "index");*/
			if(octBg == null || octBg == ""){var octBG = 0; }else{var octBG = octBg;}
			if(novBg == null || novBg == ""){var novBG = 0; }else{var novBG = novBg;}
			if(decBg == null || decBg == ""){var decBG = 0; }else{var decBG = decBg;}
			var QuarterFour = parseFloat(octBG) + parseFloat(novBG) + parseFloat(decBG);
			//alert(QuarterOne);
			if(isNaN(QuarterFour)){var QtFour = 0; }else{var QtFour = QuarterFour;}
			$scope.items[index].quarterfour = QtFour.toFixed(2);
			
			$scope.$apply();
		};
		$scope.getYearBudgetTotal = function(qtrone,qtrtwo,qtrthree,qtrfour,index)
		{
			var index = this.$index;
			/*alert(janBg + " " + "janBg");
			alert(febBg + " " + "febBg");
			alert(marBg + " " + "marBg");
			alert(index + " " + "index");*/
			if(qtrone == null || qtrone == ""){var qtrOne = 0; }else{var qtrOne = qtrone;}
			if(qtrtwo == null || qtrtwo == ""){var qtrTwo = 0; }else{var qtrTwo = qtrtwo;}
			if(qtrthree == null || qtrthree == ""){var qtrThree = 0; }else{var qtrThree = qtrthree;}
			if(qtrfour == null || qtrfour == ""){var qtrFour = 0; }else{var qtrFour = qtrfour;}
			var BudgetYear = parseFloat(qtrOne) + parseFloat(qtrTwo) + parseFloat(qtrThree) + parseFloat(qtrFour);
			//alert(BudgetYear);
			if(isNaN(BudgetYear)){var BudgetYearTotal = 0; }else{var BudgetYearTotal = BudgetYear;}
			$scope.items[index].grandTotal = BudgetYearTotal.toFixed(2);
			
			$scope.$apply();
		};
		
		var salesmanBGObj = new FormData();
		var salesmanData = [];
		$scope.AddSalesmanBudget = function(AddBudget,form)
		{
			
			
			 if($scope.SalesmanBudgetForm.$valid)
			  { 
			  	var year = $scope.AddBudget.year;
				var countrycode = $scope.AddBudget.country;
				  salesmanData = [];
					$scope.salesmandata.forEach(function(addSalesBudget) {
				
                    salesmanData.push(angular.toJson(addSalesBudget));
                });
				
				salesmanBGObj.append("formData",angular.toJson(AddBudget));
				salesmanBGObj.append("gridData",angular.toJson(salesmanData));
				// alert(JSON.stringify(salesmanData)); 
				  
					$(".btn-hide").addClass("active2");
					
				  
								 $.ajax({
									   url         : "/SCA-360/SaleamanBudgetFormSubmit.do",
									   data        : salesmanBGObj,
									   contentType : false,
									   processData : false,
									   type        : 'POST'
								   }).success(function(data, status){
									   //alert(data);
										if(data==true)
											{
												
												swal('Saved Successfully');
												salesmanBGObj = new FormData();
												$scope.AddBudget = angular.copy($scope.master);
												form.$setPristine(true); 
												$scope.addCountrySalesmansGrid(year,countrycode);
												$scope.$apply();
												$(".btn-hide").removeClass("active2");
												 
												
											}
										else
											{
											   swal("Oops sorry...", "Something went wrong!", "error");
											   $scope.$apply();
											   $(".btn-hide").addClass("active2");
											}
										
									   
									   
								   });
			 }
			 else
			 {
				 var field = null, firstError = null;
							for (field in form) 
							{
								if (field[0] != '$') 
								{
									if (firstError === null && !form[field].$valid) 
									{
										firstError = form[field].$name;
									}
									if (form[field].$pristine) 
									{
										form[field].$dirty = true;
									}
								}	
							}
			 }
			
		};
		
		
		
	
});
	//==============================================//
		//-----------Generate Score--------------//
    //==============================================//
angular.module('app')
.controller("GenerateScoreController",function($http,$scope)
{
	$scope.master = {};
	
	$scope.getScore  = function(modelnumber)
	{
		
		//alert(modelno);
		var modelObj = new Object();
		modelObj.modelno = modelnumber;
		//alert(JSON.stringify(modelObj));
		//$scope.GenerateScore.score ="";
		if($scope.GenerateScoreForm.$valid)
        {
				$.ajax({
				  url:"/SCA-360/getScore.do",
				  processData:true,
				  type:'POST',
				  contentType:'Application/json',
				  data:JSON.stringify(modelObj),
				  success:function(data) 
				  {
					  //alert(data);							  
					  $scope.GenerateScore= data;
					  $scope.$apply();
					  //$scope.GenerateScore = angular.copy($scope.master);
					  //$scope.loadDesignationCode();
					 // form.$setPristine(true);
					 // swal("Success", 'Score Loaded Successfully!');	
				  }		
				 });
		}
		else
		{
			sweetAlert("Oops...", "Something went wrong!", "error");
		}
		
	};
	//---------Reset Form----
   $scope.reset = function(form)
   {	
    
    
		$scope.GenerateScore = angular.copy($scope.master);
		//alert($scope.GenerateScore);
		form.$setPristine(true);
		
   };
			
	
	
});



//==========================================================//
     //--------------Frame Size and Tag Master--------------------//
//=========================================================//

angular.module('app')
.controller('FrameSizeMaster',function($scope,$http)
{

$scope.isEdit = true;
$scope.master = {};

//--------Duplicate Entry------
$scope.validateDup = function()
 {			 
		for(var d =0;d<JSON.stringify($scope.AddedDesignations.length);d++)
		{
			var firstString = $scope.AddFrameSize.designation.toUpperCase();
			var secondString = $scope.AddedDesignations[d].designation.toUpperCase();
			if(firstString!=null)
			{
				if(firstString==secondString)
				{
					$('.btn-hide').attr('disabled',true);						
					$(".duplicate").show();
					return false;
				}					
			   else
			    {
					$(".duplicate").hide();
					$('.btn-hide').attr('disabled',false);						
				}
			}
		}
		
 };
 
 $scope.validateDuplicate = function(desigName,id)
 {
	 for(var i =0;i<JSON.stringify($scope.AddedDesignations.length);i++)
	 {
		var str1 = desigName.toUpperCase();
		var str2 = $scope.AddedDesignations[i].designation.toUpperCase();
		if(id!=i)
		{
		 if(str1 == str2)
		 {
			// alert("Enter Name already Exits");
			$('.btn-hideg').attr('disabled',true);						
					$(".duplicate"+ id).show();
					return false;
		 }
		 else
		 {
			 $(".duplicate"+ id).hide();
			 $('.btn-hideg').attr('disabled',false);	
		 }
		}
	 }
 };		



//------------Space Between Two Words -----------
	$scope.spacebtw = function(b)
{
		var twoSpace =$scope.AddFrameSize[b];
		twoSpace =twoSpace.replace(/ {2,}/g,' ');
		twoSpace=twoSpace.trim();
		$scope.AddFrameSize[b] =twoSpace;	
};

//-----------Space Between Two Words (Grid)---------------
$scope.spacebtwgrid = function(b,id)
{
	var twoSpace = $scope.AddedDesignations[id][b];
	twoSpace = twoSpace.replace(/ {2,}/g,' ');
	twoSpace=twoSpace.trim();
	$scope.AddedDesignations[id][b] = twoSpace;
};
	
//--------load all Designations ----------
$scope.loadAllFrameSizes= function()
{
	 
	var httpRequest = $http({
			method: 'POST',
			url : "/SCA-360/getAllFrameSizes.do",
			data: {},
	 	}).success(function(data, status) 
		{
			/*alert('res-----'+JSON.stringify(data));*/
			$scope.AddedDesignations=data;
		});															  
};
//----------------end--------------------

$scope.AddDesignations = function(AddFrameSize,form)
{
	//$scope.Addsubmitted = true;
/*	alert('res-----'+JSON.stringify(AddFrameSize));*/
	if($scope.FrameSizeMasterForm.$valid)
	{
		$('.btn-hide').attr('disabled',true);
		$.ajax({
		    	url:"/SCA-360/saveFrameSizeAndTag.do",
			    processData:true,
			    type:'POST',
			    contentType:'Application/json',
			    data:JSON.stringify(AddFrameSize),
				beforeSend: function(xhr) 
				{
	            	xhr.setRequestHeader("Accept", "application/json");
		            xhr.setRequestHeader("Content-Type", "application/json");
		        },
				
			    success:function(response) 
				{
					if(response==true)
					{
						swal("Success", 'Frame Size Added Successfully!', "success");				
						$('.btn-hide').attr('disabled',false);	
						$scope.AddFrameSize = angular.copy($scope.master);
						$scope.loadDesignationCode();
					    form.$setPristine(true);			    								
					  //--------load all Designations ----------
						var httpRequest = $http({
											method: 'POST',
											url : "/SCA-360/getAllFrameSizes.do",
											data: {},
										   }).success(function(data, status) 
											{
												$scope.AddedDesignations=data;
											});															  
					  //----------------end---------------------
					}
				   else
				    {
					   sweetAlert("Oops...", "Something went wrong!", "error");
					   $('.btn-hide').attr('disabled',false);								
					}
				}
			});
	}
	else
	{
			var field = null, firstError = null;
           for (field in form) 
			{
           	if (field[0] != '$') 
				{
               	if (firstError === null && !form[field].$valid) 
					{
                   	firstError = form[field].$name;
                   }
                   if (form[field].$pristine) 
					{
                   	form[field].$dirty = true;
                   }
               }	
			}
	}
};

//-------------------Update Designations--------------------
$scope.UpdateAddedDesignations = function(UpdateDesignations,id)
{
			$scope.isEdit = true;
			delete UpdateDesignations["$edit"];
	  		var UpdatedData = angular.toJson(UpdateDesignations);
			$scope.submitted=true;
			if($scope.EditDesignationMasterFrom.$valid)
			{
				$scope.isEdit = false;
			/*	alert('res-----'+JSON.stringify(UpdatedData));*/
		  		$.ajax({
		    		url:"/SCA-360/saveFrameSizeAndTag.do",
		    		processData:true,
		    		type:'POST',
		    		contentType:'Application/json',
		    		data:UpdatedData,
					beforeSend: function(xhr) 
					{
	            		xhr.setRequestHeader("Accept", "application/json");
	            		xhr.setRequestHeader("Content-Type", "application/json");
	        		},
		    		success:function(response) 
					{			  
						if(response==true)
						{
	  						swal("Success", 'Updated Successfully!', "success");
							
							//--------load all Advance SubCategory ----------
							var httpRequest = $http({
											method: 'POST',
											url : "/SCA-360/getAllFrameSizes.do",
											data: {},
										   }).success(function(data, status) 
											{
												$scope.AddedDesignations=data;
											});															  
						  //----------------end---------------------									
						}			
					   else
					    {
							sweetAlert("Oops...", "Something went wrong!", "error");									
						}
					}
				});	
			}
};

  //---------Reset Form----
  $scope.reset = function(form)
  {			  
			$scope.AddFrameSize = angular.copy($scope.master);
			$scope.loadDesignationCode();
		    form.$setPristine(true);			    								
  };



})

//==========================================================//
     //--------------Item Value Master--------------------//
//=========================================================//

angular.module('app')
.controller('ItemValueMaster',function($scope,$http)
{

$scope.isEdit = true;
$scope.master = {};

//--------Duplicate Entry------
$scope.validateDup = function()
 {			 
		for(var d =0;d<JSON.stringify($scope.AddedDesignations.length);d++)
		{
			var firstString = $scope.AddItemValue.designation.toUpperCase();
			var secondString = $scope.AddedDesignations[d].designation.toUpperCase();
			if(firstString!=null)
			{
				if(firstString==secondString)
				{
					$('.btn-hide').attr('disabled',true);						
					$(".duplicate").show();
					return false;
				}					
			   else
			    {
					$(".duplicate").hide();
					$('.btn-hide').attr('disabled',false);						
				}
			}
		}
		
 };
 
 $scope.validateDuplicate = function(desigName,id)
 {
	 for(var i =0;i<JSON.stringify($scope.AddedDesignations.length);i++)
	 {
		var str1 = desigName.toUpperCase();
		var str2 = $scope.AddedDesignations[i].designation.toUpperCase();
		if(id!=i)
		{
		 if(str1 == str2)
		 {
			// alert("Enter Name already Exits");
			$('.btn-hideg').attr('disabled',true);						
					$(".duplicate"+ id).show();
					return false;
		 }
		 else
		 {
			 $(".duplicate"+ id).hide();
			 $('.btn-hideg').attr('disabled',false);	
		 }
		}
	 }
 };		


			
//--------load all Designations ----------
$scope.loadAllItemAndScores= function()
{
	 
	var httpRequest = $http({
			method: 'POST',
			url : "/SCA-360/getAllItemAndScores.do",
			data: {},
	 	}).success(function(data, status) 
		{
			//alert('res-----'+JSON.stringify(data));
			$scope.AddedDesignations=data;
		});															  
};
//----------------end--------------------

$scope.AddItemValueAndScores = function(AddItemValue,form)
{
	//$scope.Addsubmitted = true;
	//alert('res-----'+JSON.stringify(AddItemValue));
	if($scope.ItemValueMasterForm.$valid)
	{
		$('.btn-hide').attr('disabled',true);
		$.ajax({
		    	url:"/SCA-360/saveItemAndScore.do",
			    processData:true,
			    type:'POST',
			    contentType:'Application/json',
			    data:JSON.stringify(AddItemValue),
				beforeSend: function(xhr) 
				{
	            	xhr.setRequestHeader("Accept", "application/json");
		            xhr.setRequestHeader("Content-Type", "application/json");
		        },
				
			    success:function(response) 
				{
					if(response==true)
					{
						swal("Success", 'Frame Size Added Successfully!', "success");				
						$('.btn-hide').attr('disabled',false);	
						$scope.AddItemValue = angular.copy($scope.master);
						//$scope.loadDesignationCode();
					    form.$setPristine(true);			    								
					  //--------load all Designations ----------
						var httpRequest = $http({
											method: 'POST',
											url : "/SCA-360/getAllItemAndScores.do",
											data: {},
										   }).success(function(data, status) 
											{
												$scope.AddedDesignations=data;
											});															  
					  //----------------end---------------------
					}
				   else
				    {
					   sweetAlert("Oops...", "Something went wrong!", "error");
					   $('.btn-hide').attr('disabled',false);								
					}
				}
			});
	}
	else
	{
			var field = null, firstError = null;
           for (field in form) 
			{
           	if (field[0] != '$') 
				{
               	if (firstError === null && !form[field].$valid) 
					{
                   	firstError = form[field].$name;
                   }
                   if (form[field].$pristine) 
					{
                   	form[field].$dirty = true;
                   }
               }	
			}
	}
};

//-------------------Update Designations--------------------
$scope.UpdateAddedDesignations = function(UpdateDesignations,id)
{
			$scope.isEdit = true;
			delete UpdateDesignations["$edit"];
	  		var UpdatedData = angular.toJson(UpdateDesignations);
			$scope.submitted=true;
			if($scope.EditDesignationMasterFrom.$valid)
			{
				$scope.isEdit = false;
				//alert('res-----'+JSON.stringify(UpdatedData));
		  		$.ajax({
		    		url:"/SCA-360/saveItemAndScore.do",
		    		processData:true,
		    		type:'POST',
		    		contentType:'Application/json',
		    		data:UpdatedData,
					beforeSend: function(xhr) 
					{
	            		xhr.setRequestHeader("Accept", "application/json");
	            		xhr.setRequestHeader("Content-Type", "application/json");
	        		},
		    		success:function(response) 
					{			  
						if(response==true)
						{
	  						swal("Success", 'Updated Successfully!', "success");
							
							//--------load all Advance SubCategory ----------
							var httpRequest = $http({
											method: 'POST',
											url : "/SCA-360/getAllItemAndScores.do",
											data: {},
										   }).success(function(data, status) 
											{
												$scope.AddedDesignations=data;
											});															  
						  //----------------end---------------------									
						}			
					   else
					    {
							sweetAlert("Oops...", "Something went wrong!", "error");									
						}
					}
				});	
			}
};

  //---------Reset Form----
  $scope.reset = function(form)
  {			  
			$scope.AddItemValue = angular.copy($scope.master);
			//$scope.loadDesignationCode();
		    form.$setPristine(true);			    								
  };



})

//==========================================================//
     //--------------Frame Size and Tag Master--------------------//
//=========================================================//

angular.module('app')
.controller('FrameSizeMaster',function($scope,$http)
{

$scope.isEdit = true;
$scope.master = {};

//--------Duplicate Entry------
$scope.validateDup = function()
 {			 
		for(var d =0;d<JSON.stringify($scope.AddedDesignations.length);d++)
		{
			var firstString = $scope.AddFrameSize.designation.toUpperCase();
			var secondString = $scope.AddedDesignations[d].designation.toUpperCase();
			if(firstString!=null)
			{
				if(firstString==secondString)
				{
					$('.btn-hide').attr('disabled',true);						
					$(".duplicate").show();
					return false;
				}					
			   else
			    {
					$(".duplicate").hide();
					$('.btn-hide').attr('disabled',false);						
				}
			}
		}
		
 };
 
 $scope.validateDuplicate = function(desigName,id)
 {
	 for(var i =0;i<JSON.stringify($scope.AddedDesignations.length);i++)
	 {
		var str1 = desigName.toUpperCase();
		var str2 = $scope.AddedDesignations[i].designation.toUpperCase();
		if(id!=i)
		{
		 if(str1 == str2)
		 {
			// alert("Enter Name already Exits");
			$('.btn-hideg').attr('disabled',true);						
					$(".duplicate"+ id).show();
					return false;
		 }
		 else
		 {
			 $(".duplicate"+ id).hide();
			 $('.btn-hideg').attr('disabled',false);	
		 }
		}
	 }
 };		



//------------Space Between Two Words -----------
	$scope.spacebtw = function(b)
{
		var twoSpace =$scope.AddFrameSize[b];
		twoSpace =twoSpace.replace(/ {2,}/g,' ');
		twoSpace=twoSpace.trim();
		$scope.AddFrameSize[b] =twoSpace;	
};

//-----------Space Between Two Words (Grid)---------------
$scope.spacebtwgrid = function(b,id)
{
	var twoSpace = $scope.AddedDesignations[id][b];
	twoSpace = twoSpace.replace(/ {2,}/g,' ');
	twoSpace=twoSpace.trim();
	$scope.AddedDesignations[id][b] = twoSpace;
};
	
//--------load all Designations ----------
$scope.loadAllFrameSizes= function()
{
	 
	var httpRequest = $http({
			method: 'POST',
			url : "/SCA-360/getAllFrameSizes.do",
			data: {},
	 	}).success(function(data, status) 
		{
			/*alert('res-----'+JSON.stringify(data));*/
			$scope.AddedDesignations=data;
		});															  
};
//----------------end--------------------

$scope.AddDesignations = function(AddFrameSize,form)
{
	//$scope.Addsubmitted = true;
/*	alert('res-----'+JSON.stringify(AddFrameSize));*/
	if($scope.FrameSizeMasterForm.$valid)
	{
		$('.btn-hide').attr('disabled',true);
		$.ajax({
		    	url:"/SCA-360/saveFrameSizeAndTag.do",
			    processData:true,
			    type:'POST',
			    contentType:'Application/json',
			    data:JSON.stringify(AddFrameSize),
				beforeSend: function(xhr) 
				{
	            	xhr.setRequestHeader("Accept", "application/json");
		            xhr.setRequestHeader("Content-Type", "application/json");
		        },
				
			    success:function(response) 
				{
					if(response==true)
					{
						swal("Success", 'Frame Size Added Successfully!', "success");				
						$('.btn-hide').attr('disabled',false);	
						$scope.AddFrameSize = angular.copy($scope.master);
						$scope.loadDesignationCode();
					    form.$setPristine(true);			    								
					  //--------load all Designations ----------
						var httpRequest = $http({
											method: 'POST',
											url : "/SCA-360/getAllFrameSizes.do",
											data: {},
										   }).success(function(data, status) 
											{
												$scope.AddedDesignations=data;
											});															  
					  //----------------end---------------------
					}
				   else
				    {
					   sweetAlert("Oops...", "Something went wrong!", "error");
					   $('.btn-hide').attr('disabled',false);								
					}
				}
			});
	}
	else
	{
			var field = null, firstError = null;
           for (field in form) 
			{
           	if (field[0] != '$') 
				{
               	if (firstError === null && !form[field].$valid) 
					{
                   	firstError = form[field].$name;
                   }
                   if (form[field].$pristine) 
					{
                   	form[field].$dirty = true;
                   }
               }	
			}
	}
};

//-------------------Update Designations--------------------
$scope.UpdateAddedDesignations = function(UpdateDesignations,id)
{
			$scope.isEdit = true;
			delete UpdateDesignations["$edit"];
	  		var UpdatedData = angular.toJson(UpdateDesignations);
			$scope.submitted=true;
			if($scope.EditDesignationMasterFrom.$valid)
			{
				$scope.isEdit = false;
			/*	alert('res-----'+JSON.stringify(UpdatedData));*/
		  		$.ajax({
		    		url:"/SCA-360/saveFrameSizeAndTag.do",
		    		processData:true,
		    		type:'POST',
		    		contentType:'Application/json',
		    		data:UpdatedData,
					beforeSend: function(xhr) 
					{
	            		xhr.setRequestHeader("Accept", "application/json");
	            		xhr.setRequestHeader("Content-Type", "application/json");
	        		},
		    		success:function(response) 
					{			  
						if(response==true)
						{
	  						swal("Success", 'Updated Successfully!', "success");
							
							//--------load all Advance SubCategory ----------
							var httpRequest = $http({
											method: 'POST',
											url : "/SCA-360/getAllFrameSizes.do",
											data: {},
										   }).success(function(data, status) 
											{
												$scope.AddedDesignations=data;
											});															  
						  //----------------end---------------------									
						}			
					   else
					    {
							sweetAlert("Oops...", "Something went wrong!", "error");									
						}
					}
				});	
			}
};

  //---------Reset Form----
  $scope.reset = function(form)
  {			  
			$scope.AddFrameSize = angular.copy($scope.master);
			$scope.loadDesignationCode();
		    form.$setPristine(true);			    								
  };



})

//==========================================================//
     //--------------Item Value Master--------------------//
//=========================================================//
angular.module('app')
.controller('ItemValueMaster',function($scope,$http)
{

$scope.isEdit = true;
$scope.master = {};

//--------Duplicate Entry------
$scope.validateDup = function()
 {			 
		for(var d =0;d<JSON.stringify($scope.AddedDesignations.length);d++)
		{
			var firstString = $scope.AddItemValue.designation.toUpperCase();
			var secondString = $scope.AddedDesignations[d].designation.toUpperCase();
			if(firstString!=null)
			{
				if(firstString==secondString)
				{
					$('.btn-hide').attr('disabled',true);						
					$(".duplicate").show();
					return false;
				}					
			   else
			    {
					$(".duplicate").hide();
					$('.btn-hide').attr('disabled',false);						
				}
			}
		}
		
 };
 
 $scope.validateDuplicate = function(desigName,id)
 {
	 for(var i =0;i<JSON.stringify($scope.AddedDesignations.length);i++)
	 {
		var str1 = desigName.toUpperCase();
		var str2 = $scope.AddedDesignations[i].designation.toUpperCase();
		if(id!=i)
		{
		 if(str1 == str2)
		 {
			// alert("Enter Name already Exits");
			$('.btn-hideg').attr('disabled',true);						
					$(".duplicate"+ id).show();
					return false;
		 }
		 else
		 {
			 $(".duplicate"+ id).hide();
			 $('.btn-hideg').attr('disabled',false);	
		 }
		}
	 }
 };		


			
//--------load all Designations ----------
$scope.loadAllItemAndScores= function()
{
	 
	var httpRequest = $http({
			method: 'POST',
			url : "/SCA-360/getAllItemAndScores.do",
			data: {},
	 	}).success(function(data, status) 
		{
			//alert('res-----'+JSON.stringify(data));
			$scope.AddedDesignations=data;
		});															  
};
//----------------end--------------------

$scope.AddItemValueAndScores = function(AddItemValue,form)
{
	//$scope.Addsubmitted = true;
	//alert('res-----'+JSON.stringify(AddItemValue));
	if($scope.ItemValueMasterForm.$valid)
	{
		$('.btn-hide').attr('disabled',true);
		$.ajax({
		    	url:"/SCA-360/saveItemAndScore.do",
			    processData:true,
			    type:'POST',
			    contentType:'Application/json',
			    data:JSON.stringify(AddItemValue),
				beforeSend: function(xhr) 
				{
	            	xhr.setRequestHeader("Accept", "application/json");
		            xhr.setRequestHeader("Content-Type", "application/json");
		        },
				
			    success:function(response) 
				{
					if(response==true)
					{
						swal("Success", 'Frame Size Added Successfully!', "success");				
						$('.btn-hide').attr('disabled',false);	
						$scope.AddItemValue = angular.copy($scope.master);
						//$scope.loadDesignationCode();
					    form.$setPristine(true);			    								
					  //--------load all Designations ----------
						var httpRequest = $http({
											method: 'POST',
											url : "/SCA-360/getAllItemAndScores.do",
											data: {},
										   }).success(function(data, status) 
											{
												$scope.AddedDesignations=data;
											});															  
					  //----------------end---------------------
					}
				   else
				    {
					   sweetAlert("Oops...", "Something went wrong!", "error");
					   $('.btn-hide').attr('disabled',false);								
					}
				}
			});
	}
	else
	{
			var field = null, firstError = null;
           for (field in form) 
			{
           	if (field[0] != '$') 
				{
               	if (firstError === null && !form[field].$valid) 
					{
                   	firstError = form[field].$name;
                   }
                   if (form[field].$pristine) 
					{
                   	form[field].$dirty = true;
                   }
               }	
			}
	}
};

//-------------------Update Designations--------------------
$scope.UpdateAddedDesignations = function(UpdateDesignations,id)
{
			$scope.isEdit = true;
			delete UpdateDesignations["$edit"];
	  		var UpdatedData = angular.toJson(UpdateDesignations);
			$scope.submitted=true;
			if($scope.EditDesignationMasterFrom.$valid)
			{
				$scope.isEdit = false;
				//alert('res-----'+JSON.stringify(UpdatedData));
		  		$.ajax({
		    		url:"/SCA-360/saveItemAndScore.do",
		    		processData:true,
		    		type:'POST',
		    		contentType:'Application/json',
		    		data:UpdatedData,
					beforeSend: function(xhr) 
					{
	            		xhr.setRequestHeader("Accept", "application/json");
	            		xhr.setRequestHeader("Content-Type", "application/json");
	        		},
		    		success:function(response) 
					{			  
						if(response==true)
						{
	  						swal("Success", 'Updated Successfully!', "success");
							
							//--------load all Advance SubCategory ----------
							var httpRequest = $http({
											method: 'POST',
											url : "/SCA-360/getAllItemAndScores.do",
											data: {},
										   }).success(function(data, status) 
											{
												$scope.AddedDesignations=data;
											});															  
						  //----------------end---------------------									
						}			
					   else
					    {
							sweetAlert("Oops...", "Something went wrong!", "error");									
						}
					}
				});	
			}
};

  //---------Reset Form----
  $scope.reset = function(form)
  {			  
			$scope.AddItemValue = angular.copy($scope.master);
			//$scope.loadDesignationCode();
		    form.$setPristine(true);			    								
  };



})	

//==========================================================//
     //--------------Products Master--------------------//
//=========================================================//


angular.module('app')
	.controller('productMasterControl',function($scope,$http)
	{
		 $scope.bottomrightsettings = {
			position: 'bottom right'
		};
			$scope.productsDataArray = [];
	    $scope.master = {};
		var agreementGridData = [];
		
		$index=0;
		
		//-------Load Category DropDown---
		$scope.loadproductvatagories=function()
		{		
		
			$.post("viewproductcategory.do",function(json)
			{
				//alert(JSON.stringify(json['data']));
				$scope.addedProductsData = json['data'];
				$scope.$apply();
			});
		};		

		$scope.addProductField = function() 
		{
			//alert(343);
			$index++;
		    $scope.productsDataArray.push({'id':$index,'bookColor':'#000000','bugColor':'#000000'})
		};
		$scope.removeProductRow = function(name)
		{				
			var Index = -1;		
			var comArr = eval( $scope.productsDataArray );
			for( var i = 0; i < comArr.length; i++ ) 
			{
				if( comArr[i].id === name ) 
				{
					Index = i;
					break;
				}				
			}
			$scope.productsDataArray.splice( Index, 1 );
			$index = comArr.length;
			for(var s=0;s<$index;s++)
			{
				$scope.productsDataArray[s].id = Number(s)+Number(1);
			}			
  	    };
		
		//-------Get The Added Products on Category Onchange-----
		$scope.getAllProducts = function(category)
		{
			
			$.post("getAllAddedProducts.do",{'category':category},function(json)
			{
				//$scope.data = json['data'];
				// $scope.$apply();
				//alert(JSON.stringify(json['data']));
				if(json['data'].length!=0)
				{
					$scope.productsDataArray = json['data'];
					 $scope.$apply();
				}
				else
				{
					$index = 1;
					$scope.productsDataArray = [{'id':$index,'bookColor':'#000000','bugColor':'#000000'}];						
					$scope.$apply();
				}
			});
		};
		//---------Products Form Submit---
		var productsSubmitData = new Object();
		$scope.productsFormSubmit = function(productcategory,form)
		{
			
			//alert(JSON.stringify(productcategory));
			if($scope.productsForm.$valid)
			{
				//alert(5445);
				agreementGridData = [];
				$scope.productsDataArray.forEach(function (products) 
				{
					//alert(JSON.stringify(products));
	        		agreementGridData.push(angular.toJson(products));														 
				});	
				productsSubmitData.gridData = agreementGridData;
				productsSubmitData.formData = productcategory;
				
				//alert(JSON.stringify(productsSubmitData));
				var httpRequest = $http({
							method: 'POST',
							url : "/SCA-360/productsSubmit.do",
							data: productsSubmitData,
					   }).success(function(data, status) 
						{							
							if(data==true)
							{
								swal("", 'Products Added Successfully' , "success");
								$scope.getAllProducts(productcategory);
								productsSubmitData = new Object();
								$scope.$apply();
								/*$scope.productcategory = angular.copy($scope.master);
							    form.$setPristine(true);
								$index = 1;
								$scope.productsDataArray = [{'id':$index,'bookColor':'#000000','bugColor':'#000000'}];	*/
							}
							else
							{
								swal("Oops sorry...", "Something went wrong!", "error");
							}
						}); 				
			}
			else
			{
				var field = null, firstError = null;
				for (field in form) 
				{
					if (field[0] != '$') 
					{
						if (firstError === null && !form[field].$valid) 
						{
							firstError = form[field].$name;
						}
						if (form[field].$pristine) 
						{
							form[field].$dirty = true;
						}
					}	
				}					
			}
		};
		
		  //---------Reset Form----
		   $scope.resetProduct = function(form)
		   {	
		 		$scope.productCategory = angular.copy($scope.master);
			    form.$setPristine(true);
				$scope.loadproductvatagories();
				$index = 1;
				$scope.productsDataArray = [{'id':$index,'bookColor':'#000000','bugColor':'#000000'}];	
				$scope.$apply();			
			};	
		
		
		
	});

//=====================================================//
        //----------Department Master-------//
//====================================================//
angular.module('app')
.controller("DepartmentMasterController",function($scope,$http)
		{
			$scope.master = {};
			$scope.departmentData = angular.copy($scope.master);
				$scope.departmentData = ({'status':0});
				var cusImage = new FormData();
				
				
				/*var countryObj = new Object();
				countryObj.dropdownname = "Country";
				countryObj.columnname = "country";
				countryObj.columncode = "countrycode";
				var jsonCountryString= JSON.stringify(countryObj);
				
				
				var salesmanObj = new Object();
				salesmanObj.dropdownname = "Salesman";
				salesmanObj.columnname = "salesman";
				salesmanObj.columncode = "salesmancode";
				var jsonsalesmanString= JSON.stringify(salesmanObj);*/
				
				$scope.validEmailId = function(emailId)
			   {
				   //alert(emailId);
				   var mailformat = /^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/; 
				   if(emailId.length>=5)
					   {
						  if(emailId.match(mailformat))
						   {
							 // alert("Valid"); 
							   $("#existVal" ).hide();
						   }
						  else
						   {
							   //alert("Invalid"); 
							   $("#existVal" ).show();
						   } 
					   }
				   else
					   {
							$("#existVal" ).hide();
					   }
				   
				   
			   }
				var numOfPieces = 6 * 6;
				var frag = document.createDocumentFragment();

				function insertInnerPieces($el, innerPieces) 
				{
				  for (var i = 0; i < innerPieces; i++) 
				  {
				    var $inner = document.createElement('div');
			    	$inner.classList.add('popup__piece-inner');
				    $el.appendChild($inner);
				  }
				};
	
				for (var i = 1; i <= numOfPieces; i++) 
				{
				  var $piece = document.createElement('div');
				  $piece.classList.add('popup__piece');
	    
				  insertInnerPieces($piece, 3);
				  frag.appendChild($piece);
				}
	
				document.querySelector('.popup__pieces').appendChild(frag);

				var $popupsCont = document.querySelector('.popups-cont');
				var $popup = document.querySelector('.popup');
				var popupAT = 900;
	
				var overlay = jQuery('<div id="overlay"> </div>');				
				
				//------Get Country Code------
				/*$.ajax({
					  url:"/SCA-360/loadDropDown.do",
					  processData:true,
					  type:'POST',
					  contentType:'Application/json',
					  data:jsonCountryString,
					  success:function(responce) 
					  {
						  responce.push({"countrycode":"all","country":"All"});
						  $scope.CountryCode = responce;
					  }
				});		
				
				
					$.ajax({
					  url:"/SCA-360/loadDropDown.do",
					  processData:true,
					  type:'POST',
					  contentType:'Application/json',
					  data:jsonsalesmanString,
					  success:function(responce) 
					  {
						//  alert(JSON.stringify(responce));
						  //responce.push({"countrycode":"all","country":"All"});
						  $scope.salesmancodes = responce;
					  }
				});*/		
				
				//------get All Added Users----
				
				/*$scope.loadAllAddedUsers = function()
				{
					$.ajax({
						  url:"/SCA-360/getAllUsers.do",
						  processData:true,
						  type:'POST',
						  contentType:'Application/json',
						  data:{},
						  success:function(responce) 
						  {
							  //alert(JSON.stringify(responce));
							  $scope.AddedUserData = responce;
							  $scope.$apply();
						  }		
						 });
						 	
				};*/
				
				/*$scope.validateDupKind = function()
				{
					for(var d =0;d<$scope.kindData.length;d++)
							{
						 //alert($scope.SeasonData);
						var firstString =$scope.AddedKind.kindType.toUpperCase();
						
						
						var secondString = $scope.kindData[d].kindType.toUpperCase();
						
						if(firstString!=null)
						{
							if(firstString==secondString)
							{
								
								$('.btn-hide').attr('disabled',true);						
								$(".duplicateKind").show();
								return false;
							}					
						   else
							{
								$(".duplicateKind").hide();
								$('.btn-hide').attr('disabled',false);						
							}
						}
					}
				};*/
				
				$scope.loadAddedDepartments44 = function()
				{
					
					$.ajax({
						  url:"/SCA-360/departmentView.do",
						  processData:true,
						  type:'POST',
						  contentType:'Application/json',
						  data:{},
						  success:function(responce) 
						  {
							  //alert(JSON.stringify(responce));
							  $scope.deptArray = responce['data'];
							  $scope.$apply();
						  }		
						 });
						 	
				};
				
				$scope.loadAddedDepartments = function()
				{
					$.post("departmentView.do", function(json) {
		
					   // $scope.customernames = json['data'];
		
					   //alert(JSON.stringify(json));
					   $scope.deptArray = json['data'];
					   $scope.totalItems = $scope.deptArray.length;
						$scope.currentPage =1;
							 $scope.itemsPerPage = 10;
						
						
							  $scope.$watch("currentPage", function() {
						
						  
							   setPagingData($scope.currentPage);
							  });
						
						  function setPagingData(page) {
						 
							  var pagedData =  json['data'].slice((page - 1) * $scope.itemsPerPage, page * $scope.itemsPerPage);
						
							  $scope.items = pagedData;
						 
							 }
						
						
						 $scope.pageChanged = function () {
								  $log.log('Page changed to: ' + $scope.currentPage);
							   };
					   $scope.$apply();
					});
					
					//$scope.industryData = [{id:'1',industryCode:'A01',industryName:"Food Industry"},{id:'2',industryCode:'A02',industryName:"Wood Industry"}];
					
				}
				
				$scope.validateDuplicateDept = function(deptname)
				{
					//alert("enter");
					for(var d =0;d<$scope.deptArray.length;d++)
							{
						// alert($scope.deptArray.length);
						var firstString =$scope.departmentData.departmentname.toUpperCase();
						
						
						var secondString = $scope.deptArray[d].departmentname.toUpperCase();
						
						if(firstString!=null)
						{
							if(firstString==secondString)
							{
								
								$('.btn-hide').attr('disabled',true);						
								//$("#dataNotFound").show();
								return false;
							}					
						   else
							{
								//$("#dataNotFound").hide();
								$('.btn-hide').attr('disabled',false);						
							}
						}
					}
				};
				
				//-----Show Popup--------------
				$scope.showPopup = function(AddedData)
				{					 
					//alert(JSON.stringify(UserData));
					$scope.departmentData = AddedData;
					  overlay.appendTo(document.body);	
					  $popupsCont.classList.add('s--popup-active');
					  $popup.classList.add('s--active');
					  
					  $("#departmentName").focus();
					  
					  /*if(UserData.photoPath!=null && UserData.signaturePath!=null)
					  {
						  
						  var img = $('<img src="'+UserData.photoPath+'" width="200" height="150"/>', {id: 'dynamic',width:200,height:150 });
						  var img1 = $('<img src="'+UserData.signaturePath+'" width="200" height="150"/>', {id: 'dynamic',width:200,height:150 });
						  
						  var photoName = UserData.photoPath.split("/");
						  var signatureName = UserData.signaturePath.split("/");
						  
					  
						 $("#photo").attr("data-content",$(img)[0].outerHTML).popover("show");
		            	 $("#1photoinput").text("Change");
	        		     $("#2photoinput").show();
			             $("#3photoinput").val(photoName[1]);        
					 
						 $scope.dummyPhoto="1";
						 $('#dummyPhoto').trigger('blur');
						// cusImage.append("userphoto", img[0]);
						// cusImage.append("usersign", img1[0]);
					 					 
						 $("#signature").attr("data-content",$(img1)[0].outerHTML).popover("show");
			             $("#1siginput").text("Change");
        			     $("#2siginput").show();
		    	         $("#3siginput").val(signatureName[1]); 
						 $scope.dummySignature="1";
						 $('#dummySignature').trigger('blur');
					 
						 //$('#photoinput').val(UserData.photoPath);         
					  }
					  else
					  {
						  $('.image-preview').popover('hide');
						  $("#1photoinput").text("Upload Photo");
						  $("#1siginput").text("Upload Signature");
						  
						  $("#3photoinput").val("");
						  $("#3siginput").val("");
						  $("#2photoinput").hide();
						  $("#2siginput").hide();
					  }*/
					 
				};
				
				
				$scope.AddDepartmentsFormSubmit  = function(departmentData,form)
				{
					//alert(angular.toJson(userData));
					if($scope.departmentsForm.$valid) 
					{
						cusImage.append("formData", angular.toJson(departmentData));
						//alert(JSON.stringify(cusImage));
						$http.post("/SCA-360/DeparmentSaveForm.do", cusImage, {
						        withCredentials: true,
					        	 headers: {'Content-Type': undefined },
						       	 transformRequest: angular.identity
							  }).success(function(data, status) 
						 	   { 
							   		
									
									if(data==true)
									{
										swal("", 'Department Added Successfully!' , "success");
										$scope.departmentData = angular.copy($scope.master);			
										form.$setPristine(true);
										$scope.departmentData = ({'status':0});
										$('.popup__close').click();
										cusImage = new FormData();
										$scope.loadAddedDepartments();
										
										
										$scope.$apply();
										
									}
									else
									{
										swal("Oops sorry...", "Something went wrong!", "error");
									}
					           });							
					}
					else
					{
							//alert(1);
							var field = null, firstError = null;
							for (field in form) 
							{
								if (field[0] != '$') 
								{
									if (firstError === null && !form[field].$valid) 
									{
										firstError = form[field].$name;
									}
									if (form[field].$pristine) 
									{
										form[field].$dirty = true;
									}
								}	
							}						
					}						
				};
				
				

				
				//---Reset ----
				 $scope.resetDepartmentForm = function(form)
				{	
				   	 //alert(4455); 
					$scope.departmentData = angular.copy($scope.master);				
					$scope.departmentData = ({'status':0});
					cusImage = new FormData();
					 form.$setPristine(true);
					$scope.$apply();
					$("#departmentName").focus();
			    };
				
				
				
		});

//====================================//
      //--Designation Master----//
//===================================//
angular.module('app')	

.controller("designationControl",function($scope,$http)
{
	$scope.departmentData = {'status':'0'};
	$scope.master = {};
	
	var numOfPieces = 6 * 6;
	var frag = document.createDocumentFragment();

	function insertInnerPieces($el, innerPieces) 
	{
	  for (var i = 0; i < innerPieces; i++) 
	  {
	    var $inner = document.createElement('div');
    	$inner.classList.add('popup__piece-inner');
	    $el.appendChild($inner);
	  }
	};

	for (var i = 1; i <= numOfPieces; i++) 
	{
	  var $piece = document.createElement('div');
	  $piece.classList.add('popup__piece');

	  insertInnerPieces($piece, 3);
	  frag.appendChild($piece);
	}

	document.querySelector('.popup__pieces').appendChild(frag);

	var $popupsCont = document.querySelector('.popups-cont');
	var $popup = document.querySelector('.popup');
	var popupAT = 900;

	var overlay = jQuery('<div id="overlay"> </div>');
		
	 $scope.bottomrightsettings = {
        position: 'bottom right'
    };
	
	
	/*$scope.AddDepartments = function(department,form)
	{
		if($scope.departmentsForm.$valid)
		{
			var httpRequest = $http({
					method: 'POST',
					url : "/SCA-360/DeparmentSaveForm.do",
					data: angular.toJson(department),
				   }).success(function(data, status) 
					{
						if(data==true)
						{
							swal("", 'User Added Successfully' , "success");
							$scope.departmentData = angular.copy($scope.master);
						    form.$setPristine(true);
							$scope.departmentData = {'status':'0'};									
							$('.popup__close').click();	
							$scope.loadAddedDepartments();							
							
						}
						else
						{
							
						}
					}); 												
		}
		else
		{
			var field = null, firstError = null;
			for (field in form) 
			{
				if (field[0] != '$') 
				{
					if (firstError === null && !form[field].$valid) 
					{
						firstError = form[field].$name;
					}
					if (form[field].$pristine) 
					{
						form[field].$dirty = true;
					}
				}	
			}					
		}		
	};*/
	$scope.loadAddedDesignations = function()
	{
		/*$.getJSON("departmentView.do",function(json)
		{
			$scope.data = json['data'];
			 $scope.$apply();
		});	*/	
	};
	
	/*$scope.addedDept = function(deptCode)
	{
		$scope.departmentData  =deptCode; 
		overlay.appendTo(document.body);	
		$popupsCont.classList.add('s--popup-active');
		$popup.classList.add('s--active');		
	};	*/
	
	/*$scope.reset = function(form)
	{
		$scope.departmentData = angular.copy($scope.master);
	    form.$setPristine(true);
		$scope.departmentData = {'status':'0'};		
	};*/
});

//==========================================================//
     //--------------Product Line Master--------------------//
//=========================================================//

angular.module('app')
.controller("productline",function($http,$scope)
{
	$scope.submitObj = [];
	var finalObj = new Object();
	$scope.viewproductLine = function()
	{
			$.post("viewproductcategory.do",function(json1)
			{
				$scope.productcatagories=json1['data'];
				
				$.post("getAllProdutsInProdutLine.do",function(json2)	
				{
					//alert(JSON.stringify(json2['data']));
					$scope.productsarray=json2['data'];	
					
					$.post("getAllProdutsLine.do",function(json)
					{
						
						$scope.productlinenames=json['data'];
						$scope.$apply();				 
					});
				});	
			});
	};
	
	$scope.getProducts = function(pccode,id)
	{
		$.post("getAllAddedProducts.do",{'category':pccode},function(json)
		{
			var tempname = "productsarray"+ id;
			$scope.productlinenames[id].product = "";
			$scope.productlinenames[id][tempname]=json['data'];
			$scope.$apply();
			//alert(JSON.stringify(json['data']));
		});		
	};
	
	$scope.productLineSubmit = function()
	{
		submitObj = [];
		$scope.productlinenames.forEach(function(x)
		{
			submitObj.push(angular.toJson(x));
		});
		finalObj.gridData = submitObj;
		
			var httpRequest = $http({
					method: 'POST',
					url : "/SCA-360/productLineSubmit.do",
					data: finalObj,
				   }).success(function(data, status) 
					{		
						if(data==true)
						{
							swal("", 'Product Line Mappings Added Successfully' , "success");
							$.getJSON("getAllProdutsLine.do",function(json)
							{
								$scope.productlinenames=json['data'];
								$scope.$apply();				 
							});							
						}
					});		
	};
	
	$scope.reset = function()
	{
		$.getJSON("getAllProdutsLine.do",function(json)
		{
			//alert(JSON.stringify(json['data']));
			$scope.productlinenames=json['data'];
			$scope.$apply();				 
		});		
	};
	
	
})


//==========================================================//
     //--------------Product Category  Master--------------------//
//=========================================================//

angular.module('app')
.controller("productCategory",function($scope,$http)
{
	$scope.productCategory = {'status':'0','bokclr':'#000000','budgclr':'#000000'};
	$scope.master = {'status':'0'};
	//$('.bkClr').css('background-color','#000');
	//$('.bgClr').css('background-color','#000');
	
				var numOfPieces = 6 * 6;
				var frag = document.createDocumentFragment();

				function insertInnerPieces($el, innerPieces) 
				{
				  for (var i = 0; i < innerPieces; i++) 
				  {
				    var $inner = document.createElement('div');
			    	$inner.classList.add('popup__piece-inner');
				    $el.appendChild($inner);
				  }
				};
	
				for (var i = 1; i <= numOfPieces; i++) 
				{
				  var $piece = document.createElement('div');
				  $piece.classList.add('popup__piece');
	    
				  insertInnerPieces($piece, 3);
				  frag.appendChild($piece);
				}
	
				document.querySelector('.popup__pieces').appendChild(frag);

				var $popupsCont = document.querySelector('.popups-cont');
				var $popup = document.querySelector('.popup');
				var popupAT = 900;
	
				var overlay = jQuery('<div id="overlay"> </div>');	
				
				/*$scope.getbokColor = function(clr)
				{
					$('.bkClr').css('background-color',clr);
					//$scope.$apply();
				
				}
				
				$scope.getbudgColor = function(clr)
				{
					$('.bgClr').css('background-color',clr);
					//$scope.$apply();
				}*/
				
					
	//----------Product Form Submit---
	$scope.submitProductCategoryForm = function(products,form)
	{
		if($scope.productCategoryForm.$valid) 
		{
			var httpRequest = $http({
				method: 'POST',
				url : "/SCA-360/productCategoryForm.do",
				data: products,
			   }).success(function(data, status) 
				{
					if(data==true)
					{
						swal("", 'Product Category Added Successfully' , "success");
						$scope.productCategory = angular.copy($scope.master);
						$scope.productCategory = {'status':'0','bokclr':'#000000','budgclr':'#000000'};
			            $('.popup__close').click();							
						$scope.loadproductvatagories();		
					}
					else
					{
						swal("Oops sorry...", "Something went wrong!", "error");
					}
				}); 			
			
		}
		else
		{
			var field = null, firstError = null;
			for (field in form) 
			{
				if (field[0] != '$') 
				{
					if (firstError === null && !form[field].$valid) 
					{
						firstError = form[field].$name;
					}
					if (form[field].$pristine) 
					{
						form[field].$dirty = true;
					}
				}	
			}			
		}
	};
	
	$scope.loadproductvatagories=function(){
		
		$.post("viewproductcategory.do",function(json)
		{
			//alert(JSON.stringify(json['data']));
			$scope.addedProductsData = json['data'];
			$scope.$apply();
		});
	};	
	
	$scope.updateProductCategory = function(ProductCode)
	{
			overlay.appendTo(document.body);	
			$popupsCont.classList.add('s--popup-active');
			$popup.classList.add('s--active');		
			$scope.productCategory = ProductCode;
			
						
	};
	
	//------Reset Product Category---
	$scope.reset = function(form)
	{	
	   
		$scope.productCategory = angular.copy($scope.master);
	    form.$setPristine(true);
		$scope.productCategory = {'status':'0','bokclr':'#000000','budgclr':'#000000'};
		
	};		
	
});

//==================================================//
         //====Prospect Master =====//   
//==================================================//
angular.module('app')
.controller('ProspectMasterController',function($scope,$http,$timeout){
	var Username = sessionStorage.getItem("sessionUserName");
	
	$scope.isDisabled = true;
	 $scope.dataProspect = [];
	 $index=0;
	 $scope.master = {};
	 var customerGridData = [];
	 //var customerData = new Object();
	 var cusImage = new FormData();
   

	 /*$scope.ProspectTaxName = function()
	 {
		 
		 $.getJSON("getTaxNamesForCustmerMaster.do",function(json)
		 {
			 //alert(JSON.stringify(json));
			 $scope.taxNameData = json['tname'];
			 $scope.$apply();
		 });
	 }*/
	 
	 $scope.getcustomercode = function(prospectSts)
	 {
		
		 if($scope.ProspectMaster.modifyFlag == "Yes")
		 {
			
		   if(prospectSts == "Closed as Customer"){ $("#custCode").show();}else{ $("#custCode").hide();}
		 }
		 else
		 {
			
			 $("#custCode").hide();
		 }
	 }
	 
	 $scope.loadTaxNameByCountry = function(countryCode)
	 {
		 //alert(countryCode);
		 if(countryCode == undefined || countryCode == "")
		 {
			 
			 $.post("getTaxNamesForCustmerMaster.do",function(json)
			 {
				 //alert(JSON.stringify(json));
				 $scope.taxNameData = json['tname'];
				 $scope.$apply();
			 });
		 }
		 else
		 {
			 
			$.post("getTaxNamesForCustmerMaster.do",{countrycode:countryCode},function(json)
			  {
				  //alert(JSON.stringify(json['tname'][0].taxName));
				  $scope.ProspectMaster.taxName = json['tname'][0].taxName;
				  $scope.$apply();
			  }); 
		 }
		  
	 }
	 $scope.ProspectAccountCodes = function() 
	 {
		     $scope.customerNameCode = [];
		
                        $.post("getAllProspectAccountNames.do",function(json)
						{
					
							//alert(JSON.stringify(json['data']));
							 $scope.customerNameCode = json['data'];
							  	  	
							 $scope.$apply();
					
						});

                  
	 }
	 $scope.startsWith = function(state, viewValue) {
			//alert(state.substr(0, viewValue.length).toLowerCase() == viewValue.toLowerCase());
              return state.substr(0, viewValue.length).toLowerCase() == viewValue.toLowerCase();
            }
	 $scope.loadCountryCurrency = function()
		{
			$scope.currencyProspect = [];
			$.post("getingCurrencies.do",function(json)
				{
						   //alert(JSON.stringify(json['data']));
						  // var curArr = json['data'];
							   $scope.currencyProspect = json['data'];
							
							  //$("#getFullUnit").trigger("click"); 
								$scope.$apply();
				});
		};
	 $scope.loadProspectCurrency = function()
	 {
		 $timeout(function(){
			 	$.post("getLocalCureenceyOfCountryCode.do",function(json)
				{
					//alert(JSON.stringify(json['data']));
					 $scope.ProspectMaster.currency = json['data'];
					 $scope.$apply();
				});
			 }, 2000);
		 
		 
	 }
	 
	 
	 $scope.addProspectGrid = function() 
		{
			$index++;
		    $scope.dataProspect.push({'id':$index})
		};
		$scope.removeProspectRow = function(name)
		{	
			var Index = -1;		
			var comArr = eval( $scope.dataProspect );
			for( var i = 0; i < comArr.length; i++ ) 
			{
				if( comArr[i].id === name ) 
				{
					Index = i;
					break;
				}				
			}
			$scope.dataProspect.splice( Index, 1 );
			$index = comArr.length;
			for(var s=0;s<$index;s++)
			{
				$scope.dataProspect[s].id = Number(s)+Number(1);
			}			
  	    };
	
	     $scope.uploadCustomerLogo = function(files) 
				{
					//alert(files);
					
					$('#btn-hide').attr('disabled',false);
				   var fileInput = $("#photoinput");
                   var maxSize = fileInput.data('max-size');
				  
					       //cusImage = new FormData();
							if(fileInput.get(0).files.length>=1)
							{
								var fileSize = fileInput.get(0).files[0].size; // in bytes
								//alert(fileSize);
								if(maxSize<fileSize)
								{
									//alert("if");
									//alert('file size is more then' + maxSize + ' bytes');
									swal("Oops sorry...", 'File size is more then' +  maxSize  + ' bytes', "error");
									$('#btn-hide').attr('disabled',true);
									return false;
								}
								else
								{
									//alert("else");
									//alert('file size is correct- '+fileSize+' bytes');
									//swal( 'File size is correct- '+fileSize+' bytes'); 
									 $('#btn-hide').attr('disabled',false);
									 $scope.dummyPhoto="1";
									//$('#dummyPhoto').trigger('blur');
									 //cusImage.remove("usersign");
									 cusImage.append("usersign", files[0]);	
									
								}
							}
							else
							{
								swal("Choose File", 'File size should less then' +  maxSize  + ' bytes', "error");
								//alert(fileInput.get(0).files.length  + "else");
								//$('.btn-hide').attr('disabled',false);
							}
					  
					$scope.$apply();
				};
				
		$scope.rmvFilePath = function()
		{ 
			//alert(asd);
			$scope.ProspectMaster.imagename = "";
		}
	  
	   $scope.ProspectApplications =function()
	   {
           
		   $scope.applicationData = [];
		   $.getJSON("getAllApplications.do",function(json)
			{
					
							//alert(JSON.stringify(json['data']));
							 $scope.applicationData= json['data'];
							  	  	
							 $scope.$apply();
					
			});
			
			
          
	   }
	   
	   $scope.ProspectAppIndustry = function()
	   {
		   $scope.applicanIndustryData = [];
		   $.getJSON("getAllIndustrynames.do",function(json)
			{
					
							//alert(JSON.stringify(json['data']));
							 $scope.applicanIndustryData= json['data'];
							  
							 $scope.$apply();
					
			});
	   }
       
      
       
	   $scope.applicanIndustryCodes = function(getAppCode)
	   {
		   //alert(getAppCode);
		   getAppCode = getAppCode.trim();
           //$scope.applicationIdustry = [];
		   
		   $.getJSON("getApplicationCodes.do",{getAppCode:getAppCode},function(json)
						{
                           //alert(JSON.stringify(json['data'][0].application));
						   $scope.ProspectMaster.application = json['data'][0].application;
					       
                             $scope.$apply();
					       
						});
		   
		   
	   }
	   $scope.applicanIndustryName = function(applicanIndusName)
           {
               //alert(applicanIndusName);
			 applicanIndusName = applicanIndusName.trim();
               $.getJSON("getApplicationIndustryName.do",{applicanIndusName:applicanIndusName},function(json)
						{
                          // alert(JSON.stringify(json['data'][0].applicanIndustry));
						   $scope.ProspectMaster.applicanIndustry = json['data'][0].applicanIndustry;
					          
                             $scope.$apply();
					       
						});
           };
	   $scope.loadProspectCountries = function()
	   {
		   //alert(45376);
		  $.getJSON("getAllCountries.do",function(json)
			{
				//alert(JSON.stringify(json['data']));
				 $scope.countryNameArray = json['data'];
				 $scope.$apply();
			}); 
	   }
	   $scope.ProspectcustomerType = function()
	   {
		   $.getJSON("getAllCutmerGroupNames.do",function(json)
			{
				//alert(JSON.stringify(json['data']));
				 $scope.customerTypeData = json['data'];
				 $scope.$apply();
			}); 
	   }
	   $scope.ProspectSalesPerson = function()
	   {
		    $.getJSON("getAllSalesMan.do",function(json)
			{
				//alert(JSON.stringify(json['data']));
				 $scope.salesPersonData = json['data'];
				 $scope.$apply();
			});
	   }
	   
		$scope.ProspectAddedDepts = function()
		{
			$.getJSON("departmentView.do",function(json)
			{
				//alert(JSON.stringify(json['data']));
				$scope.departmentData = json['data'];
				 $scope.$apply();
			});		
		};
	   
	    $scope.ProspectCustomerStatus = function()
	   {
		  $scope.customerStatusArray =  [{ id: '1', customerStatus: 'Active' }, { id: '2', customerStatus: 'Inactive'},{ id: '3', customerStatus: 'Closed as Customer'}];
		    
	   }
	   $scope.ProspectMaster = angular.copy($scope.master);
	   $scope.ProspectMaster =({'customerStatus':'Active','custid':0,'modifyFlag':'No','createdby':Username,'lastmodifiedby':Username});  
	  
	   $scope.ProspectTerritory = function()
	   {
		   $.getJSON("getAllTeriotreyNames.do",function(json)
			{
				//alert(JSON.stringify(json['data']));
				 $scope.territoryData = json['data'];
				 $scope.$apply();
			});
	   }
	   $scope.ProspectPayment = function()
	   {
		  // alert(getAllPayments.do);
		   $.getJSON("getAllPaymentsAppcode.do",function(json)
			{
				//alert(JSON.stringify(json['data']));
				 $scope.paymentTermData = json['data'];
				 $scope.$apply();
			});
	   }
	   
	   $scope.loadProspectDate = function()
	   {
		   $.post("getToDaysDate.do",function(json)
			{
				//alert(JSON.stringify(json['bddate']));
				 $scope.ProspectMaster.bddate = json['bddate'];
				 $scope.ProspectMaster.account = json['prospectsequemce'];
				 $scope.$apply();
			});
	   }
	   $scope.ProspectCreditStatus = function()
	   {
		   $.getJSON("getCreditstatus.do",function(json)
			{
				//alert(JSON.stringify(json['data']));
				 $scope.creditStatusArray = json['data'];
				 $scope.$apply();
			});
		    //$scope.creditStatusArray = [{ id: '1', creditStatus: 'Active' }, { id: '2', creditStatus: 'Prospect' },{ id: '3', creditStatus: 'Qualified' }];
	   }
		
		
       
       $scope.validEmail = function(emailId)
       {
           //alert(emailId);
           var mailformat = /^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/; 
           if(emailId.length>=5)
               {
                  if(emailId.match(mailformat))
                   {
                     // alert("Valid"); 
                       $("#existVal" ).hide();
                   }
                  else
                   {
                       //alert("Invalid"); 
                       $("#existVal" ).show();
                   } 
               }
           else
               {
                    $("#existVal" ).hide();
               }
           
           
       }
       $scope.validEmailAddress = function(emailAddrsId,index)
       {
       
           var index = this.$index;
          
           var mailformat = /^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/; 
           if(emailAddrsId.length>=4)
               {
                  if(emailAddrsId.match(mailformat))
                   {
                     //alert("Valid"); 
                       $("#emailAddress" + index ).hide();
                   }
                  else
                   {
                       //alert("Invalid"); 
                       $("#emailAddress" + index ).show();
                   }
               }
           else
               {
                   $("#emailAddress" + index ).hide();
               }
          
       }
       
       $scope.validCode = function(accountId,custId)
       {
           //alert(accountId);
            //alert(custId);
           $.getJSON("validateCustomerCodeDuplicate.do",{account:accountId,validateDuplicate:custId},function(json)
           {
               //alert(JSON.stringify(json));
               var chk = json;
               //alert(chk);
                if (!chk) 
                {
                     // alert("Invalid");
                            $(".existVal" ).show();
							$(".btn-hide").prop('disabled', true);
							
				}
				else
                {
						 //alert("valid");
						   $(".existVal").hide();
						   	$(".btn-hide").prop('disabled', false);
				}
           });
       }
       
      
		$scope.loadsavedProspectCustmers = function(accountname,form)
			  {	
			   
				$.post("getAllprospectCustmerDetailsSavedOnIdforprospectcustmerData.do",{account:accountname},function(json)
				{
					
					var p= JSON.stringify(json['check']);
					
				    if(p!=0)
					{
							
							 $scope.ProspectMaster = json['custmer'][0];
							 $scope.dataProspect = json['grid'];
							 $scope.ProspectMaster.modifyFlag = 'Yes';
							 $scope.isDisabled = false;
							 //alert(JSON.stringify(json['custmer'][0].customerStatus));
							 var cstatus = json['custmer'][0].customerStatus;
							 
							 if(cstatus == "Closed as Customer"){ $("#custCode").show();}else{ $("#custCode").hide();}
							 //$scope.getcustomercode(prospectSts);
							 var getImage = json['custmer'][0].imagename;
							 //alert(getImage);
							 if(getImage!=null)
							   {
								   var imgPrew = getImage.trim();
								   if(imgPrew==null || imgPrew=="" )
								   {
									  $('.image-preview').popover('hide');
									  $("#1photoinput").text("Upload Logo");
									  $("#3photoinput").val("");
									  $("#2photoinput").hide();
									  $scope.dummyPhoto="";
										$('#dummyPhoto').trigger('blur');
								   }
								   else
								   {
									   var img = $('<img src="'+getImage+'" width="200" height="150"/>', {id: 'dynamic',width:200,height:150 });
									  
									   var photoName = getImage.split("/");
										//alert(photoName);
										$(".photo").attr("data-content",$(img)[0].outerHTML).popover("show");
										$("#1photoinput").text("Change");
										$("#2photoinput").show();
										$("#3photoinput").val(photoName[1]);
										$scope.dummyPhoto="1";
										$('#dummyPhoto').trigger('blur');
								   }
							   }
							   else
							   {
								   
								  $('.image-preview').popover('hide');
								  $("#1photoinput").text("Upload Logo");
								  $("#3photoinput").val("");
								  $("#2photoinput").hide();
								  $scope.dummyPhoto="";
								  $('#dummyPhoto').trigger('blur');
							   }
							  $scope.$apply();
					   
					}
					else
					{
						//alert("else");
						$scope.ProspectMaster = angular.copy($scope.master);
						$index=1;
			            $scope.dataProspect=[{'id':$index}];
						form.$setPristine(true);
						$('#photo').attr("data-content","").popover('hide');
						$('#3photoinput').val("");
						$('#2photoinput').hide();
						$('#photoinput').val("");
						$("#1photoinput").text("Upload Logo");	
						$scope.dummyPhoto="";
						$('#dummyPhoto').trigger('blur');
						$scope.ProspectMaster.account="";
						$scope.ProspectMaster =({'customerStatus':'Active','custid':0,'modifyFlag':'No','createdby':Username,'lastmodifiedby':Username});
						$scope.loadProspectDate();
				        $scope.loadProspectCurrency();
						$scope.getcustomercode(prospectSts);
						$scope.$apply();
					}
				 
				
				 
			  });	
			 
			};
			
			
			$scope.saleamancodeProspect = function(salesman)
			{
				$.getJSON("getSalesManCode.do",{salesman:salesman},function(json)
						{
					
					       $scope.ProspectMaster.salesPersonCode=json['data'];
                             $scope.$apply();
					       
						});

			
			
			};
            
           
			

			
	    $scope.ProspectMasterFormSubmit = function (ProspectMaster,form)
		{
			
			//alert(JSON.stringify(ProspectMaster));
		    //$scope.submitted = true;
			delete ProspectMaster["modifyFlag"];
			if($scope.ProspectMasterForm.$valid)
			{
				customerGridData = [];
				$scope.dataProspect.forEach(function(rowData)
				{ 
				   customerGridData.push(angular.toJson(rowData));	 
				   //alert(customerGridData);
				});
				cusImage.append("formData",angular.toJson(ProspectMaster));
				cusImage.append("gridData",angular.toJson(customerGridData));
			
			    
				$.ajax({
						       url         : "/SCA-360/prospectcustomerFormSubmit.do",
						       data        : cusImage,
						       contentType : false,
						       processData : false,
						       type        : 'POST'
						   }).success(function(data, status){
							          
							  
								if(data==true)
									{
										
										 //alert(JSON.stringify(cusImage));
										 swal("", 'Prospect added Successfully' , "success");
										$scope.ProspectMaster = angular.copy($scope.master);
										$index=1;
										$scope.dataProspect=[{'id':$index}];
										form.$setPristine(true);
										cusImage = new FormData();
										$('.photo').attr("data-content","").popover('hide');
										$('#3photoinput').val("");
										$('#2photoinput').hide();
//										$('#photoinput').val("");
										$("#1photoinput").text("Upload Logo");
										$scope.dummyPhoto="";
										$scope.customerName = "";
										$scope.loadProspectDate();
										$scope.loadProspectCurrency();
										$scope.ProspectMaster =({'customerStatus':'Active','custid':0,'modifyFlag':'No','createdby':Username,'lastmodifiedby':Username});
										$scope.ProspectAccountCodes();
										$("#custCode").hide();
										//location.reload(); 
										
										$scope.$apply();
										
										
										
									}
								else
									{
									   	swal("Oops sorry...", "Something went wrong!", "error");
										//$scope.$scope.customerMaster.taxName = conTax;
							 			//$('.btn-hide2').attr('disabled',false);
									}
							    
							   
				        	   
				           });
			}
			else
			{
				var field = null, firstError = null;
					for (field in form) 
					{
						if (field[0] != '$') 
						{
							if (firstError === null && !form[field].$valid) 
							{
								firstError = form[field].$name;
							}
							if (form[field].$pristine) 
							{
								form[field].$dirty = true;
							}
						}	
					}
			}
			
		}
		 //---------Reset Form----
		   $scope.resetProspectMasterForm = function(form)
		   {	
		       
		   		//alert(JSON.stringify($scope.customerMaster)); 
		 		$scope.ProspectMaster = angular.copy($scope.master);
				$index=1;
		        $scope.dataProspect=[{'id':$index}];
				cusImage = new FormData();
			    
				$('#photo').attr("data-content","").popover('hide');
			    $('#3photoinput').val("");
			    $('#2photoinput').hide();
				$('#photoinput').val("");
				$("#1photoinput").text("Upload Logo");	
				$scope.loadsavedProspectCustmers();
				$scope.customerName = "";
				$scope.dummyPhoto="";
				$scope.ProspectMaster =({'customerStatus':'Active','custid':0,'modifyFlag':'No','createdby':Username,'lastmodifiedby':Username});
				$scope.loadProspectDate();
				$scope.loadProspectCurrency();
               	$(".btn-hide").prop('disabled', false);
				$("#custCode").hide();
				form.$setPristine(true);
				$scope.$apply();
					
			};	
		});




//==================================================//
         //====Customer Master =====//   
//==================================================//
angular.module('app')
.controller('CustomerMaster',function($scope,$http,$timeout,$rootScope){
	var Username = sessionStorage.getItem("sessionUserName");
	 $scope.data = [];
	 $index=0;
	 $scope.master = {};
	 var customerGridData = [];
	 //var customerData = new Object();
	 var cusImage = new FormData();
	 $scope.isDisabled = false;
       
     
	 /*$scope.getTaxName = function()
	 {
		 
		 $.getJSON("getTaxNamesForCustmerMaster.do",function(json)
		 {
			 //alert(JSON.stringify(json));
			 $scope.taxNameData = json['tname'];
			 $scope.$apply();
		 });
	 }*/
	 $scope.getTaxNameByCountry = function(countryCode)
	 {
		 if(countryCode == undefined || countryCode == "")
		 {
			 
			 $.getJSON("getTaxNamesForCustmerMaster.do",function(json)
			 {
				 //alert(JSON.stringify(json));
				 $scope.taxNameData = json['tname'];
				 $scope.$apply();
			 });
		 }
		 else
		 {
			 
			$.getJSON("getTaxNamesForCustmerMaster.do",{countrycode:countryCode},function(json)
			  {
				  //alert(JSON.stringify(json['tname'][0].taxName));
				  $scope.customerMaster.taxName = json['tname'][0].taxName;
				  $scope.$apply();
			  }); 
		 }
		  
	 }
	 $scope.loadAccountCodes = function() 
	 {
		     $scope.customerNameCode = [];
		
                        $.post("getAllAccountNames.do",function(json)
						{
					
							//alert(JSON.stringify(json['data']));
							 $scope.customerNameCode = json['data'];
							  	  	
							 $scope.$apply();
					
						});

                  
	 };
	 $scope.startsWith = function(state, viewValue) {
			//alert(state.substr(0, viewValue.length).toLowerCase() == viewValue.toLowerCase());
              return state.substr(0, viewValue.length).toLowerCase() == viewValue.toLowerCase();
            }
	 $scope.loadCustomerCurrency = function()
		{
			$scope.currencyCustomer = [];
			$.post("getingCurrencies.do",function(json)
				{
						   //alert(JSON.stringify(json['data']));
						  // var curArr = json['data'];
							   $scope.currencyCustomer = json['data'];
							
							  //$("#getFullUnit").trigger("click"); 
								$scope.$apply();
				});
		};
	 $scope.loadCurrency = function()
	 {
		 $timeout(function(){
			 	$.getJSON("getLocalCureenceyOfCountryCode.do",function(json)
				{
					//alert(JSON.stringify(json['data']));
					 $scope.customerMaster.currency = json['data'];
					 $scope.$apply();
				});
			 }, 2000);
		 
		 
	 };
	 /*$scope.loadCurrency = function()
	 {
		 $.getJSON("getLocalCureenceyOfCountryCode.do",function(json)
			{
				//alert(JSON.stringify(json['data']));
				 $scope.customerMaster.currency = json['data'];
				 $scope.$apply();
			});
		 //$scope.loadCurrency = [{ id: '1', taxName: 'VAT' }, { id: '2', taxName: 'GST' }];
	 };*/
	 
	 
	 $scope.addField = function() 
		{
			$index++;
		    $scope.data.push({'id':$index})
		};
		$scope.removeRow = function(name)
		{	
			var Index = -1;		
			var comArr = eval( $scope.data );
			for( var i = 0; i < comArr.length; i++ ) 
			{
				if( comArr[i].id === name ) 
				{
					Index = i;
					break;
				}				
			}
			$scope.data.splice( Index, 1 );
			$index = comArr.length;
			for(var s=0;s<$index;s++)
			{
				$scope.data[s].id = Number(s)+Number(1);
			}			
  	    };
	
	     $scope.uploadCustomerLogo = function(files) 
				{
					//alert(files);
					
					$('#btn-hide').attr('disabled',false);
				   var fileInput = $("#photoinput");
                   var maxSize = fileInput.data('max-size');
				  
					       //cusImage = new FormData();
							if(fileInput.get(0).files.length>=1)
							{
								var fileSize = fileInput.get(0).files[0].size; // in bytes
								//alert(fileSize);
								if(maxSize<fileSize)
								{
									//alert("if");
									//alert('file size is more then' + maxSize + ' bytes');
									swal("Oops sorry...", 'File size is more then' +  maxSize  + ' bytes', "error");
									$('#btn-hide').attr('disabled',true);
									return false;
								}
								else
								{
									//alert("else");
									//alert('file size is correct- '+fileSize+' bytes');
									//swal( 'File size is correct- '+fileSize+' bytes'); 
									 $('#btn-hide').attr('disabled',false);
									 $scope.dummyPhoto="1";
									//$('#dummyPhoto').trigger('blur');
									 //cusImage.remove("usersign");
									 cusImage.append("usersign", files[0]);	
									
								}
							}
							else
							{
								swal("Choose File", 'File size should less then' +  maxSize  + ' bytes', "error");
								//alert(fileInput.get(0).files.length  + "else");
								//$('.btn-hide').attr('disabled',false);
							}
					  
					$scope.$apply();
				};
				
		$scope.rmvFilePath = function()
		{ 
			//alert(asd);
			$scope.customerMaster.imagename = "";
		}
	  
	   $scope.getApplications =function()
	   {
           
		   $scope.applicationData = [];
		   $.getJSON("getAllApplications.do",function(json)
			{
					
							//alert(JSON.stringify(json['data']));
							 $scope.applicationData= json['data'];
							  	  	
							 $scope.$apply();
					
			});
			
			
          
	   }
	   
	   $scope.getApplicationIndustry = function()
	   {
		   $scope.applicanIndustryData = [];
		   $.getJSON("getAllIndustrynames.do",function(json)
			{
					
							//alert(JSON.stringify(json['data']));
							 $scope.applicanIndustryData= json['data'];
							  
							 $scope.$apply();
					
			});
	   }
       
      
       
	   $scope.applicanIndustryCodes = function(getAppCode)
	   {
		   //alert(getAppCode);
		   getAppCode = getAppCode.trim();
           //$scope.applicationIdustry = [];
		   
		   $.getJSON("getApplicationCodes.do",{getAppCode:getAppCode},function(json)
						{
                           //alert(JSON.stringify(json['data'][0].application));
						   $scope.customerMaster.application = json['data'][0].application;
					       
                             $scope.$apply();
					       
						});
		   
		   
	   }
	   $scope.applicanIndustryName = function(applicanIndusName)
           {
               //alert(applicanIndusName);
			 applicanIndusName = applicanIndusName.trim();
               $.getJSON("getApplicationIndustryName.do",{applicanIndusName:applicanIndusName},function(json)
						{
                          // alert(JSON.stringify(json['data'][0].applicanIndustry));
						   $scope.customerMaster.applicanIndustry = json['data'][0].applicanIndustry;
					          
                             $scope.$apply();
					       
						});
           };
	   $scope.loadCountries = function()
	   {
		   //alert(45376);
		  $.getJSON("getAllCountries.do",function(json)
			{
				//alert(JSON.stringify(json['data']));
				 $scope.countryNameArray = json['data'];
				 $scope.$apply();
			}); 
	   }
	   $scope.loadcustomerType = function()
	   {
		   $.getJSON("getAllCutmerGroupNames.do",function(json)
			{
				//alert(JSON.stringify(json['data']));
				 $scope.customerTypeData = json['data'];
				 $scope.$apply();
			}); 
	   }
	   $scope.getSalesPerson = function()
	   {
		    $.getJSON("getAllSalesMan.do",function(json)
			{
				//alert(JSON.stringify(json['data']));
				 $scope.salesPersonData = json['data'];
				 $scope.$apply();
			});
	   }
	   
		$scope.loadAddedDepartments = function()
		{
			$.getJSON("departmentView.do",function(json)
			{
				//alert(JSON.stringify(json['data']));
				$scope.departmentData = json['data'];
				 $scope.$apply();
			});		
		};
	   
	   
	    
	   $scope.getCustomerStatus = function()
	   {
		  $scope.customerStatusArray =  [{ id: '1', customerStatus: 'Active' }, { id: '2', customerStatus: 'Inactive or on Hold'}];
		    
	   }
	   $scope.customerMaster = angular.copy($scope.master);
	   $scope.customerMaster =({'customerStatus':'Active','custid':0,'createdby':Username,'lastmodifiedby':Username}); 
	   $scope.getTerritory = function()
	   {
		   $.getJSON("getAllTeriotreyNames.do",function(json)
			{
				//alert(JSON.stringify(json['data']));
				 $scope.territoryData = json['data'];
				 $scope.$apply();
			});
	   }
	   $scope.getPayment = function()
	   {
		  // alert(getAllPayments.do);
		   $.getJSON("getAllPaymentsAppcode.do",function(json)
			{
				//alert(JSON.stringify(json['data']));
				 $scope.paymentTermData = json['data'];
				 $scope.$apply();
			});
	   }
	   
	   $scope.loadDate = function()
	   {
		   $.getJSON("getToDaysDate.do",function(json)
			{
				//alert(JSON.stringify(json['bddate']));
				 $scope.customerMaster.bddate = json['bddate'];
				 $scope.$apply();
			});
	   }
	   $scope.loadCreditStatus = function()
	   {
		   $.getJSON("getCreditstatus.do",function(json)
			{
				//alert(JSON.stringify(json['data']));
				 $scope.creditStatusArray = json['data'];
				 $scope.$apply();
			});
		    //$scope.creditStatusArray = [{ id: '1', creditStatus: 'Active' }, { id: '2', creditStatus: 'Prospect' },{ id: '3', creditStatus: 'Qualified' }];
	   }
		
		/*$scope.update = function(addr1,addr2,addr3,stateProvince,country,zipCode,post,poBox) {
			//alert($scope.customerMaster.billingAddress1);
			//alert(addr1);
              $scope.customerMaster.shippingAddress1 = addr1;
			  $scope.customerMaster.shippingAddress2 = addr2;
			  $scope.customerMaster.shippingAddress3 = addr3;
			  $scope.customerMaster.shippingStateProvince = stateProvince;
			  $scope.customerMaster.shippingCountries = country;
			  $scope.customerMaster.shippingZipCode = zipCode;
			  $scope.customerMaster.shippingPost = post;
			  $scope.customerMaster.shippingpoBox = poBox;
			  
        };*/
       
       $scope.validEmail = function(emailId)
       {
           //alert(emailId);
           var mailformat = /^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/; 
           if(emailId.length>=5)
               {
                  if(emailId.match(mailformat))
                   {
                     // alert("Valid"); 
                       $("#existVal" ).hide();
                   }
                  else
                   {
                       //alert("Invalid"); 
                       $("#existVal" ).show();
                   } 
               }
           else
               {
                    $("#existVal" ).hide();
               }
           
           
       }
       $scope.validEmailAddress = function(emailAddrsId,index)
       {
       
           var index = this.$index;
          
           var mailformat = /^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/; 
           if(emailAddrsId.length>=4)
               {
                  if(emailAddrsId.match(mailformat))
                   {
                     //alert("Valid"); 
                       $("#emailAddress" + index ).hide();
                   }
                  else
                   {
                       //alert("Invalid"); 
                       $("#emailAddress" + index ).show();
                   }
               }
           else
               {
                   $("#emailAddress" + index ).hide();
               }
          
       }
       
       $scope.validCode = function(accountId,custId)
       {
           //alert(accountId);
            //alert(custId);
           $.getJSON("validateCustomerCodeDuplicate.do",{account:accountId,validateDuplicate:custId},function(json)
           {
               //alert(JSON.stringify(json));
               var chk = json;
               //alert(chk);
                if (!chk) 
                {
                     // alert("Invalid");
                            $(".existVal" ).show();
							$(".btn-hide").prop('disabled', true);
							
				}
				else
                {
						 //alert("valid");
						   $(".existVal").hide();
						   	$(".btn-hide").prop('disabled', false);
				}
           });
       }
       
      $scope.loadCustomerDBData = function(form)
	  {
		 
		 var editcustdb = $rootScope.loadEditCustDB;
		  
		 if(editcustdb == undefined || editcustdb == "")
		 {
			 
			$rootScope.loadEditCustDB = "";
			    //$scope.customerMaster = angular.copy($scope.master);
//				$index=1;
//		        $scope.data=[{'id':$index}];
//				cusImage = new FormData();
//			    form.$setPristine(true);
//				$('#photo').attr("data-content","").popover('hide');
//			    $('#3photoinput').val("");
//			    $('#2photoinput').hide();
//				$('#photoinput').val("");
//				$("#1photoinput").text("Upload Logo");	
//				//$scope.loadsavedCustmers();
//				$scope.customerName = "";
//				$scope.dummyPhoto="";
//				$scope.customerMaster = ({'customerStatus':'Active','custid':0});
//				$scope.loadDate();
//				$scope.loadCurrency();
//				
//               	$(".btn-hide").prop('disabled', false);
//				
//				$scope.$apply();
		 }
		 else
		 {
			  
			$.post("getAllCustmerDetailsSavedOnIdforCustmerData.do",function(json)
			  {
				 // alert(JSON.stringify(json['custmer'][0].account));
				  $scope.customerMaster = json['custmer'][0];
				  $scope.data = json['grid'];
				  $scope.customerName = json['custmer'][0].accountid + "-" + json['custmer'][0].account;
				 
				  var getImage = json['custmer'][0].imagename;
								 //alert(getImage);
								 if(getImage!=null)
								   {
									   var imgPrew = getImage.trim();
									   if(imgPrew==null || imgPrew=="" )
									   {
										  $('.image-preview').popover('hide');
										  $("#1photoinput").text("Upload Logo");
										  $("#3photoinput").val("");
										  $("#2photoinput").hide();
										  $scope.dummyPhoto="";
											$('#dummyPhoto').trigger('blur');
									   }
									   else
									   {
										   var img = $('<img src="'+getImage+'" width="200" height="150"/>', {id: 'dynamic',width:200,height:150 });
										  
										   var photoName = getImage.split("/");
											//alert(photoName);
											$(".photo").attr("data-content",$(img)[0].outerHTML).popover("show");
											$("#1photoinput").text("Change");
											$("#2photoinput").show();
											$("#3photoinput").val(photoName[1]);
											$scope.dummyPhoto="1";
											$('#dummyPhoto').trigger('blur');
									   }
								   }
								   else
								   {
									   
									  $('.image-preview').popover('hide');
									  $("#1photoinput").text("Upload Logo");
									  $("#3photoinput").val("");
									  $("#2photoinput").hide();
									  $scope.dummyPhoto="";
									  $('#dummyPhoto').trigger('blur');
								   }
								  
								  
								  $scope.$apply();
								  
			  }); 
			  $rootScope.loadEditCustDB = "";
			  
		 }
		 
		// if(editcustdb == undefined || editcustdb == "")
//		 {
//			 alert("if");
//			 
//			 
//			 /*$scope.customerMaster = angular.copy($scope.master);
//				$index=1;
//		        $scope.data=[{'id':$index}];
//				cusImage = new FormData();
//			    form.$setPristine(true);
//				$('#photo').attr("data-content","").popover('hide');
//			    $('#3photoinput').val("");
//			    $('#2photoinput').hide();
//				$('#photoinput').val("");
//				$("#1photoinput").text("Upload Logo");	
//				$scope.loadsavedCustmers();
//				$scope.customerName = "";
//				$scope.dummyPhoto="";
//				$scope.customerMaster =({'customerStatus':'Active','custid':0});
//				$scope.loadDate();
//				$scope.loadCurrency();
//				
//               	$(".btn-hide").prop('disabled', false);
//				
//				$scope.$apply();*/
//		 }
//		 else
//		 {
//			 alert("else");
//			 /*$.post("getAllCustmerDetailsSavedOnId.do",function(json)
//			  {
//				 // alert(JSON.stringify(json['custmer'][0].account));
//				  $scope.customerMaster = json['custmer'][0];
//				  $scope.data = json['grid'];
//				  $scope.customerName = json['custmer'][0].accountid + "-" + json['custmer'][0].account;
//				  var getImage = json['custmer'][0].imagename;
//								 //alert(getImage);
//								 if(getImage!=null)
//								   {
//									   var imgPrew = getImage.trim();
//									   if(imgPrew==null || imgPrew=="" )
//									   {
//										  $('.image-preview').popover('hide');
//										  $("#1photoinput").text("Upload Logo");
//										  $("#3photoinput").val("");
//										  $("#2photoinput").hide();
//										  $scope.dummyPhoto="";
//											$('#dummyPhoto').trigger('blur');
//									   }
//									   else
//									   {
//										   var img = $('<img src="'+getImage+'" width="200" height="150"/>', {id: 'dynamic',width:200,height:150 });
//										  
//										   var photoName = getImage.split("/");
//											//alert(photoName);
//											$(".photo").attr("data-content",$(img)[0].outerHTML).popover("show");
//											$("#1photoinput").text("Change");
//											$("#2photoinput").show();
//											$("#3photoinput").val(photoName[1]);
//											$scope.dummyPhoto="1";
//											$('#dummyPhoto').trigger('blur');
//									   }
//								   }
//								   else
//								   {
//									   
//									  $('.image-preview').popover('hide');
//									  $("#1photoinput").text("Upload Logo");
//									  $("#3photoinput").val("");
//									  $("#2photoinput").hide();
//									  $scope.dummyPhoto="";
//									  $('#dummyPhoto').trigger('blur');
//								   }
//								  
//								  $scope.$apply();
//			  });*/
//			   $rootScope.loadEditCustDB = "";
//		 }
		  
	  }
	  
	  
		$scope.loadsavedCustmers = function(accountname,form)
			  {	
			    //alert(accountname); 
				$rootScope.loadEditCustDB = "";
				$.post("getAllCustmerDetailsSavedOnIdforCustmerData.do",{account:accountname},function(json)
				{
					
					$scope.isDisabled = true; 
					var p= JSON.stringify(json['check']);
					//alert(JSON.stringify(json['custmer']));
					    /*$scope.customerMaster = angular.copy($scope.master);
						$index=1;
			            $scope.data=[{'id':$index}];*/
				    if(p!=0)
					{
							//var getAppCode = json['custmer'][0].application;
							//var getIndustryName = json['custmer'][0].applicanIndustry;
							
							 $scope.customerMaster = json['custmer'][0];
							 $scope.data = json['grid'];
							 //$('#ApplicationCode').val(getAppCode).trigger('chosen:updated');
							// $scope.customerMaster.application = getAppCode;
							 //$('#ApplicanIndustry').val(getIndustryName).trigger('chosen:updated');
							 //$scope.customerMaster.applicanIndustry = getIndustryName;	
								
							 /*var getTaxName = json['custmer'][0].taxName;
								$.getJSON("getTaxNamesForCustmerMaster.do",{countrycode:countryCode},function(json)
								{
		
										 $scope.taxName = json['tname'];
										 var optionValues="";
										 //alert(JSON.stringify( json['tname']));
									for(var i=0;i<json['tname'].length;i++)
									{
										optionValues +="<option value='"+json['tname'][i].id+"'>"+json['tname'][i].taxName+"</option>";
									}				
									$('#picturegallery').empty();
									var newOption = $(optionValues);
									$('#picturegallery').append(newOption);				
									$('#picturegallery').trigger("chosen:updated");	
		
		
										$('#picturegallery').val(getTaxName).trigger('chosen:updated');	
										$scope.customerMaster.taxName = getTaxName;	 
										
									 $scope.$apply();
									 
								});*/
							
							 var getImage = json['custmer'][0].imagename;
							 //alert(getImage);
							 if(getImage!=null)
							   {
								   var imgPrew = getImage.trim();
								   if(imgPrew==null || imgPrew=="" )
								   {
									  $('.image-preview').popover('hide');
									  $("#1photoinput").text("Upload Logo");
									  $("#3photoinput").val("");
									  $("#2photoinput").hide();
									  $scope.dummyPhoto="";
										$('#dummyPhoto').trigger('blur');
								   }
								   else
								   {
									   var img = $('<img src="'+getImage+'" width="200" height="150"/>', {id: 'dynamic',width:200,height:150 });
									  
									   var photoName = getImage.split("/");
										//alert(photoName);
										$(".photo").attr("data-content",$(img)[0].outerHTML).popover("show");
										$("#1photoinput").text("Change");
										$("#2photoinput").show();
										$("#3photoinput").val(photoName[1]);
										$scope.dummyPhoto="1";
										$('#dummyPhoto').trigger('blur');
								   }
							   }
							   else
							   {
								   
								  $('.image-preview').popover('hide');
								  $("#1photoinput").text("Upload Logo");
								  $("#3photoinput").val("");
								  $("#2photoinput").hide();
								  $scope.dummyPhoto="";
								  $('#dummyPhoto').trigger('blur');
							   }
							  $scope.$apply();
					   
					}
					else
					{
						//alert("else");
						$scope.customerMaster = angular.copy($scope.master);
						$index=1;
			            $scope.data=[{'id':$index}];
						form.$setPristine(true);
						$('#photo').attr("data-content","").popover('hide');
						$('#3photoinput').val("");
						$('#2photoinput').hide();
						$('#photoinput').val("");
						$("#1photoinput").text("Upload Logo");	
						$scope.dummyPhoto="";
						$('#dummyPhoto').trigger('blur');
						$scope.customerMaster.account="";
						$scope.customerMaster =({'customerStatus':'Active','custid':0,'createdby':Username,'lastmodifiedby':Username});
						$scope.loadDate();
						$scope.loadCurrency();
                        $rootScope.loadEditCustDB = "";
						$scope.$apply();
					}
				 
				
				 
			  });	
			 
			};
			
			
			$scope.saleamancode = function(salesman)
			{
				$.getJSON("getSalesManCode.do",{salesman:salesman},function(json)
						{
					
					       $scope.customerMaster.salesPersonCode=json['data'];
                             $scope.$apply();
					       
						});

			
			
			};
            
           
			

			
	    $scope.customerMasterFormSubmit = function (customerMaster,form)
		{
			
			//alert(JSON.stringify(customerMaster));
		    //$scope.submitted = true;
			if($scope.customerMasterForm.$valid)
			{
				customerGridData = [];
				$scope.data.forEach(function(rowData)
				{ 
				   customerGridData.push(angular.toJson(rowData));	 
				   //alert(customerGridData);
				});
				cusImage.append("formData",angular.toJson(customerMaster));
				cusImage.append("gridData",angular.toJson(customerGridData));
			
				$.ajax({
						       url         : "/SCA-360/customerFormSubmit.do",
						       data        : cusImage,
						       contentType : false,
						       processData : false,
						       type        : 'POST'
						   }).success(function(data, status){
							           /* checkCookie();
										function checkCookie() {
										var user=getCookie("username");
										if (user != "") {
											alert("Welcome again " + user);
										} else {
										   user = prompt("Please enter your name:","");
										   //user = cusImage;
										   if (user != "" && user != null) {
											   setCookie("username", user, 30);
										   }
										}
									}
									function getCookie(cname) {
										
										var name = cname + "=";
										var decodedCookie = decodeURIComponent(document.cookie);
										alert(decodedCookie + " 1 ");
										var ca = decodedCookie.split(';');
										for(var i = 0; i < ca.length; i++) {
											var c = ca[i];
											while (c.charAt(0) == ' ') {
												c = c.substring(1);
											}
											if (c.indexOf(name) == 0) {
												return c.substring(name.length, c.length);
											}
										}
										return "";
									}
									function setCookie(cname,cvalue,exdays) {
										//alert(JSON.stringify(cvalue));
										var d = new Date();
										
										d.setTime(d.getTime() + (exdays*24*60*60*1000));
										var expires = "expires=" + d.toGMTString();
										document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/";
									}
									
									document.cookie = "username=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;";*/
							  
								if(data==true)
									{
										
										 //alert(JSON.stringify(cusImage));
										  swal("", 'Customer Master Saved Successfully' , "success");
										$scope.customerMaster = angular.copy($scope.master);
										$index=1;
										$scope.data=[{'id':$index}];
										form.$setPristine(true);
										cusImage = new FormData();
										$('.photo').attr("data-content","").popover('hide');
										$('#3photoinput').val("");
										$('#2photoinput').hide();
//										$('#photoinput').val("");
										$("#1photoinput").text("Upload Logo");
										$scope.dummyPhoto="";
										$scope.customerName = "";
										$scope.loadDate();
										$scope.loadCurrency();
										$scope.customerMaster =({'customerStatus':'Active','custid':0,'createdby':Username,'lastmodifiedby':Username});
										$scope.loadAccountCodes();
										$rootScope.loadEditCustDB = "";
										$scope.$apply();
										
										
										
									}
								else
									{
									   	swal("Oops sorry...", "Something went wrong!", "error");
										//$scope.$scope.customerMaster.taxName = conTax;
							 			//$('.btn-hide2').attr('disabled',false);
									}
							    
							   
				        	   
				           });
			}
			else
			{
				var field = null, firstError = null;
					for (field in form) 
					{
						if (field[0] != '$') 
						{
							if (firstError === null && !form[field].$valid) 
							{
								firstError = form[field].$name;
							}
							if (form[field].$pristine) 
							{
								form[field].$dirty = true;
							}
						}	
					}
			}
			
		}
		 //---------Reset Form----
		   $scope.resetCustomerMasterForm = function(form)
		   {	
		   		
		 		$scope.customerMaster = angular.copy($scope.master);
				$index=1;
		        $scope.data=[{'id':$index}];
				cusImage = new FormData();
			    form.$setPristine(true);
				$('#photo').attr("data-content","").popover('hide');
			    $('#3photoinput').val("");
			    $('#2photoinput').hide();
				$('#photoinput').val("");
				$("#1photoinput").text("Upload Logo");	
				//$scope.loadsavedCustmers();
				$scope.customerName = "";
				$scope.dummyPhoto="";
				$scope.customerMaster =({'customerStatus':'Active','custid':0,'createdby':Username,'lastmodifiedby':Username});
				$scope.loadDate();
				$scope.loadCurrency();
				$rootScope.loadEditCustDB = "";
               	$(".btn-hide").prop('disabled', false);
				
				$scope.$apply();
					
			};	
		});

//=======================================================//
  //=============CURRENCY Master==============//
 //=======================================================//


		angular.module('app')
    .controller('CurrencyMasterController', function($scope, $http) {
													 
		 $scope.CurrencyFormData=[];
        $index = 0;
        $scope.addCurrencydataForm = function() {

            $index++;
            $scope.CurrencyFormData.push({
                'id': $index
            })

        };
		
		 $scope.removeFormRow = function(name) {
            // alert(name);
            var IndexTab1 = -1;
            var comArrTab1 = eval($scope.CurrencyFormData);
            for (var i = 0; i < comArrTab1.length; i++) {
                if (comArrTab1[i].id === name) {
                    IndexTab1 = i;
                    break;
                }
            }
            $scope.CurrencyFormData.splice(IndexTab1, 1);
            $indexTab1 = comArrTab1.length;
            for (var s = 0; s < $indexTab1; s++) {
                $scope.CurrencyFormData[s].id = Number(s) + Number(1);
            }
        };
			
										  
  });
  
 //=======================================================//
  //=============Country Tax==============//
 //=======================================================//
	angular.module('app')
    .controller('CountryTaxController', function($scope, $http) {
		
		$scope.master = {};
		   var countryObj = new Object();
        countryObj.dropdownname = "Country";
        countryObj.columnname = "country";
        countryObj.columncode = "countrycode";
        var jsonCountryString = JSON.stringify(countryObj);
		
        $scope.CurrencyTaxFormData = [];
        $index = 0;
        $scope.addCurrencyTaxdataForm = function() {

            $index++;
            $scope.CurrencyTaxFormData.push({
                'id': $index
            })

        };

        $scope.removeFormRow = function(name) {
            // alert(name);
            var IndexTab1 = -1;
            var comArrTab1 = eval($scope.CurrencyTaxFormData);
            for (var i = 0; i < comArrTab1.length; i++) {
                if (comArrTab1[i].id === name) {
                    IndexTab1 = i;
                    break;
                }
            }
            $scope.CurrencyTaxFormData.splice(IndexTab1, 1);
            $indexTab1 = comArrTab1.length;
            for (var s = 0; s < $indexTab1; s++) {
                $scope.CurrencyTaxFormData[s].id = Number(s) + Number(1);
            }
        };
		
		$scope.loadCountryNames = function() {
            var httpRequest = $http({
                method: 'POST',
                url: "/SCA-360/loadDropDown.do",
                data: jsonCountryString,
            }).success(function(data, status) {
                $scope.countryNames = data;


            });
        };
		$scope.getCountryTax=function(country){
				 var httpRequest = $http({
                method: 'POST',
                url: "/SCA-360/getTaxnameoncountrycode.do",
                data: country,
            }).success(function(data, status) {
               //alert(JSON.stringify(data));
			   $scope.CurrencyTaxFormData=data.countrytax;
				
			})
				}
		
		var SavecountryTax = [];
		var newObject = new FormData(); 
		$scope.savecountryTax=function(countrycode,form,country)
		{
			if($scope.countryTaxForm.$valid)
			{
				//alert(JSON.stringify(countrycode));
				SavecountryTax = [];
				 $scope.CurrencyTaxFormData.forEach(function(CurrencyTaxdata) {

                    SavecountryTax.push(angular.toJson(CurrencyTaxdata));
               
	
				});
				newObject.append("formData",angular.toJson(countrycode));
				newObject.append("gridData",angular.toJson(SavecountryTax));
			
				$.ajax({
						       url         : "/SCA-360/SaveTaxCountry.do",
						       data        : newObject,
						       contentType : false,
						       processData : false,
						       type        : 'POST'
						   }).success(function(data, status){
							   //alert(data);
								if(data==true)
									{
										
										
										 swal("", 'Country Tax Saved Successfully' , "success");
										//$scope.getCountryTax(country);
										$scope.countryTax = angular.copy($scope.master);
										form.$setPristine(true);
										newObject = new FormData();
										$index=1;
										$scope.CurrencyTaxFormData = [{'id':$index}];
										/*$('.photo').attr("data-content","").popover('hide');
										$('#3photoinput').val("");
										$('#2photoinput').hide();
//										$('#photoinput').val("");
										$("#1photoinput").text("Upload Logo");
										$scope.dummyPhoto="";
										$scope.customerName = "";
										$scope.loadDate();
										$scope.loadCurrency();
										$scope.customerMaster =({'customerStatus':'Active','custid':0});
										$scope.loadAccountCodes();*/
										//location.reload(); 
										
										$scope.$apply();
										
										
										
									}
								else
									{
									   	swal("Oops sorry...", "Something went wrong!", "error");
										//$scope.$scope.customerMaster.taxName = conTax;
							 			//$('.btn-hide2').attr('disabled',false);
									}
							    
							   
				        	   
				           });
			}
			else
			{
				var field = null, firstError = null;
					for (field in form) 
					{
						if (field[0] != '$') 
						{
							if (firstError === null && !form[field].$valid) 
							{
								firstError = form[field].$name;
							}
							if (form[field].$pristine) 
							{
								form[field].$dirty = true;
							}
						}	
					}
			}
			
			/*//alert(countrycode);
			 var SavecountryTax = [];
			// var countryTax=new Object();
			  var newObject=new Object();

            $scope.CurrencyTaxFormData.forEach(function(CurrencyTaxdata) {

                SavecountryTax.push(angular.toJson(CurrencyTaxdata));
               

            });
			
			newObject.gridData=SavecountryTax;
			newObject.formData=countrycode;
			
			
			
			
			  var httpRequest = $http({
                method: 'POST',
                url: "/SCA-360/SaveTaxCountry.do",
                data:JSON.stringify(newObject),
            }).success(function(data, status) {
                if(data==true)
			{
			swal( 'Saved Successfully');
			}else{
				swal( 'OOps!');
				}

            });*/
			
			
			
		}
			
			
			
				
				
		/*$scope.resettestreport = function(form)
		{
			$scope.countryTax = angular.copy($scope.master);
			$index=1;
			$scope.CurrencyTaxFormData = [{'id':$index}];
			form.$setPristine(true);
			newObject = new FormData();
		}*/


    });
	
//=======================================================//
  //=============Data Migration==============//
//=======================================================//
	angular.module('app')
    .controller('dataMigrationCon', function($scope, $http) {
		
		$scope.master = {};
		
		$scope.migrationFormSubmit = function(form)
		{
			$.getJSON("updateappcodemigration.do",function(json) {
			//alert(JSON.stringify(json));
			swal( 'Data Migration Successfully'); 
			});
		
		}

	});
 //======================================================// 
    //=============Coountry Master=============//
 //====================================================//	
	angular.module('app')
    .controller('countrymaster', function($scope, $http,$timeout) {
									  
		$scope.bottomrightsettings = {
				position: 'bottom right'
			};

		 $scope.countryDataForm=[];
        $index = 0;
        $scope.addcountrydataForm = function() {
		

            $index++;
            $scope.countryDataForm.push({
                'id': $index,'status':'0'
            })

        };
		
		 $scope.removeFormRow = function(name) {
            // alert(name);
            var IndexTab1 = -1;
            var comArrTab1 = eval($scope.countryDataForm);
            for (var i = 0; i < comArrTab1.length; i++) {
                if (comArrTab1[i].id === name) {
                    IndexTab1 = i;
                    break;
                }
            }
            $scope.countryDataForm.splice(IndexTab1, 1);
            $indexTab1 = comArrTab1.length;
            for (var s = 0; s < $indexTab1; s++) {
                $scope.countryDataForm[s].id = Number(s) + Number(1);
            }
			$("#buttonhide").prop('disabled', false);
        };
		
	
		
		var gridData = [];
		//var gridImgData = [];
		var conLogo = new FormData();
		//=======country form submit=========//
		$scope.saveCountry = function(form) 
		{

               /*$.ajax({
                url: "/SCA-360/saveCountries.do",
                processData: true,
                type: 'POST',
                contentType: 'Application/json',
                data: conLogo,
                beforeSend: function(xhr) {
                    xhr.setRequestHeader("Accept", "application/json");
                    xhr.setRequestHeader("Content-Type", "application/json");
                },
                success: function(response) {
                    if (response == true) {
                        swal("", 'Country Details Added Successfully', "success");
                        $scope.getCountries();
                      gridData.length = 0;
                        //form.$setPristine(true);
                        //$scope.AddBudget = angular.copy($scope.master);
                    } else {
                        swal("Ooh no...", "Something went wrong!", "error");

                    }
                }
            });*/
        if ($scope.countrymasterForm.$valid) 
		{
			
            gridData = [];
            $scope.countryDataForm.forEach(function(countrydata) {
                gridData.push(angular.toJson(countrydata));
				
            });
         
			//gridImgData = []; 
			//alert(JSON.stringify(gridData));
//			$scope.imgArray.forEach(function(imgArray) {
//                
//				alert(imgArray);
//				gridImgData.push(imgArray);
//			     alert(angular.toJson(gridImgData));
//            });
			
		 
            //obj.formData = angular.toJson(countryDataForm);
           // obj.gridData = gridData;
         // conLogo.gridData = angular.toJson(gridData);
            //alert(obj.formData);
            //alert(JSON.stringify(obj));
			conLogo.append("gridData",angular.toJson(gridData));
            //conLogo.append("countryLogo",angular.toJson(gridImgData));
			//alert(JSON.stringify(conLogo));
			        $.ajax({
						       url         : "/SCA-360/saveCountries.do",
						       data        : conLogo,
						       contentType : false,
						       processData : false,
						       type        : 'POST'
						   }).success(function(data, status){
							   
							  if(data==true)
									{
									
										
										//swal('Saved Successfully');
										swal("", 'Country Saved Successfully' , "success");
										conLogo = new FormData();
										$index=1;
							            $scope.countryDataForm=[{'id': $index,'status':'0'}];
										form.$setPristine(true); 
										$scope.getCountries();
										$scope.$apply();
									}
								else
									{
									   swal("Oops sorry...", "Something went wrong!", "error");
									}
						   });
			
          
        } 
		else
		{
			//alert("shw errors");
            var field = null,
                firstError = null;
            for (field in form) {
                if (field[0] != '$') {
                    if (firstError === null && !form[field].$valid) {
                        firstError = form[field].$name;
                    }
                    if (form[field].$pristine) {
                        form[field].$dirty = true;
                    }
                }
            }
        }
    };
	


      $scope.removeImg = function(img,index)
	  {
		  //alert($scope.countryDataForm.length);
		  var index = this.$index;
		 // alert($scope.thumbnail[index].dataUrl + " " + index);
		  //$(this).remove();
		 /* for(var i=0;i<$scope.thumbnail.length;i++) 
		  {
								
			if($scope.thumbnail[i].dataUrl === step) 
			{
								
			  $scope.thumbnail.dataUrl.splice(i,1);
								
									break;
			
			}
		 }*/
	  }
       /*     var ind;
		$scope.uploadCountryLogo = function(event)
		{
			var files = event.target.files; //FileList object
				//alert(files);
				ind = this.$index;		 
			for (var i = 0; i < files.length; i++) 
			{
					var file = files[i];
					var reader = new FileReader();
					reader.onload = $scope.imageIsLoaded; 
					reader.readAsDataURL(file);
			}
		}
		$scope.countryModel = [];
		$scope.imageIsLoaded = function(e)
		{
			alert(ind);
			$scope.$apply(function() {
				var imagelocation=e.target.result;
				 var base64result = imagelocation.split(',')[1];
												  
				$scope.countryModel.push({id:ind,data:base64result});
									alert($scope.countryModel);
			});
		}*/
		
		//$scope.saveCountry=function(){
//			//alert($scope.countrymasterForm.$valid);
//			if ($scope.countrymasterForm.$valid) {
//			var countyArray=new Array();
//			var countryObj=new Object();
//			 $scope.countryDataForm.forEach(function(countrydata) {
//
//                countyArray.push(angular.toJson(countrydata));
//
//            });
//			 countryObj.gridData=countyArray;
//			 
//			 var httpRequest = $http({
//                method: 'POST',
//                url: "/SCA-360/saveCountries.do",
//                data: JSON.stringify(countryObj),
//            }).success(function(data, status) {
//                //alert(JSON.stringify(data));
//               // $scope.customergroupData = data;
//			   if (data == true) {
//                        swal('Saved Successfully');
//						$scope.getCountries();
//                        countyArray.length = 0;
//
//                    } else if (data == false) {
//                        swal("Ooh no...", "Something went wrong!", "error");
//                        //$scope.getOnLoadHyponicData(0,0);
//                    }
//
//
//            });
//			} else {
//
//                var field = null,
//                    firstError = null;
//                for (field in form) {
//                    if (field[0] != '$') {
//                        if (firstError === null && !form[field].$valid) {
//                            firstError = form[field].$name;
//                        }
//                        if (form[field].$pristine) {
//                            form[field].$dirty = true;
//                        }
//                    }
//                }
//            }
//
//			 
//		};
		
		$scope.getCountries=function(){
			
			
			 var httpRequest = $http({
                method: 'POST',
                url: "/SCA-360/getCoutries.do",
                data: {},
            }).success(function(data, status) {
               if(data.countries.length==0){
			 $index = 1;
                    $scope.countryDataForm = [{
                        'id': $index,
						'status': '0'
                    }];
					
			   }else{
				  
                $scope.countryDataForm = data.countries;
				 for (var i = 0; i <= data.countries.length; i++) {
                        //alert(data.countries.length);
                       $index = data.countries.length;

                    }
					
					
					 $scope.totalItems = $scope.countryDataForm.length;
  $scope.currentPage =1;
  	 $scope.itemsPerPage = 7;


 	  $scope.$watch("currentPage", function() {
  	   setPagingData($scope.currentPage);
 	  });
 


  function setPagingData(page) {
  
   	  var pagedData =  data.countries.slice((page - 1) * $scope.itemsPerPage, page * $scope.itemsPerPage);
 $scope.items=pagedData;
  	 }
			   }

            });
		}
		
	/*	$scope.getcountryvalidate=function(country,index){
				var country=country;
				$.getJSON("getcountrycheck.do",{country:country}, function(json) {
	               
					var countryvalidate=json;
					 if(countryvalidate==false){
						 for (var i = 0; i < JSON.stringify($scope.countryDataForm.length); i++) {

                    if (index == i) {
                       
                            $(".existValRC122" + index).show();
							$("#buttonhide").prop('disabled', true);
							
					}
					
					}
					 }else{
						 
						   $(".existValRC122" + index).hide();
						   	$("#buttonhide").prop('disabled', false);
					 }
	              
	                
	            });
				
			}*/
			
				$scope.getcountryvalidate=function(country,index){
			
			var country=country.toUpperCase();
			var count=0;
			
			 angular.forEach($scope.countryDataForm, function(value, index) {
						
                        var sum = (value.country).toUpperCase();
						
					 if(country==sum){
						   count++;
					   }
					
                    })
			 
			// alert("COUNT  "+count);
			 if(count>1){
				 swal("Country Already Exist");
				  $scope.countryDataForm[index].country="";
			 }else{
				// alert("enterd");
				  // $(".existValRC122" + index).hide();
			 }
			
			
		};
			
			
			$scope.getcountryCodevalidate=function(countrycode,index){
				//alert("enterd");
				var countrycode=countrycode.toUpperCase();
			var count=0;
			
			 angular.forEach($scope.countryDataForm, function(value, index) {
						
                        var sum = (value.countrycode).toUpperCase();
						
					 if(countrycode==sum){
						   count++;
					   }
					
                    })
			 
			// alert("COUNT  "+count);
			 if(count>1){
				 swal("CountryCode Already Exist");
				  $scope.countryDataForm[index].countrycode="";
			 }else{
				// alert("enterd");
				  // $(".existValRC122" + index).hide();
			 }
				
			}
			
				$scope.getOrdervalidate=function(order,index){
				var order=order;
			var count=0;
			
			 angular.forEach($scope.countryDataForm, function(value, index) {
						
                        var sum = (value.country_order);
						
					 if(order==sum){
						   count++;
					   }
					
                    })
			 
			// alert("COUNT  "+count);
			 if(count>1){
				 swal("Order Already Exist");
				  $scope.countryDataForm[index].country_order="";
			 }else{
				// alert("enterd");
				  // $(".existValRC122" + index).hide();
			 }
				
			}
		
										  
  });

//========================================//
    //=======Country logo===========//
//=======================================//
angular.module('app')
    .controller('countryLogoMaster', function($scope, $http,$timeout) {
		$scope.master = {};
		
		$scope.loadAllCountries = function()
		{
			$scope.countryNameArray = [];
 
 			$.getJSON("getAllCountries.do",function(json)
			{
				//alert(JSON.stringify(json['data'][0].billingCountries));
				
				 $scope.countryNameArray = json['data'];
				 $scope.$apply();
			});	
			
		}
		var countLogo = new FormData();
		 $scope.uploadCountryLogo = function(files) 
				{
					//alert(files);
					$('.hide-lgbtn').attr('disabled',false);
				   var fileInput = $("#photoinput");
                   var maxSize = fileInput.data('max-size');
				  
					       
							if(fileInput.get(0).files.length>=1)
							{
								var fileSize = fileInput.get(0).files[0].size; // in bytes
								//alert(fileSize);
								if(maxSize<fileSize)
								{
									//alert("if");
									//alert('file size is more then' + maxSize + ' bytes');
									swal("Oops sorry...", 'File size is more then' +  maxSize  + ' bytes', "error");
									$('.hide-lgbtn').attr('disabled',true);
									return false;
								}
								else
								{
									//alert("else");
									//alert('file size is correct- '+fileSize+' bytes');
									//swal( 'File size is correct- '+fileSize+' bytes'); 
									 $('.hide-lgbtn').attr('disabled',false);
									 $scope.dummyPhoto="1";
									//$('#dummyPhoto').trigger('blur');
									 //countLogo.delete("usersign");
									 countLogo.append("usersign", files[0]);	
									
								}
							}
							else
							{
								swal("Choose File", 'File size should less then' +  maxSize  + ' bytes', "error");
								//alert(fileInput.get(0).files.length  + "else");
								$('.hide-lgbtn').attr('disabled',false);
							}
					  
					$scope.$apply();
				};
		
		$scope.getCountryLogo = function(countryname)
		{
			$.post("getCountriesLogo.do",{countrycode:countryname}, function(json) {

               // $scope.customernames = json['data'];

              //alert(JSON.stringify(json['countrylogo']));
               //$scope.industryData = json['countrytax'];
			   
			   
			   var getImage = json['countrylogo'];
							 //alert(getImage);
							 if(getImage!=null)
							   {
								   var imgPrew = getImage.trim();
								   if(imgPrew==null || imgPrew=="" )
								   {
									  $('.image-preview').popover('hide');
									  $("#1photoinput").text("Upload Logo");
									  $("#3photoinput").val("");
									  $("#2photoinput").hide();
									  $scope.dummyPhoto="";
										$('#dummyPhoto').trigger('blur');
								   }
								   else
								   {
									   var img = $('<img src="'+getImage+'" width="200" height="150"/>', {id: 'dynamic',width:200,height:150 });
									  
									   var photoName = getImage.split("/");
										//alert(photoName);
										$(".photo").attr("data-content",$(img)[0].outerHTML).popover("show");
										$("#1photoinput").text("Change");
										$("#2photoinput").show();
										$("#3photoinput").val(photoName[1]);
										$scope.dummyPhoto="1";
										$('#dummyPhoto').trigger('blur');
								   }
							   }
							   else
							   {
								   
								  $('.image-preview').popover('hide');
								  $("#1photoinput").text("Upload Logo");
								  $("#3photoinput").val("");
								  $("#2photoinput").hide();
								  $scope.dummyPhoto="";
								  $('#dummyPhoto').trigger('blur');
							   }
							  $scope.$apply();
               $scope.$apply();
            });
		}
		
		$scope.saveCountrylogo = function(addedCountry,form)
			{
				//alert(JSON.stringify(addedCountry));
				 if($scope.countrylogomasterForm.$valid)
					{
						//alert("valid");
						countLogo.append("formdata",angular.toJson(addedCountry));
						$('#hide-lgbtn').attr('disabled',true);
					
						$.ajax({
									   url         : "/SCA-360/saveCountriesLogo.do",
									   data        : countLogo,
									   contentType : false,
									   processData : false,
									   type        : 'POST'
								   }).success(function(data, status){
									   //alert(data);
										if(data==true)
											{
												swal("", 'Country Logo Master Saved Successfully' , "success");
												$('#hide-lgbtn').attr('disabled',false); 
												$scope.addedCountry = angular.copy($scope.master);
												form.$setPristine(true);
												countLogo = new FormData();
												$('.photo').attr("data-content","").popover('hide');
												$('#3photoinput').val("");
												$('#2photoinput').hide();
		//										$('#photoinput').val("");
												$("#1photoinput").text("Upload Logo");
												$scope.dummyPhoto="";
												$scope.$apply();
												
												
												
											}
										else
											{
												swal("Oops sorry...", "Something went wrong!", "error");
												
												$('#hide-lgbtn').attr('disabled',false);
											}
										
									   
									   
								   });
					}
					else
					{
						var field = null, firstError = null;
							for (field in form) 
							{
								if (field[0] != '$') 
								{
									if (firstError === null && !form[field].$valid) 
									{
										firstError = form[field].$name;
									}
									if (form[field].$pristine) 
									{
										form[field].$dirty = true;
									}
								}	
							}
					}
		  
		   
	   
			};
			
			$scope.resetCountry = function(form)
			{
				$scope.addedCountry = angular.copy($scope.master);
				form.$setPristine(true);
				countLogo = new FormData();
				$('.photo').attr("data-content","").popover('hide');
				$('#3photoinput').val("");
				$('#2photoinput').hide();
				$("#1photoinput").text("Upload Logo");
				$scope.dummyPhoto="";
				$scope.$apply();
			}
	});

//=========================================================//
  //==========Industry Master==========//
//=========================================================//  
angular.module('app')
    .controller('IndustryController', function($scope, $http) {
		//alert(455);
		$scope.master = {};
		 /*$scope.industryDataForm=[];
        $index = 0;
        $scope.addindustryForm = function() {
			//alert("enterd");

            $index++;
            $scope.industryDataForm.push({
                'id': $index
            })

        };
		
		 $scope.removeFormRow = function(name) {
            // alert(name);
            var IndexTab1 = -1;
            var comArrTab1 = eval($scope.industryDataForm);
            for (var i = 0; i < comArrTab1.length; i++) {
                if (comArrTab1[i].id === name) {
                    IndexTab1 = i;
                    break;
                }
            }
            $scope.industryDataForm.splice(IndexTab1, 1);
            $indexTab1 = comArrTab1.length;
            for (var s = 0; s < $indexTab1; s++) {
                $scope.industryDataForm[s].id = Number(s) + Number(1);
            }
        };*/
		
					/* $scope.totalItems = $scope.countryDataForm.length;
  $scope.currentPage =1;
  	 $scope.itemsPerPage = 7;


 	  $scope.$watch("currentPage", function() {
  	   setPagingData($scope.currentPage);
 	  });
 


  function setPagingData(page) {
  
   	  var pagedData =  data.countries.slice((page - 1) * $scope.itemsPerPage, page * $scope.itemsPerPage);
 $scope.items=pagedData;
  	 }*/
		
		var indusObj = new FormData();
		var indusGrid = [];
		$scope.loadAllIndustryGroups = function()
		{
			$.post("getIndustryFromMaster.do", function(json) {

               // $scope.customernames = json['data'];

               //alert(JSON.stringify(json['countrytax']));
               $scope.industryData = json['countrytax'];
			   $scope.totalItems = $scope.industryData.length;
				$scope.currentPage =1;
					 $scope.itemsPerPage = 10;
				
				
					  $scope.$watch("currentPage", function() {
				
				  
					   setPagingData($scope.currentPage);
					  });
				
				  function setPagingData(page) {
				 
					  var pagedData =  json['countrytax'].slice((page - 1) * $scope.itemsPerPage, page * $scope.itemsPerPage);
				
					  $scope.items = pagedData;
				 
					 }
				
				
				 $scope.pageChanged = function () {
						  $log.log('Page changed to: ' + $scope.currentPage);
					   };
               $scope.$apply();
            });
			
			//$scope.industryData = [{id:'1',industryCode:'A01',industryName:"Food Industry"},{id:'2',industryCode:'A02',industryName:"Wood Industry"}];
			
		}
			$scope.industryMasterFormSubmit = function(form)
			{
				//alert(4155);
				 if($scope.industryForm.$valid)
				 {
					  indusGrid = [];
				   $scope.industryData.forEach(function(industryArr)
					{ 
										//alert(JSON.stringify(industryArr)); 
						indusGrid.push(angular.toJson(industryArr));	 
					});
					
					
				   //alert(JSON.stringify(qtnTypeGridData)); 
				  //qtnFormData.append("formData",angular.toJson(addQuotation));
				  indusObj.append("gridData",angular.toJson(indusGrid));
				  //qtnFormData.append("termConData",angular.toJson(termCondition));
				  //alert(JSON.stringify(qtnFormData));
							   $.ajax({
									   url         : "/SCA-360/saveIndustryToMaster.do",
									   data        : indusObj,
									   contentType : false,
									   processData : false,
									   type        : 'POST'
								   }).success(function(data, status){
									   
										if(data==true)
											{
											    //swal('Saved Successfully');
												swal("", 'Industry Saved Successfully' , "success");
												indusObj = new FormData();
												$scope.loadAllIndustryGroups();
												/*$indexFullUnit=1;
												$scope.qtnFullUnitData=[{'id':$indexFullUnit}];
												$indexTerm=1;
												$scope.termData=[{'id':$indexTerm}];
												$scope.addQuotation = angular.copy($scope.master);
												$scope.loadQuotationSeqNum();
												$scope.loadSysDate();
												$scope.addQuotation = ({'qtnType':'0','qtnProgress':'0','showCost':'0','modifiedstatus':'0','currency':'USD','tax':'VAT','country':'AUSTRALIA','taxPercent':'10','paymentTerm':'2','salesTerm':'CIF','estPercent':'10','assigned':'Sales'});*/
												form.$setPristine(true); 
												$scope.$apply();
											}
										else
											{
											   swal("Oops sorry...", "Something went wrong!", "error");
											}
										
									   
									   
								   }); 
				 }
				 else
				 {
					 var field = null, firstError = null;
								for (field in form) 
								{
									if (field[0] != '$') 
									{
										if (firstError === null && !form[field].$valid) 
										{
											firstError = form[field].$name;
										}
										if (form[field].$pristine) 
										{
											form[field].$dirty = true;
										}
									}	
								}
				 }
		  
		   
	   
			};
			
			$scope.resetIndustry = function(form)
			{
				
				indusObj = new FormData();
				$scope.loadAllIndustryGroups();
				form.$setPristine(true); 
				$scope.$apply();
			}
											   
											   
 });
//==========================================//
 //=====Application Master======//
//=========================================// 
angular.module('app')
.controller('ApplicationController', function($scope, $http) {
	$scope.master = {};
		/* $scope.ApplicationDataForm=[];
        $index = 0;
        $scope.addApplicationDataForm = function() {
			alert("enterd");

            $index++;
            $scope.ApplicationDataForm.push({
                id': $index
            })

        };
		
		 $scope.removeFormRow = function(name) {
             alert(name);
            var IndexTab1 = -1;
            var comArrTab1 = eval($scope.ApplicationDataForm);
            for (var i = 0; i < comArrTab1.length; i++) {
                if (comArrTab1[i].id === name) {
                    IndexTab1 = i;
                    break;
                }
            }
            $scope.ApplicationDataForm.splice(IndexTab1, 1);
            $indexTab1 = comArrTab1.length;
            for (var s = 0; s < $indexTab1; s++) {
                $scope.ApplicationDataForm[s].id = Number(s) + Number(1);
            }
        };*/
		var appObj = new FormData();
		var appGrid = [];
		$scope.loadAllApplicationGroups = function()
		{
			$.post("getApplicationFromMaster.do", function(json) {

               //alert(JSON.stringify(json['countrytax'].length));
               // $scope.customernames = json['data'];

                $scope.applicationData = json['countrytax'];
				$scope.totalItems =  $scope.applicationData.length;
				//alert($scope.totalItems);
				$scope.currentPage =1;
					 $scope.itemsPerPage = 10;
				
				
					  $scope.$watch("currentPage", function() {
				
				  
					   setPagingData($scope.currentPage);
					  });
				
				  function setPagingData(page) {
				 
					  var pagedData =  json['countrytax'].slice((page - 1) * $scope.itemsPerPage, page * $scope.itemsPerPage);
				
					  $scope.items = pagedData;
				 
					 }
				
				
				 $scope.pageChanged = function () {
						  $log.log('Page changed to: ' + $scope.currentPage);
					   };

                    $scope.$apply();
            });
			
			//$scope.applicationData = [{id:'1',applicationCode:'A01',applicationName:"Food Industry"},{id:'2',applicationCode:'A02',applicationName:"Wood Industry"}];
			
		}
			$scope.applicationMasterFormSubmit = function(form)
			{
				
				 if($scope.applicationForm.$valid)
				 {
					  appGrid = [];
				   $scope.applicationData.forEach(function(applicationArr)
					{ 
										//alert(JSON.stringify(applicationArr)); 
						appGrid.push(angular.toJson(applicationArr));	 
					});
					
					
				   //alert(JSON.stringify(qtnTypeGridData)); 
				  //qtnFormData.append("formData",angular.toJson(addQuotation));
				  appObj.append("gridData",angular.toJson(appGrid));
				  //qtnFormData.append("termConData",angular.toJson(termCondition));
				  //alert(JSON.stringify(qtnFormData));
							   $.ajax({
									   url         : "/SCA-360/saveApplicationToMaster.do",
									   data        : appObj,
									   contentType : false,
									   processData : false,
									   type        : 'POST'
								   }).success(function(data, status){
									   
										if(data==true)
											{
											    //swal('Saved Successfully');
												swal("", 'Application Saved Successfully' , "success");
												appObj = new FormData();
												$scope.loadAllApplicationGroups();
												/*$indexFullUnit=1;
												$scope.qtnFullUnitData=[{'id':$indexFullUnit}];
												$indexTerm=1;
												$scope.termData=[{'id':$indexTerm}];
												$scope.addQuotation = angular.copy($scope.master);
												$scope.loadQuotationSeqNum();
												$scope.loadSysDate();
												$scope.addQuotation = ({'qtnType':'0','qtnProgress':'0','showCost':'0','modifiedstatus':'0','currency':'USD','tax':'VAT','country':'AUSTRALIA','taxPercent':'10','paymentTerm':'2','salesTerm':'CIF','estPercent':'10','assigned':'Sales'});*/
												form.$setPristine(true); 
												$scope.$apply();
											}
										else
											{
											   swal("Oops sorry...", "Something went wrong!", "error");
											}
										
									   
									   
								   }); 
				 }
				 else
				 {
					 var field = null, firstError = null;
								for (field in form) 
								{
									if (field[0] != '$') 
									{
										if (firstError === null && !form[field].$valid) 
										{
											firstError = form[field].$name;
										}
										if (form[field].$pristine) 
										{
											form[field].$dirty = true;
										}
									}	
								}
				 }
		  
		   
	   
			};
			
			$scope.resetApplication = function(form)
			{
				appObj = new FormData();
				$scope.loadAllApplicationGroups();
				form.$setPristine(true); 
				$scope.$apply();
			}
     });
//=========================================================//
  //==========Payment Term Master==========//
//=========================================================//  
angular.module('app')
    .controller('PaymentTermController', function($scope, $http) {
		
		$scope.master = {};
		 /*$scope.industryDataForm=[];
        $index = 0;
        $scope.addindustryForm = function() {
			//alert("enterd");

            $index++;
            $scope.industryDataForm.push({
                'id': $index
            })

        };
		
		 $scope.removeFormRow = function(name) {
            // alert(name);
            var IndexTab1 = -1;
            var comArrTab1 = eval($scope.industryDataForm);
            for (var i = 0; i < comArrTab1.length; i++) {
                if (comArrTab1[i].id === name) {
                    IndexTab1 = i;
                    break;
                }
            }
            $scope.industryDataForm.splice(IndexTab1, 1);
            $indexTab1 = comArrTab1.length;
            for (var s = 0; s < $indexTab1; s++) {
                $scope.industryDataForm[s].id = Number(s) + Number(1);
            }
        };*/
		
					/* $scope.totalItems = $scope.countryDataForm.length;
  $scope.currentPage =1;
  	 $scope.itemsPerPage = 7;


 	  $scope.$watch("currentPage", function() {
  	   setPagingData($scope.currentPage);
 	  });
 


  function setPagingData(page) {
  
   	  var pagedData =  data.countries.slice((page - 1) * $scope.itemsPerPage, page * $scope.itemsPerPage);
 $scope.items=pagedData;
  	 }*/
		
		var paymentObj = new FormData();
		var paymentsGrid = [];
		$scope.loadAllPaymentTermGroups = function()
		{
			$.post("getPaymentTermMaster.do", function(json) {

               // $scope.customernames = json['data'];

            //alert(JSON.stringify(json));
               $scope.PaymentTermData = json['data'];
			   $scope.totalItems = $scope.PaymentTermData.length;
				$scope.currentPage =1;
					 $scope.itemsPerPage = 10;
				
				
					  $scope.$watch("currentPage", function() {
				
				  
					   setPagingData($scope.currentPage);
					  });
				
				  function setPagingData(page) {
				 
					  var pagedData =  json['data'].slice((page - 1) * $scope.itemsPerPage, page * $scope.itemsPerPage);
				
					  $scope.items = pagedData;
				 
					 }
				
				
				 $scope.pageChanged = function () {
						  $log.log('Page changed to: ' + $scope.currentPage);
					   };
               $scope.$apply();
            });
			
			//$scope.industryData = [{id:'1',industryCode:'A01',industryName:"Food Industry"},{id:'2',industryCode:'A02',industryName:"Wood Industry"}];
			
		}
			$scope.PaymentTermFormSubmit = function(form)
			{
				//alert(4155);
				 if($scope.PaymentTermForm.$valid)
				 {
					  paymentsGrid = [];
				   $scope.PaymentTermData.forEach(function(addPaymentTerm)
					{ 
										//alert(JSON.stringify(industryArr)); 
						paymentsGrid.push(angular.toJson(addPaymentTerm));	 
					});
					
					
				   //alert(JSON.stringify(qtnTypeGridData)); 
				  //qtnFormData.append("formData",angular.toJson(addQuotation));
				  paymentObj.append("griddata",angular.toJson(paymentsGrid));
				  //qtnFormData.append("termConData",angular.toJson(termCondition));
				 //alert(JSON.stringify(paymentObj));
							   $.ajax({
									   url         : "/SCA-360/savePaymentTermMaster.do",
									   data        : paymentObj,
									   contentType : false,
									   processData : false,
									   type        : 'POST'
								   }).success(function(data, status){
									   
										if(data==true)
											{
											    //swal('Saved Successfully');
												swal("", 'Payment Terms Saved Successfully' , "success");
												paymentObj = new FormData();
												$scope.loadAllPaymentTermGroups();
												/*$indexFullUnit=1;
												$scope.qtnFullUnitData=[{'id':$indexFullUnit}];
												$indexTerm=1;
												$scope.termData=[{'id':$indexTerm}];
												$scope.addQuotation = angular.copy($scope.master);
												$scope.loadQuotationSeqNum();
												$scope.loadSysDate();
												$scope.addQuotation = ({'qtnType':'0','qtnProgress':'0','showCost':'0','modifiedstatus':'0','currency':'USD','tax':'VAT','country':'AUSTRALIA','taxPercent':'10','paymentTerm':'2','salesTerm':'CIF','estPercent':'10','assigned':'Sales'});*/
												form.$setPristine(true); 
												$scope.$apply();
											}
										else
											{
											   swal("Oops sorry...", "Something went wrong!", "error");
											}
										
									   
									   
								   }); 
				 }
				 else
				 {
					 var field = null, firstError = null;
								for (field in form) 
								{
									if (field[0] != '$') 
									{
										if (firstError === null && !form[field].$valid) 
										{
											firstError = form[field].$name;
										}
										if (form[field].$pristine) 
										{
											form[field].$dirty = true;
										}
									}	
								}
				 }
		  
		   
	   
			};
			
			$scope.resetPaymentTerms = function(form)
			{
				
				paymentObj = new FormData();
				$scope.loadAllPaymentTermGroups();
				form.$setPristine(true); 
				$scope.$apply();
			}
											   
											   
 });

